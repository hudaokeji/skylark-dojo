{"version":3,"sources":["dojo.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../dojo.js","sourcesContent":["define('dojo/has',[\"require\", \"module\"], function(require, module){\r\n\r\n\t// module:\r\n\t//\t\tdojo/has\r\n\t// summary:\r\n\t//\t\tDefines the has.js API and several feature tests used by dojo.\r\n\t// description:\r\n\t//\t\tThis module defines the has API as described by the project has.js with the following additional features:\r\n\t//\r\n\t//\t\t- the has test cache is exposed at has.cache.\r\n\t//\t\t- the method has.add includes a forth parameter that controls whether or not existing tests are replaced\r\n\t//\t\t- the loader's has cache may be optionally copied into this module's has cahce.\r\n\t//\r\n\t//\t\tThis module adopted from https://github.com/phiggins42/has.js; thanks has.js team!\r\n\r\n\t// try to pull the has implementation from the loader; both the dojo loader and bdLoad provide one\r\n\t// if using a foreign loader, then the has cache may be initialized via the config object for this module\r\n\t// WARNING: if a foreign loader defines require.has to be something other than the has.js API, then this implementation fail\r\n\tvar has = require.has || function(){};\r\n\tif(!has(\"dojo-has-api\")){\r\n\t\tvar\r\n\t\t\tisBrowser =\r\n\t\t\t\t// the most fundamental decision: are we in the browser?\r\n\t\t\t\ttypeof window != \"undefined\" &&\r\n\t\t\t\ttypeof location != \"undefined\" &&\r\n\t\t\t\ttypeof document != \"undefined\" &&\r\n\t\t\t\twindow.location == location && window.document == document,\r\n\r\n\t\t\t// has API variables\r\n\t\t\tglobal = (function () { return this; })(),\r\n\t\t\tdoc = isBrowser && document,\r\n\t\t\telement = doc && doc.createElement(\"DiV\"),\r\n\t\t\tcache = (module.config && module.config()) || {};\r\n\r\n\t\thas = function(name){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturn the current value of the named feature.\r\n\t\t\t//\r\n\t\t\t// name: String|Integer\r\n\t\t\t//\t\tThe name (if a string) or identifier (if an integer) of the feature to test.\r\n\t\t\t//\r\n\t\t\t// description:\r\n\t\t\t//\t\tReturns the value of the feature named by name. The feature must have been\r\n\t\t\t//\t\tpreviously added to the cache by has.add.\r\n\r\n\t\t\treturn typeof cache[name] == \"function\" ? (cache[name] = cache[name](global, doc, element)) : cache[name]; // Boolean\r\n\t\t};\r\n\r\n\t\thas.cache = cache;\r\n\r\n\t\thas.add = function(name, test, now, force){\r\n\t\t\t// summary:\r\n\t\t\t//\t \tRegister a new feature test for some named feature.\r\n\t\t\t// name: String|Integer\r\n\t\t\t//\t \tThe name (if a string) or identifier (if an integer) of the feature to test.\r\n\t\t\t// test: Function\r\n\t\t\t//\t\t A test function to register. If a function, queued for testing until actually\r\n\t\t\t//\t\t needed. The test function should return a boolean indicating\r\n\t\t\t//\t \tthe presence of a feature or bug.\r\n\t\t\t// now: Boolean?\r\n\t\t\t//\t\t Optional. Omit if `test` is not a function. Provides a way to immediately\r\n\t\t\t//\t\t run the test and cache the result.\r\n\t\t\t// force: Boolean?\r\n\t\t\t//\t \tOptional. If the test already exists and force is truthy, then the existing\r\n\t\t\t//\t \ttest will be replaced; otherwise, add does not replace an existing test (that\r\n\t\t\t//\t \tis, by default, the first test advice wins).\r\n\t\t\t// example:\r\n\t\t\t//\t\tA redundant test, testFn with immediate execution:\r\n\t\t\t//\t|\thas.add(\"javascript\", function(){ return true; }, true);\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAgain with the redundantness. You can do this in your tests, but we should\r\n\t\t\t//\t\tnot be doing this in any internal has.js tests\r\n\t\t\t//\t|\thas.add(\"javascript\", true);\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tThree things are passed to the testFunction. `global`, `document`, and a generic element\r\n\t\t\t//\t\tfrom which to work your test should the need arise.\r\n\t\t\t//\t|\thas.add(\"bug-byid\", function(g, d, el){\r\n\t\t\t//\t|\t\t// g\t== global, typically window, yadda yadda\r\n\t\t\t//\t|\t\t// d\t== document object\r\n\t\t\t//\t|\t\t// el == the generic element. a `has` element.\r\n\t\t\t//\t|\t\treturn false; // fake test, byid-when-form-has-name-matching-an-id is slightly longer\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\t(typeof cache[name]==\"undefined\" || force) && (cache[name]= test);\r\n\t\t\treturn now && has(name);\r\n\t\t};\r\n\r\n\t\t// since we're operating under a loader that doesn't provide a has API, we must explicitly initialize\r\n\t\t// has as it would have otherwise been initialized by the dojo loader; use has.add to the builder\r\n\t\t// can optimize these away iff desired\r\n\t\thas.add(\"host-browser\", isBrowser);\r\n\t\thas.add(\"host-node\", (typeof process == \"object\" && process.versions && process.versions.node && process.versions.v8));\r\n\t\thas.add(\"host-rhino\", (typeof load == \"function\" && (typeof Packages == \"function\" || typeof Packages == \"object\")));\r\n\t\thas.add(\"dom\", isBrowser);\r\n\t\thas.add(\"dojo-dom-ready-api\", 1);\r\n\t\thas.add(\"dojo-sniff\", 1);\r\n\t}\r\n\r\n\tif(has(\"host-browser\")){\r\n\t\t// Common application level tests\r\n\t\thas.add(\"dom-addeventlistener\", !!document.addEventListener);\r\n\r\n\t\t// Do the device and browser have touch capability?\r\n\t\thas.add(\"touch\", \"ontouchstart\" in document\r\n\t\t\t|| (\"onpointerdown\" in document && navigator.maxTouchPoints > 0)\r\n\t\t\t|| window.navigator.msMaxTouchPoints);\r\n\r\n\t\t// Touch events support\r\n\t\thas.add(\"touch-events\", \"ontouchstart\" in document);\r\n\r\n\t\t// Pointer Events support\r\n\t\thas.add(\"pointer-events\", \"onpointerdown\" in document);\r\n\t\thas.add(\"MSPointer\", \"msMaxTouchPoints\" in navigator); //IE10 (+IE11 preview)\r\n\r\n\t\t// I don't know if any of these tests are really correct, just a rough guess\r\n\t\thas.add(\"device-width\", screen.availWidth || innerWidth);\r\n\r\n\t\t// Tests for DOMNode.attributes[] behavior:\r\n\t\t//\t - dom-attributes-explicit - attributes[] only lists explicitly user specified attributes\r\n\t\t//\t - dom-attributes-specified-flag (IE8) - need to check attr.specified flag to skip attributes user didn't specify\r\n\t\t//\t - Otherwise, in IE6-7. attributes[] will list hundreds of values, so need to do outerHTML to get attrs instead.\r\n\t\tvar form = document.createElement(\"form\");\r\n\t\thas.add(\"dom-attributes-explicit\", form.attributes.length == 0); // W3C\r\n\t\thas.add(\"dom-attributes-specified-flag\", form.attributes.length > 0 && form.attributes.length < 40);\t// IE8\r\n\t}\r\n\r\n\thas.clearElement = function(element){\r\n\t\t// summary:\r\n\t\t//\t Deletes the contents of the element passed to test functions.\r\n\t\telement.innerHTML= \"\";\r\n\t\treturn element;\r\n\t};\r\n\r\n\thas.normalize = function(id, toAbsMid){\r\n\t\t// summary:\r\n\t\t//\t Resolves id into a module id based on possibly-nested tenary expression that branches on has feature test value(s).\r\n\t\t//\r\n\t\t// toAbsMid: Function\r\n\t\t//\t Resolves a relative module id into an absolute module id\r\n\t\tvar\r\n\t\t\ttokens = id.match(/[\\?:]|[^:\\?]*/g), i = 0,\r\n\t\t\tget = function(skip){\r\n\t\t\t\tvar term = tokens[i++];\r\n\t\t\t\tif(term == \":\"){\r\n\t\t\t\t\t// empty string module name, resolves to 0\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// postfixed with a ? means it is a feature to branch on, the term is the name of the feature\r\n\t\t\t\t\tif(tokens[i++] == \"?\"){\r\n\t\t\t\t\t\tif(!skip && has(term)){\r\n\t\t\t\t\t\t\t// matched the feature, get the first value from the options\r\n\t\t\t\t\t\t\treturn get();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t// did not match, get the second value, passing over the first\r\n\t\t\t\t\t\t\tget(true);\r\n\t\t\t\t\t\t\treturn get(skip);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// a module\r\n\t\t\t\t\treturn term || 0;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\tid = get();\r\n\t\treturn id && toAbsMid(id);\r\n\t};\r\n\r\n\tif (require.isBrowser===false) { // for build,will be changed with better implementation. by LWF\r\n\t\thas.load = function (name, req, onLoad, config) {\r\n\t        onLoad();\r\n\t    };\t\t\r\n\t} else {\r\n\t\thas.load = function(id, parentRequire, loaded){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tConditional loading of AMD modules based on a has feature test value.\r\n\t\t\t// id: String\r\n\t\t\t//\t\tGives the resolved module id to load.\r\n\t\t\t// parentRequire: Function\r\n\t\t\t//\t\tThe loader require function with respect to the module that contained the plugin resource in it's\r\n\t\t\t//\t\tdependency list.\r\n\t\t\t// loaded: Function\r\n\t\t\t//\t Callback to loader that consumes result of plugin demand.\r\n\r\n\t\t\tif(id){\r\n\t\t\t\tparentRequire([id], loaded);\r\n\t\t\t}else{\r\n\t\t\t\tloaded();\r\n\t\t\t}\r\n\t\t};\t\t\r\n\t}\r\n\r\n\r\n\treturn has;\r\n});\r\n\ndefine('dojo/_base/config',[\"../has\", \"require\"], function(has, require){\r\n\t// module:\r\n\t//\t\tdojo/_base/config\r\n\r\n/*=====\r\nreturn {\r\n\t// summary:\r\n\t//\t\tThis module defines the user configuration during bootstrap.\r\n\t// description:\r\n\t//\t\tBy defining user configuration as a module value, an entire configuration can be specified in a build,\r\n\t//\t\tthereby eliminating the need for sniffing and or explicitly setting in the global variable dojoConfig.\r\n\t//\t\tAlso, when multiple instances of dojo exist in a single application, each will necessarily be located\r\n\t//\t\tat an unique absolute module identifier as given by the package configuration. Implementing configuration\r\n\t//\t\tas a module allows for specifying unique, per-instance configurations.\r\n\t// example:\r\n\t//\t\tCreate a second instance of dojo with a different, instance-unique configuration (assume the loader and\r\n\t//\t\tdojo.js are already loaded).\r\n\t//\t\t|\t// specify a configuration that creates a new instance of dojo at the absolute module identifier \"myDojo\"\r\n\t//\t\t|\trequire({\r\n\t//\t\t|\t\tpackages:[{\r\n\t//\t\t|\t\t\tname:\"myDojo\",\r\n\t//\t\t|\t\t\tlocation:\".\", //assume baseUrl points to dojo.js\r\n\t//\t\t|\t\t}]\r\n\t//\t\t|\t});\r\n\t//\t\t|\r\n\t//\t\t|\t// specify a configuration for the myDojo instance\r\n\t//\t\t|\tdefine(\"myDojo/config\", {\r\n\t//\t\t|\t\t// normal configuration variables go here, e.g.,\r\n\t//\t\t|\t\tlocale:\"fr-ca\"\r\n\t//\t\t|\t});\r\n\t//\t\t|\r\n\t//\t\t|\t// load and use the new instance of dojo\r\n\t//\t\t|\trequire([\"myDojo\"], function(dojo){\r\n\t//\t\t|\t\t// dojo is the new instance of dojo\r\n\t//\t\t|\t\t// use as required\r\n\t//\t\t|\t});\r\n\r\n\t// isDebug: Boolean\r\n\t//\t\tDefaults to `false`. If set to `true`, ensures that Dojo provides\r\n\t//\t\textended debugging feedback via Firebug. If Firebug is not available\r\n\t//\t\ton your platform, setting `isDebug` to `true` will force Dojo to\r\n\t//\t\tpull in (and display) the version of Firebug Lite which is\r\n\t//\t\tintegrated into the Dojo distribution, thereby always providing a\r\n\t//\t\tdebugging/logging console when `isDebug` is enabled. Note that\r\n\t//\t\tFirebug's `console.*` methods are ALWAYS defined by Dojo. If\r\n\t//\t\t`isDebug` is false and you are on a platform without Firebug, these\r\n\t//\t\tmethods will be defined as no-ops.\r\n\tisDebug: false,\r\n\r\n\t// locale: String\r\n\t//\t\tThe locale to assume for loading localized resources in this page,\r\n\t//\t\tspecified according to [RFC 3066](http://www.ietf.org/rfc/rfc3066.txt).\r\n\t//\t\tMust be specified entirely in lowercase, e.g. `en-us` and `zh-cn`.\r\n\t//\t\tSee the documentation for `dojo.i18n` and `dojo.requireLocalization`\r\n\t//\t\tfor details on loading localized resources. If no locale is specified,\r\n\t//\t\tDojo assumes the locale of the user agent, according to `navigator.userLanguage`\r\n\t//\t\tor `navigator.language` properties.\r\n\tlocale: undefined,\r\n\r\n\t// extraLocale: Array\r\n\t//\t\tNo default value. Specifies additional locales whose\r\n\t//\t\tresources should also be loaded alongside the default locale when\r\n\t//\t\tcalls to `dojo.requireLocalization()` are processed.\r\n\textraLocale: undefined,\r\n\r\n\t// baseUrl: String\r\n\t//\t\tThe directory in which `dojo.js` is located. Under normal\r\n\t//\t\tconditions, Dojo auto-detects the correct location from which it\r\n\t//\t\twas loaded. You may need to manually configure `baseUrl` in cases\r\n\t//\t\twhere you have renamed `dojo.js` or in which `<base>` tags confuse\r\n\t//\t\tsome browsers (e.g. IE 6). The variable `dojo.baseUrl` is assigned\r\n\t//\t\teither the value of `djConfig.baseUrl` if one is provided or the\r\n\t//\t\tauto-detected root if not. Other modules are located relative to\r\n\t//\t\tthis path. The path should end in a slash.\r\n\tbaseUrl: undefined,\r\n\r\n\t// modulePaths: [deprecated] Object\r\n\t//\t\tA map of module names to paths relative to `dojo.baseUrl`. The\r\n\t//\t\tkey/value pairs correspond directly to the arguments which\r\n\t//\t\t`dojo.registerModulePath` accepts. Specifying\r\n\t//\t\t`djConfig.modulePaths = { \"foo\": \"../../bar\" }` is the equivalent\r\n\t//\t\tof calling `dojo.registerModulePath(\"foo\", \"../../bar\");`. Multiple\r\n\t//\t\tmodules may be configured via `djConfig.modulePaths`.\r\n\tmodulePaths: {},\r\n\r\n\t// addOnLoad: Function|Array\r\n\t//\t\tAdds a callback via dojo/ready. Useful when Dojo is added after\r\n\t//\t\tthe page loads and djConfig.afterOnLoad is true. Supports the same\r\n\t//\t\targuments as dojo/ready. When using a function reference, use\r\n\t//\t\t`djConfig.addOnLoad = function(){};`. For object with function name use\r\n\t//\t\t`djConfig.addOnLoad = [myObject, \"functionName\"];` and for object with\r\n\t//\t\tfunction reference use\r\n\t//\t\t`djConfig.addOnLoad = [myObject, function(){}];`\r\n\taddOnLoad: null,\r\n\r\n\t// parseOnLoad: Boolean\r\n\t//\t\tRun the parser after the page is loaded\r\n\tparseOnLoad: false,\r\n\r\n\t// require: String[]\r\n\t//\t\tAn array of module names to be loaded immediately after dojo.js has been included\r\n\t//\t\tin a page.\r\n\trequire: [],\r\n\r\n\t// defaultDuration: Number\r\n\t//\t\tDefault duration, in milliseconds, for wipe and fade animations within dijits.\r\n\t//\t\tAssigned to dijit.defaultDuration.\r\n\tdefaultDuration: 200,\r\n\r\n\t// dojoBlankHtmlUrl: String\r\n\t//\t\tUsed by some modules to configure an empty iframe. Used by dojo/io/iframe and\r\n\t//\t\tdojo/back, and dijit/popup support in IE where an iframe is needed to make sure native\r\n\t//\t\tcontrols do not bleed through the popups. Normally this configuration variable\r\n\t//\t\tdoes not need to be set, except when using cross-domain/CDN Dojo builds.\r\n\t//\t\tSave dojo/resources/blank.html to your domain and set `djConfig.dojoBlankHtmlUrl`\r\n\t//\t\tto the path on your domain your copy of blank.html.\r\n\tdojoBlankHtmlUrl: undefined,\r\n\r\n\t// ioPublish: Boolean?\r\n\t//\t\tSet this to true to enable publishing of topics for the different phases of\r\n\t//\t\tIO operations. Publishing is done via dojo/topic.publish(). See dojo/main.__IoPublish for a list\r\n\t//\t\tof topics that are published.\r\n\tioPublish: false,\r\n\r\n\t// useCustomLogger: Anything?\r\n\t//\t\tIf set to a value that evaluates to true such as a string or array and\r\n\t//\t\tisDebug is true and Firebug is not available or running, then it bypasses\r\n\t//\t\tthe creation of Firebug Lite allowing you to define your own console object.\r\n\tuseCustomLogger: undefined,\r\n\r\n\t// transparentColor: Array\r\n\t//\t\tArray containing the r, g, b components used as transparent color in dojo.Color;\r\n\t//\t\tif undefined, [255,255,255] (white) will be used.\r\n\ttransparentColor: undefined,\r\n\t\r\n\t// deps: Function|Array\r\n\t//\t\tDefines dependencies to be used before the loader has been loaded.\r\n\t//\t\tWhen provided, they cause the loader to execute require(deps, callback) \r\n\t//\t\tonce it has finished loading. Should be used with callback.\r\n\tdeps: undefined,\r\n\t\r\n\t// callback: Function|Array\r\n\t//\t\tDefines a callback to be used when dependencies are defined before \r\n\t//\t\tthe loader has been loaded. When provided, they cause the loader to \r\n\t//\t\texecute require(deps, callback) once it has finished loading. \r\n\t//\t\tShould be used with deps.\r\n\tcallback: undefined,\r\n\t\r\n\t// deferredInstrumentation: Boolean\r\n\t//\t\tWhether deferred instrumentation should be loaded or included\r\n\t//\t\tin builds.\r\n\tdeferredInstrumentation: true,\r\n\r\n\t// useDeferredInstrumentation: Boolean|String\r\n\t//\t\tWhether the deferred instrumentation should be used.\r\n\t//\r\n\t//\t\t* `\"report-rejections\"`: report each rejection as it occurs.\r\n\t//\t\t* `true` or `1` or `\"report-unhandled-rejections\"`: wait 1 second\r\n\t//\t\t\tin an attempt to detect unhandled rejections.\r\n\tuseDeferredInstrumentation: \"report-unhandled-rejections\"\r\n};\r\n=====*/\r\n\r\n\tvar result = {};\r\n\tif(has(\"dojo-config-api\")){\r\n\t\t// must be the dojo loader; take a shallow copy of require.rawConfig\r\n\t\tvar src = require.rawConfig, p;\r\n\t\tfor(p in src){\r\n\t\t\tresult[p] = src[p];\r\n\t\t}\r\n\t}else{\r\n\t\tvar adviseHas = function(featureSet, prefix, booting){\r\n\t\t\tfor(p in featureSet){\r\n\t\t\t\tp!=\"has\" && has.add(prefix + p, featureSet[p], 0, booting);\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar global = (function () { return this; })();\r\n\t\tresult = has(\"dojo-loader\") ?\r\n\t\t\t// must be a built version of the dojo loader; all config stuffed in require.rawConfig\r\n\t\t\trequire.rawConfig :\r\n\t\t\t// a foreign loader\r\n\t\t\tglobal.dojoConfig || global.djConfig || {};\r\n\t\tadviseHas(result, \"config\", 1);\r\n\t\tadviseHas(result.has, \"\", 1);\r\n\t}\r\n\r\n\tif(!result.locale && typeof navigator != \"undefined\"){\r\n\t\t// Default locale for browsers.\r\n\t\tvar language = (navigator.language || navigator.userLanguage);\r\n\t\tif(language){\r\n\t\t\tresult.locale = language.toLowerCase();\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n});\r\n\r\n\ndefine('dojo/_base/kernel',[\"../has\", \"./config\", \"require\", \"module\"], function(has, config, require, module){\r\n\t// module:\r\n\t//\t\tdojo/_base/kernel\r\n\r\n\t// This module is the foundational module of the dojo boot sequence; it defines the dojo object.\r\n\r\n\tvar\r\n\t\t// loop variables for this module\r\n\t\ti, p,\r\n\r\n\t\t// create dojo, dijit, and dojox\r\n\t\t// FIXME: in 2.0 remove dijit, dojox being created by dojo\r\n\t\tglobal = (function () { return this; })(),\r\n\t\tdijit = {},\r\n\t\tdojox = {},\r\n\t\tdojo = {\r\n\t\t\t// summary:\r\n\t\t\t//\t\tThis module is the foundational module of the dojo boot sequence; it defines the dojo object.\r\n\r\n\t\t\t// notice dojo takes ownership of the value of the config module\r\n\t\t\tconfig:config,\r\n\t\t\tglobal:global,\r\n\t\t\tdijit:dijit,\r\n\t\t\tdojox:dojox\r\n\t\t};\r\n\r\n\r\n\t// Configure the scope map. For a 100% AMD application, the scope map is not needed other than to provide\r\n\t// a _scopeName property for the dojo, dijit, and dojox root object so those packages can create\r\n\t// unique names in the global space.\r\n\t//\r\n\t// Built, legacy modules use the scope map to allow those modules to be expressed as if dojo, dijit, and dojox,\r\n\t// where global when in fact they are either global under different names or not global at all. In v1.6-, the\r\n\t// config variable \"scopeMap\" was used to map names as used within a module to global names. This has been\r\n\t// subsumed by the AMD map configuration variable which can relocate packages to different names. For backcompat,\r\n\t// only the \"*\" mapping is supported. See http://livedocs.dojotoolkit.org/developer/design/loader#legacy-cross-domain-mode for details.\r\n\t//\r\n\t// The following computations contort the packageMap for this dojo instance into a scopeMap.\r\n\tvar scopeMap =\r\n\t\t\t// a map from a name used in a legacy module to the (global variable name, object addressed by that name)\r\n\t\t\t// always map dojo, dijit, and dojox\r\n\t\t\t{\r\n\t\t\t\tdojo:[\"dojo\", dojo],\r\n\t\t\t\tdijit:[\"dijit\", dijit],\r\n\t\t\t\tdojox:[\"dojox\", dojox]\r\n\t\t\t},\r\n\r\n\t\tpackageMap =\r\n\t\t\t// the package map for this dojo instance; note, a foreign loader or no pacakgeMap results in the above default config\r\n\t\t\t(require.map && require.map[module.id.match(/[^\\/]+/)[0]]),\r\n\r\n\t\titem;\r\n\r\n\r\n\t// process all mapped top-level names for this instance of dojo\r\n\tfor(p in packageMap){\r\n\t\tif(scopeMap[p]){\r\n\t\t\t// mapped dojo, dijit, or dojox\r\n\t\t\tscopeMap[p][0] = packageMap[p];\r\n\t\t}else{\r\n\t\t\t// some other top-level name\r\n\t\t\tscopeMap[p] = [packageMap[p], {}];\r\n\t\t}\r\n\t}\r\n\r\n\t// publish those names to _scopeName and, optionally, the global namespace\r\n\tfor(p in scopeMap){\r\n\t\titem = scopeMap[p];\r\n\t\titem[1]._scopeName = item[0];\r\n\t\tif(!config.noGlobals){\r\n\t\t\tglobal[item[0]] = item[1];\r\n\t\t}\r\n\t}\r\n\tdojo.scopeMap = scopeMap;\r\n\r\n\t/*===== dojo.__docParserConfigureScopeMap(scopeMap); =====*/\r\n\r\n\t// FIXME: dojo.baseUrl and dojo.config.baseUrl should be deprecated\r\n\tdojo.baseUrl = dojo.config.baseUrl = require.baseUrl;\r\n\tdojo.isAsync = !has(\"dojo-loader\") || require.async;\r\n\tdojo.locale = config.locale;\r\n\r\n\tvar rev = \"$Rev: f4fef70 $\".match(/[0-9a-f]{7,}/);\r\n\tdojo.version = {\r\n\t\t// summary:\r\n\t\t//\t\tVersion number of the Dojo Toolkit\r\n\t\t// description:\r\n\t\t//\t\tHash about the version, including\r\n\t\t//\r\n\t\t//\t\t- major: Integer: Major version. If total version is \"1.2.0beta1\", will be 1\r\n\t\t//\t\t- minor: Integer: Minor version. If total version is \"1.2.0beta1\", will be 2\r\n\t\t//\t\t- patch: Integer: Patch version. If total version is \"1.2.0beta1\", will be 0\r\n\t\t//\t\t- flag: String: Descriptor flag. If total version is \"1.2.0beta1\", will be \"beta1\"\r\n\t\t//\t\t- revision: Number: The Git rev from which dojo was pulled\r\n\r\n\t\tmajor: 1, minor: 10, patch: 4, flag: \"\",\r\n\t\trevision: rev ? rev[0] : NaN,\r\n\t\ttoString: function(){\r\n\t\t\tvar v = dojo.version;\r\n\t\t\treturn v.major + \".\" + v.minor + \".\" + v.patch + v.flag + \" (\" + v.revision + \")\";\t// String\r\n\t\t}\r\n\t};\r\n\r\n\t// If has(\"extend-dojo\") is truthy, then as a dojo module is defined it should push it's definitions\r\n\t// into the dojo object, and conversely. In 2.0, it will likely be unusual to augment another object\r\n\t// as a result of defining a module. This has feature gives a way to force 2.0 behavior as the code\r\n\t// is migrated. Absent specific advice otherwise, set extend-dojo to truthy.\r\n\thas.add(\"extend-dojo\", 1);\r\n\r\n\r\n\t(Function(\"d\", \"d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}\"))(dojo);\r\n\t/*=====\r\n\tdojo.eval = function(scriptText){\r\n\t\t// summary:\r\n\t\t//\t\tA legacy method created for use exclusively by internal Dojo methods. Do not use this method\r\n\t\t//\t\tdirectly unless you understand its possibly-different implications on the platforms your are targeting.\r\n\t\t// description:\r\n\t\t//\t\tMakes an attempt to evaluate scriptText in the global scope. The function works correctly for browsers\r\n\t\t//\t\tthat support indirect eval.\r\n\t\t//\r\n\t\t//\t\tAs usual, IE does not. On IE, the only way to implement global eval is to\r\n\t\t//\t\tuse execScript. Unfortunately, execScript does not return a value and breaks some current usages of dojo.eval.\r\n\t\t//\t\tThis implementation uses the technique of executing eval in the scope of a function that is a single scope\r\n\t\t//\t\tframe below the global scope; thereby coming close to the global scope. Note carefully that\r\n\t\t//\r\n\t\t//\t\tdojo.eval(\"var pi = 3.14;\");\r\n\t\t//\r\n\t\t//\t\twill define global pi in non-IE environments, but define pi only in a temporary local scope for IE. If you want\r\n\t\t//\t\tto define a global variable using dojo.eval, write something like\r\n\t\t//\r\n\t\t//\t\tdojo.eval(\"window.pi = 3.14;\")\r\n\t\t// scriptText:\r\n\t\t//\t\tThe text to evaluation.\r\n\t\t// returns:\r\n\t\t//\t\tThe result of the evaluation. Often `undefined`\r\n\t};\r\n\t=====*/\r\n\r\n\r\n\tif(has(\"host-rhino\")){\r\n\t\tdojo.exit = function(exitcode){\r\n\t\t\tquit(exitcode);\r\n\t\t};\r\n\t}else{\r\n\t\tdojo.exit = function(){\r\n\t\t};\r\n\t}\r\n\r\n\thas.add(\"dojo-guarantee-console\",\r\n\t\t// ensure that console.log, console.warn, etc. are defined\r\n\t\t1\r\n\t);\r\n\tif(has(\"dojo-guarantee-console\")){\r\n\t\ttypeof console != \"undefined\" || (console = {});\r\n\t\t//\tBe careful to leave 'log' always at the end\r\n\t\tvar cn = [\r\n\t\t\t\"assert\", \"count\", \"debug\", \"dir\", \"dirxml\", \"error\", \"group\",\r\n\t\t\t\"groupEnd\", \"info\", \"profile\", \"profileEnd\", \"time\", \"timeEnd\",\r\n\t\t\t\"trace\", \"warn\", \"log\"\r\n\t\t];\r\n\t\tvar tn;\r\n\t\ti = 0;\r\n\t\twhile((tn = cn[i++])){\r\n\t\t\tif(!console[tn]){\r\n\t\t\t\t(function(){\r\n\t\t\t\t\tvar tcn = tn + \"\";\r\n\t\t\t\t\tconsole[tcn] = ('log' in console) ? function(){\r\n\t\t\t\t\t\tvar a = Array.prototype.slice.call(arguments);\r\n\t\t\t\t\t\ta.unshift(tcn + \":\");\r\n\t\t\t\t\t\tconsole[\"log\"](a.join(\" \"));\r\n\t\t\t\t\t} : function(){};\r\n\t\t\t\t\tconsole[tcn]._fake = true;\r\n\t\t\t\t})();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thas.add(\"dojo-debug-messages\",\r\n\t\t// include dojo.deprecated/dojo.experimental implementations\r\n\t\t!!config.isDebug\r\n\t);\r\n\tdojo.deprecated = dojo.experimental =  function(){};\r\n\tif(has(\"dojo-debug-messages\")){\r\n\t\tdojo.deprecated = function(/*String*/ behaviour, /*String?*/ extra, /*String?*/ removal){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tLog a debug message to indicate that a behavior has been\r\n\t\t\t//\t\tdeprecated.\r\n\t\t\t// behaviour: String\r\n\t\t\t//\t\tThe API or behavior being deprecated. Usually in the form\r\n\t\t\t//\t\tof \"myApp.someFunction()\".\r\n\t\t\t// extra: String?\r\n\t\t\t//\t\tText to append to the message. Often provides advice on a\r\n\t\t\t//\t\tnew function or facility to achieve the same goal during\r\n\t\t\t//\t\tthe deprecation period.\r\n\t\t\t// removal: String?\r\n\t\t\t//\t\tText to indicate when in the future the behavior will be\r\n\t\t\t//\t\tremoved. Usually a version number.\r\n\t\t\t// example:\r\n\t\t\t//\t| dojo.deprecated(\"myApp.getTemp()\", \"use myApp.getLocaleTemp() instead\", \"1.0\");\r\n\r\n\t\t\tvar message = \"DEPRECATED: \" + behaviour;\r\n\t\t\tif(extra){ message += \" \" + extra; }\r\n\t\t\tif(removal){ message += \" -- will be removed in version: \" + removal; }\r\n\t\t\tconsole.warn(message);\r\n\t\t};\r\n\r\n\t\tdojo.experimental = function(/* String */ moduleName, /* String? */ extra){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tMarks code as experimental.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis can be used to mark a function, file, or module as\r\n\t\t\t//\t\texperimental.\t Experimental code is not ready to be used, and the\r\n\t\t\t//\t\tAPIs are subject to change without notice.\tExperimental code may be\r\n\t\t\t//\t\tcompleted deleted without going through the normal deprecation\r\n\t\t\t//\t\tprocess.\r\n\t\t\t// moduleName: String\r\n\t\t\t//\t\tThe name of a module, or the name of a module file or a specific\r\n\t\t\t//\t\tfunction\r\n\t\t\t// extra: String?\r\n\t\t\t//\t\tsome additional message for the user\r\n\t\t\t// example:\r\n\t\t\t//\t| dojo.experimental(\"dojo.data.Result\");\r\n\t\t\t// example:\r\n\t\t\t//\t| dojo.experimental(\"dojo.weather.toKelvin()\", \"PENDING approval from NOAA\");\r\n\r\n\t\t\tvar message = \"EXPERIMENTAL: \" + moduleName + \" -- APIs subject to change without notice.\";\r\n\t\t\tif(extra){ message += \" \" + extra; }\r\n\t\t\tconsole.warn(message);\r\n\t\t};\r\n\t}\r\n\r\n\thas.add(\"dojo-modulePaths\",\r\n\t\t// consume dojo.modulePaths processing\r\n\t\t1\r\n\t);\r\n\tif(has(\"dojo-modulePaths\")){\r\n\t\t// notice that modulePaths won't be applied to any require's before the dojo/_base/kernel factory is run;\r\n\t\t// this is the v1.6- behavior.\r\n\t\tif(config.modulePaths){\r\n\t\t\tdojo.deprecated(\"dojo.modulePaths\", \"use paths configuration\");\r\n\t\t\tvar paths = {};\r\n\t\t\tfor(p in config.modulePaths){\r\n\t\t\t\tpaths[p.replace(/\\./g, \"/\")] = config.modulePaths[p];\r\n\t\t\t}\r\n\t\t\trequire({paths:paths});\r\n\t\t}\r\n\t}\r\n\r\n\thas.add(\"dojo-moduleUrl\",\r\n\t\t// include dojo.moduleUrl\r\n\t\t1\r\n\t);\r\n\tif(has(\"dojo-moduleUrl\")){\r\n\t\tdojo.moduleUrl = function(/*String*/module, /*String?*/url){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a URL relative to a module.\r\n\t\t\t// example:\r\n\t\t\t//\t|\tvar pngPath = dojo.moduleUrl(\"acme\",\"images/small.png\");\r\n\t\t\t//\t|\tconsole.dir(pngPath); // list the object properties\r\n\t\t\t//\t|\t// create an image and set it's source to pngPath's value:\r\n\t\t\t//\t|\tvar img = document.createElement(\"img\");\r\n\t\t\t//\t|\timg.src = pngPath;\r\n\t\t\t//\t|\t// add our image to the document\r\n\t\t\t//\t|\tdojo.body().appendChild(img);\r\n\t\t\t// example:\r\n\t\t\t//\t\tyou may de-reference as far as you like down the package\r\n\t\t\t//\t\thierarchy.  This is sometimes handy to avoid lengthy relative\r\n\t\t\t//\t\turls or for building portable sub-packages. In this example,\r\n\t\t\t//\t\tthe `acme.widget` and `acme.util` directories may be located\r\n\t\t\t//\t\tunder different roots (see `dojo.registerModulePath`) but the\r\n\t\t\t//\t\tthe modules which reference them can be unaware of their\r\n\t\t\t//\t\trelative locations on the filesystem:\r\n\t\t\t//\t|\t// somewhere in a configuration block\r\n\t\t\t//\t|\tdojo.registerModulePath(\"acme.widget\", \"../../acme/widget\");\r\n\t\t\t//\t|\tdojo.registerModulePath(\"acme.util\", \"../../util\");\r\n\t\t\t//\t|\r\n\t\t\t//\t|\t// ...\r\n\t\t\t//\t|\r\n\t\t\t//\t|\t// code in a module using acme resources\r\n\t\t\t//\t|\tvar tmpltPath = dojo.moduleUrl(\"acme.widget\",\"templates/template.html\");\r\n\t\t\t//\t|\tvar dataPath = dojo.moduleUrl(\"acme.util\",\"resources/data.json\");\r\n\r\n\t\t\tdojo.deprecated(\"dojo.moduleUrl()\", \"use require.toUrl\", \"2.0\");\r\n\r\n\t\t\t// require.toUrl requires a filetype; therefore, just append the suffix \"/*.*\" to guarantee a filetype, then\r\n\t\t\t// remove the suffix from the result. This way clients can request a url w/out a filetype. This should be\r\n\t\t\t// rare, but it maintains backcompat for the v1.x line (note: dojo.moduleUrl will be removed in v2.0).\r\n\t\t\t// Notice * is an illegal filename so it won't conflict with any real path map that may exist the paths config.\r\n\t\t\tvar result = null;\r\n\t\t\tif(module){\r\n\t\t\t\tresult = require.toUrl(module.replace(/\\./g, \"/\") + (url ? (\"/\" + url) : \"\") + \"/*.*\").replace(/\\/\\*\\.\\*/, \"\") + (url ? \"\" : \"/\");\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t}\r\n\r\n\tdojo._hasResource = {}; // for backward compatibility with layers built with 1.6 tooling\r\n\r\n\treturn dojo;\r\n});\r\n\ndefine('dojo/sniff',[\"./has\"], function(has){\r\n\t// module:\r\n\t//\t\tdojo/sniff\r\n\r\n\t/*=====\r\n\treturn function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis module sets has() flags based on the current browser.\r\n\t\t//\t\tIt returns the has() function.\r\n\t};\r\n\t=====*/\r\n\r\n\tif(has(\"host-browser\")){\r\n\t\tvar n = navigator,\r\n\t\t\tdua = n.userAgent,\r\n\t\t\tdav = n.appVersion,\r\n\t\t\ttv = parseFloat(dav);\r\n\r\n\t\thas.add(\"air\", dua.indexOf(\"AdobeAIR\") >= 0);\r\n\t\thas.add(\"msapp\", parseFloat(dua.split(\"MSAppHost/\")[1]) || undefined);\r\n\t\thas.add(\"khtml\", dav.indexOf(\"Konqueror\") >= 0 ? tv : undefined);\r\n\t\thas.add(\"webkit\", parseFloat(dua.split(\"WebKit/\")[1]) || undefined);\r\n\t\thas.add(\"chrome\", parseFloat(dua.split(\"Chrome/\")[1]) || undefined);\r\n\t\thas.add(\"safari\", dav.indexOf(\"Safari\")>=0 && !has(\"chrome\") ? parseFloat(dav.split(\"Version/\")[1]) : undefined);\r\n\t\thas.add(\"mac\", dav.indexOf(\"Macintosh\") >= 0);\r\n\t\thas.add(\"quirks\", document.compatMode == \"BackCompat\");\r\n\t\tif(dua.match(/(iPhone|iPod|iPad)/)){\r\n\t\t\tvar p = RegExp.$1.replace(/P/, \"p\");\r\n\t\t\tvar v = dua.match(/OS ([\\d_]+)/) ? RegExp.$1 : \"1\";\r\n\t\t\tvar os = parseFloat(v.replace(/_/, \".\").replace(/_/g, \"\"));\r\n\t\t\thas.add(p, os);\t\t// \"iphone\", \"ipad\" or \"ipod\"\r\n\t\t\thas.add(\"ios\", os);\r\n\t\t}\r\n\t\thas.add(\"android\", parseFloat(dua.split(\"Android \")[1]) || undefined);\r\n\t\thas.add(\"bb\", (dua.indexOf(\"BlackBerry\") >= 0 || dua.indexOf(\"BB10\") >= 0) && parseFloat(dua.split(\"Version/\")[1]) || undefined);\r\n\t\thas.add(\"trident\", parseFloat(dav.split(\"Trident/\")[1]) || undefined);\r\n\r\n\t\thas.add(\"svg\", typeof SVGAngle !== \"undefined\");\r\n\r\n\t\tif(!has(\"webkit\")){\r\n\t\t\t// Opera\r\n\t\t\tif(dua.indexOf(\"Opera\") >= 0){\r\n\t\t\t\t// see http://dev.opera.com/articles/view/opera-ua-string-changes and http://www.useragentstring.com/pages/Opera/\r\n\t\t\t\t// 9.8 has both styles; <9.8, 9.9 only old style\r\n\t\t\t\thas.add(\"opera\", tv >= 9.8 ? parseFloat(dua.split(\"Version/\")[1]) || tv : tv);\r\n\t\t\t}\r\n\r\n\t\t\t// Mozilla and firefox\r\n\t\t\tif(dua.indexOf(\"Gecko\") >= 0 && !has(\"khtml\") && !has(\"webkit\") && !has(\"trident\")){\r\n\t\t\t\thas.add(\"mozilla\", tv);\r\n\t\t\t}\r\n\t\t\tif(has(\"mozilla\")){\r\n\t\t\t\t//We really need to get away from this. Consider a sane isGecko approach for the future.\r\n\t\t\t\thas.add(\"ff\", parseFloat(dua.split(\"Firefox/\")[1] || dua.split(\"Minefield/\")[1]) || undefined);\r\n\t\t\t}\r\n\r\n\t\t\t// IE\r\n\t\t\tif(document.all && !has(\"opera\")){\r\n\t\t\t\tvar isIE = parseFloat(dav.split(\"MSIE \")[1]) || undefined;\r\n\r\n\t\t\t\t//In cases where the page has an HTTP header or META tag with\r\n\t\t\t\t//X-UA-Compatible, then it is in emulation mode.\r\n\t\t\t\t//Make sure isIE reflects the desired version.\r\n\t\t\t\t//document.documentMode of 5 means quirks mode.\r\n\t\t\t\t//Only switch the value if documentMode's major version\r\n\t\t\t\t//is different from isIE's major version.\r\n\t\t\t\tvar mode = document.documentMode;\r\n\t\t\t\tif(mode && mode != 5 && Math.floor(isIE) != mode){\r\n\t\t\t\t\tisIE = mode;\r\n\t\t\t\t}\r\n\r\n\t\t\t\thas.add(\"ie\", isIE);\r\n\t\t\t}\r\n\r\n\t\t\t// Wii\r\n\t\t\thas.add(\"wii\", typeof opera != \"undefined\" && opera.wiiremote);\r\n\t\t}\r\n\t}\r\n\r\n\treturn has;\r\n});\r\n\ndefine('dojo/_base/lang',[\"./kernel\", \"../has\", \"../sniff\"], function(dojo, has){\r\n\t// module:\r\n\t//\t\tdojo/_base/lang\r\n\r\n\thas.add(\"bug-for-in-skips-shadowed\", function(){\r\n\t\t// if true, the for-in iterator skips object properties that exist in Object's prototype (IE 6 - ?)\r\n\t\tfor(var i in {toString: 1}){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn 1;\r\n\t});\r\n\r\n\t// Helper methods\r\n\tvar _extraNames =\r\n\t\t\thas(\"bug-for-in-skips-shadowed\") ?\r\n\t\t\t\t\"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor\".split(\".\") : [],\r\n\r\n\t\t_extraLen = _extraNames.length,\r\n\r\n\t\tgetProp = function(/*Array*/parts, /*Boolean*/create, /*Object*/context){\r\n\t\t\tif(!context){\r\n\t\t\t\tif(parts[0] && dojo.scopeMap[parts[0]]) {\r\n\t\t\t\t\t// Voodoo code from the old days where \"dojo\" or \"dijit\" maps to some special object\r\n\t\t\t\t\t// rather than just window.dojo\r\n\t\t\t\t\tcontext = dojo.scopeMap[parts.shift()][1];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontext = dojo.global;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttry{\r\n\t\t\t\tfor(var i = 0; i < parts.length; i++){\r\n\t\t\t\t\tvar p = parts[i];\r\n\t\t\t\t\tif(!(p in context)){\r\n\t\t\t\t\t\tif(create){\r\n\t\t\t\t\t\t\tcontext[p] = {};\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\treturn;\t\t// return undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontext = context[p];\r\n\t\t\t\t}\r\n\t\t\t\treturn context; // mixed\r\n\t\t\t}catch(e){\r\n\t\t\t\t// \"p in context\" throws an exception when context is a number, boolean, etc. rather than an object,\r\n\t\t\t\t// so in that corner case just return undefined (by having no return statement)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\topts = Object.prototype.toString,\r\n\r\n\t\tefficient = function(obj, offset, startWith){\r\n\t\t\treturn (startWith||[]).concat(Array.prototype.slice.call(obj, offset||0));\r\n\t\t},\r\n\r\n\t\t_pattern = /\\{([^\\}]+)\\}/g;\r\n\r\n\t// Module export\r\n\tvar lang = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module defines Javascript language extensions.\r\n\r\n\t\t// _extraNames: String[]\r\n\t\t//\t\tLists property names that must be explicitly processed during for-in iteration\r\n\t\t//\t\tin environments that have has(\"bug-for-in-skips-shadowed\") true.\r\n\t\t_extraNames:_extraNames,\r\n\r\n\t\t_mixin: function(dest, source, copyFunc){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCopies/adds all properties of source to dest; returns dest.\r\n\t\t\t// dest: Object\r\n\t\t\t//\t\tThe object to which to copy/add all properties contained in source.\r\n\t\t\t// source: Object\r\n\t\t\t//\t\tThe object from which to draw all properties to copy into dest.\r\n\t\t\t// copyFunc: Function?\r\n\t\t\t//\t\tThe process used to copy/add a property in source; defaults to the Javascript assignment operator.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tdest, as modified\r\n\t\t\t// description:\r\n\t\t\t//\t\tAll properties, including functions (sometimes termed \"methods\"), excluding any non-standard extensions\r\n\t\t\t//\t\tfound in Object.prototype, are copied/added to dest. Copying/adding each particular property is\r\n\t\t\t//\t\tdelegated to copyFunc (if any); copyFunc defaults to the Javascript assignment operator if not provided.\r\n\t\t\t//\t\tNotice that by default, _mixin executes a so-called \"shallow copy\" and aggregate types are copied/added by reference.\r\n\t\t\tvar name, s, i, empty = {};\r\n\t\t\tfor(name in source){\r\n\t\t\t\t// the (!(name in empty) || empty[name] !== s) condition avoids copying properties in \"source\"\r\n\t\t\t\t// inherited from Object.prototype.\t For example, if dest has a custom toString() method,\r\n\t\t\t\t// don't overwrite it with the toString() method that source inherited from Object.prototype\r\n\t\t\t\ts = source[name];\r\n\t\t\t\tif(!(name in dest) || (dest[name] !== s && (!(name in empty) || empty[name] !== s))){\r\n\t\t\t\t\tdest[name] = copyFunc ? copyFunc(s) : s;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(has(\"bug-for-in-skips-shadowed\")){\r\n\t\t\t\tif(source){\r\n\t\t\t\t\tfor(i = 0; i < _extraLen; ++i){\r\n\t\t\t\t\t\tname = _extraNames[i];\r\n\t\t\t\t\t\ts = source[name];\r\n\t\t\t\t\t\tif(!(name in dest) || (dest[name] !== s && (!(name in empty) || empty[name] !== s))){\r\n\t\t\t\t\t\t\tdest[name] = copyFunc ? copyFunc(s) : s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn dest; // Object\r\n\t\t},\r\n\r\n\t\tmixin: function(dest, sources){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCopies/adds all properties of one or more sources to dest; returns dest.\r\n\t\t\t// dest: Object\r\n\t\t\t//\t\tThe object to which to copy/add all properties contained in source. If dest is falsy, then\r\n\t\t\t//\t\ta new object is manufactured before copying/adding properties begins.\r\n\t\t\t// sources: Object...\r\n\t\t\t//\t\tOne of more objects from which to draw all properties to copy into dest. sources are processed\r\n\t\t\t//\t\tleft-to-right and if more than one of these objects contain the same property name, the right-most\r\n\t\t\t//\t\tvalue \"wins\".\r\n\t\t\t// returns: Object\r\n\t\t\t//\t\tdest, as modified\r\n\t\t\t// description:\r\n\t\t\t//\t\tAll properties, including functions (sometimes termed \"methods\"), excluding any non-standard extensions\r\n\t\t\t//\t\tfound in Object.prototype, are copied/added from sources to dest. sources are processed left to right.\r\n\t\t\t//\t\tThe Javascript assignment operator is used to copy/add each property; therefore, by default, mixin\r\n\t\t\t//\t\texecutes a so-called \"shallow copy\" and aggregate types are copied/added by reference.\r\n\t\t\t// example:\r\n\t\t\t//\t\tmake a shallow copy of an object\r\n\t\t\t//\t|\tvar copy = lang.mixin({}, source);\r\n\t\t\t// example:\r\n\t\t\t//\t\tmany class constructors often take an object which specifies\r\n\t\t\t//\t\tvalues to be configured on the object. In this case, it is\r\n\t\t\t//\t\toften simplest to call `lang.mixin` on the `this` object:\r\n\t\t\t//\t|\tdeclare(\"acme.Base\", null, {\r\n\t\t\t//\t|\t\tconstructor: function(properties){\r\n\t\t\t//\t|\t\t\t// property configuration:\r\n\t\t\t//\t|\t\t\tlang.mixin(this, properties);\r\n\t\t\t//\t|\r\n\t\t\t//\t|\t\t\tconsole.log(this.quip);\r\n\t\t\t//\t|\t\t\t//\t...\r\n\t\t\t//\t|\t\t},\r\n\t\t\t//\t|\t\tquip: \"I wasn't born yesterday, you know - I've seen movies.\",\r\n\t\t\t//\t|\t\t// ...\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\r\n\t\t\t//\t|\t// create an instance of the class and configure it\r\n\t\t\t//\t|\tvar b = new acme.Base({quip: \"That's what it does!\" });\r\n\t\t\t// example:\r\n\t\t\t//\t\tcopy in properties from multiple objects\r\n\t\t\t//\t|\tvar flattened = lang.mixin(\r\n\t\t\t//\t|\t\t{\r\n\t\t\t//\t|\t\t\tname: \"Frylock\",\r\n\t\t\t//\t|\t\t\tbraces: true\r\n\t\t\t//\t|\t\t},\r\n\t\t\t//\t|\t\t{\r\n\t\t\t//\t|\t\t\tname: \"Carl Brutanananadilewski\"\r\n\t\t\t//\t|\t\t}\r\n\t\t\t//\t|\t);\r\n\t\t\t//\t|\r\n\t\t\t//\t|\t// will print \"Carl Brutanananadilewski\"\r\n\t\t\t//\t|\tconsole.log(flattened.name);\r\n\t\t\t//\t|\t// will print \"true\"\r\n\t\t\t//\t|\tconsole.log(flattened.braces);\r\n\r\n\t\t\tif(!dest){ dest = {}; }\r\n\t\t\tfor(var i = 1, l = arguments.length; i < l; i++){\r\n\t\t\t\tlang._mixin(dest, arguments[i]);\r\n\t\t\t}\r\n\t\t\treturn dest; // Object\r\n\t\t},\r\n\r\n\t\tsetObject: function(name, value, context){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSet a property from a dot-separated string, such as \"A.B.C\"\r\n\t\t\t// description:\r\n\t\t\t//\t\tUseful for longer api chains where you have to test each object in\r\n\t\t\t//\t\tthe chain, or when you have an object reference in string format.\r\n\t\t\t//\t\tObjects are created as needed along `path`. Returns the passed\r\n\t\t\t//\t\tvalue if setting is successful or `undefined` if not.\r\n\t\t\t// name: String\r\n\t\t\t//\t\tPath to a property, in the form \"A.B.C\".\r\n\t\t\t// value: anything\r\n\t\t\t//\t\tvalue or object to place at location given by name\r\n\t\t\t// context: Object?\r\n\t\t\t//\t\tOptional. Object to use as root of path. Defaults to\r\n\t\t\t//\t\t`dojo.global`.\r\n\t\t\t// example:\r\n\t\t\t//\t\tset the value of `foo.bar.baz`, regardless of whether\r\n\t\t\t//\t\tintermediate objects already exist:\r\n\t\t\t//\t| lang.setObject(\"foo.bar.baz\", value);\r\n\t\t\t// example:\r\n\t\t\t//\t\twithout `lang.setObject`, we often see code like this:\r\n\t\t\t//\t| // ensure that intermediate objects are available\r\n\t\t\t//\t| if(!obj[\"parent\"]){ obj.parent = {}; }\r\n\t\t\t//\t| if(!obj.parent[\"child\"]){ obj.parent.child = {}; }\r\n\t\t\t//\t| // now we can safely set the property\r\n\t\t\t//\t| obj.parent.child.prop = \"some value\";\r\n\t\t\t//\t\twhereas with `lang.setObject`, we can shorten that to:\r\n\t\t\t//\t| lang.setObject(\"parent.child.prop\", \"some value\", obj);\r\n\r\n\t\t\tvar parts = name.split(\".\"), p = parts.pop(), obj = getProp(parts, true, context);\r\n\t\t\treturn obj && p ? (obj[p] = value) : undefined; // Object\r\n\t\t},\r\n\r\n\t\tgetObject: function(name, create, context){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGet a property from a dot-separated string, such as \"A.B.C\"\r\n\t\t\t// description:\r\n\t\t\t//\t\tUseful for longer api chains where you have to test each object in\r\n\t\t\t//\t\tthe chain, or when you have an object reference in string format.\r\n\t\t\t// name: String\r\n\t\t\t//\t\tPath to an property, in the form \"A.B.C\".\r\n\t\t\t// create: Boolean?\r\n\t\t\t//\t\tOptional. Defaults to `false`. If `true`, Objects will be\r\n\t\t\t//\t\tcreated at any point along the 'path' that is undefined.\r\n\t\t\t// context: Object?\r\n\t\t\t//\t\tOptional. Object to use as root of path. Defaults to\r\n\t\t\t//\t\t'dojo.global'. Null may be passed.\r\n\t\t\treturn getProp(name ? name.split(\".\") : [], create, context); // Object\r\n\t\t},\r\n\r\n\t\texists: function(name, obj){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tdetermine if an object supports a given method\r\n\t\t\t// description:\r\n\t\t\t//\t\tuseful for longer api chains where you have to test each object in\r\n\t\t\t//\t\tthe chain. Useful for object and method detection.\r\n\t\t\t// name: String\r\n\t\t\t//\t\tPath to an object, in the form \"A.B.C\".\r\n\t\t\t// obj: Object?\r\n\t\t\t//\t\tObject to use as root of path. Defaults to\r\n\t\t\t//\t\t'dojo.global'. Null may be passed.\r\n\t\t\t// example:\r\n\t\t\t//\t| // define an object\r\n\t\t\t//\t| var foo = {\r\n\t\t\t//\t|\t\tbar: { }\r\n\t\t\t//\t| };\r\n\t\t\t//\t|\r\n\t\t\t//\t| // search the global scope\r\n\t\t\t//\t| lang.exists(\"foo.bar\"); // true\r\n\t\t\t//\t| lang.exists(\"foo.bar.baz\"); // false\r\n\t\t\t//\t|\r\n\t\t\t//\t| // search from a particular scope\r\n\t\t\t//\t| lang.exists(\"bar\", foo); // true\r\n\t\t\t//\t| lang.exists(\"bar.baz\", foo); // false\r\n\t\t\treturn lang.getObject(name, false, obj) !== undefined; // Boolean\r\n\t\t},\r\n\r\n\t\t// Crockford (ish) functions\r\n\r\n\t\tisString: function(it){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturn true if it is a String\r\n\t\t\t// it: anything\r\n\t\t\t//\t\tItem to test.\r\n\t\t\treturn (typeof it == \"string\" || it instanceof String); // Boolean\r\n\t\t},\r\n\r\n\t\tisArray: function(it){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturn true if it is an Array.\r\n\t\t\t//\t\tDoes not work on Arrays created in other windows.\r\n\t\t\t// it: anything\r\n\t\t\t//\t\tItem to test.\r\n\t\t\treturn it && (it instanceof Array || typeof it == \"array\"); // Boolean\r\n\t\t},\r\n\r\n\t\tisFunction: function(it){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturn true if it is a Function\r\n\t\t\t// it: anything\r\n\t\t\t//\t\tItem to test.\r\n\t\t\treturn opts.call(it) === \"[object Function]\";\r\n\t\t},\r\n\r\n\t\tisObject: function(it){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns true if it is a JavaScript object (or an Array, a Function\r\n\t\t\t//\t\tor null)\r\n\t\t\t// it: anything\r\n\t\t\t//\t\tItem to test.\r\n\t\t\treturn it !== undefined &&\r\n\t\t\t\t(it === null || typeof it == \"object\" || lang.isArray(it) || lang.isFunction(it)); // Boolean\r\n\t\t},\r\n\r\n\t\tisArrayLike: function(it){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tsimilar to isArray() but more permissive\r\n\t\t\t// it: anything\r\n\t\t\t//\t\tItem to test.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tIf it walks like a duck and quacks like a duck, return `true`\r\n\t\t\t// description:\r\n\t\t\t//\t\tDoesn't strongly test for \"arrayness\".  Instead, settles for \"isn't\r\n\t\t\t//\t\ta string or number and has a length property\". Arguments objects\r\n\t\t\t//\t\tand DOM collections will return true when passed to\r\n\t\t\t//\t\tisArrayLike(), but will return false when passed to\r\n\t\t\t//\t\tisArray().\r\n\t\t\treturn it && it !== undefined && // Boolean\r\n\t\t\t\t// keep out built-in constructors (Number, String, ...) which have length\r\n\t\t\t\t// properties\r\n\t\t\t\t!lang.isString(it) && !lang.isFunction(it) &&\r\n\t\t\t\t!(it.tagName && it.tagName.toLowerCase() == 'form') &&\r\n\t\t\t\t(lang.isArray(it) || isFinite(it.length));\r\n\t\t},\r\n\r\n\t\tisAlien: function(it){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns true if it is a built-in function or some other kind of\r\n\t\t\t//\t\toddball that *should* report as a function but doesn't\r\n\t\t\treturn it && !lang.isFunction(it) && /\\{\\s*\\[native code\\]\\s*\\}/.test(String(it)); // Boolean\r\n\t\t},\r\n\r\n\t\textend: function(ctor, props){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds all properties and methods of props to constructor's\r\n\t\t\t//\t\tprototype, making them available to all instances created with\r\n\t\t\t//\t\tconstructor.\r\n\t\t\t// ctor: Object\r\n\t\t\t//\t\tTarget constructor to extend.\r\n\t\t\t// props: Object\r\n\t\t\t//\t\tOne or more objects to mix into ctor.prototype\r\n\t\t\tfor(var i=1, l=arguments.length; i<l; i++){\r\n\t\t\t\tlang._mixin(ctor.prototype, arguments[i]);\r\n\t\t\t}\r\n\t\t\treturn ctor; // Object\r\n\t\t},\r\n\r\n\t\t_hitchArgs: function(scope, method){\r\n\t\t\tvar pre = lang._toArray(arguments, 2);\r\n\t\t\tvar named = lang.isString(method);\r\n\t\t\treturn function(){\r\n\t\t\t\t// arrayify arguments\r\n\t\t\t\tvar args = lang._toArray(arguments);\r\n\t\t\t\t// locate our method\r\n\t\t\t\tvar f = named ? (scope||dojo.global)[method] : method;\r\n\t\t\t\t// invoke with collected args\r\n\t\t\t\treturn f && f.apply(scope || this, pre.concat(args)); // mixed\r\n\t\t\t}; // Function\r\n\t\t},\r\n\r\n\t\thitch: function(scope, method){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a function that will only ever execute in the given scope.\r\n\t\t\t//\t\tThis allows for easy use of object member functions\r\n\t\t\t//\t\tin callbacks and other places in which the \"this\" keyword may\r\n\t\t\t//\t\totherwise not reference the expected scope.\r\n\t\t\t//\t\tAny number of default positional arguments may be passed as parameters\r\n\t\t\t//\t\tbeyond \"method\".\r\n\t\t\t//\t\tEach of these values will be used to \"placehold\" (similar to curry)\r\n\t\t\t//\t\tfor the hitched function.\r\n\t\t\t// scope: Object\r\n\t\t\t//\t\tThe scope to use when method executes. If method is a string,\r\n\t\t\t//\t\tscope is also the object containing method.\r\n\t\t\t// method: Function|String...\r\n\t\t\t//\t\tA function to be hitched to scope, or the name of the method in\r\n\t\t\t//\t\tscope to be hitched.\r\n\t\t\t// example:\r\n\t\t\t//\t|\tlang.hitch(foo, \"bar\")();\r\n\t\t\t//\t\truns foo.bar() in the scope of foo\r\n\t\t\t// example:\r\n\t\t\t//\t|\tlang.hitch(foo, myFunction);\r\n\t\t\t//\t\treturns a function that runs myFunction in the scope of foo\r\n\t\t\t// example:\r\n\t\t\t//\t\tExpansion on the default positional arguments passed along from\r\n\t\t\t//\t\thitch. Passed args are mixed first, additional args after.\r\n\t\t\t//\t|\tvar foo = { bar: function(a, b, c){ console.log(a, b, c); } };\r\n\t\t\t//\t|\tvar fn = lang.hitch(foo, \"bar\", 1, 2);\r\n\t\t\t//\t|\tfn(3); // logs \"1, 2, 3\"\r\n\t\t\t// example:\r\n\t\t\t//\t|\tvar foo = { bar: 2 };\r\n\t\t\t//\t|\tlang.hitch(foo, function(){ this.bar = 10; })();\r\n\t\t\t//\t\texecute an anonymous function in scope of foo\r\n\t\t\tif(arguments.length > 2){\r\n\t\t\t\treturn lang._hitchArgs.apply(dojo, arguments); // Function\r\n\t\t\t}\r\n\t\t\tif(!method){\r\n\t\t\t\tmethod = scope;\r\n\t\t\t\tscope = null;\r\n\t\t\t}\r\n\t\t\tif(lang.isString(method)){\r\n\t\t\t\tscope = scope || dojo.global;\r\n\t\t\t\tif(!scope[method]){ throw(['lang.hitch: scope[\"', method, '\"] is null (scope=\"', scope, '\")'].join('')); }\r\n\t\t\t\treturn function(){ return scope[method].apply(scope, arguments || []); }; // Function\r\n\t\t\t}\r\n\t\t\treturn !scope ? method : function(){ return method.apply(scope, arguments || []); }; // Function\r\n\t\t},\r\n\r\n\t\tdelegate: (function(){\r\n\t\t\t// boodman/crockford delegation w/ cornford optimization\r\n\t\t\tfunction TMP(){}\r\n\t\t\treturn function(obj, props){\r\n\t\t\t\tTMP.prototype = obj;\r\n\t\t\t\tvar tmp = new TMP();\r\n\t\t\t\tTMP.prototype = null;\r\n\t\t\t\tif(props){\r\n\t\t\t\t\tlang._mixin(tmp, props);\r\n\t\t\t\t}\r\n\t\t\t\treturn tmp; // Object\r\n\t\t\t};\r\n\t\t})(),\r\n\t\t/*=====\r\n\t\tdelegate: function(obj, props){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a new object which \"looks\" to obj for properties which it\r\n\t\t\t//\t\tdoes not have a value for. Optionally takes a bag of properties to\r\n\t\t\t//\t\tseed the returned object with initially.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis is a small implementation of the Boodman/Crockford delegation\r\n\t\t\t//\t\tpattern in JavaScript. An intermediate object constructor mediates\r\n\t\t\t//\t\tthe prototype chain for the returned object, using it to delegate\r\n\t\t\t//\t\tdown to obj for property lookup when object-local lookup fails.\r\n\t\t\t//\t\tThis can be thought of similarly to ES4's \"wrap\", save that it does\r\n\t\t\t//\t\tnot act on types but rather on pure objects.\r\n\t\t\t// obj: Object\r\n\t\t\t//\t\tThe object to delegate to for properties not found directly on the\r\n\t\t\t//\t\treturn object or in props.\r\n\t\t\t// props: Object...\r\n\t\t\t//\t\tan object containing properties to assign to the returned object\r\n\t\t\t// returns:\r\n\t\t\t//\t\tan Object of anonymous type\r\n\t\t\t// example:\r\n\t\t\t//\t|\tvar foo = { bar: \"baz\" };\r\n\t\t\t//\t|\tvar thinger = lang.delegate(foo, { thud: \"xyzzy\"});\r\n\t\t\t//\t|\tthinger.bar == \"baz\"; // delegated to foo\r\n\t\t\t//\t|\tfoo.thud == undefined; // by definition\r\n\t\t\t//\t|\tthinger.thud == \"xyzzy\"; // mixed in from props\r\n\t\t\t//\t|\tfoo.bar = \"thonk\";\r\n\t\t\t//\t|\tthinger.bar == \"thonk\"; // still delegated to foo's bar\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\t_toArray: has(\"ie\") ?\r\n\t\t\t(function(){\r\n\t\t\t\tfunction slow(obj, offset, startWith){\r\n\t\t\t\t\tvar arr = startWith||[];\r\n\t\t\t\t\tfor(var x = offset || 0; x < obj.length; x++){\r\n\t\t\t\t\t\tarr.push(obj[x]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn arr;\r\n\t\t\t\t}\r\n\t\t\t\treturn function(obj){\r\n\t\t\t\t\treturn ((obj.item) ? slow : efficient).apply(this, arguments);\r\n\t\t\t\t};\r\n\t\t\t})() : efficient,\r\n\t\t/*=====\r\n\t\t _toArray: function(obj, offset, startWith){\r\n\t\t\t // summary:\r\n\t\t\t //\t\tConverts an array-like object (i.e. arguments, DOMCollection) to an\r\n\t\t\t //\t\tarray. Returns a new Array with the elements of obj.\r\n\t\t\t // obj: Object\r\n\t\t\t //\t\tthe object to \"arrayify\". We expect the object to have, at a\r\n\t\t\t //\t\tminimum, a length property which corresponds to integer-indexed\r\n\t\t\t //\t\tproperties.\r\n\t\t\t // offset: Number?\r\n\t\t\t //\t\tthe location in obj to start iterating from. Defaults to 0.\r\n\t\t\t //\t\tOptional.\r\n\t\t\t // startWith: Array?\r\n\t\t\t //\t\tAn array to pack with the properties of obj. If provided,\r\n\t\t\t //\t\tproperties in obj are appended at the end of startWith and\r\n\t\t\t //\t\tstartWith is the returned array.\r\n\t\t },\r\n\t\t =====*/\r\n\r\n\t\tpartial: function(/*Function|String*/ method /*, ...*/){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tsimilar to hitch() except that the scope object is left to be\r\n\t\t\t//\t\twhatever the execution context eventually becomes.\r\n\t\t\t// description:\r\n\t\t\t//\t\tCalling lang.partial is the functional equivalent of calling:\r\n\t\t\t//\t\t|\tlang.hitch(null, funcName, ...);\r\n\t\t\t// method:\r\n\t\t\t//\t\tThe function to \"wrap\"\r\n\t\t\tvar arr = [ null ];\r\n\t\t\treturn lang.hitch.apply(dojo, arr.concat(lang._toArray(arguments))); // Function\r\n\t\t},\r\n\r\n\t\tclone: function(/*anything*/ src){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tClones objects (including DOM nodes) and all children.\r\n\t\t\t//\t\tWarning: do not clone cyclic structures.\r\n\t\t\t// src:\r\n\t\t\t//\t\tThe object to clone\r\n\t\t\tif(!src || typeof src != \"object\" || lang.isFunction(src)){\r\n\t\t\t\t// null, undefined, any non-object, or function\r\n\t\t\t\treturn src;\t// anything\r\n\t\t\t}\r\n\t\t\tif(src.nodeType && \"cloneNode\" in src){\r\n\t\t\t\t// DOM Node\r\n\t\t\t\treturn src.cloneNode(true); // Node\r\n\t\t\t}\r\n\t\t\tif(src instanceof Date){\r\n\t\t\t\t// Date\r\n\t\t\t\treturn new Date(src.getTime());\t// Date\r\n\t\t\t}\r\n\t\t\tif(src instanceof RegExp){\r\n\t\t\t\t// RegExp\r\n\t\t\t\treturn new RegExp(src);   // RegExp\r\n\t\t\t}\r\n\t\t\tvar r, i, l;\r\n\t\t\tif(lang.isArray(src)){\r\n\t\t\t\t// array\r\n\t\t\t\tr = [];\r\n\t\t\t\tfor(i = 0, l = src.length; i < l; ++i){\r\n\t\t\t\t\tif(i in src){\r\n\t\t\t\t\t\tr.push(lang.clone(src[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// we don't clone functions for performance reasons\r\n\t\t\t\t//\t\t}else if(d.isFunction(src)){\r\n\t\t\t\t//\t\t\t// function\r\n\t\t\t\t//\t\t\tr = function(){ return src.apply(this, arguments); };\r\n\t\t\t}else{\r\n\t\t\t\t// generic objects\r\n\t\t\t\tr = src.constructor ? new src.constructor() : {};\r\n\t\t\t}\r\n\t\t\treturn lang._mixin(r, src, lang.clone);\r\n\t\t},\r\n\r\n\r\n\t\ttrim: String.prototype.trim ?\r\n\t\t\tfunction(str){ return str.trim(); } :\r\n\t\t\tfunction(str){ return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, ''); },\r\n\t\t/*=====\r\n\t\t trim: function(str){\r\n\t\t\t // summary:\r\n\t\t\t //\t\tTrims whitespace from both sides of the string\r\n\t\t\t // str: String\r\n\t\t\t //\t\tString to be trimmed\r\n\t\t\t // returns: String\r\n\t\t\t //\t\tReturns the trimmed string\r\n\t\t\t // description:\r\n\t\t\t //\t\tThis version of trim() was selected for inclusion into the base due\r\n\t\t\t //\t\tto its compact size and relatively good performance\r\n\t\t\t //\t\t(see [Steven Levithan's blog](http://blog.stevenlevithan.com/archives/faster-trim-javascript)\r\n\t\t\t //\t\tUses String.prototype.trim instead, if available.\r\n\t\t\t //\t\tThe fastest but longest version of this function is located at\r\n\t\t\t //\t\tlang.string.trim()\r\n\t\t },\r\n\t\t =====*/\r\n\r\n\t\treplace: function(tmpl, map, pattern){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tPerforms parameterized substitutions on a string. Throws an\r\n\t\t\t//\t\texception if any parameter is unmatched.\r\n\t\t\t// tmpl: String\r\n\t\t\t//\t\tString to be used as a template.\r\n\t\t\t// map: Object|Function\r\n\t\t\t//\t\tIf an object, it is used as a dictionary to look up substitutions.\r\n\t\t\t//\t\tIf a function, it is called for every substitution with following parameters:\r\n\t\t\t//\t\ta whole match, a name, an offset, and the whole template\r\n\t\t\t//\t\tstring (see https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/String/replace\r\n\t\t\t//\t\tfor more details).\r\n\t\t\t// pattern: RegEx?\r\n\t\t\t//\t\tOptional regular expression objects that overrides the default pattern.\r\n\t\t\t//\t\tMust be global and match one item. The default is: /\\{([^\\}]+)\\}/g,\r\n\t\t\t//\t\twhich matches patterns like that: \"{xxx}\", where \"xxx\" is any sequence\r\n\t\t\t//\t\tof characters, which doesn't include \"}\".\r\n\t\t\t// returns: String\r\n\t\t\t//\t\tReturns the substituted string.\r\n\t\t\t// example:\r\n\t\t\t//\t|\t// uses a dictionary for substitutions:\r\n\t\t\t//\t|\tlang.replace(\"Hello, {name.first} {name.last} AKA {nick}!\",\r\n\t\t\t//\t|\t\t{\r\n\t\t\t//\t|\t\t\tnick: \"Bob\",\r\n\t\t\t//\t|\t\t\tname: {\r\n\t\t\t//\t|\t\t\t\tfirst:\t\"Robert\",\r\n\t\t\t//\t|\t\t\t\tmiddle: \"X\",\r\n\t\t\t//\t|\t\t\t\tlast:\t\t\"Cringely\"\r\n\t\t\t//\t|\t\t\t}\r\n\t\t\t//\t|\t\t});\r\n\t\t\t//\t|\t// returns: Hello, Robert Cringely AKA Bob!\r\n\t\t\t// example:\r\n\t\t\t//\t|\t// uses an array for substitutions:\r\n\t\t\t//\t|\tlang.replace(\"Hello, {0} {2}!\",\r\n\t\t\t//\t|\t\t[\"Robert\", \"X\", \"Cringely\"]);\r\n\t\t\t//\t|\t// returns: Hello, Robert Cringely!\r\n\t\t\t// example:\r\n\t\t\t//\t|\t// uses a function for substitutions:\r\n\t\t\t//\t|\tfunction sum(a){\r\n\t\t\t//\t|\t\tvar t = 0;\r\n\t\t\t//\t|\t\tarrayforEach(a, function(x){ t += x; });\r\n\t\t\t//\t|\t\treturn t;\r\n\t\t\t//\t|\t}\r\n\t\t\t//\t|\tlang.replace(\r\n\t\t\t//\t|\t\t\"{count} payments averaging {avg} USD per payment.\",\r\n\t\t\t//\t|\t\tlang.hitch(\r\n\t\t\t//\t|\t\t\t{ payments: [11, 16, 12] },\r\n\t\t\t//\t|\t\t\tfunction(_, key){\r\n\t\t\t//\t|\t\t\t\tswitch(key){\r\n\t\t\t//\t|\t\t\t\t\tcase \"count\": return this.payments.length;\r\n\t\t\t//\t|\t\t\t\t\tcase \"min\":\t\treturn Math.min.apply(Math, this.payments);\r\n\t\t\t//\t|\t\t\t\t\tcase \"max\":\t\treturn Math.max.apply(Math, this.payments);\r\n\t\t\t//\t|\t\t\t\t\tcase \"sum\":\t\treturn sum(this.payments);\r\n\t\t\t//\t|\t\t\t\t\tcase \"avg\":\t\treturn sum(this.payments) / this.payments.length;\r\n\t\t\t//\t|\t\t\t\t}\r\n\t\t\t//\t|\t\t\t}\r\n\t\t\t//\t|\t\t)\r\n\t\t\t//\t|\t);\r\n\t\t\t//\t|\t// prints: 3 payments averaging 13 USD per payment.\r\n\t\t\t// example:\r\n\t\t\t//\t|\t// uses an alternative PHP-like pattern for substitutions:\r\n\t\t\t//\t|\tlang.replace(\"Hello, ${0} ${2}!\",\r\n\t\t\t//\t|\t\t[\"Robert\", \"X\", \"Cringely\"], /\\$\\{([^\\}]+)\\}/g);\r\n\t\t\t//\t|\t// returns: Hello, Robert Cringely!\r\n\r\n\t\t\treturn tmpl.replace(pattern || _pattern, lang.isFunction(map) ?\r\n\t\t\t\tmap : function(_, k){ return lang.getObject(k, false, map); });\r\n\t\t}\r\n\t};\r\n\r\n\thas(\"extend-dojo\") && lang.mixin(dojo, lang);\r\n\r\n\treturn lang;\r\n});\r\n\r\n\ndefine('dojo/_base/array',[\"./kernel\", \"../has\", \"./lang\"], function(dojo, has, lang){\r\n\t// module:\r\n\t//\t\tdojo/_base/array\r\n\r\n\t// our old simple function builder stuff\r\n\tvar cache = {}, u;\r\n\r\n\tfunction buildFn(fn){\r\n\t\treturn cache[fn] = new Function(\"item\", \"index\", \"array\", fn); // Function\r\n\t}\r\n\t// magic snippet: if(typeof fn == \"string\") fn = cache[fn] || buildFn(fn);\r\n\r\n\t// every & some\r\n\r\n\tfunction everyOrSome(some){\r\n\t\tvar every = !some;\r\n\t\treturn function(a, fn, o){\r\n\t\t\tvar i = 0, l = a && a.length || 0, result;\r\n\t\t\tif(l && typeof a == \"string\") a = a.split(\"\");\r\n\t\t\tif(typeof fn == \"string\") fn = cache[fn] || buildFn(fn);\r\n\t\t\tif(o){\r\n\t\t\t\tfor(; i < l; ++i){\r\n\t\t\t\t\tresult = !fn.call(o, a[i], i, a);\r\n\t\t\t\t\tif(some ^ result){\r\n\t\t\t\t\t\treturn !result;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfor(; i < l; ++i){\r\n\t\t\t\t\tresult = !fn(a[i], i, a);\r\n\t\t\t\t\tif(some ^ result){\r\n\t\t\t\t\t\treturn !result;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn every; // Boolean\r\n\t\t};\r\n\t}\r\n\r\n\t// indexOf, lastIndexOf\r\n\r\n\tfunction index(up){\r\n\t\tvar delta = 1, lOver = 0, uOver = 0;\r\n\t\tif(!up){\r\n\t\t\tdelta = lOver = uOver = -1;\r\n\t\t}\r\n\t\treturn function(a, x, from, last){\r\n\t\t\tif(last && delta > 0){\r\n\t\t\t\t// TODO: why do we use a non-standard signature? why do we need \"last\"?\r\n\t\t\t\treturn array.lastIndexOf(a, x, from);\r\n\t\t\t}\r\n\t\t\tvar l = a && a.length || 0, end = up ? l + uOver : lOver, i;\r\n\t\t\tif(from === u){\r\n\t\t\t\ti = up ? lOver : l + uOver;\r\n\t\t\t}else{\r\n\t\t\t\tif(from < 0){\r\n\t\t\t\t\ti = l + from;\r\n\t\t\t\t\tif(i < 0){\r\n\t\t\t\t\t\ti = lOver;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\ti = from >= l ? l + uOver : from;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(l && typeof a == \"string\") a = a.split(\"\");\r\n\t\t\tfor(; i != end; i += delta){\r\n\t\t\t\tif(a[i] == x){\r\n\t\t\t\t\treturn i; // Number\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn -1; // Number\r\n\t\t};\r\n\t}\r\n\r\n\tvar array = {\r\n\t\t// summary:\r\n\t\t//\t\tThe Javascript v1.6 array extensions.\r\n\r\n\t\tevery: everyOrSome(false),\r\n\t\t/*=====\r\n\t\t every: function(arr, callback, thisObject){\r\n\t\t\t // summary:\r\n\t\t\t //\t\tDetermines whether or not every item in arr satisfies the\r\n\t\t\t //\t\tcondition implemented by callback.\r\n\t\t\t // arr: Array|String\r\n\t\t\t //\t\tthe array to iterate on. If a string, operates on individual characters.\r\n\t\t\t // callback: Function|String\r\n\t\t\t //\t\ta function is invoked with three arguments: item, index,\r\n\t\t\t //\t\tand array and returns true if the condition is met.\r\n\t\t\t // thisObject: Object?\r\n\t\t\t //\t\tmay be used to scope the call to callback\r\n\t\t\t // returns: Boolean\r\n\t\t\t // description:\r\n\t\t\t //\t\tThis function corresponds to the JavaScript 1.6 Array.every() method, with one difference: when\r\n\t\t\t //\t\trun over sparse arrays, this implementation passes the \"holes\" in the sparse array to\r\n\t\t\t //\t\tthe callback function with a value of undefined. JavaScript 1.6's every skips the holes in the sparse array.\r\n\t\t\t //\t\tFor more details, see:\r\n\t\t\t //\t\thttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/every\r\n\t\t\t // example:\r\n\t\t\t //\t|\t// returns false\r\n\t\t\t //\t|\tarray.every([1, 2, 3, 4], function(item){ return item>1; });\r\n\t\t\t // example:\r\n\t\t\t //\t|\t// returns true\r\n\t\t\t //\t|\tarray.every([1, 2, 3, 4], function(item){ return item>0; });\r\n\t\t },\r\n\t\t =====*/\r\n\r\n\t\tsome: everyOrSome(true),\r\n\t\t/*=====\r\n\t\tsome: function(arr, callback, thisObject){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tDetermines whether or not any item in arr satisfies the\r\n\t\t\t//\t\tcondition implemented by callback.\r\n\t\t\t// arr: Array|String\r\n\t\t\t//\t\tthe array to iterate over. If a string, operates on individual characters.\r\n\t\t\t// callback: Function|String\r\n\t\t\t//\t\ta function is invoked with three arguments: item, index,\r\n\t\t\t//\t\tand array and returns true if the condition is met.\r\n\t\t\t// thisObject: Object?\r\n\t\t\t//\t\tmay be used to scope the call to callback\r\n\t\t\t// returns: Boolean\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis function corresponds to the JavaScript 1.6 Array.some() method, with one difference: when\r\n\t\t\t//\t\trun over sparse arrays, this implementation passes the \"holes\" in the sparse array to\r\n\t\t\t//\t\tthe callback function with a value of undefined. JavaScript 1.6's some skips the holes in the sparse array.\r\n\t\t\t//\t\tFor more details, see:\r\n\t\t\t//\t\thttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/some\r\n\t\t\t// example:\r\n\t\t\t//\t| // is true\r\n\t\t\t//\t| array.some([1, 2, 3, 4], function(item){ return item>1; });\r\n\t\t\t// example:\r\n\t\t\t//\t| // is false\r\n\t\t\t//\t| array.some([1, 2, 3, 4], function(item){ return item<1; });\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tindexOf: index(true),\r\n\t\t/*=====\r\n\t\tindexOf: function(arr, value, fromIndex, findLast){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tlocates the first index of the provided value in the\r\n\t\t\t//\t\tpassed array. If the value is not found, -1 is returned.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis method corresponds to the JavaScript 1.6 Array.indexOf method, with two differences:\r\n\t\t\t//\r\n\t\t\t//\t\t1. when run over sparse arrays, the Dojo function invokes the callback for every index\r\n\t\t\t//\t\t   whereas JavaScript 1.6's indexOf skips the holes in the sparse array.\r\n\t\t\t//\t\t2. uses equality (==) rather than strict equality (===)\r\n\t\t\t//\r\n\t\t\t//\t\tFor details on this method, see:\r\n\t\t\t//\t\thttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/indexOf\r\n\t\t\t// arr: Array\r\n\t\t\t// value: Object\r\n\t\t\t// fromIndex: Integer?\r\n\t\t\t// findLast: Boolean?\r\n\t\t\t//\t\tMakes indexOf() work like lastIndexOf().  Used internally; not meant for external usage.\r\n\t\t\t// returns: Number\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tlastIndexOf: index(false),\r\n\t\t/*=====\r\n\t\tlastIndexOf: function(arr, value, fromIndex){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tlocates the last index of the provided value in the passed\r\n\t\t\t//\t\tarray. If the value is not found, -1 is returned.\r\n\t\t\t// description:\r\n\t\t \t//\t\tThis method corresponds to the JavaScript 1.6 Array.lastIndexOf method, with two differences:\r\n\t\t \t//\r\n\t\t \t//\t\t1. when run over sparse arrays, the Dojo function invokes the callback for every index\r\n\t\t \t//\t\t   whereas JavaScript 1.6's lasIndexOf skips the holes in the sparse array.\r\n\t\t \t//\t\t2. uses equality (==) rather than strict equality (===)\r\n\t\t \t//\r\n\t\t \t//\t\tFor details on this method, see:\r\n\t\t \t//\t\thttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/lastIndexOf\r\n\t\t\t// arr: Array,\r\n\t\t\t// value: Object,\r\n\t\t\t// fromIndex: Integer?\r\n\t\t\t// returns: Number\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tforEach: function(arr, callback, thisObject){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tfor every item in arr, callback is invoked. Return values are ignored.\r\n\t\t\t//\t\tIf you want to break out of the loop, consider using array.every() or array.some().\r\n\t\t\t//\t\tforEach does not allow breaking out of the loop over the items in arr.\r\n\t\t\t// arr:\r\n\t\t\t//\t\tthe array to iterate over. If a string, operates on individual characters.\r\n\t\t\t// callback:\r\n\t\t\t//\t\ta function is invoked with three arguments: item, index, and array\r\n\t\t\t// thisObject:\r\n\t\t\t//\t\tmay be used to scope the call to callback\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis function corresponds to the JavaScript 1.6 Array.forEach() method, with one difference: when\r\n\t\t\t//\t\trun over sparse arrays, this implementation passes the \"holes\" in the sparse array to\r\n\t\t\t//\t\tthe callback function with a value of undefined. JavaScript 1.6's forEach skips the holes in the sparse array.\r\n\t\t\t//\t\tFor more details, see:\r\n\t\t\t//\t\thttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/forEach\r\n\t\t\t// example:\r\n\t\t\t//\t| // log out all members of the array:\r\n\t\t\t//\t| array.forEach(\r\n\t\t\t//\t|\t\t[ \"thinger\", \"blah\", \"howdy\", 10 ],\r\n\t\t\t//\t|\t\tfunction(item){\r\n\t\t\t//\t|\t\t\tconsole.log(item);\r\n\t\t\t//\t|\t\t}\r\n\t\t\t//\t| );\r\n\t\t\t// example:\r\n\t\t\t//\t| // log out the members and their indexes\r\n\t\t\t//\t| array.forEach(\r\n\t\t\t//\t|\t\t[ \"thinger\", \"blah\", \"howdy\", 10 ],\r\n\t\t\t//\t|\t\tfunction(item, idx, arr){\r\n\t\t\t//\t|\t\t\tconsole.log(item, \"at index:\", idx);\r\n\t\t\t//\t|\t\t}\r\n\t\t\t//\t| );\r\n\t\t\t// example:\r\n\t\t\t//\t| // use a scoped object member as the callback\r\n\t\t\t//\t|\r\n\t\t\t//\t| var obj = {\r\n\t\t\t//\t|\t\tprefix: \"logged via obj.callback:\",\r\n\t\t\t//\t|\t\tcallback: function(item){\r\n\t\t\t//\t|\t\t\tconsole.log(this.prefix, item);\r\n\t\t\t//\t|\t\t}\r\n\t\t\t//\t| };\r\n\t\t\t//\t|\r\n\t\t\t//\t| // specifying the scope function executes the callback in that scope\r\n\t\t\t//\t| array.forEach(\r\n\t\t\t//\t|\t\t[ \"thinger\", \"blah\", \"howdy\", 10 ],\r\n\t\t\t//\t|\t\tobj.callback,\r\n\t\t\t//\t|\t\tobj\r\n\t\t\t//\t| );\r\n\t\t\t//\t|\r\n\t\t\t//\t| // alternately, we can accomplish the same thing with lang.hitch()\r\n\t\t\t//\t| array.forEach(\r\n\t\t\t//\t|\t\t[ \"thinger\", \"blah\", \"howdy\", 10 ],\r\n\t\t\t//\t|\t\tlang.hitch(obj, \"callback\")\r\n\t\t\t//\t| );\r\n\t\t\t// arr: Array|String\r\n\t\t\t// callback: Function|String\r\n\t\t\t// thisObject: Object?\r\n\r\n\t\t\tvar i = 0, l = arr && arr.length || 0;\r\n\t\t\tif(l && typeof arr == \"string\") arr = arr.split(\"\");\r\n\t\t\tif(typeof callback == \"string\") callback = cache[callback] || buildFn(callback);\r\n\t\t\tif(thisObject){\r\n\t\t\t\tfor(; i < l; ++i){\r\n\t\t\t\t\tcallback.call(thisObject, arr[i], i, arr);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfor(; i < l; ++i){\r\n\t\t\t\t\tcallback(arr[i], i, arr);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmap: function(arr, callback, thisObject, Ctr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tapplies callback to each element of arr and returns\r\n\t\t\t//\t\tan Array with the results\r\n\t\t\t// arr: Array|String\r\n\t\t\t//\t\tthe array to iterate on. If a string, operates on\r\n\t\t\t//\t\tindividual characters.\r\n\t\t\t// callback: Function|String\r\n\t\t\t//\t\ta function is invoked with three arguments, (item, index,\r\n\t\t\t//\t\tarray),\t and returns a value\r\n\t\t\t// thisObject: Object?\r\n\t\t\t//\t\tmay be used to scope the call to callback\r\n\t\t\t// returns: Array\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis function corresponds to the JavaScript 1.6 Array.map() method, with one difference: when\r\n\t\t\t//\t\trun over sparse arrays, this implementation passes the \"holes\" in the sparse array to\r\n\t\t\t//\t\tthe callback function with a value of undefined. JavaScript 1.6's map skips the holes in the sparse array.\r\n\t\t\t//\t\tFor more details, see:\r\n\t\t\t//\t\thttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map\r\n\t\t\t// example:\r\n\t\t\t//\t| // returns [2, 3, 4, 5]\r\n\t\t\t//\t| array.map([1, 2, 3, 4], function(item){ return item+1 });\r\n\r\n\t\t\t// TODO: why do we have a non-standard signature here? do we need \"Ctr\"?\r\n\t\t\tvar i = 0, l = arr && arr.length || 0, out = new (Ctr || Array)(l);\r\n\t\t\tif(l && typeof arr == \"string\") arr = arr.split(\"\");\r\n\t\t\tif(typeof callback == \"string\") callback = cache[callback] || buildFn(callback);\r\n\t\t\tif(thisObject){\r\n\t\t\t\tfor(; i < l; ++i){\r\n\t\t\t\t\tout[i] = callback.call(thisObject, arr[i], i, arr);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfor(; i < l; ++i){\r\n\t\t\t\t\tout[i] = callback(arr[i], i, arr);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn out; // Array\r\n\t\t},\r\n\r\n\t\tfilter: function(arr, callback, thisObject){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a new Array with those items from arr that match the\r\n\t\t\t//\t\tcondition implemented by callback.\r\n\t\t\t// arr: Array\r\n\t\t\t//\t\tthe array to iterate over.\r\n\t\t\t// callback: Function|String\r\n\t\t\t//\t\ta function that is invoked with three arguments (item,\r\n\t\t\t//\t\tindex, array). The return of this function is expected to\r\n\t\t\t//\t\tbe a boolean which determines whether the passed-in item\r\n\t\t\t//\t\twill be included in the returned array.\r\n\t\t\t// thisObject: Object?\r\n\t\t\t//\t\tmay be used to scope the call to callback\r\n\t\t\t// returns: Array\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis function corresponds to the JavaScript 1.6 Array.filter() method, with one difference: when\r\n\t\t\t//\t\trun over sparse arrays, this implementation passes the \"holes\" in the sparse array to\r\n\t\t\t//\t\tthe callback function with a value of undefined. JavaScript 1.6's filter skips the holes in the sparse array.\r\n\t\t\t//\t\tFor more details, see:\r\n\t\t\t//\t\thttps://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter\r\n\t\t\t// example:\r\n\t\t\t//\t| // returns [2, 3, 4]\r\n\t\t\t//\t| array.filter([1, 2, 3, 4], function(item){ return item>1; });\r\n\r\n\t\t\t// TODO: do we need \"Ctr\" here like in map()?\r\n\t\t\tvar i = 0, l = arr && arr.length || 0, out = [], value;\r\n\t\t\tif(l && typeof arr == \"string\") arr = arr.split(\"\");\r\n\t\t\tif(typeof callback == \"string\") callback = cache[callback] || buildFn(callback);\r\n\t\t\tif(thisObject){\r\n\t\t\t\tfor(; i < l; ++i){\r\n\t\t\t\t\tvalue = arr[i];\r\n\t\t\t\t\tif(callback.call(thisObject, value, i, arr)){\r\n\t\t\t\t\t\tout.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfor(; i < l; ++i){\r\n\t\t\t\t\tvalue = arr[i];\r\n\t\t\t\t\tif(callback(value, i, arr)){\r\n\t\t\t\t\t\tout.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn out; // Array\r\n\t\t},\r\n\r\n\t\tclearCache: function(){\r\n\t\t\tcache = {};\r\n\t\t}\r\n\t};\r\n\r\n\r\n\thas(\"extend-dojo\") && lang.mixin(dojo, array);\r\n\r\n\treturn array;\r\n});\r\n\n\ndefine('dojo/ready',[\"./_base/kernel\", \"./has\", \"require\", \"./has!host-browser?./domReady\", \"./_base/lang\"], function(dojo, has, require, domReady, lang){\r\n\t// module:\r\n\t//\t\tdojo/ready\r\n\t// note:\r\n\t//\t\tThis module should be unnecessary in dojo 2.0\r\n\r\n\tvar\r\n\t\t// truthy if DOMContentLoaded or better (e.g., window.onload fired) has been achieved\r\n\t\tisDomReady = 0,\r\n\r\n\t\t// The queue of functions waiting to execute as soon as dojo.ready conditions satisfied\r\n\t\tloadQ = [],\r\n\r\n\t\t// prevent recursion in onLoad\r\n\t\tonLoadRecursiveGuard = 0,\r\n\r\n\t\thandleDomReady = function(){\r\n\t\t\tisDomReady = 1;\r\n\t\t\tdojo._postLoad = dojo.config.afterOnLoad = true;\r\n\t\t\tonEvent();\r\n\t\t},\r\n\r\n\t\tonEvent = function(){\r\n\t\t\t// Called when some state changes:\r\n\t\t\t//\t\t- dom ready\r\n\t\t\t//\t\t- dojo/domReady has finished processing everything in its queue\r\n\t\t\t//\t\t- task added to loadQ\r\n\t\t\t//\t\t- require() has finished loading all currently requested modules\r\n\t\t\t//\r\n\t\t\t// Run the functions queued with dojo.ready if appropriate.\r\n\r\n\r\n\t\t\t//guard against recursions into this function\r\n\t\t\tif(onLoadRecursiveGuard){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonLoadRecursiveGuard = 1;\r\n\r\n\t\t\t// Run tasks in queue if require() is finished loading modules, the dom is ready, and there are no\r\n\t\t\t// pending tasks registered via domReady().\r\n\t\t\t// The last step is necessary so that a user defined dojo.ready() callback is delayed until after the\r\n\t\t\t// domReady() calls inside of dojo.\t  Failure can be seen on dijit/tests/robot/Dialog_ally.html on IE8\r\n\t\t\t// because the dijit/focus.js domReady() callback doesn't execute until after the test starts running.\r\n\t\t\twhile(isDomReady && (!domReady || domReady._Q.length == 0) && (require.idle ? require.idle() : true) && loadQ.length){\r\n\t\t\t\tvar f = loadQ.shift();\r\n\t\t\t\ttry{\r\n\t\t\t\t\tf();\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\t// force the dojo.js on(\"error\") handler do display the message\r\n\t\t\t\t\te.info = e.message;\r\n\t\t\t\t\tif(require.signal){\r\n\t\t\t\t\t\trequire.signal(\"error\", e);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthrow e;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tonLoadRecursiveGuard = 0;\r\n\t\t};\r\n\r\n\t// Check if we should run the next queue operation whenever require() finishes loading modules or domReady\r\n\t// finishes processing it's queue.\r\n\trequire.on && require.on(\"idle\", onEvent);\r\n\tif(domReady){\r\n\t\tdomReady._onQEmpty = onEvent;\r\n\t}\r\n\r\n\tvar ready = dojo.ready = dojo.addOnLoad = function(priority, context, callback){\r\n\t\t// summary:\r\n\t\t//\t\tAdd a function to execute on DOM content loaded and all requested modules have arrived and been evaluated.\r\n\t\t//\t\tIn most cases, the `domReady` plug-in should suffice and this method should not be needed.\r\n\t\t//\r\n\t\t//\t\tWhen called in a non-browser environment, just checks that all requested modules have arrived and been\r\n\t\t//\t\tevaluated.\r\n\t\t// priority: Integer?\r\n\t\t//\t\tThe order in which to exec this callback relative to other callbacks, defaults to 1000\r\n\t\t// context: Object?|Function\r\n\t\t//\t\tThe context in which to run execute callback, or a callback if not using context\r\n\t\t// callback: Function?\r\n\t\t//\t\tThe function to execute.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tSimple DOM and Modules ready syntax\r\n\t\t//\t|\trequire([\"dojo/ready\"], function(ready){\r\n\t\t//\t|\t\tready(function(){ alert(\"Dom ready!\"); });\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tUsing a priority\r\n\t\t//\t|\trequire([\"dojo/ready\"], function(ready){\r\n\t\t//\t|\t\tready(2, function(){ alert(\"low priority ready!\"); })\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tUsing context\r\n\t\t//\t|\trequire([\"dojo/ready\"], function(ready){\r\n\t\t//\t|\t\tready(foo, function(){\r\n\t\t//\t|\t\t\t// in here, this == foo\r\n\t\t//\t|\t\t});\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tUsing dojo/hitch style args:\r\n\t\t//\t|\trequire([\"dojo/ready\"], function(ready){\r\n\t\t//\t|\t\tvar foo = { dojoReady: function(){ console.warn(this, \"dojo dom and modules ready.\"); } };\r\n\t\t//\t|\t\tready(foo, \"dojoReady\");\r\n\t\t//\t|\t});\r\n\r\n\t\tvar hitchArgs = lang._toArray(arguments);\r\n\t\tif(typeof priority != \"number\"){\r\n\t\t\tcallback = context;\r\n\t\t\tcontext = priority;\r\n\t\t\tpriority = 1000;\r\n\t\t}else{\r\n\t\t\thitchArgs.shift();\r\n\t\t}\r\n\t\tcallback = callback ?\r\n\t\t\tlang.hitch.apply(dojo, hitchArgs) :\r\n\t\t\tfunction(){\r\n\t\t\t\tcontext();\r\n\t\t\t};\r\n\t\tcallback.priority = priority;\r\n\t\tfor(var i = 0; i < loadQ.length && priority >= loadQ[i].priority; i++){}\r\n\t\tloadQ.splice(i, 0, callback);\r\n\t\tonEvent();\r\n\t};\r\n\r\n\thas.add(\"dojo-config-addOnLoad\", 1);\r\n\tif(has(\"dojo-config-addOnLoad\")){\r\n\t\tvar dca = dojo.config.addOnLoad;\r\n\t\tif(dca){\r\n\t\t\tready[(lang.isArray(dca) ? \"apply\" : \"call\")](dojo, dca);\r\n\t\t}\r\n\t}\r\n\r\n\tif(has(\"dojo-sync-loader\") && dojo.config.parseOnLoad && !dojo.isAsync){\r\n\t\tready(99, function(){\r\n\t\t\tif(!dojo.parser){\r\n\t\t\t\tdojo.deprecated(\"Add explicit require(['dojo/parser']);\", \"\", \"2.0\");\r\n\t\t\t\trequire([\"dojo/parser\"]);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tif(domReady){\r\n\t\tdomReady(handleDomReady);\r\n\t}else{\r\n\t\thandleDomReady();\r\n\t}\r\n\r\n\treturn ready;\r\n});\r\n\ndefine('dojo/_base/declare',[\"./kernel\", \"../has\", \"./lang\"], function(dojo, has, lang){\r\n\t// module:\r\n\t//\t\tdojo/_base/declare\r\n\r\n\tvar mix = lang.mixin, op = Object.prototype, opts = op.toString,\r\n\t\txtor = new Function, counter = 0, cname = \"constructor\";\r\n\r\n\tfunction err(msg, cls){ throw new Error(\"declare\" + (cls ? \" \" + cls : \"\") + \": \" + msg); }\r\n\r\n\t// C3 Method Resolution Order (see http://www.python.org/download/releases/2.3/mro/)\r\n\tfunction c3mro(bases, className){\r\n\t\tvar result = [], roots = [{cls: 0, refs: []}], nameMap = {}, clsCount = 1,\r\n\t\t\tl = bases.length, i = 0, j, lin, base, top, proto, rec, name, refs;\r\n\r\n\t\t// build a list of bases naming them if needed\r\n\t\tfor(; i < l; ++i){\r\n\t\t\tbase = bases[i];\r\n\t\t\tif(!base){\r\n\t\t\t\terr(\"mixin #\" + i + \" is unknown. Did you use dojo.require to pull it in?\", className);\r\n\t\t\t}else if(opts.call(base) != \"[object Function]\"){\r\n\t\t\t\terr(\"mixin #\" + i + \" is not a callable constructor.\", className);\r\n\t\t\t}\r\n\t\t\tlin = base._meta ? base._meta.bases : [base];\r\n\t\t\ttop = 0;\r\n\t\t\t// add bases to the name map\r\n\t\t\tfor(j = lin.length - 1; j >= 0; --j){\r\n\t\t\t\tproto = lin[j].prototype;\r\n\t\t\t\tif(!proto.hasOwnProperty(\"declaredClass\")){\r\n\t\t\t\t\tproto.declaredClass = \"uniqName_\" + (counter++);\r\n\t\t\t\t}\r\n\t\t\t\tname = proto.declaredClass;\r\n\t\t\t\tif(!nameMap.hasOwnProperty(name)){\r\n\t\t\t\t\tnameMap[name] = {count: 0, refs: [], cls: lin[j]};\r\n\t\t\t\t\t++clsCount;\r\n\t\t\t\t}\r\n\t\t\t\trec = nameMap[name];\r\n\t\t\t\tif(top && top !== rec){\r\n\t\t\t\t\trec.refs.push(top);\r\n\t\t\t\t\t++top.count;\r\n\t\t\t\t}\r\n\t\t\t\ttop = rec;\r\n\t\t\t}\r\n\t\t\t++top.count;\r\n\t\t\troots[0].refs.push(top);\r\n\t\t}\r\n\r\n\t\t// remove classes without external references recursively\r\n\t\twhile(roots.length){\r\n\t\t\ttop = roots.pop();\r\n\t\t\tresult.push(top.cls);\r\n\t\t\t--clsCount;\r\n\t\t\t// optimization: follow a single-linked chain\r\n\t\t\twhile(refs = top.refs, refs.length == 1){\r\n\t\t\t\ttop = refs[0];\r\n\t\t\t\tif(!top || --top.count){\r\n\t\t\t\t\t// branch or end of chain => do not end to roots\r\n\t\t\t\t\ttop = 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.push(top.cls);\r\n\t\t\t\t--clsCount;\r\n\t\t\t}\r\n\t\t\tif(top){\r\n\t\t\t\t// branch\r\n\t\t\t\tfor(i = 0, l = refs.length; i < l; ++i){\r\n\t\t\t\t\ttop = refs[i];\r\n\t\t\t\t\tif(!--top.count){\r\n\t\t\t\t\t\troots.push(top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(clsCount){\r\n\t\t\terr(\"can't build consistent linearization\", className);\r\n\t\t}\r\n\r\n\t\t// calculate the superclass offset\r\n\t\tbase = bases[0];\r\n\t\tresult[0] = base ?\r\n\t\t\tbase._meta && base === result[result.length - base._meta.bases.length] ?\r\n\t\t\t\tbase._meta.bases.length : 1 : 0;\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction inherited(args, a, f){\r\n\t\tvar name, chains, bases, caller, meta, base, proto, opf, pos,\r\n\t\t\tcache = this._inherited = this._inherited || {};\r\n\r\n\t\t// crack arguments\r\n\t\tif(typeof args == \"string\"){\r\n\t\t\tname = args;\r\n\t\t\targs = a;\r\n\t\t\ta = f;\r\n\t\t}\r\n\t\tf = 0;\r\n\r\n\t\tcaller = args.callee;\r\n\t\tname = name || caller.nom;\r\n\t\tif(!name){\r\n\t\t\terr(\"can't deduce a name to call inherited()\", this.declaredClass);\r\n\t\t}\r\n\r\n\t\tmeta = this.constructor._meta;\r\n\t\tbases = meta.bases;\r\n\r\n\t\tpos = cache.p;\r\n\t\tif(name != cname){\r\n\t\t\t// method\r\n\t\t\tif(cache.c !== caller){\r\n\t\t\t\t// cache bust\r\n\t\t\t\tpos = 0;\r\n\t\t\t\tbase = bases[0];\r\n\t\t\t\tmeta = base._meta;\r\n\t\t\t\tif(meta.hidden[name] !== caller){\r\n\t\t\t\t\t// error detection\r\n\t\t\t\t\tchains = meta.chains;\r\n\t\t\t\t\tif(chains && typeof chains[name] == \"string\"){\r\n\t\t\t\t\t\terr(\"calling chained method with inherited: \" + name, this.declaredClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// find caller\r\n\t\t\t\t\tdo{\r\n\t\t\t\t\t\tmeta = base._meta;\r\n\t\t\t\t\t\tproto = base.prototype;\r\n\t\t\t\t\t\tif(meta && (proto[name] === caller && proto.hasOwnProperty(name) || meta.hidden[name] === caller)){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}while(base = bases[++pos]); // intentional assignment\r\n\t\t\t\t\tpos = base ? pos : -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// find next\r\n\t\t\tbase = bases[++pos];\r\n\t\t\tif(base){\r\n\t\t\t\tproto = base.prototype;\r\n\t\t\t\tif(base._meta && proto.hasOwnProperty(name)){\r\n\t\t\t\t\tf = proto[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\topf = op[name];\r\n\t\t\t\t\tdo{\r\n\t\t\t\t\t\tproto = base.prototype;\r\n\t\t\t\t\t\tf = proto[name];\r\n\t\t\t\t\t\tif(f && (base._meta ? proto.hasOwnProperty(name) : f !== opf)){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}while(base = bases[++pos]); // intentional assignment\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tf = base && f || op[name];\r\n\t\t}else{\r\n\t\t\t// constructor\r\n\t\t\tif(cache.c !== caller){\r\n\t\t\t\t// cache bust\r\n\t\t\t\tpos = 0;\r\n\t\t\t\tmeta = bases[0]._meta;\r\n\t\t\t\tif(meta && meta.ctor !== caller){\r\n\t\t\t\t\t// error detection\r\n\t\t\t\t\tchains = meta.chains;\r\n\t\t\t\t\tif(!chains || chains.constructor !== \"manual\"){\r\n\t\t\t\t\t\terr(\"calling chained constructor with inherited\", this.declaredClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// find caller\r\n\t\t\t\t\twhile(base = bases[++pos]){ // intentional assignment\r\n\t\t\t\t\t\tmeta = base._meta;\r\n\t\t\t\t\t\tif(meta && meta.ctor === caller){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpos = base ? pos : -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// find next\r\n\t\t\twhile(base = bases[++pos]){\t// intentional assignment\r\n\t\t\t\tmeta = base._meta;\r\n\t\t\t\tf = meta ? meta.ctor : base;\r\n\t\t\t\tif(f){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tf = base && f;\r\n\t\t}\r\n\r\n\t\t// cache the found super method\r\n\t\tcache.c = f;\r\n\t\tcache.p = pos;\r\n\r\n\t\t// now we have the result\r\n\t\tif(f){\r\n\t\t\treturn a === true ? f : f.apply(this, a || args);\r\n\t\t}\r\n\t\t// intentionally no return if a super method was not found\r\n\t}\r\n\r\n\tfunction getInherited(name, args){\r\n\t\tif(typeof name == \"string\"){\r\n\t\t\treturn this.__inherited(name, args, true);\r\n\t\t}\r\n\t\treturn this.__inherited(name, true);\r\n\t}\r\n\r\n\tfunction inherited__debug(args, a1, a2){\r\n\t\tvar f = this.getInherited(args, a1);\r\n\t\tif(f){ return f.apply(this, a2 || a1 || args); }\r\n\t\t// intentionally no return if a super method was not found\r\n\t}\r\n\r\n\tvar inheritedImpl = dojo.config.isDebug ? inherited__debug : inherited;\r\n\r\n\t// emulation of \"instanceof\"\r\n\tfunction isInstanceOf(cls){\r\n\t\tvar bases = this.constructor._meta.bases;\r\n\t\tfor(var i = 0, l = bases.length; i < l; ++i){\r\n\t\t\tif(bases[i] === cls){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this instanceof cls;\r\n\t}\r\n\r\n\tfunction mixOwn(target, source){\r\n\t\t// add props adding metadata for incoming functions skipping a constructor\r\n\t\tfor(var name in source){\r\n\t\t\tif(name != cname && source.hasOwnProperty(name)){\r\n\t\t\t\ttarget[name] = source[name];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(has(\"bug-for-in-skips-shadowed\")){\r\n\t\t\tfor(var extraNames= lang._extraNames, i= extraNames.length; i;){\r\n\t\t\t\tname = extraNames[--i];\r\n\t\t\t\tif(name != cname && source.hasOwnProperty(name)){\r\n\t\t\t\t\t  target[name] = source[name];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// implementation of safe mixin function\r\n\tfunction safeMixin(target, source){\r\n\t\t// summary:\r\n\t\t//\t\tMix in properties skipping a constructor and decorating functions\r\n\t\t//\t\tlike it is done by declare().\r\n\t\t// target: Object\r\n\t\t//\t\tTarget object to accept new properties.\r\n\t\t// source: Object\r\n\t\t//\t\tSource object for new properties.\r\n\t\t// description:\r\n\t\t//\t\tThis function is used to mix in properties like lang.mixin does,\r\n\t\t//\t\tbut it skips a constructor property and decorates functions like\r\n\t\t//\t\tdeclare() does.\r\n\t\t//\r\n\t\t//\t\tIt is meant to be used with classes and objects produced with\r\n\t\t//\t\tdeclare. Functions mixed in with dojo.safeMixin can use\r\n\t\t//\t\tthis.inherited() like normal methods.\r\n\t\t//\r\n\t\t//\t\tThis function is used to implement extend() method of a constructor\r\n\t\t//\t\tproduced with declare().\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\tvar A = declare(null, {\r\n\t\t//\t|\t\tm1: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"A.m1\");\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tm2: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"A.m2\");\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar B = declare(A, {\r\n\t\t//\t|\t\tm1: function(){\r\n\t\t//\t|\t\t\tthis.inherited(arguments);\r\n\t\t//\t|\t\t\tconsole.log(\"B.m1\");\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tB.extend({\r\n\t\t//\t|\t\tm2: function(){\r\n\t\t//\t|\t\t\tthis.inherited(arguments);\r\n\t\t//\t|\t\t\tconsole.log(\"B.m2\");\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar x = new B();\r\n\t\t//\t|\tdojo.safeMixin(x, {\r\n\t\t//\t|\t\tm1: function(){\r\n\t\t//\t|\t\t\tthis.inherited(arguments);\r\n\t\t//\t|\t\t\tconsole.log(\"X.m1\");\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tm2: function(){\r\n\t\t//\t|\t\t\tthis.inherited(arguments);\r\n\t\t//\t|\t\t\tconsole.log(\"X.m2\");\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tx.m2();\r\n\t\t//\t|\t// prints:\r\n\t\t//\t|\t// A.m1\r\n\t\t//\t|\t// B.m1\r\n\t\t//\t|\t// X.m1\r\n\r\n\t\tvar name, t;\r\n\t\t// add props adding metadata for incoming functions skipping a constructor\r\n\t\tfor(name in source){\r\n\t\t\tt = source[name];\r\n\t\t\tif((t !== op[name] || !(name in op)) && name != cname){\r\n\t\t\t\tif(opts.call(t) == \"[object Function]\"){\r\n\t\t\t\t\t// non-trivial function method => attach its name\r\n\t\t\t\t\tt.nom = name;\r\n\t\t\t\t}\r\n\t\t\t\ttarget[name] = t;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(has(\"bug-for-in-skips-shadowed\")){\r\n\t\t\tfor(var extraNames= lang._extraNames, i= extraNames.length; i;){\r\n\t\t\t\tname = extraNames[--i];\r\n\t\t\t\tt = source[name];\r\n\t\t\t\tif((t !== op[name] || !(name in op)) && name != cname){\r\n\t\t\t\t\tif(opts.call(t) == \"[object Function]\"){\r\n\t\t\t\t\t\t// non-trivial function method => attach its name\r\n\t\t\t\t\t\t  t.nom = name;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget[name] = t;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n\tfunction extend(source){\r\n\t\tdeclare.safeMixin(this.prototype, source);\r\n\t\treturn this;\r\n\t}\r\n\r\n    function createSubclass(mixins, props){\r\n        // crack parameters\r\n        if(!(mixins instanceof Array || typeof mixins == 'function')){\r\n            props = mixins;\r\n            mixins = undefined;\r\n        }\r\n\r\n        props = props || {};\r\n        mixins = mixins || [];\r\n\r\n        return declare([this].concat(mixins), props);\r\n    }\r\n\r\n\t// chained constructor compatible with the legacy declare()\r\n\tfunction chainedConstructor(bases, ctorSpecial){\r\n\t\treturn function(){\r\n\t\t\tvar a = arguments, args = a, a0 = a[0], f, i, m,\r\n\t\t\t\tl = bases.length, preArgs;\r\n\r\n\t\t\tif(!(this instanceof a.callee)){\r\n\t\t\t\t// not called via new, so force it\r\n\t\t\t\treturn applyNew(a);\r\n\t\t\t}\r\n\r\n\t\t\t//this._inherited = {};\r\n\t\t\t// perform the shaman's rituals of the original declare()\r\n\t\t\t// 1) call two types of the preamble\r\n\t\t\tif(ctorSpecial && (a0 && a0.preamble || this.preamble)){\r\n\t\t\t\t// full blown ritual\r\n\t\t\t\tpreArgs = new Array(bases.length);\r\n\t\t\t\t// prepare parameters\r\n\t\t\t\tpreArgs[0] = a;\r\n\t\t\t\tfor(i = 0;;){\r\n\t\t\t\t\t// process the preamble of the 1st argument\r\n\t\t\t\t\ta0 = a[0];\r\n\t\t\t\t\tif(a0){\r\n\t\t\t\t\t\tf = a0.preamble;\r\n\t\t\t\t\t\tif(f){\r\n\t\t\t\t\t\t\ta = f.apply(this, a) || a;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// process the preamble of this class\r\n\t\t\t\t\tf = bases[i].prototype;\r\n\t\t\t\t\tf = f.hasOwnProperty(\"preamble\") && f.preamble;\r\n\t\t\t\t\tif(f){\r\n\t\t\t\t\t\ta = f.apply(this, a) || a;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// one peculiarity of the preamble:\r\n\t\t\t\t\t// it is called if it is not needed,\r\n\t\t\t\t\t// e.g., there is no constructor to call\r\n\t\t\t\t\t// let's watch for the last constructor\r\n\t\t\t\t\t// (see ticket #9795)\r\n\t\t\t\t\tif(++i == l){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpreArgs[i] = a;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 2) call all non-trivial constructors using prepared arguments\r\n\t\t\tfor(i = l - 1; i >= 0; --i){\r\n\t\t\t\tf = bases[i];\r\n\t\t\t\tm = f._meta;\r\n\t\t\t\tf = m ? m.ctor : f;\r\n\t\t\t\tif(f){\r\n\t\t\t\t\tf.apply(this, preArgs ? preArgs[i] : a);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 3) continue the original ritual: call the postscript\r\n\t\t\tf = this.postscript;\r\n\t\t\tif(f){\r\n\t\t\t\tf.apply(this, args);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t// chained constructor compatible with the legacy declare()\r\n\tfunction singleConstructor(ctor, ctorSpecial){\r\n\t\treturn function(){\r\n\t\t\tvar a = arguments, t = a, a0 = a[0], f;\r\n\r\n\t\t\tif(!(this instanceof a.callee)){\r\n\t\t\t\t// not called via new, so force it\r\n\t\t\t\treturn applyNew(a);\r\n\t\t\t}\r\n\r\n\t\t\t//this._inherited = {};\r\n\t\t\t// perform the shaman's rituals of the original declare()\r\n\t\t\t// 1) call two types of the preamble\r\n\t\t\tif(ctorSpecial){\r\n\t\t\t\t// full blown ritual\r\n\t\t\t\tif(a0){\r\n\t\t\t\t\t// process the preamble of the 1st argument\r\n\t\t\t\t\tf = a0.preamble;\r\n\t\t\t\t\tif(f){\r\n\t\t\t\t\t\tt = f.apply(this, t) || t;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tf = this.preamble;\r\n\t\t\t\tif(f){\r\n\t\t\t\t\t// process the preamble of this class\r\n\t\t\t\t\tf.apply(this, t);\r\n\t\t\t\t\t// one peculiarity of the preamble:\r\n\t\t\t\t\t// it is called even if it is not needed,\r\n\t\t\t\t\t// e.g., there is no constructor to call\r\n\t\t\t\t\t// let's watch for the last constructor\r\n\t\t\t\t\t// (see ticket #9795)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 2) call a constructor\r\n\t\t\tif(ctor){\r\n\t\t\t\tctor.apply(this, a);\r\n\t\t\t}\r\n\t\t\t// 3) continue the original ritual: call the postscript\r\n\t\t\tf = this.postscript;\r\n\t\t\tif(f){\r\n\t\t\t\tf.apply(this, a);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t// plain vanilla constructor (can use inherited() to call its base constructor)\r\n\tfunction simpleConstructor(bases){\r\n\t\treturn function(){\r\n\t\t\tvar a = arguments, i = 0, f, m;\r\n\r\n\t\t\tif(!(this instanceof a.callee)){\r\n\t\t\t\t// not called via new, so force it\r\n\t\t\t\treturn applyNew(a);\r\n\t\t\t}\r\n\r\n\t\t\t//this._inherited = {};\r\n\t\t\t// perform the shaman's rituals of the original declare()\r\n\t\t\t// 1) do not call the preamble\r\n\t\t\t// 2) call the top constructor (it can use this.inherited())\r\n\t\t\tfor(; f = bases[i]; ++i){ // intentional assignment\r\n\t\t\t\tm = f._meta;\r\n\t\t\t\tf = m ? m.ctor : f;\r\n\t\t\t\tif(f){\r\n\t\t\t\t\tf.apply(this, a);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 3) call the postscript\r\n\t\t\tf = this.postscript;\r\n\t\t\tif(f){\r\n\t\t\t\tf.apply(this, a);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tfunction chain(name, bases, reversed){\r\n\t\treturn function(){\r\n\t\t\tvar b, m, f, i = 0, step = 1;\r\n\t\t\tif(reversed){\r\n\t\t\t\ti = bases.length - 1;\r\n\t\t\t\tstep = -1;\r\n\t\t\t}\r\n\t\t\tfor(; b = bases[i]; i += step){ // intentional assignment\r\n\t\t\t\tm = b._meta;\r\n\t\t\t\tf = (m ? m.hidden : b.prototype)[name];\r\n\t\t\t\tif(f){\r\n\t\t\t\t\tf.apply(this, arguments);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t// forceNew(ctor)\r\n\t// return a new object that inherits from ctor.prototype but\r\n\t// without actually running ctor on the object.\r\n\tfunction forceNew(ctor){\r\n\t\t// create object with correct prototype using a do-nothing\r\n\t\t// constructor\r\n\t\txtor.prototype = ctor.prototype;\r\n\t\tvar t = new xtor;\r\n\t\txtor.prototype = null;\t// clean up\r\n\t\treturn t;\r\n\t}\r\n\r\n\t// applyNew(args)\r\n\t// just like 'new ctor()' except that the constructor and its arguments come\r\n\t// from args, which must be an array or an arguments object\r\n\tfunction applyNew(args){\r\n\t\t// create an object with ctor's prototype but without\r\n\t\t// calling ctor on it.\r\n\t\tvar ctor = args.callee, t = forceNew(ctor);\r\n\t\t// execute the real constructor on the new object\r\n\t\tctor.apply(t, args);\r\n\t\treturn t;\r\n\t}\r\n\r\n\tfunction declare(className, superclass, props){\r\n\t\t// summary:\r\n\t\t//\t\tCreate a feature-rich constructor from compact notation.\r\n\t\t// className: String?\r\n\t\t//\t\tThe optional name of the constructor (loosely, a \"class\")\r\n\t\t//\t\tstored in the \"declaredClass\" property in the created prototype.\r\n\t\t//\t\tIt will be used as a global name for a created constructor.\r\n\t\t// superclass: Function|Function[]\r\n\t\t//\t\tMay be null, a Function, or an Array of Functions. This argument\r\n\t\t//\t\tspecifies a list of bases (the left-most one is the most deepest\r\n\t\t//\t\tbase).\r\n\t\t// props: Object\r\n\t\t//\t\tAn object whose properties are copied to the created prototype.\r\n\t\t//\t\tAdd an instance-initialization function by making it a property\r\n\t\t//\t\tnamed \"constructor\".\r\n\t\t// returns: dojo/_base/declare.__DeclareCreatedObject\r\n\t\t//\t\tNew constructor function.\r\n\t\t// description:\r\n\t\t//\t\tCreate a constructor using a compact notation for inheritance and\r\n\t\t//\t\tprototype extension.\r\n\t\t//\r\n\t\t//\t\tMixin ancestors provide a type of multiple inheritance.\r\n\t\t//\t\tPrototypes of mixin ancestors are copied to the new class:\r\n\t\t//\t\tchanges to mixin prototypes will not affect classes to which\r\n\t\t//\t\tthey have been mixed in.\r\n\t\t//\r\n\t\t//\t\tAncestors can be compound classes created by this version of\r\n\t\t//\t\tdeclare(). In complex cases all base classes are going to be\r\n\t\t//\t\tlinearized according to C3 MRO algorithm\r\n\t\t//\t\t(see http://www.python.org/download/releases/2.3/mro/ for more\r\n\t\t//\t\tdetails).\r\n\t\t//\r\n\t\t//\t\t\"className\" is cached in \"declaredClass\" property of the new class,\r\n\t\t//\t\tif it was supplied. The immediate super class will be cached in\r\n\t\t//\t\t\"superclass\" property of the new class.\r\n\t\t//\r\n\t\t//\t\tMethods in \"props\" will be copied and modified: \"nom\" property\r\n\t\t//\t\t(the declared name of the method) will be added to all copied\r\n\t\t//\t\tfunctions to help identify them for the internal machinery. Be\r\n\t\t//\t\tvery careful, while reusing methods: if you use the same\r\n\t\t//\t\tfunction under different names, it can produce errors in some\r\n\t\t//\t\tcases.\r\n\t\t//\r\n\t\t//\t\tIt is possible to use constructors created \"manually\" (without\r\n\t\t//\t\tdeclare()) as bases. They will be called as usual during the\r\n\t\t//\t\tcreation of an instance, their methods will be chained, and even\r\n\t\t//\t\tcalled by \"this.inherited()\".\r\n\t\t//\r\n\t\t//\t\tSpecial property \"-chains-\" governs how to chain methods. It is\r\n\t\t//\t\ta dictionary, which uses method names as keys, and hint strings\r\n\t\t//\t\tas values. If a hint string is \"after\", this method will be\r\n\t\t//\t\tcalled after methods of its base classes. If a hint string is\r\n\t\t//\t\t\"before\", this method will be called before methods of its base\r\n\t\t//\t\tclasses.\r\n\t\t//\r\n\t\t//\t\tIf \"constructor\" is not mentioned in \"-chains-\" property, it will\r\n\t\t//\t\tbe chained using the legacy mode: using \"after\" chaining,\r\n\t\t//\t\tcalling preamble() method before each constructor, if available,\r\n\t\t//\t\tand calling postscript() after all constructors were executed.\r\n\t\t//\t\tIf the hint is \"after\", it is chained as a regular method, but\r\n\t\t//\t\tpostscript() will be called after the chain of constructors.\r\n\t\t//\t\t\"constructor\" cannot be chained \"before\", but it allows\r\n\t\t//\t\ta special hint string: \"manual\", which means that constructors\r\n\t\t//\t\tare not going to be chained in any way, and programmer will call\r\n\t\t//\t\tthem manually using this.inherited(). In the latter case\r\n\t\t//\t\tpostscript() will be called after the construction.\r\n\t\t//\r\n\t\t//\t\tAll chaining hints are \"inherited\" from base classes and\r\n\t\t//\t\tpotentially can be overridden. Be very careful when overriding\r\n\t\t//\t\thints! Make sure that all chained methods can work in a proposed\r\n\t\t//\t\tmanner of chaining.\r\n\t\t//\r\n\t\t//\t\tOnce a method was chained, it is impossible to unchain it. The\r\n\t\t//\t\tonly exception is \"constructor\". You don't need to define a\r\n\t\t//\t\tmethod in order to supply a chaining hint.\r\n\t\t//\r\n\t\t//\t\tIf a method is chained, it cannot use this.inherited() because\r\n\t\t//\t\tall other methods in the hierarchy will be called automatically.\r\n\t\t//\r\n\t\t//\t\tUsually constructors and initializers of any kind are chained\r\n\t\t//\t\tusing \"after\" and destructors of any kind are chained as\r\n\t\t//\t\t\"before\". Note that chaining assumes that chained methods do not\r\n\t\t//\t\treturn any value: any returned value will be discarded.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\tdeclare(\"my.classes.bar\", my.classes.foo, {\r\n\t\t//\t|\t\t// properties to be added to the class prototype\r\n\t\t//\t|\t\tsomeValue: 2,\r\n\t\t//\t|\t\t// initialization function\r\n\t\t//\t|\t\tconstructor: function(){\r\n\t\t//\t|\t\t\tthis.myComplicatedObject = new ReallyComplicatedObject();\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\t// other functions\r\n\t\t//\t|\t\tsomeMethod: function(){\r\n\t\t//\t|\t\t\tdoStuff();\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\tvar MyBase = declare(null, {\r\n\t\t//\t|\t\t// constructor, properties, and methods go here\r\n\t\t//\t|\t\t// ...\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar MyClass1 = declare(MyBase, {\r\n\t\t//\t|\t\t// constructor, properties, and methods go here\r\n\t\t//\t|\t\t// ...\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar MyClass2 = declare(MyBase, {\r\n\t\t//\t|\t\t// constructor, properties, and methods go here\r\n\t\t//\t|\t\t// ...\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar MyDiamond = declare([MyClass1, MyClass2], {\r\n\t\t//\t|\t\t// constructor, properties, and methods go here\r\n\t\t//\t|\t\t// ...\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\tvar F = function(){ console.log(\"raw constructor\"); };\r\n\t\t//\t|\tF.prototype.method = function(){\r\n\t\t//\t|\t\tconsole.log(\"raw method\");\r\n\t\t//\t|\t};\r\n\t\t//\t|\tvar A = declare(F, {\r\n\t\t//\t|\t\tconstructor: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"A.constructor\");\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tmethod: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"before calling F.method...\");\r\n\t\t//\t|\t\t\tthis.inherited(arguments);\r\n\t\t//\t|\t\t\tconsole.log(\"...back in A\");\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tnew A().method();\r\n\t\t//\t|\t// will print:\r\n\t\t//\t|\t// raw constructor\r\n\t\t//\t|\t// A.constructor\r\n\t\t//\t|\t// before calling F.method...\r\n\t\t//\t|\t// raw method\r\n\t\t//\t|\t// ...back in A\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\tvar A = declare(null, {\r\n\t\t//\t|\t\t\"-chains-\": {\r\n\t\t//\t|\t\t\tdestroy: \"before\"\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar B = declare(A, {\r\n\t\t//\t|\t\tconstructor: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"B.constructor\");\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tdestroy: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"B.destroy\");\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar C = declare(B, {\r\n\t\t//\t|\t\tconstructor: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"C.constructor\");\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tdestroy: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"C.destroy\");\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tnew C().destroy();\r\n\t\t//\t|\t// prints:\r\n\t\t//\t|\t// B.constructor\r\n\t\t//\t|\t// C.constructor\r\n\t\t//\t|\t// C.destroy\r\n\t\t//\t|\t// B.destroy\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\tvar A = declare(null, {\r\n\t\t//\t|\t\t\"-chains-\": {\r\n\t\t//\t|\t\t\tconstructor: \"manual\"\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar B = declare(A, {\r\n\t\t//\t|\t\tconstructor: function(){\r\n\t\t//\t|\t\t\t// ...\r\n\t\t//\t|\t\t\t// call the base constructor with new parameters\r\n\t\t//\t|\t\t\tthis.inherited(arguments, [1, 2, 3]);\r\n\t\t//\t|\t\t\t// ...\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\tvar A = declare(null, {\r\n\t\t//\t|\t\t\"-chains-\": {\r\n\t\t//\t|\t\t\tm1: \"before\"\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tm1: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"A.m1\");\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tm2: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"A.m2\");\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar B = declare(A, {\r\n\t\t//\t|\t\t\"-chains-\": {\r\n\t\t//\t|\t\t\tm2: \"after\"\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tm1: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"B.m1\");\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tm2: function(){\r\n\t\t//\t|\t\t\tconsole.log(\"B.m2\");\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\tvar x = new B();\r\n\t\t//\t|\tx.m1();\r\n\t\t//\t|\t// prints:\r\n\t\t//\t|\t// B.m1\r\n\t\t//\t|\t// A.m1\r\n\t\t//\t|\tx.m2();\r\n\t\t//\t|\t// prints:\r\n\t\t//\t|\t// A.m2\r\n\t\t//\t|\t// B.m2\r\n\r\n\t\t// crack parameters\r\n\t\tif(typeof className != \"string\"){\r\n\t\t\tprops = superclass;\r\n\t\t\tsuperclass = className;\r\n\t\t\tclassName = \"\";\r\n\t\t}\r\n\t\tprops = props || {};\r\n\r\n\t\tvar proto, i, t, ctor, name, bases, chains, mixins = 1, parents = superclass;\r\n\r\n\t\t// build a prototype\r\n\t\tif(opts.call(superclass) == \"[object Array]\"){\r\n\t\t\t// C3 MRO\r\n\t\t\tbases = c3mro(superclass, className);\r\n\t\t\tt = bases[0];\r\n\t\t\tmixins = bases.length - t;\r\n\t\t\tsuperclass = bases[mixins];\r\n\t\t}else{\r\n\t\t\tbases = [0];\r\n\t\t\tif(superclass){\r\n\t\t\t\tif(opts.call(superclass) == \"[object Function]\"){\r\n\t\t\t\t\tt = superclass._meta;\r\n\t\t\t\t\tbases = bases.concat(t ? t.bases : superclass);\r\n\t\t\t\t}else{\r\n\t\t\t\t\terr(\"base class is not a callable constructor.\", className);\r\n\t\t\t\t}\r\n\t\t\t}else if(superclass !== null){\r\n\t\t\t\terr(\"unknown base class. Did you use dojo.require to pull it in?\", className);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(superclass){\r\n\t\t\tfor(i = mixins - 1;; --i){\r\n\t\t\t\tproto = forceNew(superclass);\r\n\t\t\t\tif(!i){\r\n\t\t\t\t\t// stop if nothing to add (the last base)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t// mix in properties\r\n\t\t\t\tt = bases[i];\r\n\t\t\t\t(t._meta ? mixOwn : mix)(proto, t.prototype);\r\n\t\t\t\t// chain in new constructor\r\n\t\t\t\tctor = new Function;\r\n\t\t\t\tctor.superclass = superclass;\r\n\t\t\t\tctor.prototype = proto;\r\n\t\t\t\tsuperclass = proto.constructor = ctor;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tproto = {};\r\n\t\t}\r\n\t\t// add all properties\r\n\t\tdeclare.safeMixin(proto, props);\r\n\t\t// add constructor\r\n\t\tt = props.constructor;\r\n\t\tif(t !== op.constructor){\r\n\t\t\tt.nom = cname;\r\n\t\t\tproto.constructor = t;\r\n\t\t}\r\n\r\n\t\t// collect chains and flags\r\n\t\tfor(i = mixins - 1; i; --i){ // intentional assignment\r\n\t\t\tt = bases[i]._meta;\r\n\t\t\tif(t && t.chains){\r\n\t\t\t\tchains = mix(chains || {}, t.chains);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(proto[\"-chains-\"]){\r\n\t\t\tchains = mix(chains || {}, proto[\"-chains-\"]);\r\n\t\t}\r\n\r\n\t\t// build ctor\r\n\t\tt = !chains || !chains.hasOwnProperty(cname);\r\n\t\tbases[0] = ctor = (chains && chains.constructor === \"manual\") ? simpleConstructor(bases) :\r\n\t\t\t(bases.length == 1 ? singleConstructor(props.constructor, t) : chainedConstructor(bases, t));\r\n\r\n\t\t// add meta information to the constructor\r\n\t\tctor._meta  = {bases: bases, hidden: props, chains: chains,\r\n\t\t\tparents: parents, ctor: props.constructor};\r\n\t\tctor.superclass = superclass && superclass.prototype;\r\n\t\tctor.extend = extend;\r\n\t\tctor.createSubclass = createSubclass;\r\n\t\tctor.prototype = proto;\r\n\t\tproto.constructor = ctor;\r\n\r\n\t\t// add \"standard\" methods to the prototype\r\n\t\tproto.getInherited = getInherited;\r\n\t\tproto.isInstanceOf = isInstanceOf;\r\n\t\tproto.inherited    = inheritedImpl;\r\n\t\tproto.__inherited  = inherited;\r\n\r\n\t\t// add name if specified\r\n\t\tif(className){\r\n\t\t\tproto.declaredClass = className;\r\n\t\t\tlang.setObject(className, ctor);\r\n\t\t}\r\n\r\n\t\t// build chains and add them to the prototype\r\n\t\tif(chains){\r\n\t\t\tfor(name in chains){\r\n\t\t\t\tif(proto[name] && typeof chains[name] == \"string\" && name != cname){\r\n\t\t\t\t\tt = proto[name] = chain(name, bases, chains[name] === \"after\");\r\n\t\t\t\t\tt.nom = name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// chained methods do not return values\r\n\t\t// no need to chain \"invisible\" functions\r\n\r\n\t\treturn ctor;\t// Function\r\n\t}\r\n\r\n\t/*=====\r\n\tdeclare.__DeclareCreatedObject = {\r\n\t\t// summary:\r\n\t\t//\t\tdojo/_base/declare() returns a constructor `C`.   `new C()` returns an Object with the following\r\n\t\t//\t\tmethods, in addition to the methods and properties specified via the arguments passed to declare().\r\n\r\n\t\tinherited: function(name, args, newArgs){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalls a super method.\r\n\t\t\t// name: String?\r\n\t\t\t//\t\tThe optional method name. Should be the same as the caller's\r\n\t\t\t//\t\tname. Usually \"name\" is specified in complex dynamic cases, when\r\n\t\t\t//\t\tthe calling method was dynamically added, undecorated by\r\n\t\t\t//\t\tdeclare(), and it cannot be determined.\r\n\t\t\t// args: Arguments\r\n\t\t\t//\t\tThe caller supply this argument, which should be the original\r\n\t\t\t//\t\t\"arguments\".\r\n\t\t\t// newArgs: Object?\r\n\t\t\t//\t\tIf \"true\", the found function will be returned without\r\n\t\t\t//\t\texecuting it.\r\n\t\t\t//\t\tIf Array, it will be used to call a super method. Otherwise\r\n\t\t\t//\t\t\"args\" will be used.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tWhatever is returned by a super method, or a super method itself,\r\n\t\t\t//\t\tif \"true\" was specified as newArgs.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis method is used inside method of classes produced with\r\n\t\t\t//\t\tdeclare() to call a super method (next in the chain). It is\r\n\t\t\t//\t\tused for manually controlled chaining. Consider using the regular\r\n\t\t\t//\t\tchaining, because it is faster. Use \"this.inherited()\" only in\r\n\t\t\t//\t\tcomplex cases.\r\n\t\t\t//\r\n\t\t\t//\t\tThis method cannot me called from automatically chained\r\n\t\t\t//\t\tconstructors including the case of a special (legacy)\r\n\t\t\t//\t\tconstructor chaining. It cannot be called from chained methods.\r\n\t\t\t//\r\n\t\t\t//\t\tIf \"this.inherited()\" cannot find the next-in-chain method, it\r\n\t\t\t//\t\tdoes nothing and returns \"undefined\". The last method in chain\r\n\t\t\t//\t\tcan be a default method implemented in Object, which will be\r\n\t\t\t//\t\tcalled last.\r\n\t\t\t//\r\n\t\t\t//\t\tIf \"name\" is specified, it is assumed that the method that\r\n\t\t\t//\t\treceived \"args\" is the parent method for this call. It is looked\r\n\t\t\t//\t\tup in the chain list and if it is found the next-in-chain method\r\n\t\t\t//\t\tis called. If it is not found, the first-in-chain method is\r\n\t\t\t//\t\tcalled.\r\n\t\t\t//\r\n\t\t\t//\t\tIf \"name\" is not specified, it will be derived from the calling\r\n\t\t\t//\t\tmethod (using a methoid property \"nom\").\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\tvar B = declare(A, {\r\n\t\t\t//\t|\t\tmethod1: function(a, b, c){\r\n\t\t\t//\t|\t\t\tthis.inherited(arguments);\r\n\t\t\t//\t|\t\t},\r\n\t\t\t//\t|\t\tmethod2: function(a, b){\r\n\t\t\t//\t|\t\t\treturn this.inherited(arguments, [a + b]);\r\n\t\t\t//\t|\t\t}\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\t// next method is not in the chain list because it is added\r\n\t\t\t//\t|\t// manually after the class was created.\r\n\t\t\t//\t|\tB.prototype.method3 = function(){\r\n\t\t\t//\t|\t\tconsole.log(\"This is a dynamically-added method.\");\r\n\t\t\t//\t|\t\tthis.inherited(\"method3\", arguments);\r\n\t\t\t//\t|\t};\r\n\t\t\t// example:\r\n\t\t\t//\t|\tvar B = declare(A, {\r\n\t\t\t//\t|\t\tmethod: function(a, b){\r\n\t\t\t//\t|\t\t\tvar super = this.inherited(arguments, true);\r\n\t\t\t//\t|\t\t\t// ...\r\n\t\t\t//\t|\t\t\tif(!super){\r\n\t\t\t//\t|\t\t\t\tconsole.log(\"there is no super method\");\r\n\t\t\t//\t|\t\t\t\treturn 0;\r\n\t\t\t//\t|\t\t\t}\r\n\t\t\t//\t|\t\t\treturn super.apply(this, arguments);\r\n\t\t\t//\t|\t\t}\r\n\t\t\t//\t|\t});\r\n\t\t\treturn\t{};\t// Object\r\n\t\t},\r\n\r\n\t\tgetInherited: function(name, args){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a super method.\r\n\t\t\t// name: String?\r\n\t\t\t//\t\tThe optional method name. Should be the same as the caller's\r\n\t\t\t//\t\tname. Usually \"name\" is specified in complex dynamic cases, when\r\n\t\t\t//\t\tthe calling method was dynamically added, undecorated by\r\n\t\t\t//\t\tdeclare(), and it cannot be determined.\r\n\t\t\t// args: Arguments\r\n\t\t\t//\t\tThe caller supply this argument, which should be the original\r\n\t\t\t//\t\t\"arguments\".\r\n\t\t\t// returns:\r\n\t\t\t//\t\tReturns a super method (Function) or \"undefined\".\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis method is a convenience method for \"this.inherited()\".\r\n\t\t\t//\t\tIt uses the same algorithm but instead of executing a super\r\n\t\t\t//\t\tmethod, it returns it, or \"undefined\" if not found.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\tvar B = declare(A, {\r\n\t\t\t//\t|\t\tmethod: function(a, b){\r\n\t\t\t//\t|\t\t\tvar super = this.getInherited(arguments);\r\n\t\t\t//\t|\t\t\t// ...\r\n\t\t\t//\t|\t\t\tif(!super){\r\n\t\t\t//\t|\t\t\t\tconsole.log(\"there is no super method\");\r\n\t\t\t//\t|\t\t\t\treturn 0;\r\n\t\t\t//\t|\t\t\t}\r\n\t\t\t//\t|\t\t\treturn super.apply(this, arguments);\r\n\t\t\t//\t|\t\t}\r\n\t\t\t//\t|\t});\r\n\t\t\treturn\t{};\t// Object\r\n\t\t},\r\n\r\n\t\tisInstanceOf: function(cls){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks the inheritance chain to see if it is inherited from this\r\n\t\t\t//\t\tclass.\r\n\t\t\t// cls: Function\r\n\t\t\t//\t\tClass constructor.\r\n\t\t\t// returns:\r\n\t\t\t//\t\t\"true\", if this object is inherited from this class, \"false\"\r\n\t\t\t//\t\totherwise.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis method is used with instances of classes produced with\r\n\t\t\t//\t\tdeclare() to determine of they support a certain interface or\r\n\t\t\t//\t\tnot. It models \"instanceof\" operator.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\tvar A = declare(null, {\r\n\t\t\t//\t|\t\t// constructor, properties, and methods go here\r\n\t\t\t//\t|\t\t// ...\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\tvar B = declare(null, {\r\n\t\t\t//\t|\t\t// constructor, properties, and methods go here\r\n\t\t\t//\t|\t\t// ...\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\tvar C = declare([A, B], {\r\n\t\t\t//\t|\t\t// constructor, properties, and methods go here\r\n\t\t\t//\t|\t\t// ...\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\tvar D = declare(A, {\r\n\t\t\t//\t|\t\t// constructor, properties, and methods go here\r\n\t\t\t//\t|\t\t// ...\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\r\n\t\t\t//\t|\tvar a = new A(), b = new B(), c = new C(), d = new D();\r\n\t\t\t//\t|\r\n\t\t\t//\t|\tconsole.log(a.isInstanceOf(A)); // true\r\n\t\t\t//\t|\tconsole.log(b.isInstanceOf(A)); // false\r\n\t\t\t//\t|\tconsole.log(c.isInstanceOf(A)); // true\r\n\t\t\t//\t|\tconsole.log(d.isInstanceOf(A)); // true\r\n\t\t\t//\t|\r\n\t\t\t//\t|\tconsole.log(a.isInstanceOf(B)); // false\r\n\t\t\t//\t|\tconsole.log(b.isInstanceOf(B)); // true\r\n\t\t\t//\t|\tconsole.log(c.isInstanceOf(B)); // true\r\n\t\t\t//\t|\tconsole.log(d.isInstanceOf(B)); // false\r\n\t\t\t//\t|\r\n\t\t\t//\t|\tconsole.log(a.isInstanceOf(C)); // false\r\n\t\t\t//\t|\tconsole.log(b.isInstanceOf(C)); // false\r\n\t\t\t//\t|\tconsole.log(c.isInstanceOf(C)); // true\r\n\t\t\t//\t|\tconsole.log(d.isInstanceOf(C)); // false\r\n\t\t\t//\t|\r\n\t\t\t//\t|\tconsole.log(a.isInstanceOf(D)); // false\r\n\t\t\t//\t|\tconsole.log(b.isInstanceOf(D)); // false\r\n\t\t\t//\t|\tconsole.log(c.isInstanceOf(D)); // false\r\n\t\t\t//\t|\tconsole.log(d.isInstanceOf(D)); // true\r\n\t\t\treturn\t{};\t// Object\r\n\t\t},\r\n\r\n\t\textend: function(source){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds all properties and methods of source to constructor's\r\n\t\t\t//\t\tprototype, making them available to all instances created with\r\n\t\t\t//\t\tconstructor. This method is specific to constructors created with\r\n\t\t\t//\t\tdeclare().\r\n\t\t\t// source: Object\r\n\t\t\t//\t\tSource object which properties are going to be copied to the\r\n\t\t\t//\t\tconstructor's prototype.\r\n\t\t\t// description:\r\n\t\t\t//\t\tAdds source properties to the constructor's prototype. It can\r\n\t\t\t//\t\toverride existing properties.\r\n\t\t\t//\r\n\t\t\t//\t\tThis method is similar to dojo.extend function, but it is specific\r\n\t\t\t//\t\tto constructors produced by declare(). It is implemented\r\n\t\t\t//\t\tusing dojo.safeMixin, and it skips a constructor property,\r\n\t\t\t//\t\tand properly decorates copied functions.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\tvar A = declare(null, {\r\n\t\t\t//\t|\t\tm1: function(){},\r\n\t\t\t//\t|\t\ts1: \"Popokatepetl\"\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\tA.extend({\r\n\t\t\t//\t|\t\tm1: function(){},\r\n\t\t\t//\t|\t\tm2: function(){},\r\n\t\t\t//\t|\t\tf1: true,\r\n\t\t\t//\t|\t\td1: 42\r\n\t\t\t//\t|\t});\r\n\t\t},\r\n\r\n\t\tcreateSubclass: function(mixins, props){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreate a subclass of the declared class from a list of base classes.\r\n\t\t\t// mixins: Function[]\r\n\t\t\t//\t\tSpecifies a list of bases (the left-most one is the most deepest\r\n\t\t\t//\t\tbase).\r\n\t\t\t// props: Object?\r\n\t\t\t//\t\tAn optional object whose properties are copied to the created prototype.\r\n\t\t\t// returns: dojo/_base/declare.__DeclareCreatedObject\r\n\t\t\t//\t\tNew constructor function.\r\n\t\t\t// description:\r\n\t\t\t//\t\tCreate a constructor using a compact notation for inheritance and\r\n\t\t\t//\t\tprototype extension.\r\n\t\t\t//\r\n\t\t\t//\t\tMixin ancestors provide a type of multiple inheritance.\r\n\t\t\t//\t\tPrototypes of mixin ancestors are copied to the new class:\r\n\t\t\t//\t\tchanges to mixin prototypes will not affect classes to which\r\n\t\t\t//\t\tthey have been mixed in.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\tvar A = declare(null, {\r\n\t\t\t//\t|\t\tm1: function(){},\r\n\t\t\t//\t|\t\ts1: \"bar\"\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\tvar B = declare(null, {\r\n\t\t\t//\t|\t\tm2: function(){},\r\n\t\t\t//\t|\t\ts2: \"foo\"\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\tvar C = declare(null, {\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\tvar D1 = A.createSubclass([B, C], {\r\n\t\t\t//\t|\t\tm1: function(){},\r\n\t\t\t//\t|\t\td1: 42\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\tvar d1 = new D1();\r\n\t\t\t//\t|\r\n\t\t\t//\t|\t// this is equivalent to:\r\n\t\t\t//\t|\tvar D2 = declare([A, B, C], {\r\n\t\t\t//\t|\t\tm1: function(){},\r\n\t\t\t//\t|\t\td1: 42\r\n\t\t\t//\t|\t});\r\n\t\t\t//\t|\tvar d2 = new D2();\r\n\t\t}\r\n\t};\r\n\t=====*/\r\n\r\n\t// For back-compat, remove for 2.0\r\n\tdojo.safeMixin = declare.safeMixin = safeMixin;\r\n\tdojo.declare = declare;\r\n\r\n\treturn declare;\r\n});\r\n\n\ndefine('dojo/on',[\"./has!dom-addeventlistener?:./aspect\", \"./_base/kernel\", \"./sniff\"], function(aspect, dojo, has){\r\n\r\n\t\"use strict\";\r\n\tif(has(\"dom\")){ // check to make sure we are in a browser, this module should work anywhere\r\n\t\tvar major = window.ScriptEngineMajorVersion;\r\n\t\thas.add(\"jscript\", major && (major() + ScriptEngineMinorVersion() / 10));\r\n\t\thas.add(\"event-orientationchange\", has(\"touch\") && !has(\"android\")); // TODO: how do we detect this?\r\n\t\thas.add(\"event-stopimmediatepropagation\", window.Event && !!window.Event.prototype && !!window.Event.prototype.stopImmediatePropagation);\r\n\t\thas.add(\"event-focusin\", function(global, doc, element){\r\n\t\t\treturn 'onfocusin' in element;\r\n\t\t});\r\n\t\t\r\n\t\tif(has(\"touch\")){\r\n\t\t\thas.add(\"touch-can-modify-event-delegate\", function(){\r\n\t\t\t\t// This feature test checks whether deleting a property of an event delegate works\r\n\t\t\t\t// for a touch-enabled device. If it works, event delegation can be used as fallback\r\n\t\t\t\t// for browsers such as Safari in older iOS where deleting properties of the original\r\n\t\t\t\t// event does not work.\r\n\t\t\t\tvar EventDelegate = function(){};\r\n\t\t\t\tEventDelegate.prototype =\r\n\t\t\t\t\tdocument.createEvent(\"MouseEvents\"); // original event\r\n\t\t\t\t// Attempt to modify a property of an event delegate and check if\r\n\t\t\t\t// it succeeds. Depending on browsers and on whether dojo/on's\r\n\t\t\t\t// strict mode is stripped in a Dojo build, there are 3 known behaviors:\r\n\t\t\t\t// it may either succeed, or raise an error, or fail to set the property\r\n\t\t\t\t// without raising an error.\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar eventDelegate = new EventDelegate;\r\n\t\t\t\t\teventDelegate.target = null;\r\n\t\t\t\t\treturn eventDelegate.target === null;\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn false; // cannot use event delegation\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tvar on = function(target, type, listener, dontFix){\r\n\t\t// summary:\r\n\t\t//\t\tA function that provides core event listening functionality. With this function\r\n\t\t//\t\tyou can provide a target, event type, and listener to be notified of\r\n\t\t//\t\tfuture matching events that are fired.\r\n\t\t// target: Element|Object\r\n\t\t//\t\tThis is the target object or DOM element that to receive events from\r\n\t\t// type: String|Function\r\n\t\t//\t\tThis is the name of the event to listen for or an extension event type.\r\n\t\t// listener: Function\r\n\t\t//\t\tThis is the function that should be called when the event fires.\r\n\t\t// returns: Object\r\n\t\t//\t\tAn object with a remove() method that can be used to stop listening for this\r\n\t\t//\t\tevent.\r\n\t\t// description:\r\n\t\t//\t\tTo listen for \"click\" events on a button node, we can do:\r\n\t\t//\t\t|\tdefine([\"dojo/on\"], function(on){\r\n\t\t//\t\t|\t\ton(button, \"click\", clickHandler);\r\n\t\t//\t\t|\t\t...\r\n\t\t//\t\tEvented JavaScript objects can also have their own events.\r\n\t\t//\t\t|\tvar obj = new Evented;\r\n\t\t//\t\t|\ton(obj, \"foo\", fooHandler);\r\n\t\t//\t\tAnd then we could publish a \"foo\" event:\r\n\t\t//\t\t|\ton.emit(obj, \"foo\", {key: \"value\"});\r\n\t\t//\t\tWe can use extension events as well. For example, you could listen for a tap gesture:\r\n\t\t//\t\t|\tdefine([\"dojo/on\", \"dojo/gesture/tap\", function(on, tap){\r\n\t\t//\t\t|\t\ton(button, tap, tapHandler);\r\n\t\t//\t\t|\t\t...\r\n\t\t//\t\twhich would trigger fooHandler. Note that for a simple object this is equivalent to calling:\r\n\t\t//\t\t|\tobj.onfoo({key:\"value\"});\r\n\t\t//\t\tIf you use on.emit on a DOM node, it will use native event dispatching when possible.\r\n\r\n\t\tif(typeof target.on == \"function\" && typeof type != \"function\" && !target.nodeType){\r\n\t\t\t// delegate to the target's on() method, so it can handle it's own listening if it wants (unless it \r\n\t\t\t// is DOM node and we may be dealing with jQuery or Prototype's incompatible addition to the\r\n\t\t\t// Element prototype \r\n\t\t\treturn target.on(type, listener);\r\n\t\t}\r\n\t\t// delegate to main listener code\r\n\t\treturn on.parse(target, type, listener, addListener, dontFix, this);\r\n\t};\r\n\ton.pausable =  function(target, type, listener, dontFix){\r\n\t\t// summary:\r\n\t\t//\t\tThis function acts the same as on(), but with pausable functionality. The\r\n\t\t//\t\treturned signal object has pause() and resume() functions. Calling the\r\n\t\t//\t\tpause() method will cause the listener to not be called for future events. Calling the\r\n\t\t//\t\tresume() method will cause the listener to again be called for future events.\r\n\t\tvar paused;\r\n\t\tvar signal = on(target, type, function(){\r\n\t\t\tif(!paused){\r\n\t\t\t\treturn listener.apply(this, arguments);\r\n\t\t\t}\r\n\t\t}, dontFix);\r\n\t\tsignal.pause = function(){\r\n\t\t\tpaused = true;\r\n\t\t};\r\n\t\tsignal.resume = function(){\r\n\t\t\tpaused = false;\r\n\t\t};\r\n\t\treturn signal;\r\n\t};\r\n\ton.once = function(target, type, listener, dontFix){\r\n\t\t// summary:\r\n\t\t//\t\tThis function acts the same as on(), but will only call the listener once. The \r\n\t\t//\t\tlistener will be called for the first\r\n\t\t//\t\tevent that takes place and then listener will automatically be removed.\r\n\t\tvar signal = on(target, type, function(){\r\n\t\t\t// remove this listener\r\n\t\t\tsignal.remove();\r\n\t\t\t// proceed to call the listener\r\n\t\t\treturn listener.apply(this, arguments);\r\n\t\t});\r\n\t\treturn signal;\r\n\t};\r\n\ton.parse = function(target, type, listener, addListener, dontFix, matchesTarget){\r\n\t\tif(type.call){\r\n\t\t\t// event handler function\r\n\t\t\t// on(node, touch.press, touchListener);\r\n\t\t\treturn type.call(matchesTarget, target, listener);\r\n\t\t}\r\n\r\n\t\tif(type instanceof Array){\r\n\t\t\t// allow an array of event names (or event handler functions)\r\n\t\t\tevents = type;\r\n\t\t}else if(type.indexOf(\",\") > -1){\r\n\t\t\t// we allow comma delimited event names, so you can register for multiple events at once\r\n\t\t\tvar events = type.split(/\\s*,\\s*/);\r\n\t\t} \r\n\t\tif(events){\r\n\t\t\tvar handles = [];\r\n\t\t\tvar i = 0;\r\n\t\t\tvar eventName;\r\n\t\t\twhile(eventName = events[i++]){\r\n\t\t\t\thandles.push(on.parse(target, eventName, listener, addListener, dontFix, matchesTarget));\r\n\t\t\t}\r\n\t\t\thandles.remove = function(){\r\n\t\t\t\tfor(var i = 0; i < handles.length; i++){\r\n\t\t\t\t\thandles[i].remove();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn handles;\r\n\t\t}\r\n\t\treturn addListener(target, type, listener, dontFix, matchesTarget);\r\n\t};\r\n\tvar touchEvents = /^touch/;\r\n\tfunction addListener(target, type, listener, dontFix, matchesTarget){\r\n\t\t// event delegation:\r\n\t\tvar selector = type.match(/(.*):(.*)/);\r\n\t\t// if we have a selector:event, the last one is interpreted as an event, and we use event delegation\r\n\t\tif(selector){\r\n\t\t\ttype = selector[2];\r\n\t\t\tselector = selector[1];\r\n\t\t\t// create the extension event for selectors and directly call it\r\n\t\t\treturn on.selector(selector, type).call(matchesTarget, target, listener);\r\n\t\t}\r\n\t\t// test to see if it a touch event right now, so we don't have to do it every time it fires\r\n\t\tif(has(\"touch\")){\r\n\t\t\tif(touchEvents.test(type)){\r\n\t\t\t\t// touch event, fix it\r\n\t\t\t\tlistener = fixTouchListener(listener);\r\n\t\t\t}\r\n\t\t\tif(!has(\"event-orientationchange\") && (type == \"orientationchange\")){\r\n\t\t\t\t//\"orientationchange\" not supported <= Android 2.1, \r\n\t\t\t\t//but works through \"resize\" on window\r\n\t\t\t\ttype = \"resize\"; \r\n\t\t\t\ttarget = window;\r\n\t\t\t\tlistener = fixTouchListener(listener);\r\n\t\t\t} \r\n\t\t}\r\n\t\tif(addStopImmediate){\r\n\t\t\t// add stopImmediatePropagation if it doesn't exist\r\n\t\t\tlistener = addStopImmediate(listener);\r\n\t\t}\r\n\t\t// normal path, the target is |this|\r\n\t\tif(target.addEventListener){\r\n\t\t\t// the target has addEventListener, which should be used if available (might or might not be a node, non-nodes can implement this method as well)\r\n\t\t\t// check for capture conversions\r\n\t\t\tvar capture = type in captures,\r\n\t\t\t\tadjustedType = capture ? captures[type] : type;\r\n\t\t\ttarget.addEventListener(adjustedType, listener, capture);\r\n\t\t\t// create and return the signal\r\n\t\t\treturn {\r\n\t\t\t\tremove: function(){\r\n\t\t\t\t\ttarget.removeEventListener(adjustedType, listener, capture);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\ttype = \"on\" + type;\r\n\t\tif(fixAttach && target.attachEvent){\r\n\t\t\treturn fixAttach(target, type, listener);\r\n\t\t}\r\n\t\tthrow new Error(\"Target must be an event emitter\");\r\n\t}\r\n\ton.matches = function(node, selector, context, children, matchesTarget) {\r\n\t\t// summary:\r\n\t\t//\t\tCheck if a node match the current selector within the constraint of a context\r\n\t\t// node: DOMNode\r\n\t\t//\t\tThe node that originate the event\r\n\t\t// selector: String\r\n\t\t//\t\tThe selector to check against\r\n\t\t// context: DOMNode\r\n\t\t//\t\tThe context to search in.\r\n\t\t// children: Boolean\r\n\t\t//\t\tIndicates if children elements of the selector should be allowed. This defaults to\r\n\t\t//\t\ttrue\r\n\t\t// matchesTarget: Object|dojo/query?\r\n\t\t//\t\tAn object with a property \"matches\" as a function. Default is dojo/query.\r\n\t\t//\t\tMatching DOMNodes will be done against this function\r\n\t\t//\t\tThe function must return a Boolean.\r\n\t\t//\t\tIt will have 3 arguments: \"node\", \"selector\" and \"context\"\r\n\t\t//\t\tTrue is expected if \"node\" is matching the current \"selector\" in the passed \"context\"\r\n\t\t// returns: DOMNode?\r\n\t\t//\t\tThe matching node, if any. Else you get false\r\n\r\n\t\t// see if we have a valid matchesTarget or default to dojo/query\r\n\t\tmatchesTarget = matchesTarget && matchesTarget.matches ? matchesTarget : dojo.query;\r\n\t\tchildren = children !== false;\r\n\t\t// there is a selector, so make sure it matches\r\n\t\tif(node.nodeType != 1){\r\n\t\t\t// text node will fail in native match selector\r\n\t\t\tnode = node.parentNode;\r\n\t\t}\r\n\t\twhile(!matchesTarget.matches(node, selector, context)){\r\n\t\t\tif(node == context || children === false || !(node = node.parentNode) || node.nodeType != 1){ // intentional assignment\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn node;\r\n\t}\r\n\ton.selector = function(selector, eventType, children){\r\n\t\t// summary:\r\n\t\t//\t\tCreates a new extension event with event delegation. This is based on\r\n\t\t//\t\tthe provided event type (can be extension event) that\r\n\t\t//\t\tonly calls the listener when the CSS selector matches the target of the event.\r\n\t\t//\r\n\t\t//\t\tThe application must require() an appropriate level of dojo/query to handle the selector.\r\n\t\t// selector:\r\n\t\t//\t\tThe CSS selector to use for filter events and determine the |this| of the event listener.\r\n\t\t// eventType:\r\n\t\t//\t\tThe event to listen for\r\n\t\t// children:\r\n\t\t//\t\tIndicates if children elements of the selector should be allowed. This defaults to \r\n\t\t//\t\ttrue\r\n\t\t// example:\r\n\t\t// |\trequire([\"dojo/on\", \"dojo/mouse\", \"dojo/query!css2\"], function(on, mouse){\r\n\t\t// |\t\ton(node, on.selector(\".my-class\", mouse.enter), handlerForMyHover);\r\n\t\treturn function(target, listener){\r\n\t\t\t// if the selector is function, use it to select the node, otherwise use the matches method\r\n\t\t\tvar matchesTarget = typeof selector == \"function\" ? {matches: selector} : this,\r\n\t\t\t\tbubble = eventType.bubble;\r\n\t\t\tfunction select(eventTarget){\r\n\t\t\t\treturn on.matches(eventTarget, selector, target, children, matchesTarget);\r\n\t\t\t}\r\n\t\t\tif(bubble){\r\n\t\t\t\t// the event type doesn't naturally bubble, but has a bubbling form, use that, and give it the selector so it can perform the select itself\r\n\t\t\t\treturn on(target, bubble(select), listener);\r\n\t\t\t}\r\n\t\t\t// standard event delegation\r\n\t\t\treturn on(target, eventType, function(event){\r\n\t\t\t\t// call select to see if we match\r\n\t\t\t\tvar eventTarget = select(event.target);\r\n\t\t\t\t// if it matches we call the listener\r\n\t\t\t\tif (eventTarget) {\r\n\t\t\t\t\treturn listener.call(eventTarget, event);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t};\r\n\r\n\tfunction syntheticPreventDefault(){\r\n\t\tthis.cancelable = false;\r\n\t\tthis.defaultPrevented = true;\r\n\t}\r\n\tfunction syntheticStopPropagation(){\r\n\t\tthis.bubbles = false;\r\n\t}\r\n\tvar slice = [].slice,\r\n\t\tsyntheticDispatch = on.emit = function(target, type, event){\r\n\t\t// summary:\r\n\t\t//\t\tFires an event on the target object.\r\n\t\t// target:\r\n\t\t//\t\tThe target object to fire the event on. This can be a DOM element or a plain \r\n\t\t//\t\tJS object. If the target is a DOM element, native event emitting mechanisms\r\n\t\t//\t\tare used when possible.\r\n\t\t// type:\r\n\t\t//\t\tThe event type name. You can emulate standard native events like \"click\" and \r\n\t\t//\t\t\"mouseover\" or create custom events like \"open\" or \"finish\".\r\n\t\t// event:\r\n\t\t//\t\tAn object that provides the properties for the event. See https://developer.mozilla.org/en/DOM/event.initEvent \r\n\t\t//\t\tfor some of the properties. These properties are copied to the event object.\r\n\t\t//\t\tOf particular importance are the cancelable and bubbles properties. The\r\n\t\t//\t\tcancelable property indicates whether or not the event has a default action\r\n\t\t//\t\tthat can be cancelled. The event is cancelled by calling preventDefault() on\r\n\t\t//\t\tthe event object. The bubbles property indicates whether or not the\r\n\t\t//\t\tevent will bubble up the DOM tree. If bubbles is true, the event will be called\r\n\t\t//\t\ton the target and then each parent successively until the top of the tree\r\n\t\t//\t\tis reached or stopPropagation() is called. Both bubbles and cancelable \r\n\t\t//\t\tdefault to false.\r\n\t\t// returns:\r\n\t\t//\t\tIf the event is cancelable and the event is not cancelled,\r\n\t\t//\t\temit will return true. If the event is cancelable and the event is cancelled,\r\n\t\t//\t\temit will return false.\r\n\t\t// details:\r\n\t\t//\t\tNote that this is designed to emit events for listeners registered through\r\n\t\t//\t\tdojo/on. It should actually work with any event listener except those\r\n\t\t//\t\tadded through IE's attachEvent (IE8 and below's non-W3C event emitting\r\n\t\t//\t\tdoesn't support custom event types). It should work with all events registered\r\n\t\t//\t\tthrough dojo/on. Also note that the emit method does do any default\r\n\t\t//\t\taction, it only returns a value to indicate if the default action should take\r\n\t\t//\t\tplace. For example, emitting a keypress event would not cause a character\r\n\t\t//\t\tto appear in a textbox.\r\n\t\t// example:\r\n\t\t//\t\tTo fire our own click event\r\n\t\t//\t|\trequire([\"dojo/on\", \"dojo/dom\"\r\n\t\t//\t|\t], function(on, dom){\r\n\t\t//\t|\t\ton.emit(dom.byId(\"button\"), \"click\", {\r\n\t\t//\t|\t\t\tcancelable: true,\r\n\t\t//\t|\t\t\tbubbles: true,\r\n\t\t//\t|\t\t\tscreenX: 33,\r\n\t\t//\t|\t\t\tscreenY: 44\r\n\t\t//\t|\t\t});\r\n\t\t//\t\tWe can also fire our own custom events:\r\n\t\t//\t|\t\ton.emit(dom.byId(\"slider\"), \"slide\", {\r\n\t\t//\t|\t\t\tcancelable: true,\r\n\t\t//\t|\t\t\tbubbles: true,\r\n\t\t//\t|\t\t\tdirection: \"left-to-right\"\r\n\t\t//\t|\t\t});\r\n\t\t//\t|\t});\r\n\t\tvar args = slice.call(arguments, 2);\r\n\t\tvar method = \"on\" + type;\r\n\t\tif(\"parentNode\" in target){\r\n\t\t\t// node (or node-like), create event controller methods\r\n\t\t\tvar newEvent = args[0] = {};\r\n\t\t\tfor(var i in event){\r\n\t\t\t\tnewEvent[i] = event[i];\r\n\t\t\t}\r\n\t\t\tnewEvent.preventDefault = syntheticPreventDefault;\r\n\t\t\tnewEvent.stopPropagation = syntheticStopPropagation;\r\n\t\t\tnewEvent.target = target;\r\n\t\t\tnewEvent.type = type;\r\n\t\t\tevent = newEvent;\r\n\t\t}\r\n\t\tdo{\r\n\t\t\t// call any node which has a handler (note that ideally we would try/catch to simulate normal event propagation but that causes too much pain for debugging)\r\n\t\t\ttarget[method] && target[method].apply(target, args);\r\n\t\t\t// and then continue up the parent node chain if it is still bubbling (if started as bubbles and stopPropagation hasn't been called)\r\n\t\t}while(event && event.bubbles && (target = target.parentNode));\r\n\t\treturn event && event.cancelable && event; // if it is still true (was cancelable and was cancelled), return the event to indicate default action should happen\r\n\t};\r\n\tvar captures = has(\"event-focusin\") ? {} : {focusin: \"focus\", focusout: \"blur\"};\r\n\tif(!has(\"event-stopimmediatepropagation\")){\r\n\t\tvar stopImmediatePropagation =function(){\r\n\t\t\tthis.immediatelyStopped = true;\r\n\t\t\tthis.modified = true; // mark it as modified so the event will be cached in IE\r\n\t\t};\r\n\t\tvar addStopImmediate = function(listener){\r\n\t\t\treturn function(event){\r\n\t\t\t\tif(!event.immediatelyStopped){// check to make sure it hasn't been stopped immediately\r\n\t\t\t\t\tevent.stopImmediatePropagation = stopImmediatePropagation;\r\n\t\t\t\t\treturn listener.apply(this, arguments);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t} \r\n\tif(has(\"dom-addeventlistener\")){\r\n\t\t// emitter that works with native event handling\r\n\t\ton.emit = function(target, type, event){\r\n\t\t\tif(target.dispatchEvent && document.createEvent){\r\n\t\t\t\t// use the native event emitting mechanism if it is available on the target object\r\n\t\t\t\t// create a generic event\t\t\t\t\r\n\t\t\t\t// we could create branch into the different types of event constructors, but \r\n\t\t\t\t// that would be a lot of extra code, with little benefit that I can see, seems \r\n\t\t\t\t// best to use the generic constructor and copy properties over, making it \r\n\t\t\t\t// easy to have events look like the ones created with specific initializers\r\n\t\t\t\tvar ownerDocument = target.ownerDocument || document;\r\n\t\t\t\tvar nativeEvent = ownerDocument.createEvent(\"HTMLEvents\");\r\n\t\t\t\tnativeEvent.initEvent(type, !!event.bubbles, !!event.cancelable);\r\n\t\t\t\t// and copy all our properties over\r\n\t\t\t\tfor(var i in event){\r\n\t\t\t\t\tif(!(i in nativeEvent)){\r\n\t\t\t\t\t\tnativeEvent[i] = event[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn target.dispatchEvent(nativeEvent) && nativeEvent;\r\n\t\t\t}\r\n\t\t\treturn syntheticDispatch.apply(on, arguments); // emit for a non-node\r\n\t\t};\r\n\t}else{\r\n\t\t// no addEventListener, basically old IE event normalization\r\n\t\ton._fixEvent = function(evt, sender){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tnormalizes properties on the event object including event\r\n\t\t\t//\t\tbubbling methods, keystroke normalization, and x/y positions\r\n\t\t\t// evt:\r\n\t\t\t//\t\tnative event object\r\n\t\t\t// sender:\r\n\t\t\t//\t\tnode to treat as \"currentTarget\"\r\n\t\t\tif(!evt){\r\n\t\t\t\tvar w = sender && (sender.ownerDocument || sender.document || sender).parentWindow || window;\r\n\t\t\t\tevt = w.event;\r\n\t\t\t}\r\n\t\t\tif(!evt){return evt;}\r\n\t\t\ttry{\r\n\t\t\t\tif(lastEvent && evt.type == lastEvent.type  && evt.srcElement == lastEvent.target){\r\n\t\t\t\t\t// should be same event, reuse event object (so it can be augmented);\r\n\t\t\t\t\t// accessing evt.srcElement rather than evt.target since evt.target not set on IE until fixup below\r\n\t\t\t\t\tevt = lastEvent;\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\t// will occur on IE on lastEvent.type reference if lastEvent points to a previous event that already\r\n\t\t\t\t// finished bubbling, but the setTimeout() to clear lastEvent hasn't fired yet\r\n\t\t\t}\r\n\t\t\tif(!evt.target){ // check to see if it has been fixed yet\r\n\t\t\t\tevt.target = evt.srcElement;\r\n\t\t\t\tevt.currentTarget = (sender || evt.srcElement);\r\n\t\t\t\tif(evt.type == \"mouseover\"){\r\n\t\t\t\t\tevt.relatedTarget = evt.fromElement;\r\n\t\t\t\t}\r\n\t\t\t\tif(evt.type == \"mouseout\"){\r\n\t\t\t\t\tevt.relatedTarget = evt.toElement;\r\n\t\t\t\t}\r\n\t\t\t\tif(!evt.stopPropagation){\r\n\t\t\t\t\tevt.stopPropagation = stopPropagation;\r\n\t\t\t\t\tevt.preventDefault = preventDefault;\r\n\t\t\t\t}\r\n\t\t\t\tswitch(evt.type){\r\n\t\t\t\t\tcase \"keypress\":\r\n\t\t\t\t\t\tvar c = (\"charCode\" in evt ? evt.charCode : evt.keyCode);\r\n\t\t\t\t\t\tif (c==10){\r\n\t\t\t\t\t\t\t// CTRL-ENTER is CTRL-ASCII(10) on IE, but CTRL-ENTER on Mozilla\r\n\t\t\t\t\t\t\tc=0;\r\n\t\t\t\t\t\t\tevt.keyCode = 13;\r\n\t\t\t\t\t\t}else if(c==13||c==27){\r\n\t\t\t\t\t\t\tc=0; // Mozilla considers ENTER and ESC non-printable\r\n\t\t\t\t\t\t}else if(c==3){\r\n\t\t\t\t\t\t\tc=99; // Mozilla maps CTRL-BREAK to CTRL-c\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Mozilla sets keyCode to 0 when there is a charCode\r\n\t\t\t\t\t\t// but that stops the event on IE.\r\n\t\t\t\t\t\tevt.charCode = c;\r\n\t\t\t\t\t\t_setKeyChar(evt);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn evt;\r\n\t\t};\r\n\t\tvar lastEvent, IESignal = function(handle){\r\n\t\t\tthis.handle = handle;\r\n\t\t};\r\n\t\tIESignal.prototype.remove = function(){\r\n\t\t\tdelete _dojoIEListeners_[this.handle];\r\n\t\t};\r\n\t\tvar fixListener = function(listener){\r\n\t\t\t// this is a minimal function for closing on the previous listener with as few as variables as possible\r\n\t\t\treturn function(evt){\r\n\t\t\t\tevt = on._fixEvent(evt, this);\r\n\t\t\t\tvar result = listener.call(this, evt);\r\n\t\t\t\tif(evt.modified){\r\n\t\t\t\t\t// cache the last event and reuse it if we can\r\n\t\t\t\t\tif(!lastEvent){\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tlastEvent = null;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastEvent = evt;\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t};\r\n\t\t};\r\n\t\tvar fixAttach = function(target, type, listener){\r\n\t\t\tlistener = fixListener(listener);\r\n\t\t\tif(((target.ownerDocument ? target.ownerDocument.parentWindow : target.parentWindow || target.window || window) != top || \r\n\t\t\t\t\t\thas(\"jscript\") < 5.8) && \r\n\t\t\t\t\t!has(\"config-_allow_leaks\")){\r\n\t\t\t\t// IE will leak memory on certain handlers in frames (IE8 and earlier) and in unattached DOM nodes for JScript 5.7 and below.\r\n\t\t\t\t// Here we use global redirection to solve the memory leaks\r\n\t\t\t\tif(typeof _dojoIEListeners_ == \"undefined\"){\r\n\t\t\t\t\t_dojoIEListeners_ = [];\r\n\t\t\t\t}\r\n\t\t\t\tvar emitter = target[type];\r\n\t\t\t\tif(!emitter || !emitter.listeners){\r\n\t\t\t\t\tvar oldListener = emitter;\r\n\t\t\t\t\temitter = Function('event', 'var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}');\r\n\t\t\t\t\temitter.listeners = [];\r\n\t\t\t\t\ttarget[type] = emitter;\r\n\t\t\t\t\temitter.global = this;\r\n\t\t\t\t\tif(oldListener){\r\n\t\t\t\t\t\temitter.listeners.push(_dojoIEListeners_.push(oldListener) - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar handle;\r\n\t\t\t\temitter.listeners.push(handle = (emitter.global._dojoIEListeners_.push(listener) - 1));\r\n\t\t\t\treturn new IESignal(handle);\r\n\t\t\t}\r\n\t\t\treturn aspect.after(target, type, listener, true);\r\n\t\t};\r\n\r\n\t\tvar _setKeyChar = function(evt){\r\n\t\t\tevt.keyChar = evt.charCode ? String.fromCharCode(evt.charCode) : '';\r\n\t\t\tevt.charOrCode = evt.keyChar || evt.keyCode;\t// TODO: remove for 2.0\r\n\t\t};\r\n\t\t// Called in Event scope\r\n\t\tvar stopPropagation = function(){\r\n\t\t\tthis.cancelBubble = true;\r\n\t\t};\r\n\t\tvar preventDefault = on._preventDefault = function(){\r\n\t\t\t// Setting keyCode to 0 is the only way to prevent certain keypresses (namely\r\n\t\t\t// ctrl-combinations that correspond to menu accelerator keys).\r\n\t\t\t// Otoh, it prevents upstream listeners from getting this information\r\n\t\t\t// Try to split the difference here by clobbering keyCode only for ctrl\r\n\t\t\t// combinations. If you still need to access the key upstream, bubbledKeyCode is\r\n\t\t\t// provided as a workaround.\r\n\t\t\tthis.bubbledKeyCode = this.keyCode;\r\n\t\t\tif(this.ctrlKey){\r\n\t\t\t\ttry{\r\n\t\t\t\t\t// squelch errors when keyCode is read-only\r\n\t\t\t\t\t// (e.g. if keyCode is ctrl or shift)\r\n\t\t\t\t\tthis.keyCode = 0;\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.defaultPrevented = true;\r\n\t\t\tthis.returnValue = false;\r\n\t\t\tthis.modified = true; // mark it as modified  (for defaultPrevented flag) so the event will be cached in IE\r\n\t\t};\r\n\t}\r\n\tif(has(\"touch\")){ \r\n\t\tvar EventDelegate = function(){};\r\n\t\tvar windowOrientation = window.orientation; \r\n\t\tvar fixTouchListener = function(listener){ \r\n\t\t\treturn function(originalEvent){ \r\n\t\t\t\t//Event normalization(for ontouchxxx and resize): \r\n\t\t\t\t//1.incorrect e.pageX|pageY in iOS \r\n\t\t\t\t//2.there are no \"e.rotation\", \"e.scale\" and \"onorientationchange\" in Android\r\n\t\t\t\t//3.More TBD e.g. force | screenX | screenX | clientX | clientY | radiusX | radiusY\r\n\r\n\t\t\t\t// see if it has already been corrected\r\n\t\t\t\tvar event = originalEvent.corrected;\r\n\t\t\t\tif(!event){\r\n\t\t\t\t\tvar type = originalEvent.type;\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tdelete originalEvent.type; // on some JS engines (android), deleting properties makes them mutable\r\n\t\t\t\t\t}catch(e){} \r\n\t\t\t\t\tif(originalEvent.type){\r\n\t\t\t\t\t\t// Deleting the property of the original event did not work (this is the case of\r\n\t\t\t\t\t\t// browsers such as older Safari iOS), hence fallback:\r\n\t\t\t\t\t\tif(has(\"touch-can-modify-event-delegate\")){\r\n\t\t\t\t\t\t\t// If deleting properties of delegated event works, use event delegation:\r\n\t\t\t\t\t\t\tEventDelegate.prototype = originalEvent;\r\n\t\t\t\t\t\t\tevent = new EventDelegate;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t// Otherwise last fallback: other browsers, such as mobile Firefox, do not like\r\n\t\t\t\t\t\t\t// delegated properties, so we have to copy\r\n\t\t\t\t\t\t\tevent = {};\r\n\t\t\t\t\t\t\tfor(var name in originalEvent){\r\n\t\t\t\t\t\t\t\tevent[name] = originalEvent[name];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// have to delegate methods to make them work\r\n\t\t\t\t\t\tevent.preventDefault = function(){\r\n\t\t\t\t\t\t\toriginalEvent.preventDefault();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tevent.stopPropagation = function(){\r\n\t\t\t\t\t\t\toriginalEvent.stopPropagation();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// deletion worked, use property as is\r\n\t\t\t\t\t\tevent = originalEvent;\r\n\t\t\t\t\t\tevent.type = type;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toriginalEvent.corrected = event;\r\n\t\t\t\t\tif(type == 'resize'){\r\n\t\t\t\t\t\tif(windowOrientation == window.orientation){ \r\n\t\t\t\t\t\t\treturn null;//double tap causes an unexpected 'resize' in Android\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\twindowOrientation = window.orientation;\r\n\t\t\t\t\t\tevent.type = \"orientationchange\"; \r\n\t\t\t\t\t\treturn listener.call(this, event);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// We use the original event and augment, rather than doing an expensive mixin operation\r\n\t\t\t\t\tif(!(\"rotation\" in event)){ // test to see if it has rotation\r\n\t\t\t\t\t\tevent.rotation = 0; \r\n\t\t\t\t\t\tevent.scale = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//use event.changedTouches[0].pageX|pageY|screenX|screenY|clientX|clientY|target\r\n\t\t\t\t\tvar firstChangeTouch = event.changedTouches[0];\r\n\t\t\t\t\tfor(var i in firstChangeTouch){ // use for-in, we don't need to have dependency on dojo/_base/lang here\r\n\t\t\t\t\t\tdelete event[i]; // delete it first to make it mutable\r\n\t\t\t\t\t\tevent[i] = firstChangeTouch[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn listener.call(this, event); \r\n\t\t\t}; \r\n\t\t}; \r\n\t}\r\n\treturn on;\r\n});\r\n\ndefine('dojo/aspect',[], function(){\r\n\r\n\t// module:\r\n\t//\t\tdojo/aspect\r\n\r\n\t\"use strict\";\r\n\tvar undefined, nextId = 0;\r\n\tfunction advise(dispatcher, type, advice, receiveArguments){\r\n\t\tvar previous = dispatcher[type];\r\n\t\tvar around = type == \"around\";\r\n\t\tvar signal;\r\n\t\tif(around){\r\n\t\t\tvar advised = advice(function(){\r\n\t\t\t\treturn previous.advice(this, arguments);\r\n\t\t\t});\r\n\t\t\tsignal = {\r\n\t\t\t\tremove: function(){\r\n\t\t\t\t\tif(advised){\r\n\t\t\t\t\t\tadvised = dispatcher = advice = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tadvice: function(target, args){\r\n\t\t\t\t\treturn advised ?\r\n\t\t\t\t\t\tadvised.apply(target, args) :  // called the advised function\r\n\t\t\t\t\t\tprevious.advice(target, args); // cancelled, skip to next one\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}else{\r\n\t\t\t// create the remove handler\r\n\t\t\tsignal = {\r\n\t\t\t\tremove: function(){\r\n\t\t\t\t\tif(signal.advice){\r\n\t\t\t\t\t\tvar previous = signal.previous;\r\n\t\t\t\t\t\tvar next = signal.next;\r\n\t\t\t\t\t\tif(!next && !previous){\r\n\t\t\t\t\t\t\tdelete dispatcher[type];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(previous){\r\n\t\t\t\t\t\t\t\tprevious.next = next;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tdispatcher[type] = next;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(next){\r\n\t\t\t\t\t\t\t\tnext.previous = previous;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// remove the advice to signal that this signal has been removed\r\n\t\t\t\t\t\tdispatcher = advice = signal.advice = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tid: nextId++,\r\n\t\t\t\tadvice: advice,\r\n\t\t\t\treceiveArguments: receiveArguments\r\n\t\t\t};\r\n\t\t}\r\n\t\tif(previous && !around){\r\n\t\t\tif(type == \"after\"){\r\n\t\t\t\t// add the listener to the end of the list\r\n\t\t\t\t// note that we had to change this loop a little bit to workaround a bizarre IE10 JIT bug\r\n\t\t\t\twhile(previous.next && (previous = previous.next)){}\r\n\t\t\t\tprevious.next = signal;\r\n\t\t\t\tsignal.previous = previous;\r\n\t\t\t}else if(type == \"before\"){\r\n\t\t\t\t// add to beginning\r\n\t\t\t\tdispatcher[type] = signal;\r\n\t\t\t\tsignal.next = previous;\r\n\t\t\t\tprevious.previous = signal;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// around or first one just replaces\r\n\t\t\tdispatcher[type] = signal;\r\n\t\t}\r\n\t\treturn signal;\r\n\t}\r\n\tfunction aspect(type){\r\n\t\treturn function(target, methodName, advice, receiveArguments){\r\n\t\t\tvar existing = target[methodName], dispatcher;\r\n\t\t\tif(!existing || existing.target != target){\r\n\t\t\t\t// no dispatcher in place\r\n\t\t\t\ttarget[methodName] = dispatcher = function(){\r\n\t\t\t\t\tvar executionId = nextId;\r\n\t\t\t\t\t// before advice\r\n\t\t\t\t\tvar args = arguments;\r\n\t\t\t\t\tvar before = dispatcher.before;\r\n\t\t\t\t\twhile(before){\r\n\t\t\t\t\t\targs = before.advice.apply(this, args) || args;\r\n\t\t\t\t\t\tbefore = before.next;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// around advice\r\n\t\t\t\t\tif(dispatcher.around){\r\n\t\t\t\t\t\tvar results = dispatcher.around.advice(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// after advice\r\n\t\t\t\t\tvar after = dispatcher.after;\r\n\t\t\t\t\twhile(after && after.id < executionId){\r\n\t\t\t\t\t\tif(after.receiveArguments){\r\n\t\t\t\t\t\t\tvar newResults = after.advice.apply(this, args);\r\n\t\t\t\t\t\t\t// change the return value only if a new value was returned\r\n\t\t\t\t\t\t\tresults = newResults === undefined ? results : newResults;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tresults = after.advice.call(this, results, args);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tafter = after.next;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn results;\r\n\t\t\t\t};\r\n\t\t\t\tif(existing){\r\n\t\t\t\t\tdispatcher.around = {advice: function(target, args){\r\n\t\t\t\t\t\treturn existing.apply(target, args);\r\n\t\t\t\t\t}};\r\n\t\t\t\t}\r\n\t\t\t\tdispatcher.target = target;\r\n\t\t\t}\r\n\t\t\tvar results = advise((dispatcher || existing), type, advice, receiveArguments);\r\n\t\t\tadvice = null;\r\n\t\t\treturn results;\r\n\t\t};\r\n\t}\r\n\r\n\t// TODOC: after/before/around return object\r\n\r\n\tvar after = aspect(\"after\");\r\n\t/*=====\r\n\tafter = function(target, methodName, advice, receiveArguments){\r\n\t\t// summary:\r\n\t\t//\t\tThe \"after\" export of the aspect module is a function that can be used to attach\r\n\t\t//\t\t\"after\" advice to a method. This function will be executed after the original method\r\n\t\t//\t\tis executed. By default the function will be called with a single argument, the return\r\n\t\t//\t\tvalue of the original method, or the the return value of the last executed advice (if a previous one exists).\r\n\t\t//\t\tThe fourth (optional) argument can be set to true to so the function receives the original\r\n\t\t//\t\targuments (from when the original method was called) rather than the return value.\r\n\t\t//\t\tIf there are multiple \"after\" advisors, they are executed in the order they were registered.\r\n\t\t// target: Object\r\n\t\t//\t\tThis is the target object\r\n\t\t// methodName: String\r\n\t\t//\t\tThis is the name of the method to attach to.\r\n\t\t// advice: Function\r\n\t\t//\t\tThis is function to be called after the original method\r\n\t\t// receiveArguments: Boolean?\r\n\t\t//\t\tIf this is set to true, the advice function receives the original arguments (from when the original mehtod\r\n\t\t//\t\twas called) rather than the return value of the original/previous method.\r\n\t\t// returns:\r\n\t\t//\t\tA signal object that can be used to cancel the advice. If remove() is called on this signal object, it will\r\n\t\t//\t\tstop the advice function from being executed.\r\n\t};\r\n\t=====*/\r\n\r\n\tvar before = aspect(\"before\");\r\n\t/*=====\r\n\tbefore = function(target, methodName, advice){\r\n\t\t// summary:\r\n\t\t//\t\tThe \"before\" export of the aspect module is a function that can be used to attach\r\n\t\t//\t\t\"before\" advice to a method. This function will be executed before the original method\r\n\t\t//\t\tis executed. This function will be called with the arguments used to call the method.\r\n\t\t//\t\tThis function may optionally return an array as the new arguments to use to call\r\n\t\t//\t\tthe original method (or the previous, next-to-execute before advice, if one exists).\r\n\t\t//\t\tIf the before method doesn't return anything (returns undefined) the original arguments\r\n\t\t//\t\twill be preserved.\r\n\t\t//\t\tIf there are multiple \"before\" advisors, they are executed in the reverse order they were registered.\r\n\t\t// target: Object\r\n\t\t//\t\tThis is the target object\r\n\t\t// methodName: String\r\n\t\t//\t\tThis is the name of the method to attach to.\r\n\t\t// advice: Function\r\n\t\t//\t\tThis is function to be called before the original method\r\n\t};\r\n\t=====*/\r\n\r\n\tvar around = aspect(\"around\");\r\n\t/*=====\r\n\t around = function(target, methodName, advice){\r\n\t\t// summary:\r\n\t\t//\t\tThe \"around\" export of the aspect module is a function that can be used to attach\r\n\t\t//\t\t\"around\" advice to a method. The advisor function is immediately executed when\r\n\t\t//\t\tthe around() is called, is passed a single argument that is a function that can be\r\n\t\t//\t\tcalled to continue execution of the original method (or the next around advisor).\r\n\t\t//\t\tThe advisor function should return a function, and this function will be called whenever\r\n\t\t//\t\tthe method is called. It will be called with the arguments used to call the method.\r\n\t\t//\t\tWhatever this function returns will be returned as the result of the method call (unless after advise changes it).\r\n\t\t// example:\r\n\t\t//\t\tIf there are multiple \"around\" advisors, the most recent one is executed first,\r\n\t\t//\t\twhich can then delegate to the next one and so on. For example:\r\n\t\t//\t\t|\taround(obj, \"foo\", function(originalFoo){\r\n\t\t//\t\t|\t\treturn function(){\r\n\t\t//\t\t|\t\t\tvar start = new Date().getTime();\r\n\t\t//\t\t|\t\t\tvar results = originalFoo.apply(this, arguments); // call the original\r\n\t\t//\t\t|\t\t\tvar end = new Date().getTime();\r\n\t\t//\t\t|\t\t\tconsole.log(\"foo execution took \" + (end - start) + \" ms\");\r\n\t\t//\t\t|\t\t\treturn results;\r\n\t\t//\t\t|\t\t};\r\n\t\t//\t\t|\t});\r\n\t\t// target: Object\r\n\t\t//\t\tThis is the target object\r\n\t\t// methodName: String\r\n\t\t//\t\tThis is the name of the method to attach to.\r\n\t\t// advice: Function\r\n\t\t//\t\tThis is function to be called around the original method\r\n\t};\r\n\t=====*/\r\n\r\n\treturn {\r\n\t\t// summary:\r\n\t\t//\t\tprovides aspect oriented programming functionality, allowing for\r\n\t\t//\t\tone to add before, around, or after advice on existing methods.\r\n\t\t// example:\r\n\t\t//\t|\tdefine([\"dojo/aspect\"], function(aspect){\r\n\t\t//\t|\t\tvar signal = aspect.after(targetObject, \"methodName\", function(someArgument){\r\n\t\t//\t|\t\t\tthis will be called when targetObject.methodName() is called, after the original function is called\r\n\t\t//\t|\t\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tThe returned signal object can be used to cancel the advice.\r\n\t\t//\t|\tsignal.remove(); // this will stop the advice from being executed anymore\r\n\t\t//\t|\taspect.before(targetObject, \"methodName\", function(someArgument){\r\n\t\t//\t|\t\t// this will be called when targetObject.methodName() is called, before the original function is called\r\n\t\t//\t|\t });\r\n\r\n\t\tbefore: before,\r\n\t\taround: around,\r\n\t\tafter: after\r\n\t};\r\n});\r\n\ndefine('dojo/Evented',[\"./aspect\", \"./on\"], function(aspect, on){\r\n\t// module:\r\n\t//\t\tdojo/Evented\r\n\r\n \t\"use strict\";\r\n \tvar after = aspect.after;\r\n\tfunction Evented(){\r\n\t\t// summary:\r\n\t\t//\t\tA class that can be used as a mixin or base class,\r\n\t\t//\t\tto add on() and emit() methods to a class\r\n\t\t//\t\tfor listening for events and emitting events:\r\n\t\t// example:\r\n\t\t//\t\t|\tdefine([\"dojo/Evented\", \"dojo/_base/declare\", \"dojo/Stateful\"\r\n\t\t//\t\t|\t], function(Evented, declare, Stateful){\r\n\t\t//\t\t|\t\tvar EventedStateful = declare([Evented, Stateful], {...});\r\n\t\t//\t\t|\t\tvar instance = new EventedStateful();\r\n\t\t//\t\t|\t\tinstance.on(\"open\", function(event){\r\n\t\t//\t\t|\t\t... do something with event\r\n\t\t//\t\t|\t });\r\n\t\t//\t\t|\r\n\t\t//\t\t|\tinstance.emit(\"open\", {name:\"some event\", ...});\r\n\t}\r\n\tEvented.prototype = {\r\n\t\ton: function(type, listener){\r\n\t\t\treturn on.parse(this, type, listener, function(target, type){\r\n\t\t\t\treturn after(target, 'on' + type, listener, true);\r\n\t\t\t});\r\n\t\t},\r\n\t\temit: function(type, event){\r\n\t\t\tvar args = [this];\r\n\t\t\targs.push.apply(args, arguments);\r\n\t\t\treturn on.emit.apply(on, args);\r\n\t\t}\r\n\t};\r\n\treturn Evented;\r\n});\r\n\ndefine('dojo/topic',[\"./Evented\"], function(Evented){\r\n\r\n\t// module:\r\n\t//\t\tdojo/topic\r\n\r\n\tvar hub = new Evented;\r\n\treturn {\r\n\t\t// summary:\r\n\t\t//\t\tPubsub hub.\r\n\t\t// example:\r\n\t\t//\t\t| \ttopic.subscribe(\"some/topic\", function(event){\r\n\t\t//\t\t|\t... do something with event\r\n\t\t//\t\t|\t});\r\n\t\t//\t\t|\ttopic.publish(\"some/topic\", {name:\"some event\", ...});\r\n\r\n\t\tpublish: function(topic, event){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tPublishes a message to a topic on the pub/sub hub. All arguments after\r\n\t\t\t//\t\tthe first will be passed to the subscribers, so any number of arguments\r\n\t\t\t//\t\tcan be provided (not just event).\r\n\t\t\t// topic: String\r\n\t\t\t//\t\tThe name of the topic to publish to\r\n\t\t\t// event: Object\r\n\t\t\t//\t\tAn event to distribute to the topic listeners\r\n\t\t\treturn hub.emit.apply(hub, arguments);\r\n\t\t},\r\n\r\n\t\tsubscribe: function(topic, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSubscribes to a topic on the pub/sub hub\r\n\t\t\t// topic: String\r\n\t\t\t//\t\tThe topic to subscribe to\r\n\t\t\t// listener: Function\r\n\t\t\t//\t\tA function to call when a message is published to the given topic\r\n\t\t\treturn hub.on.apply(hub, arguments);\r\n\t\t}\r\n\t};\r\n});\r\n\ndefine('dojo/_base/window',[\"./kernel\", \"./lang\", \"../sniff\"], function(dojo, lang, has){\r\n// module:\r\n//\t\tdojo/_base/window\r\n\r\nvar ret = {\r\n\t// summary:\r\n\t//\t\tAPI to save/set/restore the global/document scope.\r\n\r\n\tglobal: dojo.global,\r\n\t/*=====\r\n\t global: {\r\n\t\t // summary:\r\n\t\t //\t\tAlias for the current window. 'global' can be modified\r\n\t\t //\t\tfor temporary context shifting. See also withGlobal().\r\n\t\t // description:\r\n\t\t //\t\tUse this rather than referring to 'window' to ensure your code runs\r\n\t\t //\t\tcorrectly in managed contexts.\r\n\t },\r\n\t =====*/\r\n\r\n\tdoc: dojo.global[\"document\"] || null,\r\n\t/*=====\r\n\tdoc: {\r\n\t\t// summary:\r\n\t\t//\t\tAlias for the current document. 'doc' can be modified\r\n\t\t//\t\tfor temporary context shifting. See also withDoc().\r\n\t\t// description:\r\n\t\t//\t\tUse this rather than referring to 'window.document' to ensure your code runs\r\n\t\t//\t\tcorrectly in managed contexts.\r\n\t\t// example:\r\n\t\t//\t|\tn.appendChild(dojo.doc.createElement('div'));\r\n\t},\r\n\t=====*/\r\n\r\n\tbody: function(/*Document?*/ doc){\r\n\t\t// summary:\r\n\t\t//\t\tReturn the body element of the specified document or of dojo/_base/window::doc.\r\n\t\t// example:\r\n\t\t//\t|\twin.body().appendChild(dojo.doc.createElement('div'));\r\n\r\n\t\t// Note: document.body is not defined for a strict xhtml document\r\n\t\t// Would like to memoize this, but dojo.doc can change vi dojo.withDoc().\r\n\t\tdoc = doc || dojo.doc;\r\n\t\treturn doc.body || doc.getElementsByTagName(\"body\")[0]; // Node\r\n\t},\r\n\r\n\tsetContext: function(/*Object*/ globalObject, /*DocumentElement*/ globalDocument){\r\n\t\t// summary:\r\n\t\t//\t\tchanges the behavior of many core Dojo functions that deal with\r\n\t\t//\t\tnamespace and DOM lookup, changing them to work in a new global\r\n\t\t//\t\tcontext (e.g., an iframe). The varibles dojo.global and dojo.doc\r\n\t\t//\t\tare modified as a result of calling this function and the result of\r\n\t\t//\t\t`dojo.body()` likewise differs.\r\n\t\tdojo.global = ret.global = globalObject;\r\n\t\tdojo.doc = ret.doc = globalDocument;\r\n\t},\r\n\r\n\twithGlobal: function(\t/*Object*/ globalObject,\r\n\t\t\t\t\t\t\t/*Function*/ callback,\r\n\t\t\t\t\t\t\t/*Object?*/ thisObject,\r\n\t\t\t\t\t\t\t/*Array?*/ cbArguments){\r\n\t\t// summary:\r\n\t\t//\t\tInvoke callback with globalObject as dojo.global and\r\n\t\t//\t\tglobalObject.document as dojo.doc.\r\n\t\t// description:\r\n\t\t//\t\tInvoke callback with globalObject as dojo.global and\r\n\t\t//\t\tglobalObject.document as dojo.doc. If provided, globalObject\r\n\t\t//\t\twill be executed in the context of object thisObject\r\n\t\t//\t\tWhen callback() returns or throws an error, the dojo.global\r\n\t\t//\t\tand dojo.doc will be restored to its previous state.\r\n\r\n\t\tvar oldGlob = dojo.global;\r\n\t\ttry{\r\n\t\t\tdojo.global = ret.global = globalObject;\r\n\t\t\treturn ret.withDoc.call(null, globalObject.document, callback, thisObject, cbArguments);\r\n\t\t}finally{\r\n\t\t\tdojo.global = ret.global = oldGlob;\r\n\t\t}\r\n\t},\r\n\r\n\twithDoc: function(\t/*DocumentElement*/ documentObject,\r\n\t\t\t\t\t\t/*Function*/ callback,\r\n\t\t\t\t\t\t/*Object?*/ thisObject,\r\n\t\t\t\t\t\t/*Array?*/ cbArguments){\r\n\t\t// summary:\r\n\t\t//\t\tInvoke callback with documentObject as dojo/_base/window::doc.\r\n\t\t// description:\r\n\t\t//\t\tInvoke callback with documentObject as dojo/_base/window::doc. If provided,\r\n\t\t//\t\tcallback will be executed in the context of object thisObject\r\n\t\t//\t\tWhen callback() returns or throws an error, the dojo/_base/window::doc will\r\n\t\t//\t\tbe restored to its previous state.\r\n\r\n\t\tvar oldDoc = ret.doc,\r\n\t\t\toldQ = has(\"quirks\"),\r\n\t\t\toldIE = has(\"ie\"), isIE, mode, pwin;\r\n\r\n\t\ttry{\r\n\t\t\tdojo.doc = ret.doc = documentObject;\r\n\t\t\t// update dojo.isQuirks and the value of the has feature \"quirks\".\r\n\t\t\t// remove setting dojo.isQuirks and dojo.isIE for 2.0\r\n\t\t\tdojo.isQuirks = has.add(\"quirks\", dojo.doc.compatMode == \"BackCompat\", true, true); // no need to check for QuirksMode which was Opera 7 only\r\n\r\n\t\t\tif(has(\"ie\")){\r\n\t\t\t\tif((pwin = documentObject.parentWindow) && pwin.navigator){\r\n\t\t\t\t\t// re-run IE detection logic and update dojo.isIE / has(\"ie\")\r\n\t\t\t\t\t// (the only time parentWindow/navigator wouldn't exist is if we were not\r\n\t\t\t\t\t// passed an actual legitimate document object)\r\n\t\t\t\t\tisIE = parseFloat(pwin.navigator.appVersion.split(\"MSIE \")[1]) || undefined;\r\n\t\t\t\t\tmode = documentObject.documentMode;\r\n\t\t\t\t\tif(mode && mode != 5 && Math.floor(isIE) != mode){\r\n\t\t\t\t\t\tisIE = mode;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdojo.isIE = has.add(\"ie\", isIE, true, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(thisObject && typeof callback == \"string\"){\r\n\t\t\t\tcallback = thisObject[callback];\r\n\t\t\t}\r\n\r\n\t\t\treturn callback.apply(thisObject, cbArguments || []);\r\n\t\t}finally{\r\n\t\t\tdojo.doc = ret.doc = oldDoc;\r\n\t\t\tdojo.isQuirks = has.add(\"quirks\", oldQ, true, true);\r\n\t\t\tdojo.isIE = has.add(\"ie\", oldIE, true, true);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nhas(\"extend-dojo\") && lang.mixin(dojo, ret);\r\n\r\nreturn ret;\r\n\r\n});\r\n\ndefine('dojo/dom',[\"./sniff\", \"./_base/window\"],\r\n\t\tfunction(has, win){\r\n\t// module:\r\n\t//\t\tdojo/dom\r\n\r\n\t// FIXME: need to add unit tests for all the semi-public methods\r\n\r\n\tif(has(\"ie\") <= 7){\r\n\t\ttry{\r\n\t\t\tdocument.execCommand(\"BackgroundImageCache\", false, true);\r\n\t\t}catch(e){\r\n\t\t\t// sane browsers don't have cache \"issues\"\r\n\t\t}\r\n\t}\r\n\r\n\t// =============================\r\n\t// DOM Functions\r\n\t// =============================\r\n\r\n\t// the result object\r\n\tvar dom = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module defines the core dojo DOM API.\r\n\t};\r\n\r\n\tif(has(\"ie\")){\r\n\t\tdom.byId = function(id, doc){\r\n\t\t\tif(typeof id != \"string\"){\r\n\t\t\t\treturn id;\r\n\t\t\t}\r\n\t\t\tvar _d = doc || win.doc, te = id && _d.getElementById(id);\r\n\t\t\t// attributes.id.value is better than just id in case the\r\n\t\t\t// user has a name=id inside a form\r\n\t\t\tif(te && (te.attributes.id.value == id || te.id == id)){\r\n\t\t\t\treturn te;\r\n\t\t\t}else{\r\n\t\t\t\tvar eles = _d.all[id];\r\n\t\t\t\tif(!eles || eles.nodeName){\r\n\t\t\t\t\teles = [eles];\r\n\t\t\t\t}\r\n\t\t\t\t// if more than 1, choose first with the correct id\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\twhile((te = eles[i++])){\r\n\t\t\t\t\tif((te.attributes && te.attributes.id && te.attributes.id.value == id) || te.id == id){\r\n\t\t\t\t\t\treturn te;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}else{\r\n\t\tdom.byId = function(id, doc){\r\n\t\t\t// inline'd type check.\r\n\t\t\t// be sure to return null per documentation, to match IE branch.\r\n\t\t\treturn ((typeof id == \"string\") ? (doc || win.doc).getElementById(id) : id) || null; // DOMNode\r\n\t\t};\r\n\t}\r\n\t/*=====\r\n\t dom.byId = function(id, doc){\r\n\t\t// summary:\r\n\t\t//\t\tReturns DOM node with matching `id` attribute or falsy value (ex: null or undefined)\r\n\t\t//\t\tif not found.  If `id` is a DomNode, this function is a no-op.\r\n\t\t//\r\n\t\t// id: String|DOMNode\r\n\t\t//\t\tA string to match an HTML id attribute or a reference to a DOM Node\r\n\t\t//\r\n\t\t// doc: Document?\r\n\t\t//\t\tDocument to work in. Defaults to the current value of\r\n\t\t//\t\tdojo/_base/window.doc.  Can be used to retrieve\r\n\t\t//\t\tnode references from other documents.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tLook up a node by ID:\r\n\t\t//\t|\trequire([\"dojo/dom\"], function(dom){\r\n\t\t//\t|\t\tvar n = dom.byId(\"foo\");\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tCheck if a node exists, and use it.\r\n\t\t//\t|\trequire([\"dojo/dom\"], function(dom){\r\n\t\t//\t|\t\tvar n = dom.byId(\"bar\");\r\n\t\t//\t|\t\tif(n){ doStuff() ... }\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tAllow string or DomNode references to be passed to a custom function:\r\n\t\t//\t|\trequire([\"dojo/dom\"], function(dom){\r\n\t\t//\t|\t\tvar foo = function(nodeOrId){\r\n\t\t//\t|\t\t\tnodeOrId = dom.byId(nodeOrId);\r\n\t\t//\t|\t\t\t// ... more stuff\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t };\r\n\t =====*/\r\n\r\n\tdom.isDescendant = function(/*DOMNode|String*/ node, /*DOMNode|String*/ ancestor){\r\n\t\t// summary:\r\n\t\t//\t\tReturns true if node is a descendant of ancestor\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tstring id or node reference to test\r\n\t\t// ancestor: DOMNode|String\r\n\t\t//\t\tstring id or node reference of potential parent to test against\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tTest is node id=\"bar\" is a descendant of node id=\"foo\"\r\n\t\t//\t|\trequire([\"dojo/dom\"], function(dom){\r\n\t\t//\t|\t\tif(dom.isDescendant(\"bar\", \"foo\")){ ... }\r\n\t\t//\t|\t});\r\n\r\n\t\ttry{\r\n\t\t\tnode = dom.byId(node);\r\n\t\t\tancestor = dom.byId(ancestor);\r\n\t\t\twhile(node){\r\n\t\t\t\tif(node == ancestor){\r\n\t\t\t\t\treturn true; // Boolean\r\n\t\t\t\t}\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t}\r\n\t\t}catch(e){ /* squelch, return false */ }\r\n\t\treturn false; // Boolean\r\n\t};\r\n\r\n\r\n\t// TODO: do we need setSelectable in the base?\r\n\r\n\t// Add feature test for user-select CSS property\r\n\t// (currently known to work in all but IE < 10 and Opera)\r\n\t// TODO: The user-select CSS property as of May 2014 is no longer part of\r\n\t// any CSS specification. In IE, -ms-user-select does not do the same thing\r\n\t// as the unselectable attribute on elements; namely, dijit Editor buttons\r\n\t// do not properly prevent the content of the editable content frame from\r\n\t// unblurring. As a result, the -ms- prefixed version is omitted here.\r\n\thas.add(\"css-user-select\", function(global, doc, element){\r\n\t\t// Avoid exception when dom.js is loaded in non-browser environments\r\n\t\tif(!element){ return false; }\r\n\t\t\r\n\t\tvar style = element.style;\r\n\t\tvar prefixes = [\"Khtml\", \"O\", \"Moz\", \"Webkit\"],\r\n\t\t\ti = prefixes.length,\r\n\t\t\tname = \"userSelect\",\r\n\t\t\tprefix;\r\n\r\n\t\t// Iterate prefixes from most to least likely\r\n\t\tdo{\r\n\t\t\tif(typeof style[name] !== \"undefined\"){\r\n\t\t\t\t// Supported; return property name\r\n\t\t\t\treturn name;\r\n\t\t\t}\r\n\t\t}while(i-- && (name = prefixes[i] + \"UserSelect\"));\r\n\r\n\t\t// Not supported if we didn't return before now\r\n\t\treturn false;\r\n\t});\r\n\r\n\t/*=====\r\n\tdom.setSelectable = function(node, selectable){\r\n\t\t// summary:\r\n\t\t//\t\tEnable or disable selection on a node\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to node\r\n\t\t// selectable: Boolean\r\n\t\t//\t\tstate to put the node in. false indicates unselectable, true\r\n\t\t//\t\tallows selection.\r\n\t\t// example:\r\n\t\t//\t\tMake the node id=\"bar\" unselectable\r\n\t\t//\t|\trequire([\"dojo/dom\"], function(dom){\r\n\t\t//\t|\t\tdom.setSelectable(\"bar\");\r\n\t\t//\t|\t});\r\n\t\t// example:\r\n\t\t//\t\tMake the node id=\"bar\" selectable\r\n\t\t//\t|\trequire([\"dojo/dom\"], function(dom){\r\n\t\t//\t|\t\tdom.setSelectable(\"bar\", true);\r\n\t\t//\t|\t});\r\n\t};\r\n\t=====*/\r\n\r\n\tvar cssUserSelect = has(\"css-user-select\");\r\n\tdom.setSelectable = cssUserSelect ? function(node, selectable){\r\n\t\t// css-user-select returns a (possibly vendor-prefixed) CSS property name\r\n\t\tdom.byId(node).style[cssUserSelect] = selectable ? \"\" : \"none\";\r\n\t} : function(node, selectable){\r\n\t\tnode = dom.byId(node);\r\n\r\n\t\t// (IE < 10 / Opera) Fall back to setting/removing the\r\n\t\t// unselectable attribute on the element and all its children\r\n\t\tvar nodes = node.getElementsByTagName(\"*\"),\r\n\t\t\ti = nodes.length;\r\n\r\n\t\tif(selectable){\r\n\t\t\tnode.removeAttribute(\"unselectable\");\r\n\t\t\twhile(i--){\r\n\t\t\t\tnodes[i].removeAttribute(\"unselectable\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tnode.setAttribute(\"unselectable\", \"on\");\r\n\t\t\twhile(i--){\r\n\t\t\t\tnodes[i].setAttribute(\"unselectable\", \"on\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn dom;\r\n});\r\n\ndefine('dojo/dom-style',[\"./sniff\", \"./dom\"], function(has, dom){\r\n\t// module:\r\n\t//\t\tdojo/dom-style\r\n\r\n\t// =============================\r\n\t// Style Functions\r\n\t// =============================\r\n\r\n\t// getComputedStyle drives most of the style code.\r\n\t// Wherever possible, reuse the returned object.\r\n\t//\r\n\t// API functions below that need to access computed styles accept an\r\n\t// optional computedStyle parameter.\r\n\t// If this parameter is omitted, the functions will call getComputedStyle themselves.\r\n\t// This way, calling code can access computedStyle once, and then pass the reference to\r\n\t// multiple API functions.\r\n\r\n\t// Although we normally eschew argument validation at this\r\n\t// level, here we test argument 'node' for (duck)type,\r\n\t// by testing nodeType, ecause 'document' is the 'parentNode' of 'body'\r\n\t// it is frequently sent to this function even\r\n\t// though it is not Element.\r\n\tvar getComputedStyle, style = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module defines the core dojo DOM style API.\r\n\t};\r\n\tif(has(\"webkit\")){\r\n\t\tgetComputedStyle = function(/*DomNode*/ node){\r\n\t\t\tvar s;\r\n\t\t\tif(node.nodeType == 1){\r\n\t\t\t\tvar dv = node.ownerDocument.defaultView;\r\n\t\t\t\ts = dv.getComputedStyle(node, null);\r\n\t\t\t\tif(!s && node.style){\r\n\t\t\t\t\tnode.style.display = \"\";\r\n\t\t\t\t\ts = dv.getComputedStyle(node, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn s || {};\r\n\t\t};\r\n\t}else if(has(\"ie\") && (has(\"ie\") < 9 || has(\"quirks\"))){\r\n\t\tgetComputedStyle = function(node){\r\n\t\t\t// IE (as of 7) doesn't expose Element like sane browsers\r\n\t\t\t// currentStyle can be null on IE8!\r\n\t\t\treturn node.nodeType == 1 /* ELEMENT_NODE*/ && node.currentStyle ? node.currentStyle : {};\r\n\t\t};\r\n\t}else{\r\n\t\tgetComputedStyle = function(node){\r\n\t\t\treturn node.nodeType == 1 /* ELEMENT_NODE*/ ?\r\n\t\t\t\tnode.ownerDocument.defaultView.getComputedStyle(node, null) : {};\r\n\t\t};\r\n\t}\r\n\tstyle.getComputedStyle = getComputedStyle;\r\n\t/*=====\r\n\tstyle.getComputedStyle = function(node){\r\n\t\t// summary:\r\n\t\t//\t\tReturns a \"computed style\" object.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tGets a \"computed style\" object which can be used to gather\r\n\t\t//\t\tinformation about the current state of the rendered node.\r\n\t\t//\r\n\t\t//\t\tNote that this may behave differently on different browsers.\r\n\t\t//\t\tValues may have different formats and value encodings across\r\n\t\t//\t\tbrowsers.\r\n\t\t//\r\n\t\t//\t\tNote also that this method is expensive.  Wherever possible,\r\n\t\t//\t\treuse the returned object.\r\n\t\t//\r\n\t\t//\t\tUse the dojo/dom-style.get() method for more consistent (pixelized)\r\n\t\t//\t\treturn values.\r\n\t\t//\r\n\t\t// node: DOMNode\r\n\t\t//\t\tA reference to a DOM node. Does NOT support taking an\r\n\t\t//\t\tID string for speed reasons.\r\n\t\t// example:\r\n\t\t//\t|\trequire([\"dojo/dom-style\", \"dojo/dom\"], function(domStyle, dom){\r\n\t\t//\t|\t\tdomStyle.getComputedStyle(dom.byId('foo')).borderWidth;\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tReusing the returned object, avoiding multiple lookups:\r\n\t\t//\t|\trequire([\"dojo/dom-style\", \"dojo/dom\"], function(domStyle, dom){\r\n\t\t//\t|\t\tvar cs = domStyle.getComputedStyle(dom.byId(\"someNode\"));\r\n\t\t//\t|\t\tvar w = cs.width, h = cs.height;\r\n\t\t//\t|\t});\r\n\t\treturn; // CSS2Properties\r\n\t};\r\n\t=====*/\r\n\r\n\tvar toPixel;\r\n\tif(!has(\"ie\")){\r\n\t\ttoPixel = function(element, value){\r\n\t\t\t// style values can be floats, client code may want\r\n\t\t\t// to round for integer pixels.\r\n\t\t\treturn parseFloat(value) || 0;\r\n\t\t};\r\n\t}else{\r\n\t\ttoPixel = function(element, avalue){\r\n\t\t\tif(!avalue){ return 0; }\r\n\t\t\t// on IE7, medium is usually 4 pixels\r\n\t\t\tif(avalue == \"medium\"){ return 4; }\r\n\t\t\t// style values can be floats, client code may\r\n\t\t\t// want to round this value for integer pixels.\r\n\t\t\tif(avalue.slice && avalue.slice(-2) == 'px'){ return parseFloat(avalue); }\r\n\t\t\tvar s = element.style, rs = element.runtimeStyle, cs = element.currentStyle,\r\n\t\t\t\tsLeft = s.left, rsLeft = rs.left;\r\n\t\t\trs.left = cs.left;\r\n\t\t\ttry{\r\n\t\t\t\t// 'avalue' may be incompatible with style.left, which can cause IE to throw\r\n\t\t\t\t// this has been observed for border widths using \"thin\", \"medium\", \"thick\" constants\r\n\t\t\t\t// those particular constants could be trapped by a lookup\r\n\t\t\t\t// but perhaps there are more\r\n\t\t\t\ts.left = avalue;\r\n\t\t\t\tavalue = s.pixelLeft;\r\n\t\t\t}catch(e){\r\n\t\t\t\tavalue = 0;\r\n\t\t\t}\r\n\t\t\ts.left = sLeft;\r\n\t\t\trs.left = rsLeft;\r\n\t\t\treturn avalue;\r\n\t\t};\r\n\t}\r\n\tstyle.toPixelValue = toPixel;\r\n\t/*=====\r\n\tstyle.toPixelValue = function(node, value){\r\n\t\t// summary:\r\n\t\t//\t\tconverts style value to pixels on IE or return a numeric value.\r\n\t\t// node: DOMNode\r\n\t\t// value: String\r\n\t\t// returns: Number\r\n\t};\r\n\t=====*/\r\n\r\n\t// FIXME: there opacity quirks on FF that we haven't ported over. Hrm.\r\n\r\n\tvar astr = \"DXImageTransform.Microsoft.Alpha\";\r\n\tvar af = function(n, f){\r\n\t\ttry{\r\n\t\t\treturn n.filters.item(astr);\r\n\t\t}catch(e){\r\n\t\t\treturn f ? {} : null;\r\n\t\t}\r\n\t};\r\n\r\n\tvar _getOpacity =\r\n\t\thas(\"ie\") < 9 || (has(\"ie\") < 10 && has(\"quirks\")) ? function(node){\r\n\t\t\ttry{\r\n\t\t\t\treturn af(node).Opacity / 100; // Number\r\n\t\t\t}catch(e){\r\n\t\t\t\treturn 1; // Number\r\n\t\t\t}\r\n\t\t} :\r\n\t\tfunction(node){\r\n\t\t\treturn getComputedStyle(node).opacity;\r\n\t\t};\r\n\r\n\tvar _setOpacity =\r\n\t\thas(\"ie\") < 9 || (has(\"ie\") < 10 && has(\"quirks\")) ? function(/*DomNode*/ node, /*Number*/ opacity){\r\n\t\t\tif(opacity === \"\"){ opacity = 1; }\r\n\t\t\tvar ov = opacity * 100, fullyOpaque = opacity === 1;\r\n\r\n\t\t\t// on IE7 Alpha(Filter opacity=100) makes text look fuzzy so disable it altogether (bug #2661),\r\n\t\t\t// but still update the opacity value so we can get a correct reading if it is read later:\r\n\t\t\t// af(node, 1).Enabled = !fullyOpaque;\r\n\r\n\t\t\tif(fullyOpaque){\r\n\t\t\t\tnode.style.zoom = \"\";\r\n\t\t\t\tif(af(node)){\r\n\t\t\t\t\tnode.style.filter = node.style.filter.replace(\r\n\t\t\t\t\t\tnew RegExp(\"\\\\s*progid:\" + astr + \"\\\\([^\\\\)]+?\\\\)\", \"i\"), \"\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tnode.style.zoom = 1;\r\n\t\t\t\tif(af(node)){\r\n\t\t\t\t\taf(node, 1).Opacity = ov;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnode.style.filter += \" progid:\" + astr + \"(Opacity=\" + ov + \")\";\r\n\t\t\t\t}\r\n\t\t\t\taf(node, 1).Enabled = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(node.tagName.toLowerCase() == \"tr\"){\r\n\t\t\t\tfor(var td = node.firstChild; td; td = td.nextSibling){\r\n\t\t\t\t\tif(td.tagName.toLowerCase() == \"td\"){\r\n\t\t\t\t\t\t_setOpacity(td, opacity);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn opacity;\r\n\t\t} :\r\n\t\tfunction(node, opacity){\r\n\t\t\treturn node.style.opacity = opacity;\r\n\t\t};\r\n\r\n\tvar _pixelNamesCache = {\r\n\t\tleft: true, top: true\r\n\t};\r\n\tvar _pixelRegExp = /margin|padding|width|height|max|min|offset/; // |border\r\n\tfunction _toStyleValue(node, type, value){\r\n\t\t//TODO: should we really be doing string case conversion here? Should we cache it? Need to profile!\r\n\t\ttype = type.toLowerCase();\r\n\t\tif(has(\"ie\") || has(\"trident\")){\r\n\t\t\tif(value == \"auto\"){\r\n\t\t\t\tif(type == \"height\"){ return node.offsetHeight; }\r\n\t\t\t\tif(type == \"width\"){ return node.offsetWidth; }\r\n\t\t\t}\r\n\t\t\tif(type == \"fontweight\"){\r\n\t\t\t\tswitch(value){\r\n\t\t\t\t\tcase 700: return \"bold\";\r\n\t\t\t\t\tcase 400:\r\n\t\t\t\t\tdefault: return \"normal\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!(type in _pixelNamesCache)){\r\n\t\t\t_pixelNamesCache[type] = _pixelRegExp.test(type);\r\n\t\t}\r\n\t\treturn _pixelNamesCache[type] ? toPixel(node, value) : value;\r\n\t}\r\n\r\n\tvar _floatAliases = {cssFloat: 1, styleFloat: 1, \"float\": 1};\r\n\r\n\t// public API\r\n\r\n\tstyle.get = function getStyle(/*DOMNode|String*/ node, /*String?*/ name){\r\n\t\t// summary:\r\n\t\t//\t\tAccesses styles on a node.\r\n\t\t// description:\r\n\t\t//\t\tGetting the style value uses the computed style for the node, so the value\r\n\t\t//\t\twill be a calculated value, not just the immediate node.style value.\r\n\t\t//\t\tAlso when getting values, use specific style names,\r\n\t\t//\t\tlike \"borderBottomWidth\" instead of \"border\" since compound values like\r\n\t\t//\t\t\"border\" are not necessarily reflected as expected.\r\n\t\t//\t\tIf you want to get node dimensions, use `dojo/dom-geometry.getMarginBox()`,\r\n\t\t//\t\t`dojo/dom-geometry.getContentBox()` or `dojo/dom-geometry.getPosition()`.\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to node to get style for\r\n\t\t// name: String?\r\n\t\t//\t\tthe style property to get\r\n\t\t// example:\r\n\t\t//\t\tPassing only an ID or node returns the computed style object of\r\n\t\t//\t\tthe node:\r\n\t\t//\t|\trequire([\"dojo/dom-style\", \"dojo/dom\"], function(domStyle, dom){\r\n\t\t//\t|\t\tdomStyle.get(\"thinger\");\r\n\t\t//\t|\t});\r\n\t\t// example:\r\n\t\t//\t\tPassing a node and a style property returns the current\r\n\t\t//\t\tnormalized, computed value for that property:\r\n\t\t//\t|\trequire([\"dojo/dom-style\", \"dojo/dom\"], function(domStyle, dom){\r\n\t\t//\t|\t\tdomStyle.get(\"thinger\", \"opacity\"); // 1 by default\r\n\t\t//\t|\t});\r\n\r\n\t\tvar n = dom.byId(node), l = arguments.length, op = (name == \"opacity\");\r\n\t\tif(l == 2 && op){\r\n\t\t\treturn _getOpacity(n);\r\n\t\t}\r\n\t\tname = _floatAliases[name] ? \"cssFloat\" in n.style ? \"cssFloat\" : \"styleFloat\" : name;\r\n\t\tvar s = style.getComputedStyle(n);\r\n\t\treturn (l == 1) ? s : _toStyleValue(n, name, s[name] || n.style[name]); /* CSS2Properties||String||Number */\r\n\t};\r\n\r\n\tstyle.set = function setStyle(/*DOMNode|String*/ node, /*String|Object*/ name, /*String?*/ value){\r\n\t\t// summary:\r\n\t\t//\t\tSets styles on a node.\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to node to set style for\r\n\t\t// name: String|Object\r\n\t\t//\t\tthe style property to set in DOM-accessor format\r\n\t\t//\t\t(\"borderWidth\", not \"border-width\") or an object with key/value\r\n\t\t//\t\tpairs suitable for setting each property.\r\n\t\t// value: String?\r\n\t\t//\t\tIf passed, sets value on the node for style, handling\r\n\t\t//\t\tcross-browser concerns.  When setting a pixel value,\r\n\t\t//\t\tbe sure to include \"px\" in the value. For instance, top: \"200px\".\r\n\t\t//\t\tOtherwise, in some cases, some browsers will not apply the style.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tPassing a node, a style property, and a value changes the\r\n\t\t//\t\tcurrent display of the node and returns the new computed value\r\n\t\t//\t|\trequire([\"dojo/dom-style\"], function(domStyle){\r\n\t\t//\t|\t\tdomStyle.set(\"thinger\", \"opacity\", 0.5); // == 0.5\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tPassing a node, an object-style style property sets each of the values in turn and returns the computed style object of the node:\r\n\t\t//\t|\trequire([\"dojo/dom-style\"], function(domStyle){\r\n\t\t//\t|\t\tdomStyle.set(\"thinger\", {\r\n\t\t//\t|\t\t\t\"opacity\": 0.5,\r\n\t\t//\t|\t\t\t\"border\": \"3px solid black\",\r\n\t\t//\t|\t\t\t\"height\": \"300px\"\r\n\t\t//\t|\t\t});\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tWhen the CSS style property is hyphenated, the JavaScript property is camelCased.\r\n\t\t//\t\tfont-size becomes fontSize, and so on.\r\n\t\t//\t|\trequire([\"dojo/dom-style\", \"dojo/dom\"], function(domStyle, dom){\r\n\t\t//\t|\t\tdomStyle.set(\"thinger\",{\r\n\t\t//\t|\t\t\tfontSize:\"14pt\",\r\n\t\t//\t|\t\t\tletterSpacing:\"1.2em\"\r\n\t\t//\t|\t\t});\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tdojo/NodeList implements .style() using the same syntax, omitting the \"node\" parameter, calling\r\n\t\t//\t\tdojo/dom-style.get() on every element of the list. See: `dojo/query` and `dojo/NodeList`\r\n\t\t//\t|\trequire([\"dojo/dom-style\", \"dojo/query\", \"dojo/NodeList-dom\"],\r\n\t\t//\t|\tfunction(domStyle, query){\r\n\t\t//\t|\t\tquery(\".someClassName\").style(\"visibility\",\"hidden\");\r\n\t\t//\t|\t\t// or\r\n\t\t//\t|\t\tquery(\"#baz > div\").style({\r\n\t\t//\t|\t\t\topacity:0.75,\r\n\t\t//\t|\t\t\tfontSize:\"13pt\"\r\n\t\t//\t|\t\t});\r\n\t\t//\t|\t});\r\n\r\n\t\tvar n = dom.byId(node), l = arguments.length, op = (name == \"opacity\");\r\n\t\tname = _floatAliases[name] ? \"cssFloat\" in n.style ? \"cssFloat\" : \"styleFloat\" : name;\r\n\t\tif(l == 3){\r\n\t\t\treturn op ? _setOpacity(n, value) : n.style[name] = value; // Number\r\n\t\t}\r\n\t\tfor(var x in name){\r\n\t\t\tstyle.set(node, x, name[x]);\r\n\t\t}\r\n\t\treturn style.getComputedStyle(n);\r\n\t};\r\n\r\n\treturn style;\r\n});\r\n\ndefine('dojo/dom-geometry',[\"./sniff\", \"./_base/window\",\"./dom\", \"./dom-style\"],\r\n\t\tfunction(has, win, dom, style){\r\n\t// module:\r\n\t//\t\tdojo/dom-geometry\r\n\r\n\t// the result object\r\n\tvar geom = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module defines the core dojo DOM geometry API.\r\n\t};\r\n\r\n\t// Box functions will assume this model.\r\n\t// On IE/Opera, BORDER_BOX will be set if the primary document is in quirks mode.\r\n\t// Can be set to change behavior of box setters.\r\n\r\n\t// can be either:\r\n\t//\t\"border-box\"\r\n\t//\t\"content-box\" (default)\r\n\tgeom.boxModel = \"content-box\";\r\n\r\n\t// We punt per-node box mode testing completely.\r\n\t// If anybody cares, we can provide an additional (optional) unit\r\n\t// that overrides existing code to include per-node box sensitivity.\r\n\r\n\t// Opera documentation claims that Opera 9 uses border-box in BackCompat mode.\r\n\t// but experiments (Opera 9.10.8679 on Windows Vista) indicate that it actually continues to use content-box.\r\n\t// IIRC, earlier versions of Opera did in fact use border-box.\r\n\t// Opera guys, this is really confusing. Opera being broken in quirks mode is not our fault.\r\n\r\n\tif(has(\"ie\") /*|| has(\"opera\")*/){\r\n\t\t// client code may have to adjust if compatMode varies across iframes\r\n\t\tgeom.boxModel = document.compatMode == \"BackCompat\" ? \"border-box\" : \"content-box\";\r\n\t}\r\n\r\n\tgeom.getPadExtents = function getPadExtents(/*DomNode*/ node, /*Object*/ computedStyle){\r\n\t\t// summary:\r\n\t\t//\t\tReturns object with special values specifically useful for node\r\n\t\t//\t\tfitting.\r\n\t\t// description:\r\n\t\t//\t\tReturns an object with `w`, `h`, `l`, `t` properties:\r\n\t\t//\t|\t\tl/t/r/b = left/top/right/bottom padding (respectively)\r\n\t\t//\t|\t\tw = the total of the left and right padding\r\n\t\t//\t|\t\th = the total of the top and bottom padding\r\n\t\t//\t\tIf 'node' has position, l/t forms the origin for child nodes.\r\n\t\t//\t\tThe w/h are used for calculating boxes.\r\n\t\t//\t\tNormally application code will not need to invoke this\r\n\t\t//\t\tdirectly, and will use the ...box... functions instead.\r\n\t\t// node: DOMNode\r\n\t\t// computedStyle: Object?\r\n\t\t//\t\tThis parameter accepts computed styles object.\r\n\t\t//\t\tIf this parameter is omitted, the functions will call\r\n\t\t//\t\tdojo/dom-style.getComputedStyle to get one. It is a better way, calling\r\n\t\t//\t\tdojo/dom-style.getComputedStyle once, and then pass the reference to this\r\n\t\t//\t\tcomputedStyle parameter. Wherever possible, reuse the returned\r\n\t\t//\t\tobject of dojo/dom-style.getComputedStyle().\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar s = computedStyle || style.getComputedStyle(node), px = style.toPixelValue,\r\n\t\t\tl = px(node, s.paddingLeft), t = px(node, s.paddingTop), r = px(node, s.paddingRight), b = px(node, s.paddingBottom);\r\n\t\treturn {l: l, t: t, r: r, b: b, w: l + r, h: t + b};\r\n\t};\r\n\r\n\tvar none = \"none\";\r\n\r\n\tgeom.getBorderExtents = function getBorderExtents(/*DomNode*/ node, /*Object*/ computedStyle){\r\n\t\t// summary:\r\n\t\t//\t\treturns an object with properties useful for noting the border\r\n\t\t//\t\tdimensions.\r\n\t\t// description:\r\n\t\t//\t\t- l/t/r/b = the sum of left/top/right/bottom border (respectively)\r\n\t\t//\t\t- w = the sum of the left and right border\r\n\t\t//\t\t- h = the sum of the top and bottom border\r\n\t\t//\r\n\t\t//\t\tThe w/h are used for calculating boxes.\r\n\t\t//\t\tNormally application code will not need to invoke this\r\n\t\t//\t\tdirectly, and will use the ...box... functions instead.\r\n\t\t// node: DOMNode\r\n\t\t// computedStyle: Object?\r\n\t\t//\t\tThis parameter accepts computed styles object.\r\n\t\t//\t\tIf this parameter is omitted, the functions will call\r\n\t\t//\t\tdojo/dom-style.getComputedStyle to get one. It is a better way, calling\r\n\t\t//\t\tdojo/dom-style.getComputedStyle once, and then pass the reference to this\r\n\t\t//\t\tcomputedStyle parameter. Wherever possible, reuse the returned\r\n\t\t//\t\tobject of dojo/dom-style.getComputedStyle().\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar px = style.toPixelValue, s = computedStyle || style.getComputedStyle(node),\r\n\t\t\tl = s.borderLeftStyle != none ? px(node, s.borderLeftWidth) : 0,\r\n\t\t\tt = s.borderTopStyle != none ? px(node, s.borderTopWidth) : 0,\r\n\t\t\tr = s.borderRightStyle != none ? px(node, s.borderRightWidth) : 0,\r\n\t\t\tb = s.borderBottomStyle != none ? px(node, s.borderBottomWidth) : 0;\r\n\t\treturn {l: l, t: t, r: r, b: b, w: l + r, h: t + b};\r\n\t};\r\n\r\n\tgeom.getPadBorderExtents = function getPadBorderExtents(/*DomNode*/ node, /*Object*/ computedStyle){\r\n\t\t// summary:\r\n\t\t//\t\tReturns object with properties useful for box fitting with\r\n\t\t//\t\tregards to padding.\r\n\t\t// description:\r\n\t\t//\t\t- l/t/r/b = the sum of left/top/right/bottom padding and left/top/right/bottom border (respectively)\r\n\t\t//\t\t- w = the sum of the left and right padding and border\r\n\t\t//\t\t- h = the sum of the top and bottom padding and border\r\n\t\t//\r\n\t\t//\t\tThe w/h are used for calculating boxes.\r\n\t\t//\t\tNormally application code will not need to invoke this\r\n\t\t//\t\tdirectly, and will use the ...box... functions instead.\r\n\t\t// node: DOMNode\r\n\t\t// computedStyle: Object?\r\n\t\t//\t\tThis parameter accepts computed styles object.\r\n\t\t//\t\tIf this parameter is omitted, the functions will call\r\n\t\t//\t\tdojo/dom-style.getComputedStyle to get one. It is a better way, calling\r\n\t\t//\t\tdojo/dom-style.getComputedStyle once, and then pass the reference to this\r\n\t\t//\t\tcomputedStyle parameter. Wherever possible, reuse the returned\r\n\t\t//\t\tobject of dojo/dom-style.getComputedStyle().\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar s = computedStyle || style.getComputedStyle(node),\r\n\t\t\tp = geom.getPadExtents(node, s),\r\n\t\t\tb = geom.getBorderExtents(node, s);\r\n\t\treturn {\r\n\t\t\tl: p.l + b.l,\r\n\t\t\tt: p.t + b.t,\r\n\t\t\tr: p.r + b.r,\r\n\t\t\tb: p.b + b.b,\r\n\t\t\tw: p.w + b.w,\r\n\t\t\th: p.h + b.h\r\n\t\t};\r\n\t};\r\n\r\n\tgeom.getMarginExtents = function getMarginExtents(node, computedStyle){\r\n\t\t// summary:\r\n\t\t//\t\treturns object with properties useful for box fitting with\r\n\t\t//\t\tregards to box margins (i.e., the outer-box).\r\n\t\t//\r\n\t\t//\t\t- l/t = marginLeft, marginTop, respectively\r\n\t\t//\t\t- w = total width, margin inclusive\r\n\t\t//\t\t- h = total height, margin inclusive\r\n\t\t//\r\n\t\t//\t\tThe w/h are used for calculating boxes.\r\n\t\t//\t\tNormally application code will not need to invoke this\r\n\t\t//\t\tdirectly, and will use the ...box... functions instead.\r\n\t\t// node: DOMNode\r\n\t\t// computedStyle: Object?\r\n\t\t//\t\tThis parameter accepts computed styles object.\r\n\t\t//\t\tIf this parameter is omitted, the functions will call\r\n\t\t//\t\tdojo/dom-style.getComputedStyle to get one. It is a better way, calling\r\n\t\t//\t\tdojo/dom-style.getComputedStyle once, and then pass the reference to this\r\n\t\t//\t\tcomputedStyle parameter. Wherever possible, reuse the returned\r\n\t\t//\t\tobject of dojo/dom-style.getComputedStyle().\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar s = computedStyle || style.getComputedStyle(node), px = style.toPixelValue,\r\n\t\t\tl = px(node, s.marginLeft), t = px(node, s.marginTop), r = px(node, s.marginRight), b = px(node, s.marginBottom);\r\n\t\treturn {l: l, t: t, r: r, b: b, w: l + r, h: t + b};\r\n\t};\r\n\r\n\t// Box getters work in any box context because offsetWidth/clientWidth\r\n\t// are invariant wrt box context\r\n\t//\r\n\t// They do *not* work for display: inline objects that have padding styles\r\n\t// because the user agent ignores padding (it's bogus styling in any case)\r\n\t//\r\n\t// Be careful with IMGs because they are inline or block depending on\r\n\t// browser and browser mode.\r\n\r\n\t// Although it would be easier to read, there are not separate versions of\r\n\t// _getMarginBox for each browser because:\r\n\t// 1. the branching is not expensive\r\n\t// 2. factoring the shared code wastes cycles (function call overhead)\r\n\t// 3. duplicating the shared code wastes bytes\r\n\r\n\tgeom.getMarginBox = function getMarginBox(/*DomNode*/ node, /*Object*/ computedStyle){\r\n\t\t// summary:\r\n\t\t//\t\treturns an object that encodes the width, height, left and top\r\n\t\t//\t\tpositions of the node's margin box.\r\n\t\t// node: DOMNode\r\n\t\t// computedStyle: Object?\r\n\t\t//\t\tThis parameter accepts computed styles object.\r\n\t\t//\t\tIf this parameter is omitted, the functions will call\r\n\t\t//\t\tdojo/dom-style.getComputedStyle to get one. It is a better way, calling\r\n\t\t//\t\tdojo/dom-style.getComputedStyle once, and then pass the reference to this\r\n\t\t//\t\tcomputedStyle parameter. Wherever possible, reuse the returned\r\n\t\t//\t\tobject of dojo/dom-style.getComputedStyle().\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar s = computedStyle || style.getComputedStyle(node), me = geom.getMarginExtents(node, s),\r\n\t\t\tl = node.offsetLeft - me.l, t = node.offsetTop - me.t, p = node.parentNode, px = style.toPixelValue, pcs;\r\n\t\tif(has(\"mozilla\")){\r\n\t\t\t// Mozilla:\r\n\t\t\t// If offsetParent has a computed overflow != visible, the offsetLeft is decreased\r\n\t\t\t// by the parent's border.\r\n\t\t\t// We don't want to compute the parent's style, so instead we examine node's\r\n\t\t\t// computed left/top which is more stable.\r\n\t\t\tvar sl = parseFloat(s.left), st = parseFloat(s.top);\r\n\t\t\tif(!isNaN(sl) && !isNaN(st)){\r\n\t\t\t\tl = sl;\r\n\t\t\t\tt = st;\r\n\t\t\t}else{\r\n\t\t\t\t// If child's computed left/top are not parseable as a number (e.g. \"auto\"), we\r\n\t\t\t\t// have no choice but to examine the parent's computed style.\r\n\t\t\t\tif(p && p.style){\r\n\t\t\t\t\tpcs = style.getComputedStyle(p);\r\n\t\t\t\t\tif(pcs.overflow != \"visible\"){\r\n\t\t\t\t\t\tl += pcs.borderLeftStyle != none ? px(node, pcs.borderLeftWidth) : 0;\r\n\t\t\t\t\t\tt += pcs.borderTopStyle != none ? px(node, pcs.borderTopWidth) : 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if(has(\"opera\") || (has(\"ie\") == 8 && !has(\"quirks\"))){\r\n\t\t\t// On Opera and IE 8, offsetLeft/Top includes the parent's border\r\n\t\t\tif(p){\r\n\t\t\t\tpcs = style.getComputedStyle(p);\r\n\t\t\t\tl -= pcs.borderLeftStyle != none ? px(node, pcs.borderLeftWidth) : 0;\r\n\t\t\t\tt -= pcs.borderTopStyle != none ? px(node, pcs.borderTopWidth) : 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {l: l, t: t, w: node.offsetWidth + me.w, h: node.offsetHeight + me.h};\r\n\t};\r\n\r\n\tgeom.getContentBox = function getContentBox(node, computedStyle){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an object that encodes the width, height, left and top\r\n\t\t//\t\tpositions of the node's content box, irrespective of the\r\n\t\t//\t\tcurrent box model.\r\n\t\t// node: DOMNode\r\n\t\t// computedStyle: Object?\r\n\t\t//\t\tThis parameter accepts computed styles object.\r\n\t\t//\t\tIf this parameter is omitted, the functions will call\r\n\t\t//\t\tdojo/dom-style.getComputedStyle to get one. It is a better way, calling\r\n\t\t//\t\tdojo/dom-style.getComputedStyle once, and then pass the reference to this\r\n\t\t//\t\tcomputedStyle parameter. Wherever possible, reuse the returned\r\n\t\t//\t\tobject of dojo/dom-style.getComputedStyle().\r\n\r\n\t\t// clientWidth/Height are important since the automatically account for scrollbars\r\n\t\t// fallback to offsetWidth/Height for special cases (see #3378)\r\n\t\tnode = dom.byId(node);\r\n\t\tvar s = computedStyle || style.getComputedStyle(node), w = node.clientWidth, h,\r\n\t\t\tpe = geom.getPadExtents(node, s), be = geom.getBorderExtents(node, s);\r\n\t\tif(!w){\r\n\t\t\tw = node.offsetWidth;\r\n\t\t\th = node.offsetHeight;\r\n\t\t}else{\r\n\t\t\th = node.clientHeight;\r\n\t\t\tbe.w = be.h = 0;\r\n\t\t}\r\n\t\t// On Opera, offsetLeft includes the parent's border\r\n\t\tif(has(\"opera\")){\r\n\t\t\tpe.l += be.l;\r\n\t\t\tpe.t += be.t;\r\n\t\t}\r\n\t\treturn {l: pe.l, t: pe.t, w: w - pe.w - be.w, h: h - pe.h - be.h};\r\n\t};\r\n\r\n\t// Box setters depend on box context because interpretation of width/height styles\r\n\t// vary wrt box context.\r\n\t//\r\n\t// The value of boxModel is used to determine box context.\r\n\t// boxModel can be set directly to change behavior.\r\n\t//\r\n\t// Beware of display: inline objects that have padding styles\r\n\t// because the user agent ignores padding (it's a bogus setup anyway)\r\n\t//\r\n\t// Be careful with IMGs because they are inline or block depending on\r\n\t// browser and browser mode.\r\n\t//\r\n\t// Elements other than DIV may have special quirks, like built-in\r\n\t// margins or padding, or values not detectable via computedStyle.\r\n\t// In particular, margins on TABLE do not seems to appear\r\n\t// at all in computedStyle on Mozilla.\r\n\r\n\tfunction setBox(/*DomNode*/ node, /*Number?*/ l, /*Number?*/ t, /*Number?*/ w, /*Number?*/ h, /*String?*/ u){\r\n\t\t// summary:\r\n\t\t//\t\tsets width/height/left/top in the current (native) box-model\r\n\t\t//\t\tdimensions. Uses the unit passed in u.\r\n\t\t// node:\r\n\t\t//\t\tDOM Node reference. Id string not supported for performance\r\n\t\t//\t\treasons.\r\n\t\t// l:\r\n\t\t//\t\tleft offset from parent.\r\n\t\t// t:\r\n\t\t//\t\ttop offset from parent.\r\n\t\t// w:\r\n\t\t//\t\twidth in current box model.\r\n\t\t// h:\r\n\t\t//\t\twidth in current box model.\r\n\t\t// u:\r\n\t\t//\t\tunit measure to use for other measures. Defaults to \"px\".\r\n\t\tu = u || \"px\";\r\n\t\tvar s = node.style;\r\n\t\tif(!isNaN(l)){\r\n\t\t\ts.left = l + u;\r\n\t\t}\r\n\t\tif(!isNaN(t)){\r\n\t\t\ts.top = t + u;\r\n\t\t}\r\n\t\tif(w >= 0){\r\n\t\t\ts.width = w + u;\r\n\t\t}\r\n\t\tif(h >= 0){\r\n\t\t\ts.height = h + u;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isButtonTag(/*DomNode*/ node){\r\n\t\t// summary:\r\n\t\t//\t\tTrue if the node is BUTTON or INPUT.type=\"button\".\r\n\t\treturn node.tagName.toLowerCase() == \"button\" ||\r\n\t\t\tnode.tagName.toLowerCase() == \"input\" && (node.getAttribute(\"type\") || \"\").toLowerCase() == \"button\"; // boolean\r\n\t}\r\n\r\n\tfunction usesBorderBox(/*DomNode*/ node){\r\n\t\t// summary:\r\n\t\t//\t\tTrue if the node uses border-box layout.\r\n\r\n\t\t// We could test the computed style of node to see if a particular box\r\n\t\t// has been specified, but there are details and we choose not to bother.\r\n\r\n\t\t// TABLE and BUTTON (and INPUT type=button) are always border-box by default.\r\n\t\t// If you have assigned a different box to either one via CSS then\r\n\t\t// box functions will break.\r\n\r\n\t\treturn geom.boxModel == \"border-box\" || node.tagName.toLowerCase() == \"table\" || isButtonTag(node); // boolean\r\n\t}\r\n\r\n\tgeom.setContentSize = function setContentSize(/*DomNode*/ node, /*Object*/ box, /*Object*/ computedStyle){\r\n\t\t// summary:\r\n\t\t//\t\tSets the size of the node's contents, irrespective of margins,\r\n\t\t//\t\tpadding, or borders.\r\n\t\t// node: DOMNode\r\n\t\t// box: Object\r\n\t\t//\t\thash with optional \"w\", and \"h\" properties for \"width\", and \"height\"\r\n\t\t//\t\trespectively. All specified properties should have numeric values in whole pixels.\r\n\t\t// computedStyle: Object?\r\n\t\t//\t\tThis parameter accepts computed styles object.\r\n\t\t//\t\tIf this parameter is omitted, the functions will call\r\n\t\t//\t\tdojo/dom-style.getComputedStyle to get one. It is a better way, calling\r\n\t\t//\t\tdojo/dom-style.getComputedStyle once, and then pass the reference to this\r\n\t\t//\t\tcomputedStyle parameter. Wherever possible, reuse the returned\r\n\t\t//\t\tobject of dojo/dom-style.getComputedStyle().\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar w = box.w, h = box.h;\r\n\t\tif(usesBorderBox(node)){\r\n\t\t\tvar pb = geom.getPadBorderExtents(node, computedStyle);\r\n\t\t\tif(w >= 0){\r\n\t\t\t\tw += pb.w;\r\n\t\t\t}\r\n\t\t\tif(h >= 0){\r\n\t\t\t\th += pb.h;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetBox(node, NaN, NaN, w, h);\r\n\t};\r\n\r\n\tvar nilExtents = {l: 0, t: 0, w: 0, h: 0};\r\n\r\n\tgeom.setMarginBox = function setMarginBox(/*DomNode*/ node, /*Object*/ box, /*Object*/ computedStyle){\r\n\t\t// summary:\r\n\t\t//\t\tsets the size of the node's margin box and placement\r\n\t\t//\t\t(left/top), irrespective of box model. Think of it as a\r\n\t\t//\t\tpassthrough to setBox that handles box-model vagaries for\r\n\t\t//\t\tyou.\r\n\t\t// node: DOMNode\r\n\t\t// box: Object\r\n\t\t//\t\thash with optional \"l\", \"t\", \"w\", and \"h\" properties for \"left\", \"right\", \"width\", and \"height\"\r\n\t\t//\t\trespectively. All specified properties should have numeric values in whole pixels.\r\n\t\t// computedStyle: Object?\r\n\t\t//\t\tThis parameter accepts computed styles object.\r\n\t\t//\t\tIf this parameter is omitted, the functions will call\r\n\t\t//\t\tdojo/dom-style.getComputedStyle to get one. It is a better way, calling\r\n\t\t//\t\tdojo/dom-style.getComputedStyle once, and then pass the reference to this\r\n\t\t//\t\tcomputedStyle parameter. Wherever possible, reuse the returned\r\n\t\t//\t\tobject of dojo/dom-style.getComputedStyle().\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar s = computedStyle || style.getComputedStyle(node), w = box.w, h = box.h,\r\n\t\t// Some elements have special padding, margin, and box-model settings.\r\n\t\t// To use box functions you may need to set padding, margin explicitly.\r\n\t\t// Controlling box-model is harder, in a pinch you might set dojo/dom-geometry.boxModel.\r\n\t\t\tpb = usesBorderBox(node) ? nilExtents : geom.getPadBorderExtents(node, s),\r\n\t\t\tmb = geom.getMarginExtents(node, s);\r\n\t\tif(has(\"webkit\")){\r\n\t\t\t// on Safari (3.1.2), button nodes with no explicit size have a default margin\r\n\t\t\t// setting an explicit size eliminates the margin.\r\n\t\t\t// We have to swizzle the width to get correct margin reading.\r\n\t\t\tif(isButtonTag(node)){\r\n\t\t\t\tvar ns = node.style;\r\n\t\t\t\tif(w >= 0 && !ns.width){\r\n\t\t\t\t\tns.width = \"4px\";\r\n\t\t\t\t}\r\n\t\t\t\tif(h >= 0 && !ns.height){\r\n\t\t\t\t\tns.height = \"4px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(w >= 0){\r\n\t\t\tw = Math.max(w - pb.w - mb.w, 0);\r\n\t\t}\r\n\t\tif(h >= 0){\r\n\t\t\th = Math.max(h - pb.h - mb.h, 0);\r\n\t\t}\r\n\t\tsetBox(node, box.l, box.t, w, h);\r\n\t};\r\n\r\n\t// =============================\r\n\t// Positioning\r\n\t// =============================\r\n\r\n\tgeom.isBodyLtr = function isBodyLtr(/*Document?*/ doc){\r\n\t\t// summary:\r\n\t\t//\t\tReturns true if the current language is left-to-right, and false otherwise.\r\n\t\t// doc: Document?\r\n\t\t//\t\tOptional document to query.   If unspecified, use win.doc.\r\n\t\t// returns: Boolean\r\n\r\n\t\tdoc = doc || win.doc;\r\n\t\treturn (win.body(doc).dir || doc.documentElement.dir || \"ltr\").toLowerCase() == \"ltr\"; // Boolean\r\n\t};\r\n\r\n\tgeom.docScroll = function docScroll(/*Document?*/ doc){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an object with {node, x, y} with corresponding offsets.\r\n\t\t// doc: Document?\r\n\t\t//\t\tOptional document to query.   If unspecified, use win.doc.\r\n\t\t// returns: Object\r\n\r\n\t\tdoc = doc || win.doc;\r\n\t\tvar node = win.doc.parentWindow || win.doc.defaultView;   // use UI window, not dojo.global window.   TODO: use dojo/window::get() except for circular dependency problem\r\n\t\treturn \"pageXOffset\" in node ? {x: node.pageXOffset, y: node.pageYOffset } :\r\n\t\t\t(node = has(\"quirks\") ? win.body(doc) : doc.documentElement) &&\r\n\t\t\t\t{x: geom.fixIeBiDiScrollLeft(node.scrollLeft || 0, doc), y: node.scrollTop || 0 };\r\n\t};\r\n\r\n\tif(has(\"ie\")){\r\n\t\tgeom.getIeDocumentElementOffset = function getIeDocumentElementOffset(/*Document?*/ doc){\r\n\t\t\t// summary:\r\n\t\t\t//\t\treturns the offset in x and y from the document body to the\r\n\t\t\t//\t\tvisual edge of the page for IE\r\n\t\t\t// doc: Document?\r\n\t\t\t//\t\tOptional document to query.   If unspecified, use win.doc.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThe following values in IE contain an offset:\r\n\t\t\t//\t|\t\tevent.clientX\r\n\t\t\t//\t|\t\tevent.clientY\r\n\t\t\t//\t|\t\tnode.getBoundingClientRect().left\r\n\t\t\t//\t|\t\tnode.getBoundingClientRect().top\r\n\t\t\t//\t\tBut other position related values do not contain this offset,\r\n\t\t\t//\t\tsuch as node.offsetLeft, node.offsetTop, node.style.left and\r\n\t\t\t//\t\tnode.style.top. The offset is always (2, 2) in LTR direction.\r\n\t\t\t//\t\tWhen the body is in RTL direction, the offset counts the width\r\n\t\t\t//\t\tof left scroll bar's width.  This function computes the actual\r\n\t\t\t//\t\toffset.\r\n\r\n\t\t\t//NOTE: assumes we're being called in an IE browser\r\n\r\n\t\t\tdoc = doc || win.doc;\r\n\t\t\tvar de = doc.documentElement; // only deal with HTML element here, position() handles body/quirks\r\n\r\n\t\t\tif(has(\"ie\") < 8){\r\n\t\t\t\tvar r = de.getBoundingClientRect(), // works well for IE6+\r\n\t\t\t\t\tl = r.left, t = r.top;\r\n\t\t\t\tif(has(\"ie\") < 7){\r\n\t\t\t\t\tl += de.clientLeft;\t// scrollbar size in strict/RTL, or,\r\n\t\t\t\t\tt += de.clientTop;\t// HTML border size in strict\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx: l < 0 ? 0 : l, // FRAME element border size can lead to inaccurate negative values\r\n\t\t\t\t\ty: t < 0 ? 0 : t\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tgeom.fixIeBiDiScrollLeft = function fixIeBiDiScrollLeft(/*Integer*/ scrollLeft, /*Document?*/ doc){\r\n\t\t// summary:\r\n\t\t//\t\tIn RTL direction, scrollLeft should be a negative value, but IE\r\n\t\t//\t\treturns a positive one. All codes using documentElement.scrollLeft\r\n\t\t//\t\tmust call this function to fix this error, otherwise the position\r\n\t\t//\t\twill offset to right when there is a horizontal scrollbar.\r\n\t\t// scrollLeft: Number\r\n\t\t// doc: Document?\r\n\t\t//\t\tOptional document to query.   If unspecified, use win.doc.\r\n\t\t// returns: Number\r\n\r\n\t\t// In RTL direction, scrollLeft should be a negative value, but IE\r\n\t\t// returns a positive one. All codes using documentElement.scrollLeft\r\n\t\t// must call this function to fix this error, otherwise the position\r\n\t\t// will offset to right when there is a horizontal scrollbar.\r\n\r\n\t\tdoc = doc || win.doc;\r\n\t\tvar ie = has(\"ie\");\r\n\t\tif(ie && !geom.isBodyLtr(doc)){\r\n\t\t\tvar qk = has(\"quirks\"),\r\n\t\t\t\tde = qk ? win.body(doc) : doc.documentElement,\r\n\t\t\t\tpwin = win.global;\t// TODO: use winUtils.get(doc) after resolving circular dependency b/w dom-geometry.js and dojo/window.js\r\n\t\t\tif(ie == 6 && !qk && pwin.frameElement && de.scrollHeight > de.clientHeight){\r\n\t\t\t\tscrollLeft += de.clientLeft; // workaround ie6+strict+rtl+iframe+vertical-scrollbar bug where clientWidth is too small by clientLeft pixels\r\n\t\t\t}\r\n\t\t\treturn (ie < 8 || qk) ? (scrollLeft + de.clientWidth - de.scrollWidth) : -scrollLeft; // Integer\r\n\t\t}\r\n\t\treturn scrollLeft; // Integer\r\n\t};\r\n\r\n\tgeom.position = function(/*DomNode*/ node, /*Boolean?*/ includeScroll){\r\n\t\t// summary:\r\n\t\t//\t\tGets the position and size of the passed element relative to\r\n\t\t//\t\tthe viewport (if includeScroll==false), or relative to the\r\n\t\t//\t\tdocument root (if includeScroll==true).\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tReturns an object of the form:\r\n\t\t//\t\t`{ x: 100, y: 300, w: 20, h: 15 }`.\r\n\t\t//\t\tIf includeScroll==true, the x and y values will include any\r\n\t\t//\t\tdocument offsets that may affect the position relative to the\r\n\t\t//\t\tviewport.\r\n\t\t//\t\tUses the border-box model (inclusive of border and padding but\r\n\t\t//\t\tnot margin).  Does not act as a setter.\r\n\t\t// node: DOMNode|String\r\n\t\t// includeScroll: Boolean?\r\n\t\t// returns: Object\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar\tdb = win.body(node.ownerDocument),\r\n\t\t\tret = node.getBoundingClientRect();\r\n\t\tret = {x: ret.left, y: ret.top, w: ret.right - ret.left, h: ret.bottom - ret.top};\r\n\r\n\t\tif(has(\"ie\") < 9){\r\n\t\t\t// On IE<9 there's a 2px offset that we need to adjust for, see dojo.getIeDocumentElementOffset()\r\n\t\t\tvar offset = geom.getIeDocumentElementOffset(node.ownerDocument);\r\n\r\n\t\t\t// fixes the position in IE, quirks mode\r\n\t\t\tret.x -= offset.x + (has(\"quirks\") ? db.clientLeft + db.offsetLeft : 0);\r\n\t\t\tret.y -= offset.y + (has(\"quirks\") ? db.clientTop + db.offsetTop : 0);\r\n\t\t}\r\n\r\n\t\t// account for document scrolling\r\n\t\t// if offsetParent is used, ret value already includes scroll position\r\n\t\t// so we may have to actually remove that value if !includeScroll\r\n\t\tif(includeScroll){\r\n\t\t\tvar scroll = geom.docScroll(node.ownerDocument);\r\n\t\t\tret.x += scroll.x;\r\n\t\t\tret.y += scroll.y;\r\n\t\t}\r\n\r\n\t\treturn ret; // Object\r\n\t};\r\n\r\n\t// random \"private\" functions wildly used throughout the toolkit\r\n\r\n\tgeom.getMarginSize = function getMarginSize(/*DomNode*/ node, /*Object*/ computedStyle){\r\n\t\t// summary:\r\n\t\t//\t\treturns an object that encodes the width and height of\r\n\t\t//\t\tthe node's margin box\r\n\t\t// node: DOMNode|String\r\n\t\t// computedStyle: Object?\r\n\t\t//\t\tThis parameter accepts computed styles object.\r\n\t\t//\t\tIf this parameter is omitted, the functions will call\r\n\t\t//\t\tdojo/dom-style.getComputedStyle to get one. It is a better way, calling\r\n\t\t//\t\tdojo/dom-style.getComputedStyle once, and then pass the reference to this\r\n\t\t//\t\tcomputedStyle parameter. Wherever possible, reuse the returned\r\n\t\t//\t\tobject of dojo/dom-style.getComputedStyle().\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar me = geom.getMarginExtents(node, computedStyle || style.getComputedStyle(node));\r\n\t\tvar size = node.getBoundingClientRect();\r\n\t\treturn {\r\n\t\t\tw: (size.right - size.left) + me.w,\r\n\t\t\th: (size.bottom - size.top) + me.h\r\n\t\t};\r\n\t};\r\n\r\n\tgeom.normalizeEvent = function(event){\r\n\t\t// summary:\r\n\t\t//\t\tNormalizes the geometry of a DOM event, normalizing the pageX, pageY,\r\n\t\t//\t\toffsetX, offsetY, layerX, and layerX properties\r\n\t\t// event: Object\r\n\t\tif(!(\"layerX\" in event)){\r\n\t\t\tevent.layerX = event.offsetX;\r\n\t\t\tevent.layerY = event.offsetY;\r\n\t\t}\r\n\t\tif(!has(\"dom-addeventlistener\")){\r\n\t\t\t// old IE version\r\n\t\t\t// FIXME: scroll position query is duped from dojo/_base/html to\r\n\t\t\t// avoid dependency on that entire module. Now that HTML is in\r\n\t\t\t// Base, we should convert back to something similar there.\r\n\t\t\tvar se = event.target;\r\n\t\t\tvar doc = (se && se.ownerDocument) || document;\r\n\t\t\t// DO NOT replace the following to use dojo/_base/window.body(), in IE, document.documentElement should be used\r\n\t\t\t// here rather than document.body\r\n\t\t\tvar docBody = has(\"quirks\") ? doc.body : doc.documentElement;\r\n\t\t\tvar offset = geom.getIeDocumentElementOffset(doc);\r\n\t\t\tevent.pageX = event.clientX + geom.fixIeBiDiScrollLeft(docBody.scrollLeft || 0, doc) - offset.x;\r\n\t\t\tevent.pageY = event.clientY + (docBody.scrollTop || 0) - offset.y;\r\n\t\t}\r\n\t};\r\n\r\n\t// TODO: evaluate separate getters/setters for position and sizes?\r\n\r\n\treturn geom;\r\n});\r\n\ndefine('dojo/_base/event',[\"./kernel\", \"../on\", \"../has\", \"../dom-geometry\"], function(dojo, on, has, dom){\r\n\t// module:\r\n\t//\t\tdojo/_base/event\r\n\r\n\tif(on._fixEvent){\r\n\t\tvar fixEvent = on._fixEvent;\r\n\t\ton._fixEvent = function(evt, se){\r\n\t\t\t// add some additional normalization for back-compat, this isn't in on.js because it is somewhat more expensive\r\n\t\t\tevt = fixEvent(evt, se);\r\n\t\t\tif(evt){\r\n\t\t\t\tdom.normalizeEvent(evt);\r\n\t\t\t}\r\n\t\t\treturn evt;\r\n\t\t};\t\t\r\n\t}\r\n\t\r\n\tvar ret = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module defines dojo DOM event API.   Usually you should use dojo/on, and evt.stopPropagation() +\r\n\t\t//\t\tevt.preventDefault(), rather than this module.\r\n\r\n\t\tfix: function(/*Event*/ evt, /*DOMNode*/ sender){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tnormalizes properties on the event object including event\r\n\t\t\t//\t\tbubbling methods, keystroke normalization, and x/y positions\r\n\t\t\t// evt: Event\r\n\t\t\t//\t\tnative event object\r\n\t\t\t// sender: DOMNode\r\n\t\t\t//\t\tnode to treat as \"currentTarget\"\r\n\t\t\tif(on._fixEvent){\r\n\t\t\t\treturn on._fixEvent(evt, sender);\r\n\t\t\t}\r\n\t\t\treturn evt;\t// Event\r\n\t\t},\r\n\t\r\n\t\tstop: function(/*Event*/ evt){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tprevents propagation and clobbers the default action of the\r\n\t\t\t//\t\tpassed event\r\n\t\t\t// evt: Event\r\n\t\t\t//\t\tThe event object. If omitted, window.event is used on IE.\r\n\t\t\tif(has(\"dom-addeventlistener\") || (evt && evt.preventDefault)){\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t}else{\r\n\t\t\t\tevt = evt || window.event;\r\n\t\t\t\tevt.cancelBubble = true;\r\n\t\t\t\ton._preventDefault.call(evt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tif(has(\"extend-dojo\")){\r\n\t\tdojo.fixEvent = ret.fix;\r\n\t\tdojo.stopEvent = ret.stop;\r\n\t}\r\n\r\n\treturn ret;\r\n});\r\n\ndefine('dojo/mouse',[\"./_base/kernel\", \"./on\", \"./has\", \"./dom\", \"./_base/window\"], function(dojo, on, has, dom, win){\r\n\r\n\t// module:\r\n\t//\t\tdojo/mouse\r\n\r\n    has.add(\"dom-quirks\", win.doc && win.doc.compatMode == \"BackCompat\");\r\n\thas.add(\"events-mouseenter\", win.doc && \"onmouseenter\" in win.doc.createElement(\"div\"));\r\n\thas.add(\"events-mousewheel\", win.doc && 'onmousewheel' in win.doc);\r\n\r\n\tvar mouseButtons;\r\n\tif((has(\"dom-quirks\") && has(\"ie\")) || !has(\"dom-addeventlistener\")){\r\n\t\tmouseButtons = {\r\n\t\t\tLEFT:   1,\r\n\t\t\tMIDDLE: 4,\r\n\t\t\tRIGHT:  2,\r\n\t\t\t// helper functions\r\n\t\t\tisButton: function(e, button){ return e.button & button; },\r\n\t\t\tisLeft:   function(e){ return e.button & 1; },\r\n\t\t\tisMiddle: function(e){ return e.button & 4; },\r\n\t\t\tisRight:  function(e){ return e.button & 2; }\r\n\t\t};\r\n\t}else{\r\n\t\tmouseButtons = {\r\n\t\t\tLEFT:   0,\r\n\t\t\tMIDDLE: 1,\r\n\t\t\tRIGHT:  2,\r\n\t\t\t// helper functions\r\n\t\t\tisButton: function(e, button){ return e.button == button; },\r\n\t\t\tisLeft:   function(e){ return e.button == 0; },\r\n\t\t\tisMiddle: function(e){ return e.button == 1; },\r\n\t\t\tisRight:  function(e){ return e.button == 2; }\r\n\t\t};\r\n\t}\r\n\tdojo.mouseButtons = mouseButtons;\r\n\r\n/*=====\r\n\tdojo.mouseButtons = {\r\n\t\t// LEFT: Number\r\n\t\t//\t\tNumeric value of the left mouse button for the platform.\r\n\t\tLEFT:   0,\r\n\t\t// MIDDLE: Number\r\n\t\t//\t\tNumeric value of the middle mouse button for the platform.\r\n\t\tMIDDLE: 1,\r\n\t\t// RIGHT: Number\r\n\t\t//\t\tNumeric value of the right mouse button for the platform.\r\n\t\tRIGHT:  2,\r\n\r\n\t\tisButton: function(e, button){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks an event object for a pressed button\r\n\t\t\t// e: Event\r\n\t\t\t//\t\tEvent object to examine\r\n\t\t\t// button: Number\r\n\t\t\t//\t\tThe button value (example: dojo.mouseButton.LEFT)\r\n\t\t\treturn e.button == button; // Boolean\r\n\t\t},\r\n\t\tisLeft: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks an event object for the pressed left button\r\n\t\t\t// e: Event\r\n\t\t\t//\t\tEvent object to examine\r\n\t\t\treturn e.button == 0; // Boolean\r\n\t\t},\r\n\t\tisMiddle: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks an event object for the pressed middle button\r\n\t\t\t// e: Event\r\n\t\t\t//\t\tEvent object to examine\r\n\t\t\treturn e.button == 1; // Boolean\r\n\t\t},\r\n\t\tisRight: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks an event object for the pressed right button\r\n\t\t\t// e: Event\r\n\t\t\t//\t\tEvent object to examine\r\n\t\t\treturn e.button == 2; // Boolean\r\n\t\t}\r\n\t};\r\n=====*/\r\n\r\n\tfunction eventHandler(type, selectHandler){\r\n\t\t// emulation of mouseenter/leave with mouseover/out using descendant checking\r\n\t\tvar handler = function(node, listener){\r\n\t\t\treturn on(node, type, function(evt){\r\n\t\t\t\tif(selectHandler){\r\n\t\t\t\t\treturn selectHandler(evt, listener);\r\n\t\t\t\t}\r\n\t\t\t\tif(!dom.isDescendant(evt.relatedTarget, node)){\r\n\t\t\t\t\treturn listener.call(this, evt);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\thandler.bubble = function(select){\r\n\t\t\treturn eventHandler(type, function(evt, listener){\r\n\t\t\t\t// using a selector, use the select function to determine if the mouse moved inside the selector and was previously outside the selector\r\n\t\t\t\tvar target = select(evt.target);\r\n\t\t\t\tvar relatedTarget = evt.relatedTarget;\r\n\t\t\t\tif(target && (target != (relatedTarget && relatedTarget.nodeType == 1 && select(relatedTarget)))){\r\n\t\t\t\t\treturn listener.call(target, evt);\r\n\t\t\t\t} \r\n\t\t\t});\r\n\t\t};\r\n\t\treturn handler;\r\n\t}\r\n\tvar wheel;\r\n\tif(has(\"events-mousewheel\")){\r\n\t\twheel = 'mousewheel';\r\n\t}else{ //firefox\r\n\t\twheel = function(node, listener){\r\n\t\t\treturn on(node, 'DOMMouseScroll', function(evt){\r\n\t\t\t\tevt.wheelDelta = -evt.detail;\r\n\t\t\t\tlistener.call(this, evt);\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n\treturn {\r\n\t\t// summary:\r\n\t\t//\t\tThis module provide mouse event handling utility functions and exports\r\n\t\t//\t\tmouseenter and mouseleave event emulation.\r\n\t\t// example:\r\n\t\t//\t\tTo use these events, you register a mouseenter like this:\r\n\t\t//\t\t|\tdefine([\"dojo/on\", \"dojo/mouse\"], function(on, mouse){\r\n\t\t//\t\t|\t\ton(targetNode, mouse.enter, function(event){\r\n\t\t//\t\t|\t\t\tdojo.addClass(targetNode, \"highlighted\");\r\n\t\t//\t\t|\t\t});\r\n\t\t//\t\t|\t\ton(targetNode, mouse.leave, function(event){\r\n\t\t//\t\t|\t\t\tdojo.removeClass(targetNode, \"highlighted\");\r\n\t\t//\t\t|\t\t});\r\n\r\n\t\t_eventHandler: eventHandler,\t\t// for dojo/touch\r\n\r\n\t\t// enter: Synthetic Event\r\n\t\t//\t\tThis is an extension event for the mouseenter that IE provides, emulating the\r\n\t\t//\t\tbehavior on other browsers.\r\n\t\tenter: eventHandler(\"mouseover\"),\r\n\r\n\t\t// leave: Synthetic Event\r\n\t\t//\t\tThis is an extension event for the mouseleave that IE provides, emulating the\r\n\t\t//\t\tbehavior on other browsers.\r\n\t\tleave: eventHandler(\"mouseout\"),\r\n\r\n\t\t// wheel: Normalized Mouse Wheel Event\r\n\t\t//\t\tThis is an extension event for the mousewheel that non-Mozilla browsers provide,\r\n\t\t//\t\temulating the behavior on Mozilla based browsers.\r\n\t\twheel: wheel,\r\n\r\n\t\tisLeft: mouseButtons.isLeft,\r\n\t\t/*=====\r\n\t\tisLeft: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTest an event object (from a mousedown event) to see if the left button was pressed.\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tisMiddle: mouseButtons.isMiddle,\r\n\t\t/*=====\r\n\t\t isMiddle: function(){\r\n\t\t\t // summary:\r\n\t\t\t //\t\tTest an event object (from a mousedown event) to see if the middle button was pressed.\r\n\t\t },\r\n\t\t =====*/\r\n\r\n\t\tisRight: mouseButtons.isRight\r\n\t\t/*=====\r\n\t\t , isRight: function(){\r\n\t\t\t // summary:\r\n\t\t\t //\t\tTest an event object (from a mousedown event) to see if the right button was pressed.\r\n\t\t }\r\n\t\t =====*/\r\n\t};\r\n});\r\n\ndefine('dojo/_base/sniff',[\"./kernel\", \"./lang\", \"../sniff\"], function(dojo, lang, has){\r\n\t// module:\r\n\t//\t\tdojo/_base/sniff\r\n\r\n\t/*=====\r\n\treturn {\r\n\t\t// summary:\r\n\t\t//\t\tDeprecated.   New code should use dojo/sniff.\r\n\t\t//\t\tThis module populates the dojo browser version sniffing properties like dojo.isIE.\r\n\t};\r\n\t=====*/\r\n\r\n\tif(!has(\"host-browser\")){\r\n\t\treturn has;\r\n\t}\r\n\r\n\t// no idea what this is for, or if it's used\r\n\tdojo._name = \"browser\";\r\n\r\n\tlang.mixin(dojo, {\r\n\t\t// isBrowser: Boolean\r\n\t\t//\t\tTrue if the client is a web-browser\r\n\t\tisBrowser: true,\r\n\r\n\t\t// isFF: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is FireFox. undefined otherwise. Corresponds to\r\n\t\t//\t\tmajor detected FireFox version (1.5, 2, 3, etc.)\r\n\t\tisFF: has(\"ff\"),\r\n\r\n\t\t// isIE: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is MSIE(PC). undefined otherwise. Corresponds to\r\n\t\t//\t\tmajor detected IE version (6, 7, 8, etc.)\r\n\t\tisIE: has(\"ie\"),\r\n\r\n\t\t// isKhtml: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is a KHTML browser. undefined otherwise. Corresponds to major\r\n\t\t//\t\tdetected version.\r\n\t\tisKhtml: has(\"khtml\"),\r\n\r\n\t\t// isWebKit: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is a WebKit-derived browser (Konqueror,\r\n\t\t//\t\tSafari, Chrome, etc.). undefined otherwise.\r\n\t\tisWebKit: has(\"webkit\"),\r\n\r\n\t\t// isMozilla: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is a Mozilla-based browser (Firefox,\r\n\t\t//\t\tSeaMonkey). undefined otherwise. Corresponds to major detected version.\r\n\t\tisMozilla: has(\"mozilla\"),\r\n\t\t// isMoz: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is a Mozilla-based browser (Firefox,\r\n\t\t//\t\tSeaMonkey). undefined otherwise. Corresponds to major detected version.\r\n\t\tisMoz: has(\"mozilla\"),\r\n\r\n\t\t// isOpera: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is Opera. undefined otherwise. Corresponds to\r\n\t\t//\t\tmajor detected version.\r\n\t\tisOpera: has(\"opera\"),\r\n\r\n\t\t// isSafari: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is Safari or iPhone. undefined otherwise.\r\n\t\tisSafari: has(\"safari\"),\r\n\r\n\t\t// isChrome: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is Chrome browser. undefined otherwise.\r\n\t\tisChrome: has(\"chrome\"),\r\n\r\n\t\t// isMac: Boolean\r\n\t\t//\t\tTrue if the client runs on Mac\r\n\t\tisMac: has(\"mac\"),\r\n\r\n\t\t// isIos: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is iPhone, iPod, or iPad. undefined otherwise.\r\n\t\tisIos: has(\"ios\"),\r\n\r\n\t\t// isAndroid: Number|undefined\r\n\t\t//\t\tVersion as a Number if client is android browser. undefined otherwise.\r\n\t\tisAndroid: has(\"android\"),\r\n\r\n\t\t// isWii: Boolean\r\n\t\t//\t\tTrue if client is Wii\r\n\t\tisWii: has(\"wii\"),\r\n\r\n\t\t// isQuirks: Boolean\r\n\t\t//\t\tPage is in quirks mode.\r\n\t\tisQuirks: has(\"quirks\"),\r\n\r\n\t\t// isAir: Boolean\r\n\t\t//\t\tTrue if client is Adobe Air\r\n\t\tisAir: has(\"air\")\r\n\t});\r\n\r\n\treturn has;\r\n});\r\n\ndefine('dojo/keys',[\"./_base/kernel\", \"./sniff\"], function(dojo, has){\r\n\r\n\t// module:\r\n\t//\t\tdojo/keys\r\n\r\n\treturn dojo.keys = {\r\n\t\t// summary:\r\n\t\t//\t\tDefinitions for common key values.  Client code should test keyCode against these named constants,\r\n\t\t//\t\tas the actual codes can vary by browser.\r\n\r\n\t\tBACKSPACE: 8,\r\n\t\tTAB: 9,\r\n\t\tCLEAR: 12,\r\n\t\tENTER: 13,\r\n\t\tSHIFT: 16,\r\n\t\tCTRL: 17,\r\n\t\tALT: 18,\r\n\t\tMETA: has(\"webkit\") ? 91 : 224,\t\t// the apple key on macs\r\n\t\tPAUSE: 19,\r\n\t\tCAPS_LOCK: 20,\r\n\t\tESCAPE: 27,\r\n\t\tSPACE: 32,\r\n\t\tPAGE_UP: 33,\r\n\t\tPAGE_DOWN: 34,\r\n\t\tEND: 35,\r\n\t\tHOME: 36,\r\n\t\tLEFT_ARROW: 37,\r\n\t\tUP_ARROW: 38,\r\n\t\tRIGHT_ARROW: 39,\r\n\t\tDOWN_ARROW: 40,\r\n\t\tINSERT: 45,\r\n\t\tDELETE: 46,\r\n\t\tHELP: 47,\r\n\t\tLEFT_WINDOW: 91,\r\n\t\tRIGHT_WINDOW: 92,\r\n\t\tSELECT: 93,\r\n\t\tNUMPAD_0: 96,\r\n\t\tNUMPAD_1: 97,\r\n\t\tNUMPAD_2: 98,\r\n\t\tNUMPAD_3: 99,\r\n\t\tNUMPAD_4: 100,\r\n\t\tNUMPAD_5: 101,\r\n\t\tNUMPAD_6: 102,\r\n\t\tNUMPAD_7: 103,\r\n\t\tNUMPAD_8: 104,\r\n\t\tNUMPAD_9: 105,\r\n\t\tNUMPAD_MULTIPLY: 106,\r\n\t\tNUMPAD_PLUS: 107,\r\n\t\tNUMPAD_ENTER: 108,\r\n\t\tNUMPAD_MINUS: 109,\r\n\t\tNUMPAD_PERIOD: 110,\r\n\t\tNUMPAD_DIVIDE: 111,\r\n\t\tF1: 112,\r\n\t\tF2: 113,\r\n\t\tF3: 114,\r\n\t\tF4: 115,\r\n\t\tF5: 116,\r\n\t\tF6: 117,\r\n\t\tF7: 118,\r\n\t\tF8: 119,\r\n\t\tF9: 120,\r\n\t\tF10: 121,\r\n\t\tF11: 122,\r\n\t\tF12: 123,\r\n\t\tF13: 124,\r\n\t\tF14: 125,\r\n\t\tF15: 126,\r\n\t\tNUM_LOCK: 144,\r\n\t\tSCROLL_LOCK: 145,\r\n\t\tUP_DPAD: 175,\r\n\t\tDOWN_DPAD: 176,\r\n\t\tLEFT_DPAD: 177,\r\n\t\tRIGHT_DPAD: 178,\r\n\t\t// virtual key mapping\r\n\t\tcopyKey: has(\"mac\") && !has(\"air\") ? (has(\"safari\") ? 91 : 224 ) : 17\r\n\t};\r\n});\r\n\ndefine('dojo/_base/connect',[\"./kernel\", \"../on\", \"../topic\", \"../aspect\", \"./event\", \"../mouse\", \"./sniff\", \"./lang\", \"../keys\"], function(dojo, on, hub, aspect, eventModule, mouse, has, lang){\r\n// module:\r\n//\t\tdojo/_base/connect\r\n\r\nhas.add(\"events-keypress-typed\", function(){ // keypresses should only occur a printable character is hit\r\n\tvar testKeyEvent = {charCode: 0};\r\n\ttry{\r\n\t\ttestKeyEvent = document.createEvent(\"KeyboardEvent\");\r\n\t\t(testKeyEvent.initKeyboardEvent || testKeyEvent.initKeyEvent).call(testKeyEvent, \"keypress\", true, true, null, false, false, false, false, 9, 3);\r\n\t}catch(e){}\r\n\treturn testKeyEvent.charCode == 0 && !has(\"opera\");\r\n});\r\n\r\nfunction connect_(obj, event, context, method, dontFix){\r\n\tmethod = lang.hitch(context, method);\r\n\tif(!obj || !(obj.addEventListener || obj.attachEvent)){\r\n\t\t// it is a not a DOM node and we are using the dojo.connect style of treating a\r\n\t\t// method like an event, must go right to aspect\r\n\t\treturn aspect.after(obj || dojo.global, event, method, true);\r\n\t}\r\n\tif(typeof event == \"string\" && event.substring(0, 2) == \"on\"){\r\n\t\tevent = event.substring(2);\r\n\t}\r\n\tif(!obj){\r\n\t\tobj = dojo.global;\r\n\t}\r\n\tif(!dontFix){\r\n\t\tswitch(event){\r\n\t\t\t// dojo.connect has special handling for these event types\r\n\t\t\tcase \"keypress\":\r\n\t\t\t\tevent = keypress;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mouseenter\":\r\n\t\t\t\tevent = mouse.enter;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mouseleave\":\r\n\t\t\t\tevent = mouse.leave;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn on(obj, event, method, dontFix);\r\n}\r\n\r\nvar _punctMap = {\r\n\t106:42,\r\n\t111:47,\r\n\t186:59,\r\n\t187:43,\r\n\t188:44,\r\n\t189:45,\r\n\t190:46,\r\n\t191:47,\r\n\t192:96,\r\n\t219:91,\r\n\t220:92,\r\n\t221:93,\r\n\t222:39,\r\n\t229:113\r\n};\r\nvar evtCopyKey = has(\"mac\") ? \"metaKey\" : \"ctrlKey\";\r\n\r\n\r\nvar _synthesizeEvent = function(evt, props){\r\n\tvar faux = lang.mixin({}, evt, props);\r\n\tsetKeyChar(faux);\r\n\t// FIXME: would prefer to use lang.hitch: lang.hitch(evt, evt.preventDefault);\r\n\t// but it throws an error when preventDefault is invoked on Safari\r\n\t// does Event.preventDefault not support \"apply\" on Safari?\r\n\tfaux.preventDefault = function(){ evt.preventDefault(); };\r\n\tfaux.stopPropagation = function(){ evt.stopPropagation(); };\r\n\treturn faux;\r\n};\r\nfunction setKeyChar(evt){\r\n\tevt.keyChar = evt.charCode ? String.fromCharCode(evt.charCode) : '';\r\n\tevt.charOrCode = evt.keyChar || evt.keyCode;\r\n}\r\nvar keypress;\r\nif(has(\"events-keypress-typed\")){\r\n\t// this emulates Firefox's keypress behavior where every keydown can correspond to a keypress\r\n\tvar _trySetKeyCode = function(e, code){\r\n\t\ttry{\r\n\t\t\t// squelch errors when keyCode is read-only\r\n\t\t\t// (e.g. if keyCode is ctrl or shift)\r\n\t\t\treturn (e.keyCode = code);\r\n\t\t}catch(e){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t};\r\n\tkeypress = function(object, listener){\r\n\t\tvar keydownSignal = on(object, \"keydown\", function(evt){\r\n\t\t\t// munge key/charCode\r\n\t\t\tvar k=evt.keyCode;\r\n\t\t\t// These are Windows Virtual Key Codes\r\n\t\t\t// http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/WinUI/WindowsUserInterface/UserInput/VirtualKeyCodes.asp\r\n\t\t\tvar unprintable = (k!=13) && k!=32 && (k!=27||!has(\"ie\")) && (k<48||k>90) && (k<96||k>111) && (k<186||k>192) && (k<219||k>222) && k!=229;\r\n\t\t\t// synthesize keypress for most unprintables and CTRL-keys\r\n\t\t\tif(unprintable||evt.ctrlKey){\r\n\t\t\t\tvar c = unprintable ? 0 : k;\r\n\t\t\t\tif(evt.ctrlKey){\r\n\t\t\t\t\tif(k==3 || k==13){\r\n\t\t\t\t\t\treturn listener.call(evt.currentTarget, evt); // IE will post CTRL-BREAK, CTRL-ENTER as keypress natively\r\n\t\t\t\t\t}else if(c>95 && c<106){\r\n\t\t\t\t\t\tc -= 48; // map CTRL-[numpad 0-9] to ASCII\r\n\t\t\t\t\t}else if((!evt.shiftKey)&&(c>=65&&c<=90)){\r\n\t\t\t\t\t\tc += 32; // map CTRL-[A-Z] to lowercase\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tc = _punctMap[c] || c; // map other problematic CTRL combinations to ASCII\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// simulate a keypress event\r\n\t\t\t\tvar faux = _synthesizeEvent(evt, {type: 'keypress', faux: true, charCode: c});\r\n\t\t\t\tlistener.call(evt.currentTarget, faux);\r\n\t\t\t\tif(has(\"ie\")){\r\n\t\t\t\t\t_trySetKeyCode(evt, faux.keyCode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar keypressSignal = on(object, \"keypress\", function(evt){\r\n\t\t\tvar c = evt.charCode;\r\n\t\t\tc = c>=32 ? c : 0;\r\n\t\t\tevt = _synthesizeEvent(evt, {charCode: c, faux: true});\r\n\t\t\treturn listener.call(this, evt);\r\n\t\t});\r\n\t\treturn {\r\n\t\t\tremove: function(){\r\n\t\t\t\tkeydownSignal.remove();\r\n\t\t\t\tkeypressSignal.remove();\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n}else{\r\n\tif(has(\"opera\")){\r\n\t\tkeypress = function(object, listener){\r\n\t\t\treturn on(object, \"keypress\", function(evt){\r\n\t\t\t\tvar c = evt.which;\r\n\t\t\t\tif(c==3){\r\n\t\t\t\t\tc=99; // Mozilla maps CTRL-BREAK to CTRL-c\r\n\t\t\t\t}\r\n\t\t\t\t// can't trap some keys at all, like INSERT and DELETE\r\n\t\t\t\t// there is no differentiating info between DELETE and \".\", or INSERT and \"-\"\r\n\t\t\t\tc = c<32 && !evt.shiftKey ? 0 : c;\r\n\t\t\t\tif(evt.ctrlKey && !evt.shiftKey && c>=65 && c<=90){\r\n\t\t\t\t\t// lowercase CTRL-[A-Z] keys\r\n\t\t\t\t\tc += 32;\r\n\t\t\t\t}\r\n\t\t\t\treturn listener.call(this, _synthesizeEvent(evt, { charCode: c }));\r\n\t\t\t});\r\n\t\t};\r\n\t}else{\r\n\t\tkeypress = function(object, listener){\r\n\t\t\treturn on(object, \"keypress\", function(evt){\r\n\t\t\t\tsetKeyChar(evt);\r\n\t\t\t\treturn listener.call(this, evt);\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n}\r\n\r\nvar connect = {\r\n\t// summary:\r\n\t//\t\tThis module defines the dojo.connect API.\r\n\t//\t\tThis modules also provides keyboard event handling helpers.\r\n\t//\t\tThis module exports an extension event for emulating Firefox's keypress handling.\r\n\t//\t\tHowever, this extension event exists primarily for backwards compatibility and\r\n\t//\t\tis not recommended. WebKit and IE uses an alternate keypress handling (only\r\n\t//\t\tfiring for printable characters, to distinguish from keydown events), and most\r\n\t//\t\tconsider the WebKit/IE behavior more desirable.\r\n\r\n\t_keypress:keypress,\r\n\r\n\tconnect:function(obj, event, context, method, dontFix){\r\n\t\t// summary:\r\n\t\t//\t\t`dojo.connect` is a deprecated event handling and delegation method in\r\n\t\t//\t\tDojo. It allows one function to \"listen in\" on the execution of\r\n\t\t//\t\tany other, triggering the second whenever the first is called. Many\r\n\t\t//\t\tlisteners may be attached to a function, and source functions may\r\n\t\t//\t\tbe either regular function calls or DOM events.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tConnects listeners to actions, so that after event fires, a\r\n\t\t//\t\tlistener is called with the same arguments passed to the original\r\n\t\t//\t\tfunction.\r\n\t\t//\r\n\t\t//\t\tSince `dojo.connect` allows the source of events to be either a\r\n\t\t//\t\t\"regular\" JavaScript function or a DOM event, it provides a uniform\r\n\t\t//\t\tinterface for listening to all the types of events that an\r\n\t\t//\t\tapplication is likely to deal with though a single, unified\r\n\t\t//\t\tinterface. DOM programmers may want to think of it as\r\n\t\t//\t\t\"addEventListener for everything and anything\".\r\n\t\t//\r\n\t\t//\t\tWhen setting up a connection, the `event` parameter must be a\r\n\t\t//\t\tstring that is the name of the method/event to be listened for. If\r\n\t\t//\t\t`obj` is null, `kernel.global` is assumed, meaning that connections\r\n\t\t//\t\tto global methods are supported but also that you may inadvertently\r\n\t\t//\t\tconnect to a global by passing an incorrect object name or invalid\r\n\t\t//\t\treference.\r\n\t\t//\r\n\t\t//\t\t`dojo.connect` generally is forgiving. If you pass the name of a\r\n\t\t//\t\tfunction or method that does not yet exist on `obj`, connect will\r\n\t\t//\t\tnot fail, but will instead set up a stub method. Similarly, null\r\n\t\t//\t\targuments may simply be omitted such that fewer than 4 arguments\r\n\t\t//\t\tmay be required to set up a connection See the examples for details.\r\n\t\t//\r\n\t\t//\t\tThe return value is a handle that is needed to\r\n\t\t//\t\tremove this connection with `dojo.disconnect`.\r\n\t\t//\r\n\t\t// obj: Object?\r\n\t\t//\t\tThe source object for the event function.\r\n\t\t//\t\tDefaults to `kernel.global` if null.\r\n\t\t//\t\tIf obj is a DOM node, the connection is delegated\r\n\t\t//\t\tto the DOM event manager (unless dontFix is true).\r\n\t\t//\r\n\t\t// event: String\r\n\t\t//\t\tString name of the event function in obj.\r\n\t\t//\t\tI.e. identifies a property `obj[event]`.\r\n\t\t//\r\n\t\t// context: Object|null\r\n\t\t//\t\tThe object that method will receive as \"this\".\r\n\t\t//\r\n\t\t//\t\tIf context is null and method is a function, then method\r\n\t\t//\t\tinherits the context of event.\r\n\t\t//\r\n\t\t//\t\tIf method is a string then context must be the source\r\n\t\t//\t\tobject object for method (context[method]). If context is null,\r\n\t\t//\t\tkernel.global is used.\r\n\t\t//\r\n\t\t// method: String|Function\r\n\t\t//\t\tA function reference, or name of a function in context.\r\n\t\t//\t\tThe function identified by method fires after event does.\r\n\t\t//\t\tmethod receives the same arguments as the event.\r\n\t\t//\t\tSee context argument comments for information on method's scope.\r\n\t\t//\r\n\t\t// dontFix: Boolean?\r\n\t\t//\t\tIf obj is a DOM node, set dontFix to true to prevent delegation\r\n\t\t//\t\tof this connection to the DOM event manager.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tWhen obj.onchange(), do ui.update():\r\n\t\t//\t|\tdojo.connect(obj, \"onchange\", ui, \"update\");\r\n\t\t//\t|\tdojo.connect(obj, \"onchange\", ui, ui.update); // same\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tUsing return value for disconnect:\r\n\t\t//\t|\tvar link = dojo.connect(obj, \"onchange\", ui, \"update\");\r\n\t\t//\t|\t...\r\n\t\t//\t|\tdojo.disconnect(link);\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tWhen onglobalevent executes, watcher.handler is invoked:\r\n\t\t//\t|\tdojo.connect(null, \"onglobalevent\", watcher, \"handler\");\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tWhen ob.onCustomEvent executes, customEventHandler is invoked:\r\n\t\t//\t|\tdojo.connect(ob, \"onCustomEvent\", null, \"customEventHandler\");\r\n\t\t//\t|\tdojo.connect(ob, \"onCustomEvent\", \"customEventHandler\"); // same\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tWhen ob.onCustomEvent executes, customEventHandler is invoked\r\n\t\t//\t\twith the same scope (this):\r\n\t\t//\t|\tdojo.connect(ob, \"onCustomEvent\", null, customEventHandler);\r\n\t\t//\t|\tdojo.connect(ob, \"onCustomEvent\", customEventHandler); // same\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tWhen globalEvent executes, globalHandler is invoked\r\n\t\t//\t\twith the same scope (this):\r\n\t\t//\t|\tdojo.connect(null, \"globalEvent\", null, globalHandler);\r\n\t\t//\t|\tdojo.connect(\"globalEvent\", globalHandler); // same\r\n\r\n\t\t// normalize arguments\r\n\t\tvar a=arguments, args=[], i=0;\r\n\t\t// if a[0] is a String, obj was omitted\r\n\t\targs.push(typeof a[0] == \"string\" ? null : a[i++], a[i++]);\r\n\t\t// if the arg-after-next is a String or Function, context was NOT omitted\r\n\t\tvar a1 = a[i+1];\r\n\t\targs.push(typeof a1 == \"string\" || typeof a1 == \"function\" ? a[i++] : null, a[i++]);\r\n\t\t// absorb any additional arguments\r\n\t\tfor(var l=a.length; i<l; i++){\targs.push(a[i]); }\r\n\t\treturn connect_.apply(this, args);\r\n\t},\r\n\r\n\tdisconnect:function(handle){\r\n\t\t// summary:\r\n\t\t//\t\tRemove a link created by dojo.connect.\r\n\t\t// description:\r\n\t\t//\t\tRemoves the connection between event and the method referenced by handle.\r\n\t\t// handle: Handle\r\n\t\t//\t\tthe return value of the dojo.connect call that created the connection.\r\n\r\n\t\tif(handle){\r\n\t\t\thandle.remove();\r\n\t\t}\r\n\t},\r\n\r\n\tsubscribe:function(topic, context, method){\r\n\t\t// summary:\r\n\t\t//\t\tAttach a listener to a named topic. The listener function is invoked whenever the\r\n\t\t//\t\tnamed topic is published (see: dojo.publish).\r\n\t\t//\t\tReturns a handle which is needed to unsubscribe this listener.\r\n\t\t// topic: String\r\n\t\t//\t\tThe topic to which to subscribe.\r\n\t\t// context: Object?\r\n\t\t//\t\tScope in which method will be invoked, or null for default scope.\r\n\t\t// method: String|Function\r\n\t\t//\t\tThe name of a function in context, or a function reference. This is the function that\r\n\t\t//\t\tis invoked when topic is published.\r\n\t\t// example:\r\n\t\t//\t|\tdojo.subscribe(\"alerts\", null, function(caption, message){ alert(caption + \"\\n\" + message); });\r\n\t\t//\t|\tdojo.publish(\"alerts\", [ \"read this\", \"hello world\" ]);\r\n\t\treturn hub.subscribe(topic, lang.hitch(context, method));\r\n\t},\r\n\r\n\tpublish:function(topic, args){\r\n\t\t// summary:\r\n\t\t//\t\tInvoke all listener method subscribed to topic.\r\n\t\t// topic: String\r\n\t\t//\t\tThe name of the topic to publish.\r\n\t\t// args: Array?\r\n\t\t//\t\tAn array of arguments. The arguments will be applied\r\n\t\t//\t\tto each topic subscriber (as first class parameters, via apply).\r\n\t\t// example:\r\n\t\t//\t|\tdojo.subscribe(\"alerts\", null, function(caption, message){ alert(caption + \"\\n\" + message); };\r\n\t\t//\t|\tdojo.publish(\"alerts\", [ \"read this\", \"hello world\" ]);\r\n\t\treturn hub.publish.apply(hub, [topic].concat(args));\r\n\t},\r\n\r\n\tconnectPublisher:function(topic, obj, event){\r\n\t\t// summary:\r\n\t\t//\t\tEnsure that every time obj.event() is called, a message is published\r\n\t\t//\t\ton the topic. Returns a handle which can be passed to\r\n\t\t//\t\tdojo.disconnect() to disable subsequent automatic publication on\r\n\t\t//\t\tthe topic.\r\n\t\t// topic: String\r\n\t\t//\t\tThe name of the topic to publish.\r\n\t\t// obj: Object?\r\n\t\t//\t\tThe source object for the event function. Defaults to kernel.global\r\n\t\t//\t\tif null.\r\n\t\t// event: String\r\n\t\t//\t\tThe name of the event function in obj.\r\n\t\t//\t\tI.e. identifies a property obj[event].\r\n\t\t// example:\r\n\t\t//\t|\tdojo.connectPublisher(\"/ajax/start\", dojo, \"xhrGet\");\r\n\t\tvar pf = function(){ connect.publish(topic, arguments); };\r\n\t\treturn event ? connect.connect(obj, event, pf) : connect.connect(obj, pf); //Handle\r\n\t},\r\n\r\n\tisCopyKey: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tChecks an event for the copy key (meta on Mac, and ctrl anywhere else)\r\n\t\t// e: Event\r\n\t\t//\t\tEvent object to examine\r\n\t\treturn e[evtCopyKey];\t// Boolean\r\n\t}\r\n};\r\n\r\nconnect.unsubscribe = connect.disconnect;\r\n/*=====\r\n connect.unsubscribe = function(handle){\r\n\t // summary:\r\n\t //\t\tRemove a topic listener.\r\n\t // handle: Handle\r\n\t //\t\tThe handle returned from a call to subscribe.\r\n\t // example:\r\n\t //\t|\tvar alerter = dojo.subscribe(\"alerts\", null, function(caption, message){ alert(caption + \"\\n\" + message); };\r\n\t //\t|\t...\r\n\t //\t|\tdojo.unsubscribe(alerter);\r\n };\r\n =====*/\r\n\r\nhas(\"extend-dojo\") && lang.mixin(dojo, connect);\r\nreturn connect;\r\n\r\n});\r\n\r\n\r\n\ndefine('dojo/errors/create',[\"../_base/lang\"], function(lang){\r\n\treturn function(name, ctor, base, props){\r\n\t\tbase = base || Error;\r\n\r\n\t\tvar ErrorCtor = function(message){\r\n\t\t\tif(base === Error){\r\n\t\t\t\tif(Error.captureStackTrace){\r\n\t\t\t\t\tError.captureStackTrace(this, ErrorCtor);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Error.call() operates on the returned error\r\n\t\t\t\t// object rather than operating on |this|\r\n\t\t\t\tvar err = Error.call(this, message),\r\n\t\t\t\t\tprop;\r\n\r\n\t\t\t\t// Copy own properties from err to |this|\r\n\t\t\t\tfor(prop in err){\r\n\t\t\t\t\tif(err.hasOwnProperty(prop)){\r\n\t\t\t\t\t\tthis[prop] = err[prop];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// messsage is non-enumerable in ES5\r\n\t\t\t\tthis.message = message;\r\n\t\t\t\t// stack is non-enumerable in at least Firefox\r\n\t\t\t\tthis.stack = err.stack;\r\n\t\t\t}else{\r\n\t\t\t\tbase.apply(this, arguments);\r\n\t\t\t}\r\n\t\t\tif(ctor){\r\n\t\t\t\tctor.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tErrorCtor.prototype = lang.delegate(base.prototype, props);\r\n\t\tErrorCtor.prototype.name = name;\r\n\t\tErrorCtor.prototype.constructor = ErrorCtor;\r\n\r\n\t\treturn ErrorCtor;\r\n\t};\r\n});\r\n\ndefine('dojo/errors/CancelError',[\"./create\"], function(create){\r\n\t// module:\r\n\t//\t\tdojo/errors/CancelError\r\n\r\n\t/*=====\r\n\treturn function(){\r\n\t\t// summary:\r\n\t\t//\t\tDefault error if a promise is canceled without a reason.\r\n\t};\r\n\t=====*/\r\n\r\n\treturn create(\"CancelError\", null, null, { dojoType: \"cancel\" });\r\n});\r\n\ndefine('dojo/promise/Promise',[\r\n\t\"../_base/lang\"\r\n], function(lang){\r\n\t\"use strict\";\r\n\r\n\t// module:\r\n\t//\t\tdojo/promise/Promise\r\n\r\n\tfunction throwAbstract(){\r\n\t\tthrow new TypeError(\"abstract\");\r\n\t}\r\n\r\n\treturn lang.extend(function Promise(){\r\n\t\t// summary:\r\n\t\t//\t\tThe public interface to a deferred.\r\n\t\t// description:\r\n\t\t//\t\tThe public interface to a deferred. All promises in Dojo are\r\n\t\t//\t\tinstances of this class.\r\n\t}, {\r\n\t\tthen: function(callback, errback, progback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdd new callbacks to the promise.\r\n\t\t\t// description:\r\n\t\t\t//\t\tAdd new callbacks to the deferred. Callbacks can be added\r\n\t\t\t//\t\tbefore or after the deferred is fulfilled.\r\n\t\t\t// callback: Function?\r\n\t\t\t//\t\tCallback to be invoked when the promise is resolved.\r\n\t\t\t//\t\tReceives the resolution value.\r\n\t\t\t// errback: Function?\r\n\t\t\t//\t\tCallback to be invoked when the promise is rejected.\r\n\t\t\t//\t\tReceives the rejection error.\r\n\t\t\t// progback: Function?\r\n\t\t\t//\t\tCallback to be invoked when the promise emits a progress\r\n\t\t\t//\t\tupdate. Receives the progress update.\r\n\t\t\t// returns: dojo/promise/Promise\r\n\t\t\t//\t\tReturns a new promise for the result of the callback(s).\r\n\t\t\t//\t\tThis can be used for chaining many asynchronous operations.\r\n\r\n\t\t\tthrowAbstract();\r\n\t\t},\r\n\r\n\t\tcancel: function(reason, strict){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInform the deferred it may cancel its asynchronous operation.\r\n\t\t\t// description:\r\n\t\t\t//\t\tInform the deferred it may cancel its asynchronous operation.\r\n\t\t\t//\t\tThe deferred's (optional) canceler is invoked and the\r\n\t\t\t//\t\tdeferred will be left in a rejected state. Can affect other\r\n\t\t\t//\t\tpromises that originate with the same deferred.\r\n\t\t\t// reason: any\r\n\t\t\t//\t\tA message that may be sent to the deferred's canceler,\r\n\t\t\t//\t\texplaining why it's being canceled.\r\n\t\t\t// strict: Boolean?\r\n\t\t\t//\t\tIf strict, will throw an error if the deferred has already\r\n\t\t\t//\t\tbeen fulfilled and consequently cannot be canceled.\r\n\t\t\t// returns: any\r\n\t\t\t//\t\tReturns the rejection reason if the deferred was canceled\r\n\t\t\t//\t\tnormally.\r\n\r\n\t\t\tthrowAbstract();\r\n\t\t},\r\n\r\n\t\tisResolved: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the promise has been resolved.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\tthrowAbstract();\r\n\t\t},\r\n\r\n\t\tisRejected: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the promise has been rejected.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\tthrowAbstract();\r\n\t\t},\r\n\r\n\t\tisFulfilled: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the promise has been resolved or rejected.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\tthrowAbstract();\r\n\t\t},\r\n\r\n\t\tisCanceled: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the promise has been canceled.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\tthrowAbstract();\r\n\t\t},\r\n\r\n\t\talways: function(callbackOrErrback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdd a callback to be invoked when the promise is resolved\r\n\t\t\t//\t\tor rejected.\r\n\t\t\t// callbackOrErrback: Function?\r\n\t\t\t//\t\tA function that is used both as a callback and errback.\r\n\t\t\t// returns: dojo/promise/Promise\r\n\t\t\t//\t\tReturns a new promise for the result of the callback/errback.\r\n\r\n\t\t\treturn this.then(callbackOrErrback, callbackOrErrback);\r\n\t\t},\r\n\r\n\t\totherwise: function(errback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdd new errbacks to the promise.\r\n\t\t\t// errback: Function?\r\n\t\t\t//\t\tCallback to be invoked when the promise is rejected.\r\n\t\t\t// returns: dojo/promise/Promise\r\n\t\t\t//\t\tReturns a new promise for the result of the errback.\r\n\r\n\t\t\treturn this.then(null, errback);\r\n\t\t},\r\n\r\n\t\ttrace: function(){\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\ttraceRejected: function(){\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\ttoString: function(){\r\n\t\t\t// returns: string\r\n\t\t\t//\t\tReturns `[object Promise]`.\r\n\r\n\t\t\treturn \"[object Promise]\";\r\n\t\t}\r\n\t});\r\n});\r\n\n\ndefine('dojo/Deferred',[\r\n\t\"./has\",\r\n\t\"./_base/lang\",\r\n\t\"./errors/CancelError\",\r\n\t\"./promise/Promise\",\r\n\t\"./has!config-deferredInstrumentation?./promise/instrumentation\"\r\n], function(has, lang, CancelError, Promise, instrumentation){\r\n\t\"use strict\";\r\n\r\n\t// module:\r\n\t//\t\tdojo/Deferred\r\n\r\n\tvar PROGRESS = 0,\r\n\t\t\tRESOLVED = 1,\r\n\t\t\tREJECTED = 2;\r\n\tvar FULFILLED_ERROR_MESSAGE = \"This deferred has already been fulfilled.\";\r\n\r\n\tvar freezeObject = Object.freeze || function(){};\r\n\r\n\tvar signalWaiting = function(waiting, type, result, rejection, deferred){\r\n\t\tif(has(\"config-deferredInstrumentation\")){\r\n\t\t\tif(type === REJECTED && Deferred.instrumentRejected && waiting.length === 0){\r\n\t\t\t\tDeferred.instrumentRejected(result, false, rejection, deferred);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < waiting.length; i++){\r\n\t\t\tsignalListener(waiting[i], type, result, rejection);\r\n\t\t}\r\n\t};\r\n\r\n\tvar signalListener = function(listener, type, result, rejection){\r\n\t\tvar func = listener[type];\r\n\t\tvar deferred = listener.deferred;\r\n\t\tif(func){\r\n\t\t\ttry{\r\n\t\t\t\tvar newResult = func(result);\r\n\t\t\t\tif(type === PROGRESS){\r\n\t\t\t\t\tif(typeof newResult !== \"undefined\"){\r\n\t\t\t\t\t\tsignalDeferred(deferred, type, newResult);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(newResult && typeof newResult.then === \"function\"){\r\n\t\t\t\t\t\tlistener.cancel = newResult.cancel;\r\n\t\t\t\t\t\tnewResult.then(\r\n\t\t\t\t\t\t\t\t// Only make resolvers if they're actually going to be used\r\n\t\t\t\t\t\t\t\tmakeDeferredSignaler(deferred, RESOLVED),\r\n\t\t\t\t\t\t\t\tmakeDeferredSignaler(deferred, REJECTED),\r\n\t\t\t\t\t\t\t\tmakeDeferredSignaler(deferred, PROGRESS));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsignalDeferred(deferred, RESOLVED, newResult);\r\n\t\t\t\t}\r\n\t\t\t}catch(error){\r\n\t\t\t\tsignalDeferred(deferred, REJECTED, error);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tsignalDeferred(deferred, type, result);\r\n\t\t}\r\n\r\n\t\tif(has(\"config-deferredInstrumentation\")){\r\n\t\t\tif(type === REJECTED && Deferred.instrumentRejected){\r\n\t\t\t\tDeferred.instrumentRejected(result, !!func, rejection, deferred.promise);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar makeDeferredSignaler = function(deferred, type){\r\n\t\treturn function(value){\r\n\t\t\tsignalDeferred(deferred, type, value);\r\n\t\t};\r\n\t};\r\n\r\n\tvar signalDeferred = function(deferred, type, result){\r\n\t\tif(!deferred.isCanceled()){\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase PROGRESS:\r\n\t\t\t\t\tdeferred.progress(result);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase RESOLVED:\r\n\t\t\t\t\tdeferred.resolve(result);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase REJECTED:\r\n\t\t\t\t\tdeferred.reject(result);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar Deferred = function(canceler){\r\n\t\t// summary:\r\n\t\t//\t\tCreates a new deferred. This API is preferred over\r\n\t\t//\t\t`dojo/_base/Deferred`.\r\n\t\t// description:\r\n\t\t//\t\tCreates a new deferred, as an abstraction over (primarily)\r\n\t\t//\t\tasynchronous operations. The deferred is the private interface\r\n\t\t//\t\tthat should not be returned to calling code. That's what the\r\n\t\t//\t\t`promise` is for. See `dojo/promise/Promise`.\r\n\t\t// canceler: Function?\r\n\t\t//\t\tWill be invoked if the deferred is canceled. The canceler\r\n\t\t//\t\treceives the reason the deferred was canceled as its argument.\r\n\t\t//\t\tThe deferred is rejected with its return value, or a new\r\n\t\t//\t\t`dojo/errors/CancelError` instance.\r\n\r\n\t\t// promise: dojo/promise/Promise\r\n\t\t//\t\tThe public promise object that clients can add callbacks to. \r\n\t\tvar promise = this.promise = new Promise();\r\n\r\n\t\tvar deferred = this;\r\n\t\tvar fulfilled, result, rejection;\r\n\t\tvar canceled = false;\r\n\t\tvar waiting = [];\r\n\r\n\t\tif(has(\"config-deferredInstrumentation\") && Error.captureStackTrace){\r\n\t\t\tError.captureStackTrace(deferred, Deferred);\r\n\t\t\tError.captureStackTrace(promise, Deferred);\r\n\t\t}\r\n\r\n\t\tthis.isResolved = promise.isResolved = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the deferred has been resolved.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\treturn fulfilled === RESOLVED;\r\n\t\t};\r\n\r\n\t\tthis.isRejected = promise.isRejected = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the deferred has been rejected.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\treturn fulfilled === REJECTED;\r\n\t\t};\r\n\r\n\t\tthis.isFulfilled = promise.isFulfilled = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the deferred has been resolved or rejected.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\treturn !!fulfilled;\r\n\t\t};\r\n\r\n\t\tthis.isCanceled = promise.isCanceled = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the deferred has been canceled.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\treturn canceled;\r\n\t\t};\r\n\r\n\t\tthis.progress = function(update, strict){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tEmit a progress update on the deferred.\r\n\t\t\t// description:\r\n\t\t\t//\t\tEmit a progress update on the deferred. Progress updates\r\n\t\t\t//\t\tcan be used to communicate updates about the asynchronous\r\n\t\t\t//\t\toperation before it has finished.\r\n\t\t\t// update: any\r\n\t\t\t//\t\tThe progress update. Passed to progbacks.\r\n\t\t\t// strict: Boolean?\r\n\t\t\t//\t\tIf strict, will throw an error if the deferred has already\r\n\t\t\t//\t\tbeen fulfilled and consequently no progress can be emitted.\r\n\t\t\t// returns: dojo/promise/Promise\r\n\t\t\t//\t\tReturns the original promise for the deferred.\r\n\r\n\t\t\tif(!fulfilled){\r\n\t\t\t\tsignalWaiting(waiting, PROGRESS, update, null, deferred);\r\n\t\t\t\treturn promise;\r\n\t\t\t}else if(strict === true){\r\n\t\t\t\tthrow new Error(FULFILLED_ERROR_MESSAGE);\r\n\t\t\t}else{\r\n\t\t\t\treturn promise;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.resolve = function(value, strict){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tResolve the deferred.\r\n\t\t\t// description:\r\n\t\t\t//\t\tResolve the deferred, putting it in a success state.\r\n\t\t\t// value: any\r\n\t\t\t//\t\tThe result of the deferred. Passed to callbacks.\r\n\t\t\t// strict: Boolean?\r\n\t\t\t//\t\tIf strict, will throw an error if the deferred has already\r\n\t\t\t//\t\tbeen fulfilled and consequently cannot be resolved.\r\n\t\t\t// returns: dojo/promise/Promise\r\n\t\t\t//\t\tReturns the original promise for the deferred.\r\n\r\n\t\t\tif(!fulfilled){\r\n\t\t\t\t// Set fulfilled, store value. After signaling waiting listeners unset\r\n\t\t\t\t// waiting.\r\n\t\t\t\tsignalWaiting(waiting, fulfilled = RESOLVED, result = value, null, deferred);\r\n\t\t\t\twaiting = null;\r\n\t\t\t\treturn promise;\r\n\t\t\t}else if(strict === true){\r\n\t\t\t\tthrow new Error(FULFILLED_ERROR_MESSAGE);\r\n\t\t\t}else{\r\n\t\t\t\treturn promise;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar reject = this.reject = function(error, strict){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReject the deferred.\r\n\t\t\t// description:\r\n\t\t\t//\t\tReject the deferred, putting it in an error state.\r\n\t\t\t// error: any\r\n\t\t\t//\t\tThe error result of the deferred. Passed to errbacks.\r\n\t\t\t// strict: Boolean?\r\n\t\t\t//\t\tIf strict, will throw an error if the deferred has already\r\n\t\t\t//\t\tbeen fulfilled and consequently cannot be rejected.\r\n\t\t\t// returns: dojo/promise/Promise\r\n\t\t\t//\t\tReturns the original promise for the deferred.\r\n\r\n\t\t\tif(!fulfilled){\r\n\t\t\t\tif(has(\"config-deferredInstrumentation\") && Error.captureStackTrace){\r\n\t\t\t\t\tError.captureStackTrace(rejection = {}, reject);\r\n\t\t\t\t}\r\n\t\t\t\tsignalWaiting(waiting, fulfilled = REJECTED, result = error, rejection, deferred);\r\n\t\t\t\twaiting = null;\r\n\t\t\t\treturn promise;\r\n\t\t\t}else if(strict === true){\r\n\t\t\t\tthrow new Error(FULFILLED_ERROR_MESSAGE);\r\n\t\t\t}else{\r\n\t\t\t\treturn promise;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.then = promise.then = function(callback, errback, progback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdd new callbacks to the deferred.\r\n\t\t\t// description:\r\n\t\t\t//\t\tAdd new callbacks to the deferred. Callbacks can be added\r\n\t\t\t//\t\tbefore or after the deferred is fulfilled.\r\n\t\t\t// callback: Function?\r\n\t\t\t//\t\tCallback to be invoked when the promise is resolved.\r\n\t\t\t//\t\tReceives the resolution value.\r\n\t\t\t// errback: Function?\r\n\t\t\t//\t\tCallback to be invoked when the promise is rejected.\r\n\t\t\t//\t\tReceives the rejection error.\r\n\t\t\t// progback: Function?\r\n\t\t\t//\t\tCallback to be invoked when the promise emits a progress\r\n\t\t\t//\t\tupdate. Receives the progress update.\r\n\t\t\t// returns: dojo/promise/Promise\r\n\t\t\t//\t\tReturns a new promise for the result of the callback(s).\r\n\t\t\t//\t\tThis can be used for chaining many asynchronous operations.\r\n\r\n\t\t\tvar listener = [progback, callback, errback];\r\n\t\t\t// Ensure we cancel the promise we're waiting for, or if callback/errback\r\n\t\t\t// have returned a promise, cancel that one.\r\n\t\t\tlistener.cancel = promise.cancel;\r\n\t\t\tlistener.deferred = new Deferred(function(reason){\r\n\t\t\t\t// Check whether cancel is really available, returned promises are not\r\n\t\t\t\t// required to expose `cancel`\r\n\t\t\t\treturn listener.cancel && listener.cancel(reason);\r\n\t\t\t});\r\n\t\t\tif(fulfilled && !waiting){\r\n\t\t\t\tsignalListener(listener, fulfilled, result, rejection);\r\n\t\t\t}else{\r\n\t\t\t\twaiting.push(listener);\r\n\t\t\t}\r\n\t\t\treturn listener.deferred.promise;\r\n\t\t};\r\n\r\n\t\tthis.cancel = promise.cancel = function(reason, strict){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tInform the deferred it may cancel its asynchronous operation.\r\n\t\t\t// description:\r\n\t\t\t//\t\tInform the deferred it may cancel its asynchronous operation.\r\n\t\t\t//\t\tThe deferred's (optional) canceler is invoked and the\r\n\t\t\t//\t\tdeferred will be left in a rejected state. Can affect other\r\n\t\t\t//\t\tpromises that originate with the same deferred.\r\n\t\t\t// reason: any\r\n\t\t\t//\t\tA message that may be sent to the deferred's canceler,\r\n\t\t\t//\t\texplaining why it's being canceled.\r\n\t\t\t// strict: Boolean?\r\n\t\t\t//\t\tIf strict, will throw an error if the deferred has already\r\n\t\t\t//\t\tbeen fulfilled and consequently cannot be canceled.\r\n\t\t\t// returns: any\r\n\t\t\t//\t\tReturns the rejection reason if the deferred was canceled\r\n\t\t\t//\t\tnormally.\r\n\r\n\t\t\tif(!fulfilled){\r\n\t\t\t\t// Cancel can be called even after the deferred is fulfilled\r\n\t\t\t\tif(canceler){\r\n\t\t\t\t\tvar returnedReason = canceler(reason);\r\n\t\t\t\t\treason = typeof returnedReason === \"undefined\" ? reason : returnedReason;\r\n\t\t\t\t}\r\n\t\t\t\tcanceled = true;\r\n\t\t\t\tif(!fulfilled){\r\n\t\t\t\t\t// Allow canceler to provide its own reason, but fall back to a CancelError\r\n\t\t\t\t\tif(typeof reason === \"undefined\"){\r\n\t\t\t\t\t\treason = new CancelError();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treject(reason);\r\n\t\t\t\t\treturn reason;\r\n\t\t\t\t}else if(fulfilled === REJECTED && result === reason){\r\n\t\t\t\t\treturn reason;\r\n\t\t\t\t}\r\n\t\t\t}else if(strict === true){\r\n\t\t\t\tthrow new Error(FULFILLED_ERROR_MESSAGE);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfreezeObject(promise);\r\n\t};\r\n\r\n\tDeferred.prototype.toString = function(){\r\n\t\t// returns: String\r\n\t\t//\t\tReturns `[object Deferred]`.\r\n\r\n\t\treturn \"[object Deferred]\";\r\n\t};\r\n\r\n\tif(instrumentation){\r\n\t\tinstrumentation(Deferred);\r\n\t}\r\n\r\n\treturn Deferred;\r\n});\r\n\ndefine('dojo/when',[\r\n\t\"./Deferred\",\r\n\t\"./promise/Promise\"\r\n], function(Deferred, Promise){\r\n\t\"use strict\";\r\n\r\n\t// module:\r\n\t//\t\tdojo/when\r\n\r\n\treturn function when(valueOrPromise, callback, errback, progback){\r\n\t\t// summary:\r\n\t\t//\t\tTransparently applies callbacks to values and/or promises.\r\n\t\t// description:\r\n\t\t//\t\tAccepts promises but also transparently handles non-promises. If no\r\n\t\t//\t\tcallbacks are provided returns a promise, regardless of the initial\r\n\t\t//\t\tvalue. Foreign promises are converted.\r\n\t\t//\r\n\t\t//\t\tIf callbacks are provided and the initial value is not a promise,\r\n\t\t//\t\tthe callback is executed immediately with no error handling. Returns\r\n\t\t//\t\ta promise if the initial value is a promise, or the result of the\r\n\t\t//\t\tcallback otherwise.\r\n\t\t// valueOrPromise:\r\n\t\t//\t\tEither a regular value or an object with a `then()` method that\r\n\t\t//\t\tfollows the Promises/A specification.\r\n\t\t// callback: Function?\r\n\t\t//\t\tCallback to be invoked when the promise is resolved, or a non-promise\r\n\t\t//\t\tis received.\r\n\t\t// errback: Function?\r\n\t\t//\t\tCallback to be invoked when the promise is rejected.\r\n\t\t// progback: Function?\r\n\t\t//\t\tCallback to be invoked when the promise emits a progress update.\r\n\t\t// returns: dojo/promise/Promise\r\n\t\t//\t\tPromise, or if a callback is provided, the result of the callback.\r\n\r\n\t\tvar receivedPromise = valueOrPromise && typeof valueOrPromise.then === \"function\";\r\n\t\tvar nativePromise = receivedPromise && valueOrPromise instanceof Promise;\r\n\r\n\t\tif(!receivedPromise){\r\n\t\t\tif(arguments.length > 1){\r\n\t\t\t\treturn callback ? callback(valueOrPromise) : valueOrPromise;\r\n\t\t\t}else{\r\n\t\t\t\treturn new Deferred().resolve(valueOrPromise);\r\n\t\t\t}\r\n\t\t}else if(!nativePromise){\r\n\t\t\tvar deferred = new Deferred(valueOrPromise.cancel);\r\n\t\t\tvalueOrPromise.then(deferred.resolve, deferred.reject, deferred.progress);\r\n\t\t\tvalueOrPromise = deferred.promise;\r\n\t\t}\r\n\r\n\t\tif(callback || errback || progback){\r\n\t\t\treturn valueOrPromise.then(callback, errback, progback);\r\n\t\t}\r\n\t\treturn valueOrPromise;\r\n\t};\r\n});\r\n\ndefine('dojo/_base/Deferred',[\r\n\t\"./kernel\",\r\n\t\"../Deferred\",\r\n\t\"../promise/Promise\",\r\n\t\"../errors/CancelError\",\r\n\t\"../has\",\r\n\t\"./lang\",\r\n\t\"../when\"\r\n], function(dojo, NewDeferred, Promise, CancelError, has, lang, when){\r\n\t// module:\r\n\t//\t\tdojo/_base/Deferred\r\n\r\n\tvar mutator = function(){};\r\n\tvar freeze = Object.freeze || function(){};\r\n\t// A deferred provides an API for creating and resolving a promise.\r\n\tvar Deferred = dojo.Deferred = function(/*Function?*/ canceller){\r\n\t\t// summary:\r\n\t\t//\t\tDeprecated.   This module defines the legacy dojo/_base/Deferred API.\r\n\t\t//\t\tNew code should use dojo/Deferred instead.\r\n\t\t// description:\r\n\t\t//\t\tThe Deferred API is based on the concept of promises that provide a\r\n\t\t//\t\tgeneric interface into the eventual completion of an asynchronous action.\r\n\t\t//\t\tThe motivation for promises fundamentally is about creating a\r\n\t\t//\t\tseparation of concerns that allows one to achieve the same type of\r\n\t\t//\t\tcall patterns and logical data flow in asynchronous code as can be\r\n\t\t//\t\tachieved in synchronous code. Promises allows one\r\n\t\t//\t\tto be able to call a function purely with arguments needed for\r\n\t\t//\t\texecution, without conflating the call with concerns of whether it is\r\n\t\t//\t\tsync or async. One shouldn't need to alter a call's arguments if the\r\n\t\t//\t\timplementation switches from sync to async (or vice versa). By having\r\n\t\t//\t\tasync functions return promises, the concerns of making the call are\r\n\t\t//\t\tseparated from the concerns of asynchronous interaction (which are\r\n\t\t//\t\thandled by the promise).\r\n\t\t//\r\n\t\t//\t\tThe Deferred is a type of promise that provides methods for fulfilling the\r\n\t\t//\t\tpromise with a successful result or an error. The most important method for\r\n\t\t//\t\tworking with Dojo's promises is the then() method, which follows the\r\n\t\t//\t\tCommonJS proposed promise API. An example of using a Dojo promise:\r\n\t\t//\r\n\t\t//\t\t|\tvar resultingPromise = someAsyncOperation.then(function(result){\r\n\t\t//\t\t|\t\t... handle result ...\r\n\t\t//\t\t|\t},\r\n\t\t//\t\t|\tfunction(error){\r\n\t\t//\t\t|\t\t... handle error ...\r\n\t\t//\t\t|\t});\r\n\t\t//\r\n\t\t//\t\tThe .then() call returns a new promise that represents the result of the\r\n\t\t//\t\texecution of the callback. The callbacks will never affect the original promises value.\r\n\t\t//\r\n\t\t//\t\tThe Deferred instances also provide the following functions for backwards compatibility:\r\n\t\t//\r\n\t\t//\t\t- addCallback(handler)\r\n\t\t//\t\t- addErrback(handler)\r\n\t\t//\t\t- callback(result)\r\n\t\t//\t\t- errback(result)\r\n\t\t//\r\n\t\t//\t\tCallbacks are allowed to return promises themselves, so\r\n\t\t//\t\tyou can build complicated sequences of events with ease.\r\n\t\t//\r\n\t\t//\t\tThe creator of the Deferred may specify a canceller.  The canceller\r\n\t\t//\t\tis a function that will be called if Deferred.cancel is called\r\n\t\t//\t\tbefore the Deferred fires. You can use this to implement clean\r\n\t\t//\t\taborting of an XMLHttpRequest, etc. Note that cancel will fire the\r\n\t\t//\t\tdeferred with a CancelledError (unless your canceller returns\r\n\t\t//\t\tanother kind of error), so the errbacks should be prepared to\r\n\t\t//\t\thandle that error for cancellable Deferreds.\r\n\t\t// example:\r\n\t\t//\t|\tvar deferred = new Deferred();\r\n\t\t//\t|\tsetTimeout(function(){ deferred.callback({success: true}); }, 1000);\r\n\t\t//\t|\treturn deferred;\r\n\t\t// example:\r\n\t\t//\t\tDeferred objects are often used when making code asynchronous. It\r\n\t\t//\t\tmay be easiest to write functions in a synchronous manner and then\r\n\t\t//\t\tsplit code using a deferred to trigger a response to a long-lived\r\n\t\t//\t\toperation. For example, instead of register a callback function to\r\n\t\t//\t\tdenote when a rendering operation completes, the function can\r\n\t\t//\t\tsimply return a deferred:\r\n\t\t//\r\n\t\t//\t\t|\t// callback style:\r\n\t\t//\t\t|\tfunction renderLotsOfData(data, callback){\r\n\t\t//\t\t|\t\tvar success = false\r\n\t\t//\t\t|\t\ttry{\r\n\t\t//\t\t|\t\t\tfor(var x in data){\r\n\t\t//\t\t|\t\t\t\trenderDataitem(data[x]);\r\n\t\t//\t\t|\t\t\t}\r\n\t\t//\t\t|\t\t\tsuccess = true;\r\n\t\t//\t\t|\t\t}catch(e){ }\r\n\t\t//\t\t|\t\tif(callback){\r\n\t\t//\t\t|\t\t\tcallback(success);\r\n\t\t//\t\t|\t\t}\r\n\t\t//\t\t|\t}\r\n\t\t//\r\n\t\t//\t\t|\t// using callback style\r\n\t\t//\t\t|\trenderLotsOfData(someDataObj, function(success){\r\n\t\t//\t\t|\t\t// handles success or failure\r\n\t\t//\t\t|\t\tif(!success){\r\n\t\t//\t\t|\t\t\tpromptUserToRecover();\r\n\t\t//\t\t|\t\t}\r\n\t\t//\t\t|\t});\r\n\t\t//\t\t|\t// NOTE: no way to add another callback here!!\r\n\t\t// example:\r\n\t\t//\t\tUsing a Deferred doesn't simplify the sending code any, but it\r\n\t\t//\t\tprovides a standard interface for callers and senders alike,\r\n\t\t//\t\tproviding both with a simple way to service multiple callbacks for\r\n\t\t//\t\tan operation and freeing both sides from worrying about details\r\n\t\t//\t\tsuch as \"did this get called already?\". With Deferreds, new\r\n\t\t//\t\tcallbacks can be added at any time.\r\n\t\t//\r\n\t\t//\t\t|\t// Deferred style:\r\n\t\t//\t\t|\tfunction renderLotsOfData(data){\r\n\t\t//\t\t|\t\tvar d = new Deferred();\r\n\t\t//\t\t|\t\ttry{\r\n\t\t//\t\t|\t\t\tfor(var x in data){\r\n\t\t//\t\t|\t\t\t\trenderDataitem(data[x]);\r\n\t\t//\t\t|\t\t\t}\r\n\t\t//\t\t|\t\t\td.callback(true);\r\n\t\t//\t\t|\t\t}catch(e){\r\n\t\t//\t\t|\t\t\td.errback(new Error(\"rendering failed\"));\r\n\t\t//\t\t|\t\t}\r\n\t\t//\t\t|\t\treturn d;\r\n\t\t//\t\t|\t}\r\n\t\t//\r\n\t\t//\t\t|\t// using Deferred style\r\n\t\t//\t\t|\trenderLotsOfData(someDataObj).then(null, function(){\r\n\t\t//\t\t|\t\tpromptUserToRecover();\r\n\t\t//\t\t|\t});\r\n\t\t//\t\t|\t// NOTE: addErrback and addCallback both return the Deferred\r\n\t\t//\t\t|\t// again, so we could chain adding callbacks or save the\r\n\t\t//\t\t|\t// deferred for later should we need to be notified again.\r\n\t\t// example:\r\n\t\t//\t\tIn this example, renderLotsOfData is synchronous and so both\r\n\t\t//\t\tversions are pretty artificial. Putting the data display on a\r\n\t\t//\t\ttimeout helps show why Deferreds rock:\r\n\t\t//\r\n\t\t//\t\t|\t// Deferred style and async func\r\n\t\t//\t\t|\tfunction renderLotsOfData(data){\r\n\t\t//\t\t|\t\tvar d = new Deferred();\r\n\t\t//\t\t|\t\tsetTimeout(function(){\r\n\t\t//\t\t|\t\t\ttry{\r\n\t\t//\t\t|\t\t\t\tfor(var x in data){\r\n\t\t//\t\t|\t\t\t\t\trenderDataitem(data[x]);\r\n\t\t//\t\t|\t\t\t\t}\r\n\t\t//\t\t|\t\t\t\td.callback(true);\r\n\t\t//\t\t|\t\t\t}catch(e){\r\n\t\t//\t\t|\t\t\t\td.errback(new Error(\"rendering failed\"));\r\n\t\t//\t\t|\t\t\t}\r\n\t\t//\t\t|\t\t}, 100);\r\n\t\t//\t\t|\t\treturn d;\r\n\t\t//\t\t|\t}\r\n\t\t//\r\n\t\t//\t\t|\t// using Deferred style\r\n\t\t//\t\t|\trenderLotsOfData(someDataObj).then(null, function(){\r\n\t\t//\t\t|\t\tpromptUserToRecover();\r\n\t\t//\t\t|\t});\r\n\t\t//\r\n\t\t//\t\tNote that the caller doesn't have to change his code at all to\r\n\t\t//\t\thandle the asynchronous case.\r\n\r\n\t\tvar result, finished, canceled, fired, isError, head, nextListener;\r\n\t\tvar promise = (this.promise = new Promise());\r\n\r\n\t\tfunction complete(value){\r\n\t\t\tif(finished){\r\n\t\t\t\tthrow new Error(\"This deferred has already been resolved\");\r\n\t\t\t}\r\n\t\t\tresult = value;\r\n\t\t\tfinished = true;\r\n\t\t\tnotify();\r\n\t\t}\r\n\t\tfunction notify(){\r\n\t\t\tvar mutated;\r\n\t\t\twhile(!mutated && nextListener){\r\n\t\t\t\tvar listener = nextListener;\r\n\t\t\t\tnextListener = nextListener.next;\r\n\t\t\t\tif((mutated = (listener.progress == mutator))){ // assignment and check\r\n\t\t\t\t\tfinished = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar func = (isError ? listener.error : listener.resolved);\r\n\t\t\t\tif(has(\"config-useDeferredInstrumentation\")){\r\n\t\t\t\t\tif(isError && NewDeferred.instrumentRejected){\r\n\t\t\t\t\t\tNewDeferred.instrumentRejected(result, !!func);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(func){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tvar newResult = func(result);\r\n\t\t\t\t\t\tif (newResult && typeof newResult.then === \"function\"){\r\n\t\t\t\t\t\t\tnewResult.then(lang.hitch(listener.deferred, \"resolve\"), lang.hitch(listener.deferred, \"reject\"), lang.hitch(listener.deferred, \"progress\"));\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar unchanged = mutated && newResult === undefined;\r\n\t\t\t\t\t\tif(mutated && !unchanged){\r\n\t\t\t\t\t\t\tisError = newResult instanceof Error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlistener.deferred[unchanged && isError ? \"reject\" : \"resolve\"](unchanged ? result : newResult);\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tlistener.deferred.reject(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(isError){\r\n\t\t\t\t\t\tlistener.deferred.reject(result);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlistener.deferred.resolve(result);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.isResolved = promise.isResolved = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the deferred has been resolved.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\treturn fired == 0;\r\n\t\t};\r\n\r\n\t\tthis.isRejected = promise.isRejected = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the deferred has been rejected.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\treturn fired == 1;\r\n\t\t};\r\n\r\n\t\tthis.isFulfilled = promise.isFulfilled = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the deferred has been resolved or rejected.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\treturn fired >= 0;\r\n\t\t};\r\n\r\n\t\tthis.isCanceled = promise.isCanceled = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tChecks whether the deferred has been canceled.\r\n\t\t\t// returns: Boolean\r\n\r\n\t\t\treturn canceled;\r\n\t\t};\r\n\r\n\t\t// calling resolve will resolve the promise\r\n\t\tthis.resolve = this.callback = function(value){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFulfills the Deferred instance successfully with the provide value\r\n\t\t\tthis.fired = fired = 0;\r\n\t\t\tthis.results = [value, null];\r\n\t\t\tcomplete(value);\r\n\t\t};\r\n\r\n\r\n\t\t// calling error will indicate that the promise failed\r\n\t\tthis.reject = this.errback = function(error){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFulfills the Deferred instance as an error with the provided error\r\n\t\t\tisError = true;\r\n\t\t\tthis.fired = fired = 1;\r\n\t\t\tif(has(\"config-useDeferredInstrumentation\")){\r\n\t\t\t\tif(NewDeferred.instrumentRejected){\r\n\t\t\t\t\tNewDeferred.instrumentRejected(error, !!nextListener);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcomplete(error);\r\n\t\t\tthis.results = [null, error];\r\n\t\t};\r\n\t\t// call progress to provide updates on the progress on the completion of the promise\r\n\t\tthis.progress = function(update){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSend progress events to all listeners\r\n\t\t\tvar listener = nextListener;\r\n\t\t\twhile(listener){\r\n\t\t\t\tvar progress = listener.progress;\r\n\t\t\t\tprogress && progress(update);\r\n\t\t\t\tlistener = listener.next;\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.addCallbacks = function(callback, errback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds callback and error callback for this deferred instance.\r\n\t\t\t// callback: Function?\r\n\t\t\t//\t\tThe callback attached to this deferred object.\r\n\t\t\t// errback: Function?\r\n\t\t\t//\t\tThe error callback attached to this deferred object.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tReturns this deferred object.\r\n\t\t\tthis.then(callback, errback, mutator);\r\n\t\t\treturn this;\t// Deferred\r\n\t\t};\r\n\t\t// provide the implementation of the promise\r\n\t\tpromise.then = this.then = function(/*Function?*/resolvedCallback, /*Function?*/errorCallback, /*Function?*/progressCallback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds a fulfilledHandler, errorHandler, and progressHandler to be called for\r\n\t\t\t//\t\tcompletion of a promise. The fulfilledHandler is called when the promise\r\n\t\t\t//\t\tis fulfilled. The errorHandler is called when a promise fails. The\r\n\t\t\t//\t\tprogressHandler is called for progress events. All arguments are optional\r\n\t\t\t//\t\tand non-function values are ignored. The progressHandler is not only an\r\n\t\t\t//\t\toptional argument, but progress events are purely optional. Promise\r\n\t\t\t//\t\tproviders are not required to ever create progress events.\r\n\t\t\t//\r\n\t\t\t//\t\tThis function will return a new promise that is fulfilled when the given\r\n\t\t\t//\t\tfulfilledHandler or errorHandler callback is finished. This allows promise\r\n\t\t\t//\t\toperations to be chained together. The value returned from the callback\r\n\t\t\t//\t\thandler is the fulfillment value for the returned promise. If the callback\r\n\t\t\t//\t\tthrows an error, the returned promise will be moved to failed state.\r\n\t\t\t//\r\n\t\t\t// returns:\r\n\t\t\t//\t\tReturns a new promise that represents the result of the\r\n\t\t\t//\t\texecution of the callback. The callbacks will never affect the original promises value.\r\n\t\t\t// example:\r\n\t\t\t//\t\tAn example of using a CommonJS compliant promise:\r\n\t\t\t//\t\t|\tasyncComputeTheAnswerToEverything().\r\n\t\t\t//\t\t|\t\tthen(addTwo).\r\n\t\t\t//\t\t|\t\tthen(printResult, onError);\r\n\t\t\t//\t\t|\t>44\r\n\t\t\t//\r\n\t\t\tvar returnDeferred = progressCallback == mutator ? this : new Deferred(promise.cancel);\r\n\t\t\tvar listener = {\r\n\t\t\t\tresolved: resolvedCallback,\r\n\t\t\t\terror: errorCallback,\r\n\t\t\t\tprogress: progressCallback,\r\n\t\t\t\tdeferred: returnDeferred\r\n\t\t\t};\r\n\t\t\tif(nextListener){\r\n\t\t\t\thead = head.next = listener;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tnextListener = head = listener;\r\n\t\t\t}\r\n\t\t\tif(finished){\r\n\t\t\t\tnotify();\r\n\t\t\t}\r\n\t\t\treturn returnDeferred.promise; // Promise\r\n\t\t};\r\n\t\tvar deferred = this;\r\n\t\tpromise.cancel = this.cancel = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCancels the asynchronous operation\r\n\t\t\tif(!finished){\r\n\t\t\t\tvar error = canceller && canceller(deferred);\r\n\t\t\t\tif(!finished){\r\n\t\t\t\t\tif (!(error instanceof Error)){\r\n\t\t\t\t\t\terror = new CancelError(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t\terror.log = false;\r\n\t\t\t\t\tdeferred.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcanceled = true;\r\n\t\t};\r\n\t\tfreeze(promise);\r\n\t};\r\n\tlang.extend(Deferred, {\r\n\t\taddCallback: function(/*Function*/ callback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds successful callback for this deferred instance.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tReturns this deferred object.\r\n\t\t\treturn this.addCallbacks(lang.hitch.apply(dojo, arguments));\t// Deferred\r\n\t\t},\r\n\r\n\t\taddErrback: function(/*Function*/ errback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds error callback for this deferred instance.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tReturns this deferred object.\r\n\t\t\treturn this.addCallbacks(null, lang.hitch.apply(dojo, arguments));\t// Deferred\r\n\t\t},\r\n\r\n\t\taddBoth: function(/*Function*/ callback){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdd handler as both successful callback and error callback for this deferred instance.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tReturns this deferred object.\r\n\t\t\tvar enclosed = lang.hitch.apply(dojo, arguments);\r\n\t\t\treturn this.addCallbacks(enclosed, enclosed);\t// Deferred\r\n\t\t},\r\n\t\tfired: -1\r\n\t});\r\n\r\n\tDeferred.when = dojo.when = when;\r\n\r\n\treturn Deferred;\r\n});\r\n\ndefine('dojo/json',[\"./has\"], function(has){\r\n\t\"use strict\";\r\n\tvar hasJSON = typeof JSON != \"undefined\";\r\n\thas.add(\"json-parse\", hasJSON); // all the parsers work fine\r\n\t\t// Firefox 3.5/Gecko 1.9 fails to use replacer in stringify properly https://bugzilla.mozilla.org/show_bug.cgi?id=509184\r\n\thas.add(\"json-stringify\", hasJSON && JSON.stringify({a:0}, function(k,v){return v||1;}) == '{\"a\":1}');\r\n\r\n\t/*=====\r\n\treturn {\r\n\t\t// summary:\r\n\t\t//\t\tFunctions to parse and serialize JSON\r\n\r\n\t\tparse: function(str, strict){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tParses a [JSON](http://json.org) string to return a JavaScript object.\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis function follows [native JSON API](https://developer.mozilla.org/en/JSON)\r\n\t\t\t//\t\tThrows for invalid JSON strings. This delegates to eval() if native JSON\r\n\t\t\t//\t\tsupport is not available. By default this will evaluate any valid JS expression.\r\n\t\t\t//\t\tWith the strict parameter set to true, the parser will ensure that only\r\n\t\t\t//\t\tvalid JSON strings are parsed (otherwise throwing an error). Without the strict\r\n\t\t\t//\t\tparameter, the content passed to this method must come\r\n\t\t\t//\t\tfrom a trusted source.\r\n\t\t\t// str:\r\n\t\t\t//\t\ta string literal of a JSON item, for instance:\r\n\t\t\t//\t\t`'{ \"foo\": [ \"bar\", 1, { \"baz\": \"thud\" } ] }'`\r\n\t\t\t// strict:\r\n\t\t\t//\t\tWhen set to true, this will ensure that only valid, secure JSON is ever parsed.\r\n\t\t\t//\t\tMake sure this is set to true for untrusted content. Note that on browsers/engines\r\n\t\t\t//\t\twithout native JSON support, setting this to true will run slower.\r\n\t\t},\r\n\t\tstringify: function(value, replacer, spacer){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a [JSON](http://json.org) serialization of an object.\r\n\t\t\t// description:\r\n\t\t\t//\t\tReturns a [JSON](http://json.org) serialization of an object.\r\n\t\t\t//\t\tThis function follows [native JSON API](https://developer.mozilla.org/en/JSON)\r\n\t\t\t//\t\tNote that this doesn't check for infinite recursion, so don't do that!\r\n\t\t\t// value:\r\n\t\t\t//\t\tA value to be serialized.\r\n\t\t\t// replacer:\r\n\t\t\t//\t\tA replacer function that is called for each value and can return a replacement\r\n\t\t\t// spacer:\r\n\t\t\t//\t\tA spacer string to be used for pretty printing of JSON\r\n\t\t\t// example:\r\n\t\t\t//\t\tsimple serialization of a trivial object\r\n\t\t\t//\t|\tdefine([\"dojo/json\"], function(JSON){\r\n\t\t\t// \t|\t\tvar jsonStr = JSON.stringify({ howdy: \"stranger!\", isStrange: true });\r\n\t\t\t//\t|\t\tdoh.is('{\"howdy\":\"stranger!\",\"isStrange\":true}', jsonStr);\r\n\t\t}\r\n\t};\r\n\t=====*/\r\n\r\n\tif(has(\"json-stringify\")){\r\n\t\treturn JSON;\r\n\t}else{\r\n\t\tvar escapeString = function(/*String*/str){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds escape sequences for non-visual characters, double quote and\r\n\t\t\t//\t\tbackslash and surrounds with double quotes to form a valid string\r\n\t\t\t//\t\tliteral.\r\n\t\t\treturn ('\"' + str.replace(/([\"\\\\])/g, '\\\\$1') + '\"').\r\n\t\t\t\treplace(/[\\f]/g, \"\\\\f\").replace(/[\\b]/g, \"\\\\b\").replace(/[\\n]/g, \"\\\\n\").\r\n\t\t\t\treplace(/[\\t]/g, \"\\\\t\").replace(/[\\r]/g, \"\\\\r\"); // string\r\n\t\t};\r\n\t\treturn {\r\n\t\t\tparse: has(\"json-parse\") ? JSON.parse : function(str, strict){\r\n\t\t\t\tif(strict && !/^([\\s\\[\\{]*(?:\"(?:\\\\.|[^\"])*\"|-?\\d[\\d\\.]*(?:[Ee][+-]?\\d+)?|null|true|false|)[\\s\\]\\}]*(?:,|:|$))+$/.test(str)){\r\n\t\t\t\t\tthrow new SyntaxError(\"Invalid characters in JSON\");\r\n\t\t\t\t}\r\n\t\t\t\treturn eval('(' + str + ')');\r\n\t\t\t},\r\n\t\t\tstringify: function(value, replacer, spacer){\r\n\t\t\t\tvar undef;\r\n\t\t\t\tif(typeof replacer == \"string\"){\r\n\t\t\t\t\tspacer = replacer;\r\n\t\t\t\t\treplacer = null;\r\n\t\t\t\t}\r\n\t\t\t\tfunction stringify(it, indent, key){\r\n\t\t\t\t\tif(replacer){\r\n\t\t\t\t\t\tit = replacer(key, it);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar val, objtype = typeof it;\r\n\t\t\t\t\tif(objtype == \"number\"){\r\n\t\t\t\t\t\treturn isFinite(it) ? it + \"\" : \"null\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(objtype == \"boolean\"){\r\n\t\t\t\t\t\treturn it + \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(it === null){\r\n\t\t\t\t\t\treturn \"null\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof it == \"string\"){\r\n\t\t\t\t\t\treturn escapeString(it);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(objtype == \"function\" || objtype == \"undefined\"){\r\n\t\t\t\t\t\treturn undef; // undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// short-circuit for objects that support \"json\" serialization\r\n\t\t\t\t\t// if they return \"self\" then just pass-through...\r\n\t\t\t\t\tif(typeof it.toJSON == \"function\"){\r\n\t\t\t\t\t\treturn stringify(it.toJSON(key), indent, key);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(it instanceof Date){\r\n\t\t\t\t\t\treturn '\"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z\"'.replace(/\\{(\\w+)(\\+)?\\}/g, function(t, prop, plus){\r\n\t\t\t\t\t\t\tvar num = it[\"getUTC\" + prop]() + (plus ? 1 : 0);\r\n\t\t\t\t\t\t\treturn num < 10 ? \"0\" + num : num;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(it.valueOf() !== it){\r\n\t\t\t\t\t\t// primitive wrapper, try again unwrapped:\r\n\t\t\t\t\t\treturn stringify(it.valueOf(), indent, key);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar nextIndent= spacer ? (indent + spacer) : \"\";\r\n\t\t\t\t\t/* we used to test for DOM nodes and throw, but FF serializes them as {}, so cross-browser consistency is probably not efficiently attainable */ \r\n\t\t\t\t\r\n\t\t\t\t\tvar sep = spacer ? \" \" : \"\";\r\n\t\t\t\t\tvar newLine = spacer ? \"\\n\" : \"\";\r\n\t\t\t\t\r\n\t\t\t\t\t// array\r\n\t\t\t\t\tif(it instanceof Array){\r\n\t\t\t\t\t\tvar itl = it.length, res = [];\r\n\t\t\t\t\t\tfor(key = 0; key < itl; key++){\r\n\t\t\t\t\t\t\tvar obj = it[key];\r\n\t\t\t\t\t\t\tval = stringify(obj, nextIndent, key);\r\n\t\t\t\t\t\t\tif(typeof val != \"string\"){\r\n\t\t\t\t\t\t\t\tval = \"null\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tres.push(newLine + nextIndent + val);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn \"[\" + res.join(\",\") + newLine + indent + \"]\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// generic object code path\r\n\t\t\t\t\tvar output = [];\r\n\t\t\t\t\tfor(key in it){\r\n\t\t\t\t\t\tvar keyStr;\r\n\t\t\t\t\t\tif(it.hasOwnProperty(key)){\r\n\t\t\t\t\t\t\tif(typeof key == \"number\"){\r\n\t\t\t\t\t\t\t\tkeyStr = '\"' + key + '\"';\r\n\t\t\t\t\t\t\t}else if(typeof key == \"string\"){\r\n\t\t\t\t\t\t\t\tkeyStr = escapeString(key);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t// skip non-string or number keys\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tval = stringify(it[key], nextIndent, key);\r\n\t\t\t\t\t\t\tif(typeof val != \"string\"){\r\n\t\t\t\t\t\t\t\t// skip non-serializable values\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// At this point, the most non-IE browsers don't get in this branch \r\n\t\t\t\t\t\t\t// (they have native JSON), so push is definitely the way to\r\n\t\t\t\t\t\t\toutput.push(newLine + nextIndent + keyStr + \":\" + sep + val);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn \"{\" + output.join(\",\") + newLine + indent + \"}\"; // String\r\n\t\t\t\t}\r\n\t\t\t\treturn stringify(value, \"\", \"\");\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n});\r\n\ndefine('dojo/_base/json',[\"./kernel\", \"../json\"], function(dojo, json){\r\n\r\n// module:\r\n//\t\tdojo/_base/json\r\n\r\n/*=====\r\nreturn {\r\n\t// summary:\r\n\t//\t\tThis module defines the dojo JSON API.\r\n};\r\n=====*/\r\n\r\ndojo.fromJson = function(/*String*/ js){\r\n\t// summary:\r\n\t//\t\tParses a JavaScript expression and returns a JavaScript value.\r\n\t// description:\r\n\t//\t\tThrows for invalid JavaScript expressions. It does not use a strict JSON parser. It\r\n\t//\t\talways delegates to eval(). The content passed to this method must therefore come\r\n\t//\t\tfrom a trusted source.\r\n\t//\t\tIt is recommend that you use dojo/json's parse function for an\r\n\t//\t\timplementation uses the (faster) native JSON parse when available.\r\n\t// js:\r\n\t//\t\ta string literal of a JavaScript expression, for instance:\r\n\t//\t\t`'{ \"foo\": [ \"bar\", 1, { \"baz\": \"thud\" } ] }'`\r\n\r\n\treturn eval(\"(\" + js + \")\"); // Object\r\n};\r\n\r\n/*=====\r\ndojo._escapeString = function(){\r\n\t// summary:\r\n\t//\t\tAdds escape sequences for non-visual characters, double quote and\r\n\t//\t\tbackslash and surrounds with double quotes to form a valid string\r\n\t//\t\tliteral.\r\n};\r\n=====*/\r\ndojo._escapeString = json.stringify; // just delegate to json.stringify\r\n\r\ndojo.toJsonIndentStr = \"\\t\";\r\ndojo.toJson = function(/*Object*/ it, /*Boolean?*/ prettyPrint){\r\n\t// summary:\r\n\t//\t\tReturns a [JSON](http://json.org) serialization of an object.\r\n\t// description:\r\n\t//\t\tReturns a [JSON](http://json.org) serialization of an object.\r\n\t//\t\tNote that this doesn't check for infinite recursion, so don't do that!\r\n\t//\t\tIt is recommend that you use dojo/json's stringify function for an lighter\r\n\t//\t\tand faster implementation that matches the native JSON API and uses the\r\n\t//\t\tnative JSON serializer when available.\r\n\t// it:\r\n\t//\t\tan object to be serialized. Objects may define their own\r\n\t//\t\tserialization via a special \"__json__\" or \"json\" function\r\n\t//\t\tproperty. If a specialized serializer has been defined, it will\r\n\t//\t\tbe used as a fallback.\r\n\t//\t\tNote that in 1.6, toJson would serialize undefined, but this no longer supported\r\n\t//\t\tsince it is not supported by native JSON serializer.\r\n\t// prettyPrint:\r\n\t//\t\tif true, we indent objects and arrays to make the output prettier.\r\n\t//\t\tThe variable `dojo.toJsonIndentStr` is used as the indent string --\r\n\t//\t\tto use something other than the default (tab), change that variable\r\n\t//\t\tbefore calling dojo.toJson().\r\n\t//\t\tNote that if native JSON support is available, it will be used for serialization,\r\n\t//\t\tand native implementations vary on the exact spacing used in pretty printing.\r\n\t// returns:\r\n\t//\t\tA JSON string serialization of the passed-in object.\r\n\t// example:\r\n\t//\t\tsimple serialization of a trivial object\r\n\t//\t\t|\tvar jsonStr = dojo.toJson({ howdy: \"stranger!\", isStrange: true });\r\n\t//\t\t|\tdoh.is('{\"howdy\":\"stranger!\",\"isStrange\":true}', jsonStr);\r\n\t// example:\r\n\t//\t\ta custom serializer for an objects of a particular class:\r\n\t//\t\t|\tdojo.declare(\"Furby\", null, {\r\n\t//\t\t|\t\tfurbies: \"are strange\",\r\n\t//\t\t|\t\tfurbyCount: 10,\r\n\t//\t\t|\t\t__json__: function(){\r\n\t//\t\t|\t\t},\r\n\t//\t\t|\t});\r\n\r\n\t// use dojo/json\r\n\treturn json.stringify(it, function(key, value){\r\n\t\tif(value){\r\n\t\t\tvar tf = value.__json__||value.json;\r\n\t\t\tif(typeof tf == \"function\"){\r\n\t\t\t\treturn tf.call(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}, prettyPrint && dojo.toJsonIndentStr);\t// String\r\n};\r\n\r\nreturn dojo;\r\n});\r\n\ndefine('dojo/_base/Color',[\"./kernel\", \"./lang\", \"./array\", \"./config\"], function(dojo, lang, ArrayUtil, config){\r\n\r\n\tvar Color = dojo.Color = function(/*Array|String|Object*/ color){\r\n\t\t// summary:\r\n\t\t//\t\tTakes a named string, hex string, array of rgb or rgba values,\r\n\t\t//\t\tan object with r, g, b, and a properties, or another `Color` object\r\n\t\t//\t\tand creates a new Color instance to work from.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tWork with a Color instance:\r\n\t\t//\t|\trequire([\"dojo/_base/color\"], function(Color){\r\n\t\t//\t|\t\tvar c = new Color();\r\n\t\t//\t|\t\tc.setColor([0,0,0]); // black\r\n\t\t//\t|\t\tvar hex = c.toHex(); // #000000\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tWork with a node's color:\r\n\t\t//\t| \r\n\t\t//\t|\trequire([\"dojo/_base/color\", \"dojo/dom-style\"], function(Color, domStyle){\r\n\t\t//\t|\t\tvar color = domStyle(\"someNode\", \"backgroundColor\");\r\n\t\t//\t|\t\tvar n = new Color(color);\r\n\t\t//\t|\t\t// adjust the color some\r\n\t\t//\t|\t\tn.r *= .5;\r\n\t\t//\t|\t\tconsole.log(n.toString()); // rgb(128, 255, 255);\r\n\t\t//\t|\t});\r\n\t\tif(color){ this.setColor(color); }\r\n\t};\r\n\r\n\t// FIXME:\r\n\t// there's got to be a more space-efficient way to encode or discover\r\n\t// these!! Use hex?\r\n\tColor.named = {\r\n\t\t// summary:\r\n\t\t//\t\tDictionary list of all CSS named colors, by name. Values are 3-item arrays with corresponding RG and B values.\r\n\t\t\"black\":  [0,0,0],\r\n\t\t\"silver\": [192,192,192],\r\n\t\t\"gray\":\t  [128,128,128],\r\n\t\t\"white\":  [255,255,255],\r\n\t\t\"maroon\": [128,0,0],\r\n\t\t\"red\":\t  [255,0,0],\r\n\t\t\"purple\": [128,0,128],\r\n\t\t\"fuchsia\":[255,0,255],\r\n\t\t\"green\":  [0,128,0],\r\n\t\t\"lime\":\t  [0,255,0],\r\n\t\t\"olive\":  [128,128,0],\r\n\t\t\"yellow\": [255,255,0],\r\n\t\t\"navy\":\t  [0,0,128],\r\n\t\t\"blue\":\t  [0,0,255],\r\n\t\t\"teal\":\t  [0,128,128],\r\n\t\t\"aqua\":\t  [0,255,255],\r\n\t\t\"transparent\": config.transparentColor || [0,0,0,0]\r\n\t};\r\n\r\n\tlang.extend(Color, {\r\n\t\tr: 255, g: 255, b: 255, a: 1,\r\n\t\t_set: function(r, g, b, a){\r\n\t\t\tvar t = this; t.r = r; t.g = g; t.b = b; t.a = a;\r\n\t\t},\r\n\t\tsetColor: function(/*Array|String|Object*/ color){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTakes a named string, hex string, array of rgb or rgba values,\r\n\t\t\t//\t\tan object with r, g, b, and a properties, or another `Color` object\r\n\t\t\t//\t\tand sets this color instance to that value.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/_base/color\"], function(Color){\r\n\t\t\t//\t|\t\tvar c = new Color(); // no color\r\n\t\t\t//\t|\t\tc.setColor(\"#ededed\"); // greyish\r\n\t\t\t//\t|\t});\r\n\t\t\tif(lang.isString(color)){\r\n\t\t\t\tColor.fromString(color, this);\r\n\t\t\t}else if(lang.isArray(color)){\r\n\t\t\t\tColor.fromArray(color, this);\r\n\t\t\t}else{\r\n\t\t\t\tthis._set(color.r, color.g, color.b, color.a);\r\n\t\t\t\tif(!(color instanceof Color)){ this.sanitize(); }\r\n\t\t\t}\r\n\t\t\treturn this;\t// Color\r\n\t\t},\r\n\t\tsanitize: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tEnsures the object has correct attributes\r\n\t\t\t// description:\r\n\t\t\t//\t\tthe default implementation does nothing, include dojo.colors to\r\n\t\t\t//\t\taugment it with real checks\r\n\t\t\treturn this;\t// Color\r\n\t\t},\r\n\t\ttoRgb: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns 3 component array of rgb values\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/_base/color\"], function(Color){\r\n\t\t\t//\t|\t\tvar c = new Color(\"#000000\");\r\n\t\t\t//\t|\t\tconsole.log(c.toRgb()); // [0,0,0]\r\n\t\t\t//\t|\t});\r\n\t\t\tvar t = this;\r\n\t\t\treturn [t.r, t.g, t.b]; // Array\r\n\t\t},\r\n\t\ttoRgba: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a 4 component array of rgba values from the color\r\n\t\t\t//\t\trepresented by this object.\r\n\t\t\tvar t = this;\r\n\t\t\treturn [t.r, t.g, t.b, t.a];\t// Array\r\n\t\t},\r\n\t\ttoHex: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a CSS color string in hexadecimal representation\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/_base/color\"], function(Color){\r\n\t\t\t//\t|\t\tconsole.log(new Color([0,0,0]).toHex()); // #000000\r\n\t\t\t//\t|\t});\r\n\t\t\tvar arr = ArrayUtil.map([\"r\", \"g\", \"b\"], function(x){\r\n\t\t\t\tvar s = this[x].toString(16);\r\n\t\t\t\treturn s.length < 2 ? \"0\" + s : s;\r\n\t\t\t}, this);\r\n\t\t\treturn \"#\" + arr.join(\"\");\t// String\r\n\t\t},\r\n\t\ttoCss: function(/*Boolean?*/ includeAlpha){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a css color string in rgb(a) representation\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/_base/color\"], function(Color){\r\n\t\t\t//\t|\t\tvar c = new Color(\"#FFF\").toCss();\r\n\t\t\t//\t|\t\tconsole.log(c); // rgb('255','255','255')\r\n\t\t\t//\t|\t});\r\n\t\t\tvar t = this, rgb = t.r + \", \" + t.g + \", \" + t.b;\r\n\t\t\treturn (includeAlpha ? \"rgba(\" + rgb + \", \" + t.a : \"rgb(\" + rgb) + \")\";\t// String\r\n\t\t},\r\n\t\ttoString: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a visual representation of the color\r\n\t\t\treturn this.toCss(true); // String\r\n\t\t}\r\n\t});\r\n\r\n\tColor.blendColors = dojo.blendColors = function(\r\n\t\t/*Color*/ start,\r\n\t\t/*Color*/ end,\r\n\t\t/*Number*/ weight,\r\n\t\t/*Color?*/ obj\r\n\t){\r\n\t\t// summary:\r\n\t\t//\t\tBlend colors end and start with weight from 0 to 1, 0.5 being a 50/50 blend,\r\n\t\t//\t\tcan reuse a previously allocated Color object for the result\r\n\t\tvar t = obj || new Color();\r\n\t\tArrayUtil.forEach([\"r\", \"g\", \"b\", \"a\"], function(x){\r\n\t\t\tt[x] = start[x] + (end[x] - start[x]) * weight;\r\n\t\t\tif(x != \"a\"){ t[x] = Math.round(t[x]); }\r\n\t\t});\r\n\t\treturn t.sanitize();\t// Color\r\n\t};\r\n\r\n\tColor.fromRgb = dojo.colorFromRgb = function(/*String*/ color, /*Color?*/ obj){\r\n\t\t// summary:\r\n\t\t//\t\tReturns a `Color` instance from a string of the form\r\n\t\t//\t\t\"rgb(...)\" or \"rgba(...)\". Optionally accepts a `Color`\r\n\t\t//\t\tobject to update with the parsed value and return instead of\r\n\t\t//\t\tcreating a new object.\r\n\t\t// returns:\r\n\t\t//\t\tA Color object. If obj is passed, it will be the return value.\r\n\t\tvar m = color.toLowerCase().match(/^rgba?\\(([\\s\\.,0-9]+)\\)/);\r\n\t\treturn m && Color.fromArray(m[1].split(/\\s*,\\s*/), obj);\t// Color\r\n\t};\r\n\r\n\tColor.fromHex = dojo.colorFromHex = function(/*String*/ color, /*Color?*/ obj){\r\n\t\t// summary:\r\n\t\t//\t\tConverts a hex string with a '#' prefix to a color object.\r\n\t\t//\t\tSupports 12-bit #rgb shorthand. Optionally accepts a\r\n\t\t//\t\t`Color` object to update with the parsed value.\r\n\t\t//\r\n\t\t// returns:\r\n\t\t//\t\tA Color object. If obj is passed, it will be the return value.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\trequire([\"dojo/_base/color\"], function(Color){\r\n\t\t//\t|\t\tvar thing = new Color().fromHex(\"#ededed\"); // grey, longhand\r\n\t\t//\t|\t\tvar thing2 = new Color().fromHex(\"#000\"); // black, shorthand\r\n\t\t//\t|\t});\r\n\t\tvar t = obj || new Color(),\r\n\t\t\tbits = (color.length == 4) ? 4 : 8,\r\n\t\t\tmask = (1 << bits) - 1;\r\n\t\tcolor = Number(\"0x\" + color.substr(1));\r\n\t\tif(isNaN(color)){\r\n\t\t\treturn null; // Color\r\n\t\t}\r\n\t\tArrayUtil.forEach([\"b\", \"g\", \"r\"], function(x){\r\n\t\t\tvar c = color & mask;\r\n\t\t\tcolor >>= bits;\r\n\t\t\tt[x] = bits == 4 ? 17 * c : c;\r\n\t\t});\r\n\t\tt.a = 1;\r\n\t\treturn t;\t// Color\r\n\t};\r\n\r\n\tColor.fromArray = dojo.colorFromArray = function(/*Array*/ a, /*Color?*/ obj){\r\n\t\t// summary:\r\n\t\t//\t\tBuilds a `Color` from a 3 or 4 element array, mapping each\r\n\t\t//\t\telement in sequence to the rgb(a) values of the color.\r\n\t\t// example:\r\n\t\t//\t\t|\trequire([\"dojo/_base/color\"], function(Color){\r\n\t\t//\t\t|\t\tvar myColor = new Color().fromArray([237,237,237,0.5]); // grey, 50% alpha\r\n\t\t//\t\t|\t});\r\n\t\t// returns:\r\n\t\t//\t\tA Color object. If obj is passed, it will be the return value.\r\n\t\tvar t = obj || new Color();\r\n\t\tt._set(Number(a[0]), Number(a[1]), Number(a[2]), Number(a[3]));\r\n\t\tif(isNaN(t.a)){ t.a = 1; }\r\n\t\treturn t.sanitize();\t// Color\r\n\t};\r\n\r\n\tColor.fromString = dojo.colorFromString = function(/*String*/ str, /*Color?*/ obj){\r\n\t\t// summary:\r\n\t\t//\t\tParses `str` for a color value. Accepts hex, rgb, and rgba\r\n\t\t//\t\tstyle color values.\r\n\t\t// description:\r\n\t\t//\t\tAcceptable input values for str may include arrays of any form\r\n\t\t//\t\taccepted by dojo.colorFromArray, hex strings such as \"#aaaaaa\", or\r\n\t\t//\t\trgb or rgba strings such as \"rgb(133, 200, 16)\" or \"rgba(10, 10,\r\n\t\t//\t\t10, 50)\"\r\n\t\t// returns:\r\n\t\t//\t\tA Color object. If obj is passed, it will be the return value.\r\n\t\tvar a = Color.named[str];\r\n\t\treturn a && Color.fromArray(a, obj) || Color.fromRgb(str, obj) || Color.fromHex(str, obj);\t// Color\r\n\t};\r\n\r\n\treturn Color;\r\n});\r\n\ndefine('dojo/i18n',[\"./_base/kernel\", \"require\", \"./has\", \"./_base/array\", \"./_base/config\", \"./_base/lang\", \"./has!host-browser?./_base/xhr\", \"./json\", \"module\"],\r\n\r\n\tfunction(dojo, require, has, array, config, lang, xhr, json, module){\r\n\r\n\tif (require.isBrowser===false) { // for build,will be changed with better implementation. by LWF\r\n\t\treturn {\r\n\t        load: function (name, req, onLoad, config) {\r\n\t            onLoad();\r\n\t        }\t\t\t\r\n\t\t};\r\n\t}\r\n\r\n\t// module:\r\n\t// module:\r\n\t// module:\r\n\t//\t\tdojo/i18n\r\n\r\n\thas.add(\"dojo-preload-i18n-Api\",\r\n\t\t// if true, define the preload localizations machinery\r\n\t\t1\r\n\t);\r\n\r\n\thas.add(\"dojo-v1x-i18n-Api\",\r\n\t\t// if true, define the v1.x i18n functions\r\n\t\t1\r\n\t);\r\n\r\n\tvar\r\n\t\tthisModule = dojo.i18n =\r\n\t\t\t{\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tThis module implements the dojo/i18n! plugin and the v1.6- i18n API\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tWe choose to include our own plugin to leverage functionality already contained in dojo\r\n\t\t\t\t//\t\tand thereby reduce the size of the plugin compared to various loader implementations. Also, this\r\n\t\t\t\t//\t\tallows foreign AMD loaders to be used without their plugins.\r\n\t\t\t},\r\n\r\n\t\tnlsRe =\r\n\t\t\t// regexp for reconstructing the master bundle name from parts of the regexp match\r\n\t\t\t// nlsRe.exec(\"foo/bar/baz/nls/en-ca/foo\") gives:\r\n\t\t\t// [\"foo/bar/baz/nls/en-ca/foo\", \"foo/bar/baz/nls/\", \"/\", \"/\", \"en-ca\", \"foo\"]\r\n\t\t\t// nlsRe.exec(\"foo/bar/baz/nls/foo\") gives:\r\n\t\t\t// [\"foo/bar/baz/nls/foo\", \"foo/bar/baz/nls/\", \"/\", \"/\", \"foo\", \"\"]\r\n\t\t\t// so, if match[5] is blank, it means this is the top bundle definition.\r\n\t\t\t// courtesy of http://requirejs.org\r\n\t\t\t/(^.*(^|\\/)nls)(\\/|$)([^\\/]*)\\/?([^\\/]*)/,\r\n\r\n\t\tgetAvailableLocales = function(\r\n\t\t\troot,\r\n\t\t\tlocale,\r\n\t\t\tbundlePath,\r\n\t\t\tbundleName\r\n\t\t){\r\n\t\t\t// summary:\r\n\t\t\t//\t\treturn a vector of module ids containing all available locales with respect to the target locale\r\n\t\t\t//\t\tFor example, assuming:\r\n\t\t\t//\r\n\t\t\t//\t\t- the root bundle indicates specific bundles for \"fr\" and \"fr-ca\",\r\n\t\t\t//\t\t-  bundlePath is \"myPackage/nls\"\r\n\t\t\t//\t\t- bundleName is \"myBundle\"\r\n\t\t\t//\r\n\t\t\t//\t\tThen a locale argument of \"fr-ca\" would return\r\n\t\t\t//\r\n\t\t\t//\t\t\t[\"myPackage/nls/myBundle\", \"myPackage/nls/fr/myBundle\", \"myPackage/nls/fr-ca/myBundle\"]\r\n\t\t\t//\r\n\t\t\t//\t\tNotice that bundles are returned least-specific to most-specific, starting with the root.\r\n\t\t\t//\r\n\t\t\t//\t\tIf root===false indicates we're working with a pre-AMD i18n bundle that doesn't tell about the available locales;\r\n\t\t\t//\t\ttherefore, assume everything is available and get 404 errors that indicate a particular localization is not available\r\n\r\n\t\t\tfor(var result = [bundlePath + bundleName], localeParts = locale.split(\"-\"), current = \"\", i = 0; i<localeParts.length; i++){\r\n\t\t\t\tcurrent += (current ? \"-\" : \"\") + localeParts[i];\r\n\t\t\t\tif(!root || root[current]){\r\n\t\t\t\t\tresult.push(bundlePath + current + \"/\" + bundleName);\r\n\t\t\t\t\tresult.specificity = current;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tcache = {},\r\n\r\n\t\tgetBundleName = function(moduleName, bundleName, locale){\r\n\t\t\tlocale = locale ? locale.toLowerCase() : dojo.locale;\r\n\t\t\tmoduleName = moduleName.replace(/\\./g, \"/\");\r\n\t\t\tbundleName = bundleName.replace(/\\./g, \"/\");\r\n\t\t\treturn (/root/i.test(locale)) ?\r\n\t\t\t\t(moduleName + \"/nls/\" + bundleName) :\r\n\t\t\t\t(moduleName + \"/nls/\" + locale + \"/\" + bundleName);\r\n\t\t},\r\n\r\n\t\tgetL10nName = dojo.getL10nName = function(moduleName, bundleName, locale){\r\n\t\t\treturn moduleName = module.id + \"!\" + getBundleName(moduleName, bundleName, locale);\r\n\t\t},\r\n\r\n\t\tdoLoad = function(require, bundlePathAndName, bundlePath, bundleName, locale, load){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tget the root bundle which instructs which other bundles are required to construct the localized bundle\r\n\t\t\trequire([bundlePathAndName], function(root){\r\n\t\t\t\tvar current = lang.clone(root.root || root.ROOT),// 1.6 built bundle defined ROOT\r\n\t\t\t\t\tavailableLocales = getAvailableLocales(!root._v1x && root, locale, bundlePath, bundleName);\r\n\t\t\t\trequire(availableLocales, function(){\r\n\t\t\t\t\tfor (var i = 1; i<availableLocales.length; i++){\r\n\t\t\t\t\t\tcurrent = lang.mixin(lang.clone(current), arguments[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// target may not have been resolve (e.g., maybe only \"fr\" exists when \"fr-ca\" was requested)\r\n\t\t\t\t\tvar target = bundlePathAndName + \"/\" + locale;\r\n\t\t\t\t\tcache[target] = current;\r\n\t\t\t\t\tcurrent.$locale = availableLocales.specificity;\r\n\t\t\t\t\tload();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tnormalize = function(id, toAbsMid){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tid may be relative.\r\n\t\t\t//\t\tpreload has form `*preload*<path>/nls/<module>*<flattened locales>` and\r\n\t\t\t//\t\ttherefore never looks like a relative\r\n\t\t\treturn /^\\./.test(id) ? toAbsMid(id) : id;\r\n\t\t},\r\n\r\n\t\tgetLocalesToLoad = function(targetLocale){\r\n\t\t\tvar list = config.extraLocale || [];\r\n\t\t\tlist = lang.isArray(list) ? list : [list];\r\n\t\t\tlist.push(targetLocale);\r\n\t\t\treturn list;\r\n\t\t},\r\n\r\n\t\tload = function(id, require, load){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tid is in one of the following formats\r\n\t\t\t//\r\n\t\t\t//\t\t1. <path>/nls/<bundle>\r\n\t\t\t//\t\t\t=> load the bundle, localized to config.locale; load all bundles localized to\r\n\t\t\t//\t\t\tconfig.extraLocale (if any); return the loaded bundle localized to config.locale.\r\n\t\t\t//\r\n\t\t\t//\t\t2. <path>/nls/<locale>/<bundle>\r\n\t\t\t//\t\t\t=> load then return the bundle localized to <locale>\r\n\t\t\t//\r\n\t\t\t//\t\t3. *preload*<path>/nls/<module>*<JSON array of available locales>\r\n\t\t\t//\t\t\t=> for config.locale and all config.extraLocale, load all bundles found\r\n\t\t\t//\t\t\tin the best-matching bundle rollup. A value of 1 is returned, which\r\n\t\t\t//\t\t\tis meaningless other than to say the plugin is executing the requested\r\n\t\t\t//\t\t\tpreloads\r\n\t\t\t//\r\n\t\t\t//\t\tIn cases 1 and 2, <path> is always normalized to an absolute module id upon entry; see\r\n\t\t\t//\t\tnormalize. In case 3, it <path> is assumed to be absolute; this is arranged by the builder.\r\n\t\t\t//\r\n\t\t\t//\t\tTo load a bundle means to insert the bundle into the plugin's cache and publish the bundle\r\n\t\t\t//\t\tvalue to the loader. Given <path>, <bundle>, and a particular <locale>, the cache key\r\n\t\t\t//\r\n\t\t\t//\t\t\t<path>/nls/<bundle>/<locale>\r\n\t\t\t//\r\n\t\t\t//\t\twill hold the value. Similarly, then plugin will publish this value to the loader by\r\n\t\t\t//\r\n\t\t\t//\t\t\tdefine(\"<path>/nls/<bundle>/<locale>\", <bundle-value>);\r\n\t\t\t//\r\n\t\t\t//\t\tGiven this algorithm, other machinery can provide fast load paths be preplacing\r\n\t\t\t//\t\tvalues in the plugin's cache, which is public. When a load is demanded the\r\n\t\t\t//\t\tcache is inspected before starting any loading. Explicitly placing values in the plugin\r\n\t\t\t//\t\tcache is an advanced/experimental feature that should not be needed; use at your own risk.\r\n\t\t\t//\r\n\t\t\t//\t\tFor the normal AMD algorithm, the root bundle is loaded first, which instructs the\r\n\t\t\t//\t\tplugin what additional localized bundles are required for a particular locale. These\r\n\t\t\t//\t\tadditional locales are loaded and a mix of the root and each progressively-specific\r\n\t\t\t//\t\tlocale is returned. For example:\r\n\t\t\t//\r\n\t\t\t//\t\t1. The client demands \"dojo/i18n!some/path/nls/someBundle\r\n\t\t\t//\r\n\t\t\t//\t\t2. The loader demands load(some/path/nls/someBundle)\r\n\t\t\t//\r\n\t\t\t//\t\t3. This plugin require's \"some/path/nls/someBundle\", which is the root bundle.\r\n\t\t\t//\r\n\t\t\t//\t\t4. Assuming config.locale is \"ab-cd-ef\" and the root bundle indicates that localizations\r\n\t\t\t//\t\tare available for \"ab\" and \"ab-cd-ef\" (note the missing \"ab-cd\", then the plugin\r\n\t\t\t//\t\trequires \"some/path/nls/ab/someBundle\" and \"some/path/nls/ab-cd-ef/someBundle\"\r\n\t\t\t//\r\n\t\t\t//\t\t5. Upon receiving all required bundles, the plugin constructs the value of the bundle\r\n\t\t\t//\t\tab-cd-ef as...\r\n\t\t\t//\r\n\t\t\t//\t\t\t\tmixin(mixin(mixin({}, require(\"some/path/nls/someBundle\"),\r\n\t\t\t//\t\t  \t\t\trequire(\"some/path/nls/ab/someBundle\")),\r\n\t\t\t//\t\t\t\t\trequire(\"some/path/nls/ab-cd-ef/someBundle\"));\r\n\t\t\t//\r\n\t\t\t//\t\tThis value is inserted into the cache and published to the loader at the\r\n\t\t\t//\t\tkey/module-id some/path/nls/someBundle/ab-cd-ef.\r\n\t\t\t//\r\n\t\t\t//\t\tThe special preload signature (case 3) instructs the plugin to stop servicing all normal requests\r\n\t\t\t//\t\t(further preload requests will be serviced) until all ongoing preloading has completed.\r\n\t\t\t//\r\n\t\t\t//\t\tThe preload signature instructs the plugin that a special rollup module is available that contains\r\n\t\t\t//\t\tone or more flattened, localized bundles. The JSON array of available locales indicates which locales\r\n\t\t\t//\t\tare available. Here is an example:\r\n\t\t\t//\r\n\t\t\t//\t\t\t*preload*some/path/nls/someModule*[\"root\", \"ab\", \"ab-cd-ef\"]\r\n\t\t\t//\r\n\t\t\t//\t\tThis indicates the following rollup modules are available:\r\n\t\t\t//\r\n\t\t\t//\t\t\tsome/path/nls/someModule_ROOT\r\n\t\t\t//\t\t\tsome/path/nls/someModule_ab\r\n\t\t\t//\t\t\tsome/path/nls/someModule_ab-cd-ef\r\n\t\t\t//\r\n\t\t\t//\t\tEach of these modules is a normal AMD module that contains one or more flattened bundles in a hash.\r\n\t\t\t//\t\tFor example, assume someModule contained the bundles some/bundle/path/someBundle and\r\n\t\t\t//\t\tsome/bundle/path/someOtherBundle, then some/path/nls/someModule_ab would be expressed as follows:\r\n\t\t\t//\r\n\t\t\t//\t\t\tdefine({\r\n\t\t\t//\t\t\t\tsome/bundle/path/someBundle:<value of someBundle, flattened with respect to locale ab>,\r\n\t\t\t//\t\t\t\tsome/bundle/path/someOtherBundle:<value of someOtherBundle, flattened with respect to locale ab>,\r\n\t\t\t//\t\t\t});\r\n\t\t\t//\r\n\t\t\t//\t\tE.g., given this design, preloading for locale==\"ab\" can execute the following algorithm:\r\n\t\t\t//\r\n\t\t\t//\t\t\trequire([\"some/path/nls/someModule_ab\"], function(rollup){\r\n\t\t\t//\t\t\t\tfor(var p in rollup){\r\n\t\t\t//\t\t\t\t\tvar id = p + \"/ab\",\r\n\t\t\t//\t\t\t\t\tcache[id] = rollup[p];\r\n\t\t\t//\t\t\t\t\tdefine(id, rollup[p]);\r\n\t\t\t//\t\t\t\t}\r\n\t\t\t//\t\t\t});\r\n\t\t\t//\r\n\t\t\t//\t\tSimilarly, if \"ab-cd\" is requested, the algorithm can determine that \"ab\" is the best available and\r\n\t\t\t//\t\tload accordingly.\r\n\t\t\t//\r\n\t\t\t//\t\tThe builder will write such rollups for every layer if a non-empty localeList  profile property is\r\n\t\t\t//\t\tprovided. Further, the builder will include the following cache entry in the cache associated with\r\n\t\t\t//\t\tany layer.\r\n\t\t\t//\r\n\t\t\t//\t\t\t\"*now\":function(r){r(['dojo/i18n!*preload*<path>/nls/<module>*<JSON array of available locales>']);}\r\n\t\t\t//\r\n\t\t\t//\t\tThe *now special cache module instructs the loader to apply the provided function to context-require\r\n\t\t\t//\t\twith respect to the particular layer being defined. This causes the plugin to hold all normal service\r\n\t\t\t//\t\trequests until all preloading is complete.\r\n\t\t\t//\r\n\t\t\t//\t\tNotice that this algorithm is rarely better than the standard AMD load algorithm. Consider the normal case\r\n\t\t\t//\t\twhere the target locale has a single segment and a layer depends on a single bundle:\r\n\t\t\t//\r\n\t\t\t//\t\tWithout Preloads:\r\n\t\t\t//\r\n\t\t\t//\t\t1. Layer loads root bundle.\r\n\t\t\t//\t\t2. bundle is demanded; plugin loads single localized bundle.\r\n\t\t\t//\r\n\t\t\t//\t\tWith Preloads:\r\n\t\t\t//\r\n\t\t\t//\t\t1. Layer causes preloading of target bundle.\r\n\t\t\t//\t\t2. bundle is demanded; service is delayed until preloading complete; bundle is returned.\r\n\t\t\t//\r\n\t\t\t//\t\tIn each case a single transaction is required to load the target bundle. In cases where multiple bundles\r\n\t\t\t//\t\tare required and/or the locale has multiple segments, preloads still requires a single transaction whereas\r\n\t\t\t//\t\tthe normal path requires an additional transaction for each additional bundle/locale-segment. However all\r\n\t\t\t//\t\tof these additional transactions can be done concurrently. Owing to this analysis, the entire preloading\r\n\t\t\t//\t\talgorithm can be discard during a build by setting the has feature dojo-preload-i18n-Api to false.\r\n\r\n\t\t\tif(has(\"dojo-preload-i18n-Api\")){\r\n\t\t\t\tvar split = id.split(\"*\"),\r\n\t\t\t\t\tpreloadDemand = split[1] == \"preload\";\r\n\t\t\t\tif(preloadDemand){\r\n\t\t\t\t\tif(!cache[id]){\r\n\t\t\t\t\t\t// use cache[id] to prevent multiple preloads of the same preload; this shouldn't happen, but\r\n\t\t\t\t\t\t// who knows what over-aggressive human optimizers may attempt\r\n\t\t\t\t\t\tcache[id] = 1;\r\n\t\t\t\t\t\tpreloadL10n(split[2], json.parse(split[3]), 1, require);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// don't stall the loader!\r\n\t\t\t\t\tload(1);\r\n\t\t\t\t}\r\n\t\t\t\tif(preloadDemand || waitForPreloads(id, require, load)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar match = nlsRe.exec(id),\r\n\t\t\t\tbundlePath = match[1] + \"/\",\r\n\t\t\t\tbundleName = match[5] || match[4],\r\n\t\t\t\tbundlePathAndName = bundlePath + bundleName,\r\n\t\t\t\tlocaleSpecified = (match[5] && match[4]),\r\n\t\t\t\ttargetLocale =\tlocaleSpecified || dojo.locale || \"\",\r\n\t\t\t\tloadTarget = bundlePathAndName + \"/\" + targetLocale,\r\n\t\t\t\tloadList = localeSpecified ? [targetLocale] : getLocalesToLoad(targetLocale),\r\n\t\t\t\tremaining = loadList.length,\r\n\t\t\t\tfinish = function(){\r\n\t\t\t\t\tif(!--remaining){\r\n\t\t\t\t\t\tload(lang.delegate(cache[loadTarget]));\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\tarray.forEach(loadList, function(locale){\r\n\t\t\t\tvar target = bundlePathAndName + \"/\" + locale;\r\n\t\t\t\tif(has(\"dojo-preload-i18n-Api\")){\r\n\t\t\t\t\tcheckForLegacyModules(target);\r\n\t\t\t\t}\r\n\t\t\t\tif(!cache[target]){\r\n\t\t\t\t\tdoLoad(require, bundlePathAndName, bundlePath, bundleName, locale, finish);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfinish();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\tif(has(\"dojo-unit-tests\")){\r\n\t\tvar unitTests = thisModule.unitTests = [];\r\n\t}\r\n\r\n\tif(has(\"dojo-preload-i18n-Api\") || has(\"dojo-v1x-i18n-Api\")){\r\n\t\tvar normalizeLocale = thisModule.normalizeLocale = function(locale){\r\n\t\t\t\tvar result = locale ? locale.toLowerCase() : dojo.locale;\r\n\t\t\t\treturn result == \"root\" ? \"ROOT\" : result;\r\n\t\t\t},\r\n\r\n\t\t\tisXd = function(mid, contextRequire){\r\n\t\t\t\treturn (has(\"dojo-sync-loader\") && has(\"dojo-v1x-i18n-Api\")) ?\r\n\t\t\t\t\tcontextRequire.isXdUrl(require.toUrl(mid + \".js\")) :\r\n\t\t\t\t\ttrue;\r\n\t\t\t},\r\n\r\n\t\t\tpreloading = 0,\r\n\r\n\t\t\tpreloadWaitQueue = [],\r\n\r\n\t\t\tpreloadL10n = thisModule._preloadLocalizations = function(/*String*/bundlePrefix, /*Array*/localesGenerated, /*boolean?*/ guaranteedAmdFormat, /*function?*/ contextRequire){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tLoad available flattened resource bundles associated with a particular module for dojo/locale and all dojo/config.extraLocale (if any)\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\tOnly called by built layer files. The entire locale hierarchy is loaded. For example,\r\n\t\t\t\t//\t\tif locale==\"ab-cd\", then ROOT, \"ab\", and \"ab-cd\" are loaded. This is different than v1.6-\r\n\t\t\t\t//\t\tin that the v1.6- would only load ab-cd...which was *always* flattened.\r\n\t\t\t\t//\r\n\t\t\t\t//\t\tIf guaranteedAmdFormat is true, then the module can be loaded with require thereby circumventing the detection algorithm\r\n\t\t\t\t//\t\tand the extra possible extra transaction.\r\n\r\n\t\t\t\t// If this function is called from legacy code, then guaranteedAmdFormat and contextRequire will be undefined. Since the function\r\n\t\t\t\t// needs a require in order to resolve module ids, fall back to the context-require associated with this dojo/i18n module, which\r\n\t\t\t\t// itself may have been mapped.\r\n\t\t\t\tcontextRequire = contextRequire || require;\r\n\r\n\t\t\t\tfunction doRequire(mid, callback){\r\n\t\t\t\t\tif(isXd(mid, contextRequire) || guaranteedAmdFormat){\r\n\t\t\t\t\t\tcontextRequire([mid], callback);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsyncRequire([mid], callback, contextRequire);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction forEachLocale(locale, func){\r\n\t\t\t\t\t// given locale= \"ab-cd-ef\", calls func on \"ab-cd-ef\", \"ab-cd\", \"ab\", \"ROOT\"; stops calling the first time func returns truthy\r\n\t\t\t\t\tvar parts = locale.split(\"-\");\r\n\t\t\t\t\twhile(parts.length){\r\n\t\t\t\t\t\tif(func(parts.join(\"-\"))){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tparts.pop();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunc(\"ROOT\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction preloadingAddLock(){\r\n\t\t\t\t\t\tpreloading++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction preloadingRelLock(){\r\n\t\t\t\t\t\t--preloading;\r\n\t\t\t\t\t\twhile(!preloading && preloadWaitQueue.length){\r\n\t\t\t\t\t\t\tload.apply(null, preloadWaitQueue.shift());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction cacheId(path, name, loc, require){\r\n\t\t\t\t\t\t// path is assumed to have a trailing \"/\"\r\n\t\t\t\t\t\treturn require.toAbsMid(path + name + \"/\" + loc)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction preload(locale){\r\n\t\t\t\t\t\tlocale = normalizeLocale(locale);\r\n\t\t\t\t\t\tforEachLocale(locale, function(loc){\r\n\t\t\t\t\t\t\tif(array.indexOf(localesGenerated, loc) >= 0){\r\n\t\t\t\t\t\t\t\tvar mid = bundlePrefix.replace(/\\./g, \"/\") + \"_\" + loc;\r\n\t\t\t\t\t\t\t\tpreloadingAddLock();\r\n\t\t\t\t\t\t\t\tdoRequire(mid, function(rollup){\r\n\t\t\t\t\t\t\t\t\tfor(var p in rollup){\r\n\t\t\t\t\t\t\t\t\t\tvar bundle = rollup[p],\r\n\t\t\t\t\t\t\t\t\t\t\tmatch = p.match(/(.+)\\/([^\\/]+)$/),\r\n\t\t\t\t\t\t\t\t\t\t\tbundleName, bundlePath;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t// If there is no match, the bundle is not a regular bundle from an AMD layer.\r\n\t\t\t\t\t\t\t\t\t\t\tif (!match){continue;}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tbundleName = match[2];\r\n\t\t\t\t\t\t\t\t\t\t\tbundlePath = match[1] + \"/\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t// backcompat\r\n\t\t\t\t\t\t\t\t\t\tbundle._localized = bundle._localized || {};\r\n\r\n\t\t\t\t\t\t\t\t\t\tvar localized;\r\n\t\t\t\t\t\t\t\t\t\tif(loc === \"ROOT\"){\r\n\t\t\t\t\t\t\t\t\t\t\tvar root = localized = bundle._localized;\r\n\t\t\t\t\t\t\t\t\t\t\tdelete bundle._localized;\r\n\t\t\t\t\t\t\t\t\t\t\troot.root = bundle;\r\n\t\t\t\t\t\t\t\t\t\t\tcache[require.toAbsMid(p)] = root;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tlocalized = bundle._localized;\r\n\t\t\t\t\t\t\t\t\t\t\tcache[cacheId(bundlePath, bundleName, loc, require)] = bundle;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif(loc !== locale){\r\n\t\t\t\t\t\t\t\t\t\t\t// capture some locale variables\r\n\t\t\t\t\t\t\t\t\t\t\tfunction improveBundle(bundlePath, bundleName, bundle, localized){\r\n\t\t\t\t\t\t\t\t\t\t\t\t// locale was not flattened and we've fallen back to a less-specific locale that was flattened\r\n\t\t\t\t\t\t\t\t\t\t\t\t// for example, we had a flattened 'fr', a 'fr-ca' is available for at least this bundle, and\r\n\t\t\t\t\t\t\t\t\t\t\t\t// locale==='fr-ca'; therefore, we must improve the bundle as retrieved from the rollup by\r\n\t\t\t\t\t\t\t\t\t\t\t\t// manually loading the fr-ca version of the bundle and mixing this into the already-retrieved 'fr'\r\n\t\t\t\t\t\t\t\t\t\t\t\t// version of the bundle.\r\n\t\t\t\t\t\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t\t\t\t\t\t// Remember, different bundles may have different sets of locales available.\r\n\t\t\t\t\t\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t\t\t\t\t\t// we are really falling back on the regular algorithm here, but--hopefully--starting with most\r\n\t\t\t\t\t\t\t\t\t\t\t\t// of the required bundles already on board as given by the rollup and we need to \"manually\" load\r\n\t\t\t\t\t\t\t\t\t\t\t\t// only one locale from a few bundles...or even better...we won't find anything better to load.\r\n\t\t\t\t\t\t\t\t\t\t\t\t// This algorithm ensures there is nothing better to load even when we can only load a less-specific rollup.\r\n\t\t\t\t\t\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t\t\t\t\t\t// note: this feature is only available in async mode\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t// inspect the loaded bundle that came from the rollup to see if something better is available\r\n\t\t\t\t\t\t\t\t\t\t\t\t// for any bundle in a rollup, more-specific available locales are given at localized.\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar requiredBundles = [],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcacheIds = [];\r\n\t\t\t\t\t\t\t\t\t\t\t\tforEachLocale(locale, function(loc){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(localized[loc]){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequiredBundles.push(require.toAbsMid(bundlePath + loc + \"/\" + bundleName));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcacheIds.push(cacheId(bundlePath, bundleName, loc, require));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(requiredBundles.length){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpreloadingAddLock();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontextRequire(requiredBundles, function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor(var i = 0; i < requiredBundles.length; i++){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbundle = lang.mixin(lang.clone(bundle), arguments[i]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcache[cacheIds[i]] = bundle;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// this is the best possible (maybe a perfect match, maybe not), accept it\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcache[cacheId(bundlePath, bundleName, locale, require)] = lang.clone(bundle);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreloadingRelLock();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// this is the best possible (definitely not a perfect match), accept it\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcache[cacheId(bundlePath, bundleName, locale, require)] = bundle;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\timproveBundle(bundlePath, bundleName, bundle, localized);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tpreloadingRelLock();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tpreload();\r\n\t\t\t\tarray.forEach(dojo.config.extraLocale, preload);\r\n\t\t\t},\r\n\r\n\t\t\twaitForPreloads = function(id, require, load){\r\n\t\t\t\tif(preloading){\r\n\t\t\t\t\tpreloadWaitQueue.push([id, require, load]);\r\n\t\t\t\t}\r\n\t\t\t\treturn preloading;\r\n\t\t\t},\r\n\r\n\t\t\tcheckForLegacyModules = function()\r\n\t\t\t\t{};\r\n\t}\r\n\r\n\tif(has(\"dojo-v1x-i18n-Api\")){\r\n\t\t// this code path assumes the dojo loader and won't work with a standard AMD loader\r\n\t\tvar amdValue = {},\r\n\t\t\tevalBundle =\r\n\t\t\t\t// use the function ctor to keep the minifiers away (also come close to global scope, but this is secondary)\r\n\t\t\t\tnew Function(\r\n\t\t\t\t\t\"__bundle\",\t\t\t\t   // the bundle to evalutate\r\n\t\t\t\t\t\"__checkForLegacyModules\", // a function that checks if __bundle defined __mid in the global space\r\n\t\t\t\t\t\"__mid\",\t\t\t\t   // the mid that __bundle is intended to define\r\n\t\t\t\t\t\"__amdValue\",\r\n\r\n\t\t\t\t\t// returns one of:\r\n\t\t\t\t\t//\t\t1 => the bundle was an AMD bundle\r\n\t\t\t\t\t//\t\ta legacy bundle object that is the value of __mid\r\n\t\t\t\t\t//\t\tinstance of Error => could not figure out how to evaluate bundle\r\n\r\n\t\t\t\t\t  // used to detect when __bundle calls define\r\n\t\t\t\t\t  \"var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\"\r\n\t\t\t\t\t+ \"\t   require = function(){define.called = 1;};\"\r\n\r\n\t\t\t\t\t+ \"try{\"\r\n\t\t\t\t\t+\t\t\"define.called = 0;\"\r\n\t\t\t\t\t+\t\t\"eval(__bundle);\"\r\n\t\t\t\t\t+\t\t\"if(define.called==1)\"\r\n\t\t\t\t\t\t\t\t// bundle called define; therefore signal it's an AMD bundle\r\n\t\t\t\t\t+\t\t\t\"return __amdValue;\"\r\n\r\n\t\t\t\t\t+\t\t\"if((__checkForLegacyModules = __checkForLegacyModules(__mid)))\"\r\n\t\t\t\t\t\t\t\t// bundle was probably a v1.6- built NLS flattened NLS bundle that defined __mid in the global space\r\n\t\t\t\t\t+\t\t\t\"return __checkForLegacyModules;\"\r\n\r\n\t\t\t\t\t+ \"}catch(e){}\"\r\n\t\t\t\t\t// evaulating the bundle was *neither* an AMD *nor* a legacy flattened bundle\r\n\t\t\t\t\t// either way, re-eval *after* surrounding with parentheses\r\n\r\n\t\t\t\t\t+ \"try{\"\r\n\t\t\t\t\t+\t\t\"return eval('('+__bundle+')');\"\r\n\t\t\t\t\t+ \"}catch(e){\"\r\n\t\t\t\t\t+\t\t\"return e;\"\r\n\t\t\t\t\t+ \"}\"\r\n\t\t\t\t),\r\n\r\n\t\t\tsyncRequire = function(deps, callback, require){\r\n\t\t\t\tvar results = [];\r\n\t\t\t\tarray.forEach(deps, function(mid){\r\n\t\t\t\t\tvar url = require.toUrl(mid + \".js\");\r\n\r\n\t\t\t\t\tfunction load(text){\r\n\t\t\t\t\t\tvar result = evalBundle(text, checkForLegacyModules, mid, amdValue);\r\n\t\t\t\t\t\tif(result===amdValue){\r\n\t\t\t\t\t\t\t// the bundle was an AMD module; re-inject it through the normal AMD path\r\n\t\t\t\t\t\t\t// we gotta do this since it could be an anonymous module and simply evaluating\r\n\t\t\t\t\t\t\t// the text here won't provide the loader with the context to know what\r\n\t\t\t\t\t\t\t// module is being defined()'d. With browser caching, this should be free; further\r\n\t\t\t\t\t\t\t// this entire code path can be circumvented by using the AMD format to begin with\r\n\t\t\t\t\t\t\tresults.push(cache[url] = amdValue.result);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(result instanceof Error){\r\n\t\t\t\t\t\t\t\tconsole.error(\"failed to evaluate i18n bundle; url=\" + url, result);\r\n\t\t\t\t\t\t\t\tresult = {};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// nls/<locale>/<bundle-name> indicates not the root.\r\n\t\t\t\t\t\t\tresults.push(cache[url] = (/nls\\/[^\\/]+\\/[^\\/]+$/.test(url) ? result : {root:result, _v1x:1}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(cache[url]){\r\n\t\t\t\t\t\tresults.push(cache[url]);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar bundle = require.syncLoadNls(mid);\r\n\t\t\t\t\t\t// don't need to check for legacy since syncLoadNls returns a module if the module\r\n\t\t\t\t\t\t// (1) was already loaded, or (2) was in the cache. In case 1, if syncRequire is called\r\n\t\t\t\t\t\t// from getLocalization --> load, then load will have called checkForLegacyModules() before\r\n\t\t\t\t\t\t// calling syncRequire; if syncRequire is called from preloadLocalizations, then we\r\n\t\t\t\t\t\t// don't care about checkForLegacyModules() because that will be done when a particular\r\n\t\t\t\t\t\t// bundle is actually demanded. In case 2, checkForLegacyModules() is never relevant\r\n\t\t\t\t\t\t// because cached modules are always v1.7+ built modules.\r\n\t\t\t\t\t\tif(bundle){\r\n\t\t\t\t\t\t\tresults.push(bundle);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(!xhr){\r\n\t\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\t\trequire.getText(url, true, load);\r\n\t\t\t\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t\t\t\tresults.push(cache[url] = {});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\txhr.get({\r\n\t\t\t\t\t\t\t\t\turl:url,\r\n\t\t\t\t\t\t\t\t\tsync:true,\r\n\t\t\t\t\t\t\t\t\tload:load,\r\n\t\t\t\t\t\t\t\t\terror:function(){\r\n\t\t\t\t\t\t\t\t\t\tresults.push(cache[url] = {});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcallback && callback.apply(null, results);\r\n\t\t\t};\r\n\r\n\t\tcheckForLegacyModules = function(target){\r\n\t\t\t// legacy code may have already loaded [e.g] the raw bundle x/y/z at x.y.z; when true, push into the cache\r\n\t\t\tfor(var result, names = target.split(\"/\"), object = dojo.global[names[0]], i = 1; object && i<names.length-1; object = object[names[i++]]){}\r\n\t\t\tif(object){\r\n\t\t\t\tresult = object[names[i]];\r\n\t\t\t\tif(!result){\r\n\t\t\t\t\t// fallback for incorrect bundle build of 1.6\r\n\t\t\t\t\tresult = object[names[i].replace(/-/g,\"_\")];\r\n\t\t\t\t}\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tcache[target] = result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tthisModule.getLocalization = function(moduleName, bundleName, locale){\r\n\t\t\tvar result,\r\n\t\t\t\tl10nName = getBundleName(moduleName, bundleName, locale);\r\n\t\t\tload(\r\n\t\t\t\tl10nName,\r\n\r\n\t\t\t\t// isXd() and syncRequire() need a context-require in order to resolve the mid with respect to a reference module.\r\n\t\t\t\t// Since this legacy function does not have the concept of a reference module, resolve with respect to this\r\n\t\t\t\t// dojo/i18n module, which, itself may have been mapped.\r\n\t\t\t\t(!isXd(l10nName, require) ? function(deps, callback){ syncRequire(deps, callback, require); } : require),\r\n\r\n\t\t\t\tfunction(result_){ result = result_; }\r\n\t\t\t);\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tif(has(\"dojo-unit-tests\")){\r\n\t\t\tunitTests.push(function(doh){\r\n\t\t\t\tdoh.register(\"tests.i18n.unit\", function(t){\r\n\t\t\t\t\tvar check;\r\n\r\n\t\t\t\t\tcheck = evalBundle(\"{prop:1}\", checkForLegacyModules, \"nonsense\", amdValue);\r\n\t\t\t\t\tt.is({prop:1}, check); t.is(undefined, check[1]);\r\n\r\n\t\t\t\t\tcheck = evalBundle(\"({prop:1})\", checkForLegacyModules, \"nonsense\", amdValue);\r\n\t\t\t\t\tt.is({prop:1}, check); t.is(undefined, check[1]);\r\n\r\n\t\t\t\t\tcheck = evalBundle(\"{'prop-x':1}\", checkForLegacyModules, \"nonsense\", amdValue);\r\n\t\t\t\t\tt.is({'prop-x':1}, check); t.is(undefined, check[1]);\r\n\r\n\t\t\t\t\tcheck = evalBundle(\"({'prop-x':1})\", checkForLegacyModules, \"nonsense\", amdValue);\r\n\t\t\t\t\tt.is({'prop-x':1}, check); t.is(undefined, check[1]);\r\n\r\n\t\t\t\t\tcheck = evalBundle(\"define({'prop-x':1})\", checkForLegacyModules, \"nonsense\", amdValue);\r\n\t\t\t\t\tt.is(amdValue, check); t.is({'prop-x':1}, amdValue.result);\r\n\r\n\t\t\t\t\tcheck = evalBundle(\"define('some/module', {'prop-x':1})\", checkForLegacyModules, \"nonsense\", amdValue);\r\n\t\t\t\t\tt.is(amdValue, check); t.is({'prop-x':1}, amdValue.result);\r\n\r\n\t\t\t\t\tcheck = evalBundle(\"this is total nonsense and should throw an error\", checkForLegacyModules, \"nonsense\", amdValue);\r\n\t\t\t\t\tt.is(check instanceof Error, true);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treturn lang.mixin(thisModule, {\r\n\t\tdynamic:true,\r\n\t\tnormalize:normalize,\r\n\t\tload:load,\r\n\t\tcache:cache,\r\n\t\tgetL10nName: getL10nName\r\n\t});\r\n});\r\n\ndefine('dojo/regexp',[\"./_base/kernel\", \"./_base/lang\"], function(dojo, lang){\r\n\r\n// module:\r\n//\t\tdojo/regexp\r\n\r\nvar regexp = {\r\n\t// summary:\r\n\t//\t\tRegular expressions and Builder resources\r\n};\r\nlang.setObject(\"dojo.regexp\", regexp);\r\n\r\nregexp.escapeString = function(/*String*/str, /*String?*/except){\r\n\t// summary:\r\n\t//\t\tAdds escape sequences for special characters in regular expressions\r\n\t// except:\r\n\t//\t\ta String with special characters to be left unescaped\r\n\r\n\treturn str.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+\\-^])/g, function(ch){\r\n\t\tif(except && except.indexOf(ch) != -1){\r\n\t\t\treturn ch;\r\n\t\t}\r\n\t\treturn \"\\\\\" + ch;\r\n\t}); // String\r\n};\r\n\r\nregexp.buildGroupRE = function(/*Object|Array*/arr, /*Function*/re, /*Boolean?*/nonCapture){\r\n\t// summary:\r\n\t//\t\tBuilds a regular expression that groups subexpressions\r\n\t// description:\r\n\t//\t\tA utility function used by some of the RE generators. The\r\n\t//\t\tsubexpressions are constructed by the function, re, in the second\r\n\t//\t\tparameter.  re builds one subexpression for each elem in the array\r\n\t//\t\ta, in the first parameter. Returns a string for a regular\r\n\t//\t\texpression that groups all the subexpressions.\r\n\t// arr:\r\n\t//\t\tA single value or an array of values.\r\n\t// re:\r\n\t//\t\tA function. Takes one parameter and converts it to a regular\r\n\t//\t\texpression.\r\n\t// nonCapture:\r\n\t//\t\tIf true, uses non-capturing match, otherwise matches are retained\r\n\t//\t\tby regular expression. Defaults to false\r\n\r\n\t// case 1: a is a single value.\r\n\tif(!(arr instanceof Array)){\r\n\t\treturn re(arr); // String\r\n\t}\r\n\r\n\t// case 2: a is an array\r\n\tvar b = [];\r\n\tfor(var i = 0; i < arr.length; i++){\r\n\t\t// convert each elem to a RE\r\n\t\tb.push(re(arr[i]));\r\n\t}\r\n\r\n\t // join the REs as alternatives in a RE group.\r\n\treturn regexp.group(b.join(\"|\"), nonCapture); // String\r\n};\r\n\r\nregexp.group = function(/*String*/expression, /*Boolean?*/nonCapture){\r\n\t// summary:\r\n\t//\t\tadds group match to expression\r\n\t// nonCapture:\r\n\t//\t\tIf true, uses non-capturing match, otherwise matches are retained\r\n\t//\t\tby regular expression.\r\n\treturn \"(\" + (nonCapture ? \"?:\":\"\") + expression + \")\"; // String\r\n};\r\n\r\nreturn regexp;\r\n});\r\n\ndefine('dojo/cookie',[\"./_base/kernel\", \"./regexp\"], function(dojo, regexp){\r\n\r\n// module:\r\n//\t\tdojo/cookie\r\n\r\n/*=====\r\nvar __cookieProps = {\r\n\t// expires: Date|String|Number?\r\n\t//\t\tIf a number, the number of days from today at which the cookie\r\n\t//\t\twill expire. If a date, the date past which the cookie will expire.\r\n\t//\t\tIf expires is in the past, the cookie will be deleted.\r\n\t//\t\tIf expires is omitted or is 0, the cookie will expire when the browser closes.\r\n\t// path: String?\r\n\t//\t\tThe path to use for the cookie.\r\n\t// domain: String?\r\n\t//\t\tThe domain to use for the cookie.\r\n\t// secure: Boolean?\r\n\t//\t\tWhether to only send the cookie on secure connections\r\n};\r\n=====*/\r\n\r\n\r\ndojo.cookie = function(/*String*/name, /*String?*/ value, /*__cookieProps?*/ props){\r\n\t// summary:\r\n\t//\t\tGet or set a cookie.\r\n\t// description:\r\n\t//\t\tIf one argument is passed, returns the value of the cookie\r\n\t//\t\tFor two or more arguments, acts as a setter.\r\n\t// name:\r\n\t//\t\tName of the cookie\r\n\t// value:\r\n\t//\t\tValue for the cookie\r\n\t// props:\r\n\t//\t\tProperties for the cookie\r\n\t// example:\r\n\t//\t\tset a cookie with the JSON-serialized contents of an object which\r\n\t//\t\twill expire 5 days from now:\r\n\t//\t|\trequire([\"dojo/cookie\", \"dojo/json\"], function(cookie, json){\r\n\t//\t|\t\tcookie(\"configObj\", json.stringify(config, {expires: 5 }));\r\n\t//\t|\t});\r\n\t//\r\n\t// example:\r\n\t//\t\tde-serialize a cookie back into a JavaScript object:\r\n\t//\t|\trequire([\"dojo/cookie\", \"dojo/json\"], function(cookie, json){\r\n\t//\t|\t\tconfig = json.parse(cookie(\"configObj\"));\r\n\t//\t|\t});\r\n\t//\r\n\t// example:\r\n\t//\t\tdelete a cookie:\r\n\t//\t|\trequire([\"dojo/cookie\"], function(cookie){\r\n\t//\t|\t\tcookie(\"configObj\", null, {expires: -1});\r\n\t//\t|\t});\r\n\tvar c = document.cookie, ret;\r\n\tif(arguments.length == 1){\r\n\t\tvar matches = c.match(new RegExp(\"(?:^|; )\" + regexp.escapeString(name) + \"=([^;]*)\"));\r\n\t\tret = matches ? decodeURIComponent(matches[1]) : undefined; \r\n\t}else{\r\n\t\tprops = props || {};\r\n// FIXME: expires=0 seems to disappear right away, not on close? (FF3)  Change docs?\r\n\t\tvar exp = props.expires;\r\n\t\tif(typeof exp == \"number\"){\r\n\t\t\tvar d = new Date();\r\n\t\t\td.setTime(d.getTime() + exp*24*60*60*1000);\r\n\t\t\texp = props.expires = d;\r\n\t\t}\r\n\t\tif(exp && exp.toUTCString){ props.expires = exp.toUTCString(); }\r\n\r\n\t\tvalue = encodeURIComponent(value);\r\n\t\tvar updatedCookie = name + \"=\" + value, propName;\r\n\t\tfor(propName in props){\r\n\t\t\tupdatedCookie += \"; \" + propName;\r\n\t\t\tvar propValue = props[propName];\r\n\t\t\tif(propValue !== true){ updatedCookie += \"=\" + propValue; }\r\n\t\t}\r\n\t\tdocument.cookie = updatedCookie;\r\n\t}\r\n\treturn ret; // String|undefined\r\n};\r\n\r\ndojo.cookie.isSupported = function(){\r\n\t// summary:\r\n\t//\t\tUse to determine if the current browser supports cookies or not.\r\n\t//\r\n\t//\t\tReturns true if user allows cookies.\r\n\t//\t\tReturns false if user doesn't allow cookies.\r\n\r\n\tif(!(\"cookieEnabled\" in navigator)){\r\n\t\tthis(\"__djCookieTest__\", \"CookiesAllowed\");\r\n\t\tnavigator.cookieEnabled = this(\"__djCookieTest__\") == \"CookiesAllowed\";\r\n\t\tif(navigator.cookieEnabled){\r\n\t\t\tthis(\"__djCookieTest__\", \"\", {expires: -1});\r\n\t\t}\r\n\t}\r\n\treturn navigator.cookieEnabled;\r\n};\r\n\r\nreturn dojo.cookie;\r\n});\r\n\ndefine('dojo/date',[\"./has\", \"./_base/lang\"], function(has, lang){\r\n// module:\r\n//\t\tdojo/date\r\n\r\nvar date = {\r\n\t// summary:\r\n\t//\t\tDate manipulation utilities\r\n};\r\n\r\ndate.getDaysInMonth = function(/*Date*/dateObject){\r\n\t// summary:\r\n\t//\t\tReturns the number of days in the month used by dateObject\r\n\tvar month = dateObject.getMonth();\r\n\tvar days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n\tif(month == 1 && date.isLeapYear(dateObject)){ return 29; } // Number\r\n\treturn days[month]; // Number\r\n};\r\n\r\ndate.isLeapYear = function(/*Date*/dateObject){\r\n\t// summary:\r\n\t//\t\tDetermines if the year of the dateObject is a leap year\r\n\t// description:\r\n\t//\t\tLeap years are years with an additional day YYYY-02-29, where the\r\n\t//\t\tyear number is a multiple of four with the following exception: If\r\n\t//\t\ta year is a multiple of 100, then it is only a leap year if it is\r\n\t//\t\talso a multiple of 400. For example, 1900 was not a leap year, but\r\n\t//\t\t2000 is one.\r\n\r\n\tvar year = dateObject.getFullYear();\r\n\treturn !(year%400) || (!(year%4) && !!(year%100)); // Boolean\r\n};\r\n\r\n// FIXME: This is not localized\r\ndate.getTimezoneName = function(/*Date*/dateObject){\r\n\t// summary:\r\n\t//\t\tGet the user's time zone as provided by the browser\r\n\t// dateObject:\r\n\t//\t\tNeeded because the timezone may vary with time (daylight savings)\r\n\t// description:\r\n\t//\t\tTry to get time zone info from toString or toLocaleString method of\r\n\t//\t\tthe Date object -- UTC offset is not a time zone.  See\r\n\t//\t\thttp://www.twinsun.com/tz/tz-link.htm Note: results may be\r\n\t//\t\tinconsistent across browsers.\r\n\r\n\tvar str = dateObject.toString(); // Start looking in toString\r\n\tvar tz = ''; // The result -- return empty string if nothing found\r\n\tvar match;\r\n\r\n\t// First look for something in parentheses -- fast lookup, no regex\r\n\tvar pos = str.indexOf('(');\r\n\tif(pos > -1){\r\n\t\ttz = str.substring(++pos, str.indexOf(')'));\r\n\t}else{\r\n\t\t// If at first you don't succeed ...\r\n\t\t// If IE knows about the TZ, it appears before the year\r\n\t\t// Capital letters or slash before a 4-digit year\r\n\t\t// at the end of string\r\n\t\tvar pat = /([A-Z\\/]+) \\d{4}$/;\r\n\t\tif((match = str.match(pat))){\r\n\t\t\ttz = match[1];\r\n\t\t}else{\r\n\t\t// Some browsers (e.g. Safari) glue the TZ on the end\r\n\t\t// of toLocaleString instead of putting it in toString\r\n\t\t\tstr = dateObject.toLocaleString();\r\n\t\t\t// Capital letters or slash -- end of string,\r\n\t\t\t// after space\r\n\t\t\tpat = / ([A-Z\\/]+)$/;\r\n\t\t\tif((match = str.match(pat))){\r\n\t\t\t\ttz = match[1];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Make sure it doesn't somehow end up return AM or PM\r\n\treturn (tz == 'AM' || tz == 'PM') ? '' : tz; // String\r\n};\r\n\r\n// Utility methods to do arithmetic calculations with Dates\r\n\r\ndate.compare = function(/*Date*/date1, /*Date?*/date2, /*String?*/portion){\r\n\t// summary:\r\n\t//\t\tCompare two date objects by date, time, or both.\r\n\t// description:\r\n\t//\t\tReturns 0 if equal, positive if a > b, else negative.\r\n\t// date1:\r\n\t//\t\tDate object\r\n\t// date2:\r\n\t//\t\tDate object.  If not specified, the current Date is used.\r\n\t// portion:\r\n\t//\t\tA string indicating the \"date\" or \"time\" portion of a Date object.\r\n\t//\t\tCompares both \"date\" and \"time\" by default.  One of the following:\r\n\t//\t\t\"date\", \"time\", \"datetime\"\r\n\r\n\t// Extra step required in copy for IE - see #3112\r\n\tdate1 = new Date(+date1);\r\n\tdate2 = new Date(+(date2 || new Date()));\r\n\r\n\tif(portion == \"date\"){\r\n\t\t// Ignore times and compare dates.\r\n\t\tdate1.setHours(0, 0, 0, 0);\r\n\t\tdate2.setHours(0, 0, 0, 0);\r\n\t}else if(portion == \"time\"){\r\n\t\t// Ignore dates and compare times.\r\n\t\tdate1.setFullYear(0, 0, 0);\r\n\t\tdate2.setFullYear(0, 0, 0);\r\n\t}\r\n\r\n\tif(date1 > date2){ return 1; } // int\r\n\tif(date1 < date2){ return -1; } // int\r\n\treturn 0; // int\r\n};\r\n\r\ndate.add = function(/*Date*/date, /*String*/interval, /*int*/amount){\r\n\t// summary:\r\n\t//\t\tAdd to a Date in intervals of different size, from milliseconds to years\r\n\t// date: Date\r\n\t//\t\tDate object to start with\r\n\t// interval:\r\n\t//\t\tA string representing the interval.  One of the following:\r\n\t//\t\t\"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\",\r\n\t//\t\t\"millisecond\", \"quarter\", \"week\", \"weekday\"\r\n\t// amount:\r\n\t//\t\tHow much to add to the date.\r\n\r\n\tvar sum = new Date(+date); // convert to Number before copying to accommodate IE (#3112)\r\n\tvar fixOvershoot = false;\r\n\tvar property = \"Date\";\r\n\r\n\tswitch(interval){\r\n\t\tcase \"day\":\r\n\t\t\tbreak;\r\n\t\tcase \"weekday\":\r\n\t\t\t//i18n FIXME: assumes Saturday/Sunday weekend, but this is not always true.  see dojo/cldr/supplemental\r\n\r\n\t\t\t// Divide the increment time span into weekspans plus leftover days\r\n\t\t\t// e.g., 8 days is one 5-day weekspan / and two leftover days\r\n\t\t\t// Can't have zero leftover days, so numbers divisible by 5 get\r\n\t\t\t// a days value of 5, and the remaining days make up the number of weeks\r\n\t\t\tvar days, weeks;\r\n\t\t\tvar mod = amount % 5;\r\n\t\t\tif(!mod){\r\n\t\t\t\tdays = (amount > 0) ? 5 : -5;\r\n\t\t\t\tweeks = (amount > 0) ? ((amount-5)/5) : ((amount+5)/5);\r\n\t\t\t}else{\r\n\t\t\t\tdays = mod;\r\n\t\t\t\tweeks = parseInt(amount/5);\r\n\t\t\t}\r\n\t\t\t// Get weekday value for orig date param\r\n\t\t\tvar strt = date.getDay();\r\n\t\t\t// Orig date is Sat / positive incrementer\r\n\t\t\t// Jump over Sun\r\n\t\t\tvar adj = 0;\r\n\t\t\tif(strt == 6 && amount > 0){\r\n\t\t\t\tadj = 1;\r\n\t\t\t}else if(strt == 0 && amount < 0){\r\n\t\t\t// Orig date is Sun / negative incrementer\r\n\t\t\t// Jump back over Sat\r\n\t\t\t\tadj = -1;\r\n\t\t\t}\r\n\t\t\t// Get weekday val for the new date\r\n\t\t\tvar trgt = strt + days;\r\n\t\t\t// New date is on Sat or Sun\r\n\t\t\tif(trgt == 0 || trgt == 6){\r\n\t\t\t\tadj = (amount > 0) ? 2 : -2;\r\n\t\t\t}\r\n\t\t\t// Increment by number of weeks plus leftover days plus\r\n\t\t\t// weekend adjustments\r\n\t\t\tamount = (7 * weeks) + days + adj;\r\n\t\t\tbreak;\r\n\t\tcase \"year\":\r\n\t\t\tproperty = \"FullYear\";\r\n\t\t\t// Keep increment/decrement from 2/29 out of March\r\n\t\t\tfixOvershoot = true;\r\n\t\t\tbreak;\r\n\t\tcase \"week\":\r\n\t\t\tamount *= 7;\r\n\t\t\tbreak;\r\n\t\tcase \"quarter\":\r\n\t\t\t// Naive quarter is just three months\r\n\t\t\tamount *= 3;\r\n\t\t\t// fallthrough...\r\n\t\tcase \"month\":\r\n\t\t\t// Reset to last day of month if you overshoot\r\n\t\t\tfixOvershoot = true;\r\n\t\t\tproperty = \"Month\";\r\n\t\t\tbreak;\r\n//\t\tcase \"hour\":\r\n//\t\tcase \"minute\":\r\n//\t\tcase \"second\":\r\n//\t\tcase \"millisecond\":\r\n\t\tdefault:\r\n\t\t\tproperty = \"UTC\"+interval.charAt(0).toUpperCase() + interval.substring(1) + \"s\";\r\n\t}\r\n\r\n\tif(property){\r\n\t\tsum[\"set\"+property](sum[\"get\"+property]()+amount);\r\n\t}\r\n\r\n\tif(fixOvershoot && (sum.getDate() < date.getDate())){\r\n\t\tsum.setDate(0);\r\n\t}\r\n\r\n\treturn sum; // Date\r\n};\r\n\r\ndate.difference = function(/*Date*/date1, /*Date?*/date2, /*String?*/interval){\r\n\t// summary:\r\n\t//\t\tGet the difference in a specific unit of time (e.g., number of\r\n\t//\t\tmonths, weeks, days, etc.) between two dates, rounded to the\r\n\t//\t\tnearest integer.\r\n\t// date1:\r\n\t//\t\tDate object\r\n\t// date2:\r\n\t//\t\tDate object.  If not specified, the current Date is used.\r\n\t// interval:\r\n\t//\t\tA string representing the interval.  One of the following:\r\n\t//\t\t\"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\",\r\n\t//\t\t\"millisecond\", \"quarter\", \"week\", \"weekday\"\r\n\t//\r\n\t//\t\tDefaults to \"day\".\r\n\r\n\tdate2 = date2 || new Date();\r\n\tinterval = interval || \"day\";\r\n\tvar yearDiff = date2.getFullYear() - date1.getFullYear();\r\n\tvar delta = 1; // Integer return value\r\n\r\n\tswitch(interval){\r\n\t\tcase \"quarter\":\r\n\t\t\tvar m1 = date1.getMonth();\r\n\t\t\tvar m2 = date2.getMonth();\r\n\t\t\t// Figure out which quarter the months are in\r\n\t\t\tvar q1 = Math.floor(m1/3) + 1;\r\n\t\t\tvar q2 = Math.floor(m2/3) + 1;\r\n\t\t\t// Add quarters for any year difference between the dates\r\n\t\t\tq2 += (yearDiff * 4);\r\n\t\t\tdelta = q2 - q1;\r\n\t\t\tbreak;\r\n\t\tcase \"weekday\":\r\n\t\t\tvar days = Math.round(date.difference(date1, date2, \"day\"));\r\n\t\t\tvar weeks = parseInt(date.difference(date1, date2, \"week\"));\r\n\t\t\tvar mod = days % 7;\r\n\r\n\t\t\t// Even number of weeks\r\n\t\t\tif(mod == 0){\r\n\t\t\t\tdays = weeks*5;\r\n\t\t\t}else{\r\n\t\t\t\t// Weeks plus spare change (< 7 days)\r\n\t\t\t\tvar adj = 0;\r\n\t\t\t\tvar aDay = date1.getDay();\r\n\t\t\t\tvar bDay = date2.getDay();\r\n\r\n\t\t\t\tweeks = parseInt(days/7);\r\n\t\t\t\tmod = days % 7;\r\n\t\t\t\t// Mark the date advanced by the number of\r\n\t\t\t\t// round weeks (may be zero)\r\n\t\t\t\tvar dtMark = new Date(date1);\r\n\t\t\t\tdtMark.setDate(dtMark.getDate()+(weeks*7));\r\n\t\t\t\tvar dayMark = dtMark.getDay();\r\n\r\n\t\t\t\t// Spare change days -- 6 or less\r\n\t\t\t\tif(days > 0){\r\n\t\t\t\t\tswitch(true){\r\n\t\t\t\t\t\t// Range starts on Sat\r\n\t\t\t\t\t\tcase aDay == 6:\r\n\t\t\t\t\t\t\tadj = -1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// Range starts on Sun\r\n\t\t\t\t\t\tcase aDay == 0:\r\n\t\t\t\t\t\t\tadj = 0;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// Range ends on Sat\r\n\t\t\t\t\t\tcase bDay == 6:\r\n\t\t\t\t\t\t\tadj = -1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// Range ends on Sun\r\n\t\t\t\t\t\tcase bDay == 0:\r\n\t\t\t\t\t\t\tadj = -2;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// Range contains weekend\r\n\t\t\t\t\t\tcase (dayMark + mod) > 5:\r\n\t\t\t\t\t\t\tadj = -2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(days < 0){\r\n\t\t\t\t\tswitch(true){\r\n\t\t\t\t\t\t// Range starts on Sat\r\n\t\t\t\t\t\tcase aDay == 6:\r\n\t\t\t\t\t\t\tadj = 0;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// Range starts on Sun\r\n\t\t\t\t\t\tcase aDay == 0:\r\n\t\t\t\t\t\t\tadj = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// Range ends on Sat\r\n\t\t\t\t\t\tcase bDay == 6:\r\n\t\t\t\t\t\t\tadj = 2;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// Range ends on Sun\r\n\t\t\t\t\t\tcase bDay == 0:\r\n\t\t\t\t\t\t\tadj = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// Range contains weekend\r\n\t\t\t\t\t\tcase (dayMark + mod) < 0:\r\n\t\t\t\t\t\t\tadj = 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdays += adj;\r\n\t\t\t\tdays -= (weeks*2);\r\n\t\t\t}\r\n\t\t\tdelta = days;\r\n\t\t\tbreak;\r\n\t\tcase \"year\":\r\n\t\t\tdelta = yearDiff;\r\n\t\t\tbreak;\r\n\t\tcase \"month\":\r\n\t\t\tdelta = (date2.getMonth() - date1.getMonth()) + (yearDiff * 12);\r\n\t\t\tbreak;\r\n\t\tcase \"week\":\r\n\t\t\t// Truncate instead of rounding\r\n\t\t\t// Don't use Math.floor -- value may be negative\r\n\t\t\tdelta = parseInt(date.difference(date1, date2, \"day\")/7);\r\n\t\t\tbreak;\r\n\t\tcase \"day\":\r\n\t\t\tdelta /= 24;\r\n\t\t\t// fallthrough\r\n\t\tcase \"hour\":\r\n\t\t\tdelta /= 60;\r\n\t\t\t// fallthrough\r\n\t\tcase \"minute\":\r\n\t\t\tdelta /= 60;\r\n\t\t\t// fallthrough\r\n\t\tcase \"second\":\r\n\t\t\tdelta /= 1000;\r\n\t\t\t// fallthrough\r\n\t\tcase \"millisecond\":\r\n\t\t\tdelta *= date2.getTime() - date1.getTime();\r\n\t}\r\n\r\n\t// Round for fractional values and DST leaps\r\n\treturn Math.round(delta); // Number (integer)\r\n};\r\n\r\n// Don't use setObject() because it may overwrite dojo/date/stamp (if that has already been loaded)\r\nhas(\"extend-dojo\") && lang.mixin(lang.getObject(\"dojo.date\", true), date);\r\n\r\nreturn date;\r\n});\r\n\ndefine('dojo/text',[\"./_base/kernel\", \"require\", \"./has\", \"./has!host-browser?./request\"], function(dojo, require, has, request){\r\n\t// module:\r\n\t//\t\tdojo/text\r\n\tif (require.isBrowser===false) { // for build,will be changed with better implementation. by LWF\r\n\t\treturn {\r\n\t        load: function (name, req, onLoad, config) {\r\n\t            onLoad();\r\n\t        }\t\t\t\r\n\t\t};\r\n\t}\r\n\r\n\tvar getText;\r\n\tif(has(\"host-browser\")){\r\n\t\tgetText= function(url, sync, load){\r\n\t\t\trequest(url, {sync:!!sync, headers: { 'X-Requested-With': null } }).then(load);\r\n\t\t};\r\n\t}else{\r\n\t\t// Path for node.js and rhino, to load from local file system.\r\n\t\t// TODO: use node.js native methods rather than depending on a require.getText() method to exist.\r\n\t\tif(require.getText){\r\n\t\t\tgetText= require.getText;\r\n\t\t}else{\r\n\t\t\tconsole.error(\"dojo/text plugin failed to load because loader does not support getText\");\r\n\t\t}\r\n\t}\r\n\r\n\tvar\r\n\t\ttheCache = {},\r\n\r\n\t\tstrip= function(text){\r\n\t\t\t//Strips <?xml ...?> declarations so that external SVG and XML\r\n\t\t\t//documents can be added to a document without worry. Also, if the string\r\n\t\t\t//is an HTML document, only the part inside the body tag is returned.\r\n\t\t\tif(text){\r\n\t\t\t\ttext= text.replace(/^\\s*<\\?xml(\\s)+version=[\\'\\\"](\\d)*.(\\d)*[\\'\\\"](\\s)*\\?>/im, \"\");\r\n\t\t\t\tvar matches= text.match(/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\/body>/im);\r\n\t\t\t\tif(matches){\r\n\t\t\t\t\ttext= matches[1];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\ttext = \"\";\r\n\t\t\t}\r\n\t\t\treturn text;\r\n\t\t},\r\n\r\n\t\tnotFound = {},\r\n\r\n\t\tpending = {};\r\n\r\n\tdojo.cache = function(/*String||Object*/module, /*String*/url, /*String||Object?*/value){\r\n\t\t// summary:\r\n\t\t//\t\tA getter and setter for storing the string content associated with the\r\n\t\t//\t\tmodule and url arguments.\r\n\t\t// description:\r\n\t\t//\t\tIf module is a string that contains slashes, then it is interpretted as a fully\r\n\t\t//\t\tresolved path (typically a result returned by require.toUrl), and url should not be\r\n\t\t//\t\tprovided. This is the preferred signature. If module is a string that does not\r\n\t\t//\t\tcontain slashes, then url must also be provided and module and url are used to\r\n\t\t//\t\tcall `dojo.moduleUrl()` to generate a module URL. This signature is deprecated.\r\n\t\t//\t\tIf value is specified, the cache value for the moduleUrl will be set to\r\n\t\t//\t\tthat value. Otherwise, dojo.cache will fetch the moduleUrl and store it\r\n\t\t//\t\tin its internal cache and return that cached value for the URL. To clear\r\n\t\t//\t\ta cache value pass null for value. Since XMLHttpRequest (XHR) is used to fetch the\r\n\t\t//\t\tthe URL contents, only modules on the same domain of the page can use this capability.\r\n\t\t//\t\tThe build system can inline the cache values though, to allow for xdomain hosting.\r\n\t\t// module: String||Object\r\n\t\t//\t\tIf a String with slashes, a fully resolved path; if a String without slashes, the\r\n\t\t//\t\tmodule name to use for the base part of the URL, similar to module argument\r\n\t\t//\t\tto `dojo.moduleUrl`. If an Object, something that has a .toString() method that\r\n\t\t//\t\tgenerates a valid path for the cache item. For example, a dojo._Url object.\r\n\t\t// url: String\r\n\t\t//\t\tThe rest of the path to append to the path derived from the module argument. If\r\n\t\t//\t\tmodule is an object, then this second argument should be the \"value\" argument instead.\r\n\t\t// value: String||Object?\r\n\t\t//\t\tIf a String, the value to use in the cache for the module/url combination.\r\n\t\t//\t\tIf an Object, it can have two properties: value and sanitize. The value property\r\n\t\t//\t\tshould be the value to use in the cache, and sanitize can be set to true or false,\r\n\t\t//\t\tto indicate if XML declarations should be removed from the value and if the HTML\r\n\t\t//\t\tinside a body tag in the value should be extracted as the real value. The value argument\r\n\t\t//\t\tor the value property on the value argument are usually only used by the build system\r\n\t\t//\t\tas it inlines cache content.\r\n\t\t// example:\r\n\t\t//\t\tTo ask dojo.cache to fetch content and store it in the cache (the dojo[\"cache\"] style\r\n\t\t//\t\tof call is used to avoid an issue with the build system erroneously trying to intern\r\n\t\t//\t\tthis example. To get the build system to intern your dojo.cache calls, use the\r\n\t\t//\t\t\"dojo.cache\" style of call):\r\n\t\t//\t\t| //If template.html contains \"<h1>Hello</h1>\" that will be\r\n\t\t//\t\t| //the value for the text variable.\r\n\t\t//\t\t| //Note: This is pre-AMD, deprecated syntax\r\n\t\t//\t\t| var text = dojo[\"cache\"](\"my.module\", \"template.html\");\r\n\t\t// example:\r\n\t\t//\t\tTo ask dojo.cache to fetch content and store it in the cache, and sanitize the input\r\n\t\t//\t\t (the dojo[\"cache\"] style of call is used to avoid an issue with the build system\r\n\t\t//\t\terroneously trying to intern this example. To get the build system to intern your\r\n\t\t//\t\tdojo.cache calls, use the \"dojo.cache\" style of call):\r\n\t\t//\t\t| //If template.html contains \"<html><body><h1>Hello</h1></body></html>\", the\r\n\t\t//\t\t| //text variable will contain just \"<h1>Hello</h1>\".\r\n\t\t//\t\t| //Note: This is pre-AMD, deprecated syntax\r\n\t\t//\t\t| var text = dojo[\"cache\"](\"my.module\", \"template.html\", {sanitize: true});\r\n\t\t// example:\r\n\t\t//\t\tSame example as previous, but demonstrates how an object can be passed in as\r\n\t\t//\t\tthe first argument, then the value argument can then be the second argument.\r\n\t\t//\t\t| //If template.html contains \"<html><body><h1>Hello</h1></body></html>\", the\r\n\t\t//\t\t| //text variable will contain just \"<h1>Hello</h1>\".\r\n\t\t//\t\t| //Note: This is pre-AMD, deprecated syntax\r\n\t\t//\t\t| var text = dojo[\"cache\"](new dojo._Url(\"my/module/template.html\"), {sanitize: true});\r\n\r\n\t\t//\t * (string string [value]) => (module, url, value)\r\n\t\t//\t * (object [value])        => (module, value), url defaults to \"\"\r\n\t\t//\r\n\t\t//\t * if module is an object, then it must be convertable to a string\r\n\t\t//\t * (module, url) module + (url ? (\"/\" + url) : \"\") must be a legal argument to require.toUrl\r\n\t\t//\t * value may be a string or an object; if an object then may have the properties \"value\" and/or \"sanitize\"\r\n\t\tvar key;\r\n\t\tif(typeof module==\"string\"){\r\n\t\t\tif(/\\//.test(module)){\r\n\t\t\t\t// module is a version 1.7+ resolved path\r\n\t\t\t\tkey = module;\r\n\t\t\t\tvalue = url;\r\n\t\t\t}else{\r\n\t\t\t\t// module is a version 1.6- argument to dojo.moduleUrl\r\n\t\t\t\tkey = require.toUrl(module.replace(/\\./g, \"/\") + (url ? (\"/\" + url) : \"\"));\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tkey = module + \"\";\r\n\t\t\tvalue = url;\r\n\t\t}\r\n\t\tvar\r\n\t\t\tval = (value != undefined && typeof value != \"string\") ? value.value : value,\r\n\t\t\tsanitize = value && value.sanitize;\r\n\r\n\t\tif(typeof val == \"string\"){\r\n\t\t\t//We have a string, set cache value\r\n\t\t\ttheCache[key] = val;\r\n\t\t\treturn sanitize ? strip(val) : val;\r\n\t\t}else if(val === null){\r\n\t\t\t//Remove cached value\r\n\t\t\tdelete theCache[key];\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\t//Allow cache values to be empty strings. If key property does\r\n\t\t\t//not exist, fetch it.\r\n\t\t\tif(!(key in theCache)){\r\n\t\t\t\tgetText(key, true, function(text){\r\n\t\t\t\t\ttheCache[key]= text;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn sanitize ? strip(theCache[key]) : theCache[key];\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\t// summary:\r\n\t\t//\t\tThis module implements the dojo/text! plugin and the dojo.cache API.\r\n\t\t// description:\r\n\t\t//\t\tWe choose to include our own plugin to leverage functionality already contained in dojo\r\n\t\t//\t\tand thereby reduce the size of the plugin compared to various foreign loader implementations.\r\n\t\t//\t\tAlso, this allows foreign AMD loaders to be used without their plugins.\r\n\t\t//\r\n\t\t//\t\tCAUTION: this module is designed to optionally function synchronously to support the dojo v1.x synchronous\r\n\t\t//\t\tloader. This feature is outside the scope of the CommonJS plugins specification.\r\n\r\n\t\t// the dojo/text caches it's own resources because of dojo.cache\r\n\t\tdynamic: true,\r\n\r\n\t\tnormalize: function(id, toAbsMid){\r\n\t\t\t// id is something like (path may be relative):\r\n\t\t\t//\r\n\t\t\t//\t \"path/to/text.html\"\r\n\t\t\t//\t \"path/to/text.html!strip\"\r\n\t\t\tvar parts= id.split(\"!\"),\r\n\t\t\t\turl= parts[0];\r\n\t\t\treturn (/^\\./.test(url) ? toAbsMid(url) : url) + (parts[1] ? \"!\" + parts[1] : \"\");\r\n\t\t},\r\n\r\n\t\tload: function(id, require, load){\r\n\t\t\t// id: String\r\n\t\t\t//\t\tPath to the resource.\r\n\t\t\t// require: Function\r\n\t\t\t//\t\tObject that include the function toUrl with given id returns a valid URL from which to load the text.\r\n\t\t\t// load: Function\r\n\t\t\t//\t\tCallback function which will be called, when the loading finished.\r\n\r\n\t\t\t// id is something like (path is always absolute):\r\n\t\t\t//\r\n\t\t\t//\t \"path/to/text.html\"\r\n\t\t\t//\t \"path/to/text.html!strip\"\r\n\t\t\tvar\r\n\t\t\t\tparts= id.split(\"!\"),\r\n\t\t\t\tstripFlag= parts.length>1,\r\n\t\t\t\tabsMid= parts[0],\r\n\t\t\t\turl = require.toUrl(parts[0]),\r\n\t\t\t\trequireCacheUrl = \"url:\" + url,\r\n\t\t\t\ttext = notFound,\r\n\t\t\t\tfinish = function(text){\r\n\t\t\t\t\tload(stripFlag ? strip(text) : text);\r\n\t\t\t\t};\r\n\t\t\tif(absMid in theCache){\r\n\t\t\t\ttext = theCache[absMid];\r\n\t\t\t}else if(require.cache && requireCacheUrl in require.cache){\r\n\t\t\t\ttext = require.cache[requireCacheUrl];\r\n\t\t\t}else if(url in theCache){\r\n\t\t\t\ttext = theCache[url];\r\n\t\t\t}\r\n\t\t\tif(text===notFound){\r\n\t\t\t\tif(pending[url]){\r\n\t\t\t\t\tpending[url].push(finish);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar pendingList = pending[url] = [finish];\r\n\t\t\t\t\tgetText(url, !require.async, function(text){\r\n\t\t\t\t\t\ttheCache[absMid]= theCache[url]= text;\r\n\t\t\t\t\t\tfor(var i = 0; i<pendingList.length;){\r\n\t\t\t\t\t\t\tpendingList[i++](text);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdelete pending[url];\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfinish(text);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n});\r\n\r\n\ndefine('dojo/cache',[\"./_base/kernel\", \"./text\"], function(dojo){\r\n\t// module:\r\n\t//\t\tdojo/cache\r\n\r\n\t// dojo.cache is defined in dojo/text\r\n\treturn dojo.cache;\r\n});\r\n\ndefine('dojo/_base/fx',[\"./kernel\", \"./config\", /*===== \"./declare\", =====*/ \"./lang\", \"../Evented\", \"./Color\", \"../aspect\", \"../sniff\", \"../dom\", \"../dom-style\"],\r\n\tfunction(dojo, config, /*===== declare, =====*/ lang, Evented, Color, aspect, has, dom, style){\r\n\t// module:\r\n\t//\t\tdojo/_base/fx\r\n\t// notes:\r\n\t//\t\tAnimation loosely package based on Dan Pupius' work, contributed under CLA; see\r\n\t//\t\thttp://pupius.co.uk/js/Toolkit.Drawing.js\r\n\r\n\tvar _mixin = lang.mixin;\r\n\r\n\t// Module export\r\n\tvar basefx = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module defines the base dojo/_base/fx implementation.\r\n\t};\r\n\r\n\tvar _Line = basefx._Line = function(/*int*/ start, /*int*/ end){\r\n\t\t// summary:\r\n\t\t//\t\tObject used to generate values from a start value to an end value\r\n\t\t// start: int\r\n\t\t//\t\tBeginning value for range\r\n\t\t// end: int\r\n\t\t//\t\tEnding value for range\r\n\t\tthis.start = start;\r\n\t\tthis.end = end;\r\n\t};\r\n\r\n\t_Line.prototype.getValue = function(/*float*/ n){\r\n\t\t// summary:\r\n\t\t//\t\tReturns the point on the line\r\n\t\t// n:\r\n\t\t//\t\ta floating point number greater than 0 and less than 1\r\n\t\treturn ((this.end - this.start) * n) + this.start; // Decimal\r\n\t};\r\n\r\n\tvar Animation = basefx.Animation = function(args){\r\n\t\t// summary:\r\n\t\t//\t\tA generic animation class that fires callbacks into its handlers\r\n\t\t//\t\tobject at various states.\r\n\t\t// description:\r\n\t\t//\t\tA generic animation class that fires callbacks into its handlers\r\n\t\t//\t\tobject at various states. Nearly all dojo animation functions\r\n\t\t//\t\treturn an instance of this method, usually without calling the\r\n\t\t//\t\t.play() method beforehand. Therefore, you will likely need to\r\n\t\t//\t\tcall .play() on instances of `Animation` when one is\r\n\t\t//\t\treturned.\r\n\t\t// args: Object\r\n\t\t//\t\tThe 'magic argument', mixing all the properties into this\r\n\t\t//\t\tanimation instance.\r\n\r\n\t\t_mixin(this, args);\r\n\t\tif(lang.isArray(this.curve)){\r\n\t\t\tthis.curve = new _Line(this.curve[0], this.curve[1]);\r\n\t\t}\r\n\r\n\t};\r\n\tAnimation.prototype = new Evented();\r\n\r\n\tlang.extend(Animation, {\r\n\t\t// duration: Integer\r\n\t\t//\t\tThe time in milliseconds the animation will take to run\r\n\t\tduration: 350,\r\n\r\n\t/*=====\r\n\t\t// curve: _Line|Array\r\n\t\t//\t\tA two element array of start and end values, or a `_Line` instance to be\r\n\t\t//\t\tused in the Animation.\r\n\t\tcurve: null,\r\n\r\n\t\t// easing: Function?\r\n\t\t//\t\tA Function to adjust the acceleration (or deceleration) of the progress\r\n\t\t//\t\tacross a _Line\r\n\t\teasing: null,\r\n\t=====*/\r\n\r\n\t\t// repeat: Integer?\r\n\t\t//\t\tThe number of times to loop the animation\r\n\t\trepeat: 0,\r\n\r\n\t\t// rate: Integer?\r\n\t\t//\t\tthe time in milliseconds to wait before advancing to next frame\r\n\t\t//\t\t(used as a fps timer: 1000/rate = fps)\r\n\t\trate: 20 /* 50 fps */,\r\n\r\n\t/*=====\r\n\t\t// delay: Integer?\r\n\t\t//\t\tThe time in milliseconds to wait before starting animation after it\r\n\t\t//\t\thas been .play()'ed\r\n\t\tdelay: null,\r\n\r\n\t\t// beforeBegin: Event?\r\n\t\t//\t\tSynthetic event fired before a Animation begins playing (synchronous)\r\n\t\tbeforeBegin: null,\r\n\r\n\t\t// onBegin: Event?\r\n\t\t//\t\tSynthetic event fired as a Animation begins playing (useful?)\r\n\t\tonBegin: null,\r\n\r\n\t\t// onAnimate: Event?\r\n\t\t//\t\tSynthetic event fired at each interval of the Animation\r\n\t\tonAnimate: null,\r\n\r\n\t\t// onEnd: Event?\r\n\t\t//\t\tSynthetic event fired after the final frame of the Animation\r\n\t\tonEnd: null,\r\n\r\n\t\t// onPlay: Event?\r\n\t\t//\t\tSynthetic event fired any time the Animation is play()'ed\r\n\t\tonPlay: null,\r\n\r\n\t\t// onPause: Event?\r\n\t\t//\t\tSynthetic event fired when the Animation is paused\r\n\t\tonPause: null,\r\n\r\n\t\t// onStop: Event\r\n\t\t//\t\tSynthetic event fires when the Animation is stopped\r\n\t\tonStop: null,\r\n\r\n\t=====*/\r\n\r\n\t\t_percent: 0,\r\n\t\t_startRepeatCount: 0,\r\n\r\n\t\t_getStep: function(){\r\n\t\t\tvar _p = this._percent,\r\n\t\t\t\t_e = this.easing\r\n\t\t\t;\r\n\t\t\treturn _e ? _e(_p) : _p;\r\n\t\t},\r\n\t\t_fire: function(/*Event*/ evt, /*Array?*/ args){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tConvenience function.  Fire event \"evt\" and pass it the\r\n\t\t\t//\t\targuments specified in \"args\".\r\n\t\t\t// description:\r\n\t\t\t//\t\tConvenience function.  Fire event \"evt\" and pass it the\r\n\t\t\t//\t\targuments specified in \"args\".\r\n\t\t\t//\t\tFires the callback in the scope of this Animation\r\n\t\t\t//\t\tinstance.\r\n\t\t\t// evt:\r\n\t\t\t//\t\tThe event to fire.\r\n\t\t\t// args:\r\n\t\t\t//\t\tThe arguments to pass to the event.\r\n\t\t\tvar a = args||[];\r\n\t\t\tif(this[evt]){\r\n\t\t\t\tif(config.debugAtAllCosts){\r\n\t\t\t\t\tthis[evt].apply(this, a);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tthis[evt].apply(this, a);\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t// squelch and log because we shouldn't allow exceptions in\r\n\t\t\t\t\t\t// synthetic event handlers to cause the internal timer to run\r\n\t\t\t\t\t\t// amuck, potentially pegging the CPU. I'm not a fan of this\r\n\t\t\t\t\t\t// squelch, but hopefully logging will make it clear what's\r\n\t\t\t\t\t\t// going on\r\n\t\t\t\t\t\tconsole.error(\"exception in animation handler for:\", evt);\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this; // Animation\r\n\t\t},\r\n\r\n\t\tplay: function(/*int?*/ delay, /*Boolean?*/ gotoStart){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tStart the animation.\r\n\t\t\t// delay:\r\n\t\t\t//\t\tHow many milliseconds to delay before starting.\r\n\t\t\t// gotoStart:\r\n\t\t\t//\t\tIf true, starts the animation from the beginning; otherwise,\r\n\t\t\t//\t\tstarts it from its current position.\r\n\t\t\t// returns: Animation\r\n\t\t\t//\t\tThe instance to allow chaining.\r\n\r\n\t\t\tvar _t = this;\r\n\t\t\tif(_t._delayTimer){ _t._clearTimer(); }\r\n\t\t\tif(gotoStart){\r\n\t\t\t\t_t._stopTimer();\r\n\t\t\t\t_t._active = _t._paused = false;\r\n\t\t\t\t_t._percent = 0;\r\n\t\t\t}else if(_t._active && !_t._paused){\r\n\t\t\t\treturn _t;\r\n\t\t\t}\r\n\r\n\t\t\t_t._fire(\"beforeBegin\", [_t.node]);\r\n\r\n\t\t\tvar de = delay || _t.delay,\r\n\t\t\t\t_p = lang.hitch(_t, \"_play\", gotoStart);\r\n\r\n\t\t\tif(de > 0){\r\n\t\t\t\t_t._delayTimer = setTimeout(_p, de);\r\n\t\t\t\treturn _t;\r\n\t\t\t}\r\n\t\t\t_p();\r\n\t\t\treturn _t;\t// Animation\r\n\t\t},\r\n\r\n\t\t_play: function(gotoStart){\r\n\t\t\tvar _t = this;\r\n\t\t\tif(_t._delayTimer){ _t._clearTimer(); }\r\n\t\t\t_t._startTime = new Date().valueOf();\r\n\t\t\tif(_t._paused){\r\n\t\t\t\t_t._startTime -= _t.duration * _t._percent;\r\n\t\t\t}\r\n\r\n\t\t\t_t._active = true;\r\n\t\t\t_t._paused = false;\r\n\t\t\tvar value = _t.curve.getValue(_t._getStep());\r\n\t\t\tif(!_t._percent){\r\n\t\t\t\tif(!_t._startRepeatCount){\r\n\t\t\t\t\t_t._startRepeatCount = _t.repeat;\r\n\t\t\t\t}\r\n\t\t\t\t_t._fire(\"onBegin\", [value]);\r\n\t\t\t}\r\n\r\n\t\t\t_t._fire(\"onPlay\", [value]);\r\n\r\n\t\t\t_t._cycle();\r\n\t\t\treturn _t; // Animation\r\n\t\t},\r\n\r\n\t\tpause: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tPauses a running animation.\r\n\t\t\tvar _t = this;\r\n\t\t\tif(_t._delayTimer){ _t._clearTimer(); }\r\n\t\t\t_t._stopTimer();\r\n\t\t\tif(!_t._active){ return _t; /*Animation*/ }\r\n\t\t\t_t._paused = true;\r\n\t\t\t_t._fire(\"onPause\", [_t.curve.getValue(_t._getStep())]);\r\n\t\t\treturn _t; // Animation\r\n\t\t},\r\n\r\n\t\tgotoPercent: function(/*Decimal*/ percent, /*Boolean?*/ andPlay){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSets the progress of the animation.\r\n\t\t\t// percent:\r\n\t\t\t//\t\tA percentage in decimal notation (between and including 0.0 and 1.0).\r\n\t\t\t// andPlay:\r\n\t\t\t//\t\tIf true, play the animation after setting the progress.\r\n\t\t\tvar _t = this;\r\n\t\t\t_t._stopTimer();\r\n\t\t\t_t._active = _t._paused = true;\r\n\t\t\t_t._percent = percent;\r\n\t\t\tif(andPlay){ _t.play(); }\r\n\t\t\treturn _t; // Animation\r\n\t\t},\r\n\r\n\t\tstop: function(/*boolean?*/ gotoEnd){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tStops a running animation.\r\n\t\t\t// gotoEnd:\r\n\t\t\t//\t\tIf true, the animation will end.\r\n\t\t\tvar _t = this;\r\n\t\t\tif(_t._delayTimer){ _t._clearTimer(); }\r\n\t\t\tif(!_t._timer){ return _t; /* Animation */ }\r\n\t\t\t_t._stopTimer();\r\n\t\t\tif(gotoEnd){\r\n\t\t\t\t_t._percent = 1;\r\n\t\t\t}\r\n\t\t\t_t._fire(\"onStop\", [_t.curve.getValue(_t._getStep())]);\r\n\t\t\t_t._active = _t._paused = false;\r\n\t\t\treturn _t; // Animation\r\n\t\t},\r\n\r\n\t\tdestroy: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tcleanup the animation\r\n\t\t\tthis.stop();\r\n\t\t},\r\n\r\n\t\tstatus: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a string token representation of the status of\r\n\t\t\t//\t\tthe animation, one of: \"paused\", \"playing\", \"stopped\"\r\n\t\t\tif(this._active){\r\n\t\t\t\treturn this._paused ? \"paused\" : \"playing\"; // String\r\n\t\t\t}\r\n\t\t\treturn \"stopped\"; // String\r\n\t\t},\r\n\r\n\t\t_cycle: function(){\r\n\t\t\tvar _t = this;\r\n\t\t\tif(_t._active){\r\n\t\t\t\tvar curr = new Date().valueOf();\r\n\t\t\t\t// Allow durations of 0 (instant) by setting step to 1 - see #13798\r\n\t\t\t\tvar step = _t.duration === 0 ? 1 : (curr - _t._startTime) / (_t.duration);\r\n\r\n\t\t\t\tif(step >= 1){\r\n\t\t\t\t\tstep = 1;\r\n\t\t\t\t}\r\n\t\t\t\t_t._percent = step;\r\n\r\n\t\t\t\t// Perform easing\r\n\t\t\t\tif(_t.easing){\r\n\t\t\t\t\tstep = _t.easing(step);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_t._fire(\"onAnimate\", [_t.curve.getValue(step)]);\r\n\r\n\t\t\t\tif(_t._percent < 1){\r\n\t\t\t\t\t_t._startTimer();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_t._active = false;\r\n\r\n\t\t\t\t\tif(_t.repeat > 0){\r\n\t\t\t\t\t\t_t.repeat--;\r\n\t\t\t\t\t\t_t.play(null, true);\r\n\t\t\t\t\t}else if(_t.repeat == -1){\r\n\t\t\t\t\t\t_t.play(null, true);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(_t._startRepeatCount){\r\n\t\t\t\t\t\t\t_t.repeat = _t._startRepeatCount;\r\n\t\t\t\t\t\t\t_t._startRepeatCount = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_t._percent = 0;\r\n\t\t\t\t\t_t._fire(\"onEnd\", [_t.node]);\r\n\t\t\t\t\t!_t.repeat && _t._stopTimer();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn _t; // Animation\r\n\t\t},\r\n\r\n\t\t_clearTimer: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tClear the play delay timer\r\n\t\t\tclearTimeout(this._delayTimer);\r\n\t\t\tdelete this._delayTimer;\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// the local timer, stubbed into all Animation instances\r\n\tvar ctr = 0,\r\n\t\ttimer = null,\r\n\t\trunner = {\r\n\t\t\trun: function(){}\r\n\t\t};\r\n\r\n\tlang.extend(Animation, {\r\n\r\n\t\t_startTimer: function(){\r\n\t\t\tif(!this._timer){\r\n\t\t\t\tthis._timer = aspect.after(runner, \"run\", lang.hitch(this, \"_cycle\"), true);\r\n\t\t\t\tctr++;\r\n\t\t\t}\r\n\t\t\tif(!timer){\r\n\t\t\t\ttimer = setInterval(lang.hitch(runner, \"run\"), this.rate);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_stopTimer: function(){\r\n\t\t\tif(this._timer){\r\n\t\t\t\tthis._timer.remove();\r\n\t\t\t\tthis._timer = null;\r\n\t\t\t\tctr--;\r\n\t\t\t}\r\n\t\t\tif(ctr <= 0){\r\n\t\t\t\tclearInterval(timer);\r\n\t\t\t\ttimer = null;\r\n\t\t\t\tctr = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tvar _makeFadeable =\r\n\t\thas(\"ie\") ? function(node){\r\n\t\t\t// only set the zoom if the \"tickle\" value would be the same as the\r\n\t\t\t// default\r\n\t\t\tvar ns = node.style;\r\n\t\t\t// don't set the width to auto if it didn't already cascade that way.\r\n\t\t\t// We don't want to f anyones designs\r\n\t\t\tif(!ns.width.length && style.get(node, \"width\") == \"auto\"){\r\n\t\t\t\tns.width = \"auto\";\r\n\t\t\t}\r\n\t\t} :\r\n\t\tfunction(){};\r\n\r\n\tbasefx._fade = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an animation that will fade the node defined by\r\n\t\t//\t\targs.node from the start to end values passed (args.start\r\n\t\t//\t\targs.end) (end is mandatory, start is optional)\r\n\r\n\t\targs.node = dom.byId(args.node);\r\n\t\tvar fArgs = _mixin({ properties: {} }, args),\r\n\t\t\tprops = (fArgs.properties.opacity = {});\r\n\r\n\t\tprops.start = !(\"start\" in fArgs) ?\r\n\t\t\tfunction(){\r\n\t\t\t\treturn +style.get(fArgs.node, \"opacity\")||0;\r\n\t\t\t} : fArgs.start;\r\n\t\tprops.end = fArgs.end;\r\n\r\n\t\tvar anim = basefx.animateProperty(fArgs);\r\n\t\taspect.after(anim, \"beforeBegin\", lang.partial(_makeFadeable, fArgs.node), true);\r\n\r\n\t\treturn anim; // Animation\r\n\t};\r\n\r\n\t/*=====\r\n\tvar __FadeArgs = declare(null, {\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tThe node referenced in the animation\r\n\t\t// duration: Integer?\r\n\t\t//\t\tDuration of the animation in milliseconds.\r\n\t\t// easing: Function?\r\n\t\t//\t\tAn easing function.\r\n\t});\r\n\t=====*/\r\n\r\n\tbasefx.fadeIn = function(/*__FadeArgs*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an animation that will fade node defined in 'args' from\r\n\t\t//\t\tits current opacity to fully opaque.\r\n\t\treturn basefx._fade(_mixin({ end: 1 }, args)); // Animation\r\n\t};\r\n\r\n\tbasefx.fadeOut = function(/*__FadeArgs*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an animation that will fade node defined in 'args'\r\n\t\t//\t\tfrom its current opacity to fully transparent.\r\n\t\treturn basefx._fade(_mixin({ end: 0 }, args)); // Animation\r\n\t};\r\n\r\n\tbasefx._defaultEasing = function(/*Decimal?*/ n){\r\n\t\t// summary:\r\n\t\t//\t\tThe default easing function for Animation(s)\r\n\t\treturn 0.5 + ((Math.sin((n + 1.5) * Math.PI)) / 2);\t// Decimal\r\n\t};\r\n\r\n\tvar PropLine = function(properties){\r\n\t\t// PropLine is an internal class which is used to model the values of\r\n\t\t// an a group of CSS properties across an animation lifecycle. In\r\n\t\t// particular, the \"getValue\" function handles getting interpolated\r\n\t\t// values between start and end for a particular CSS value.\r\n\t\tthis._properties = properties;\r\n\t\tfor(var p in properties){\r\n\t\t\tvar prop = properties[p];\r\n\t\t\tif(prop.start instanceof Color){\r\n\t\t\t\t// create a reusable temp color object to keep intermediate results\r\n\t\t\t\tprop.tempColor = new Color();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tPropLine.prototype.getValue = function(r){\r\n\t\tvar ret = {};\r\n\t\tfor(var p in this._properties){\r\n\t\t\tvar prop = this._properties[p],\r\n\t\t\t\tstart = prop.start;\r\n\t\t\tif(start instanceof Color){\r\n\t\t\t\tret[p] = Color.blendColors(start, prop.end, r, prop.tempColor).toCss();\r\n\t\t\t}else if(!lang.isArray(start)){\r\n\t\t\t\tret[p] = ((prop.end - start) * r) + start + (p != \"opacity\" ? prop.units || \"px\" : 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n\r\n\t/*=====\r\n\tvar __AnimArgs = declare(__FadeArgs, {\r\n\t\t// properties: Object?\r\n\t\t//\t\tA hash map of style properties to Objects describing the transition,\r\n\t\t//\t\tsuch as the properties of _Line with an additional 'units' property\r\n\t\tproperties: {}\r\n\r\n\t\t//TODOC: add event callbacks\r\n\t});\r\n\t=====*/\r\n\r\n\tbasefx.animateProperty = function(/*__AnimArgs*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an animation that will transition the properties of\r\n\t\t//\t\tnode defined in `args` depending how they are defined in\r\n\t\t//\t\t`args.properties`\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tFoundation of most `dojo/_base/fx`\r\n\t\t//\t\tanimations. It takes an object of \"properties\" corresponding to\r\n\t\t//\t\tstyle properties, and animates them in parallel over a set\r\n\t\t//\t\tduration.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tA simple animation that changes the width of the specified node.\r\n\t\t//\t|\tbasefx.animateProperty({\r\n\t\t//\t|\t\tnode: \"nodeId\",\r\n\t\t//\t|\t\tproperties: { width: 400 },\r\n\t\t//\t|\t}).play();\r\n\t\t//\t\tDojo figures out the start value for the width and converts the\r\n\t\t//\t\tinteger specified for the width to the more expressive but\r\n\t\t//\t\tverbose form `{ width: { end: '400', units: 'px' } }` which you\r\n\t\t//\t\tcan also specify directly. Defaults to 'px' if omitted.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tAnimate width, height, and padding over 2 seconds... the\r\n\t\t//\t\tpedantic way:\r\n\t\t//\t|\tbasefx.animateProperty({ node: node, duration:2000,\r\n\t\t//\t|\t\tproperties: {\r\n\t\t//\t|\t\t\twidth: { start: '200', end: '400', units:\"px\" },\r\n\t\t//\t|\t\t\theight: { start:'200', end: '400', units:\"px\" },\r\n\t\t//\t|\t\t\tpaddingTop: { start:'5', end:'50', units:\"px\" }\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t}).play();\r\n\t\t//\t\tNote 'paddingTop' is used over 'padding-top'. Multi-name CSS properties\r\n\t\t//\t\tare written using \"mixed case\", as the hyphen is illegal as an object key.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tPlug in a different easing function and register a callback for\r\n\t\t//\t\twhen the animation ends. Easing functions accept values between\r\n\t\t//\t\tzero and one and return a value on that basis. In this case, an\r\n\t\t//\t\texponential-in curve.\r\n\t\t//\t|\tbasefx.animateProperty({\r\n\t\t//\t|\t\tnode: \"nodeId\",\r\n\t\t//\t|\t\t// dojo figures out the start value\r\n\t\t//\t|\t\tproperties: { width: { end: 400 } },\r\n\t\t//\t|\t\teasing: function(n){\r\n\t\t//\t|\t\t\treturn (n==0) ? 0 : Math.pow(2, 10 * (n - 1));\r\n\t\t//\t|\t\t},\r\n\t\t//\t|\t\tonEnd: function(node){\r\n\t\t//\t|\t\t\t// called when the animation finishes. The animation\r\n\t\t//\t|\t\t\t// target is passed to this function\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t}).play(500); // delay playing half a second\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tLike all `Animation`s, animateProperty returns a handle to the\r\n\t\t//\t\tAnimation instance, which fires the events common to Dojo FX. Use `aspect.after`\r\n\t\t//\t\tto access these events outside of the Animation definition:\r\n\t\t//\t|\tvar anim = basefx.animateProperty({\r\n\t\t//\t|\t\tnode:\"someId\",\r\n\t\t//\t|\t\tproperties:{\r\n\t\t//\t|\t\t\twidth:400, height:500\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\t\t//\t|\taspect.after(anim, \"onEnd\", function(){\r\n\t\t//\t|\t\tconsole.log(\"animation ended\");\r\n\t\t//\t|\t}, true);\r\n\t\t//\t|\t// play the animation now:\r\n\t\t//\t|\tanim.play();\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tEach property can be a function whose return value is substituted along.\r\n\t\t//\t\tAdditionally, each measurement (eg: start, end) can be a function. The node\r\n\t\t//\t\treference is passed directly to callbacks.\r\n\t\t//\t|\tbasefx.animateProperty({\r\n\t\t//\t|\t\tnode:\"mine\",\r\n\t\t//\t|\t\tproperties:{\r\n\t\t//\t|\t\t\theight:function(node){\r\n\t\t//\t|\t\t\t\t// shrink this node by 50%\r\n\t\t//\t|\t\t\t\treturn domGeom.position(node).h / 2\r\n\t\t//\t|\t\t\t},\r\n\t\t//\t|\t\t\twidth:{\r\n\t\t//\t|\t\t\t\tstart:function(node){ return 100; },\r\n\t\t//\t|\t\t\t\tend:function(node){ return 200; }\r\n\t\t//\t|\t\t\t}\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t}).play();\r\n\t\t//\r\n\r\n\t\tvar n = args.node = dom.byId(args.node);\r\n\t\tif(!args.easing){ args.easing = dojo._defaultEasing; }\r\n\r\n\t\tvar anim = new Animation(args);\r\n\t\taspect.after(anim, \"beforeBegin\", lang.hitch(anim, function(){\r\n\t\t\tvar pm = {};\r\n\t\t\tfor(var p in this.properties){\r\n\t\t\t\t// Make shallow copy of properties into pm because we overwrite\r\n\t\t\t\t// some values below. In particular if start/end are functions\r\n\t\t\t\t// we don't want to overwrite them or the functions won't be\r\n\t\t\t\t// called if the animation is reused.\r\n\t\t\t\tif(p == \"width\" || p == \"height\"){\r\n\t\t\t\t\tthis.node.display = \"block\";\r\n\t\t\t\t}\r\n\t\t\t\tvar prop = this.properties[p];\r\n\t\t\t\tif(lang.isFunction(prop)){\r\n\t\t\t\t\tprop = prop(n);\r\n\t\t\t\t}\r\n\t\t\t\tprop = pm[p] = _mixin({}, (lang.isObject(prop) ? prop: { end: prop }));\r\n\r\n\t\t\t\tif(lang.isFunction(prop.start)){\r\n\t\t\t\t\tprop.start = prop.start(n);\r\n\t\t\t\t}\r\n\t\t\t\tif(lang.isFunction(prop.end)){\r\n\t\t\t\t\tprop.end = prop.end(n);\r\n\t\t\t\t}\r\n\t\t\t\tvar isColor = (p.toLowerCase().indexOf(\"color\") >= 0);\r\n\t\t\t\tfunction getStyle(node, p){\r\n\t\t\t\t\t// domStyle.get(node, \"height\") can return \"auto\" or \"\" on IE; this is more reliable:\r\n\t\t\t\t\tvar v = { height: node.offsetHeight, width: node.offsetWidth }[p];\r\n\t\t\t\t\tif(v !== undefined){ return v; }\r\n\t\t\t\t\tv = style.get(node, p);\r\n\t\t\t\t\treturn (p == \"opacity\") ? +v : (isColor ? v : parseFloat(v));\r\n\t\t\t\t}\r\n\t\t\t\tif(!(\"end\" in prop)){\r\n\t\t\t\t\tprop.end = getStyle(n, p);\r\n\t\t\t\t}else if(!(\"start\" in prop)){\r\n\t\t\t\t\tprop.start = getStyle(n, p);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(isColor){\r\n\t\t\t\t\tprop.start = new Color(prop.start);\r\n\t\t\t\t\tprop.end = new Color(prop.end);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tprop.start = (p == \"opacity\") ? +prop.start : parseFloat(prop.start);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.curve = new PropLine(pm);\r\n\t\t}), true);\r\n\t\taspect.after(anim, \"onAnimate\", lang.hitch(style, \"set\", anim.node), true);\r\n\t\treturn anim; // Animation\r\n\t};\r\n\r\n\tbasefx.anim = function(\t/*DOMNode|String*/\tnode,\r\n\t\t\t\t\t\t\t/*Object*/\t\t\tproperties,\r\n\t\t\t\t\t\t\t/*Integer?*/\t\tduration,\r\n\t\t\t\t\t\t\t/*Function?*/\t\teasing,\r\n\t\t\t\t\t\t\t/*Function?*/\t\tonEnd,\r\n\t\t\t\t\t\t\t/*Integer?*/\t\tdelay){\r\n\t\t// summary:\r\n\t\t//\t\tA simpler interface to `animateProperty()`, also returns\r\n\t\t//\t\tan instance of `Animation` but begins the animation\r\n\t\t//\t\timmediately, unlike nearly every other Dojo animation API.\r\n\t\t// description:\r\n\t\t//\t\tSimpler (but somewhat less powerful) version\r\n\t\t//\t\tof `animateProperty`.  It uses defaults for many basic properties\r\n\t\t//\t\tand allows for positional parameters to be used in place of the\r\n\t\t//\t\tpacked \"property bag\" which is used for other Dojo animation\r\n\t\t//\t\tmethods.\r\n\t\t//\r\n\t\t//\t\tThe `Animation` object returned will be already playing, so\r\n\t\t//\t\tcalling play() on it again is (usually) a no-op.\r\n\t\t// node:\r\n\t\t//\t\ta DOM node or the id of a node to animate CSS properties on\r\n\t\t// duration:\r\n\t\t//\t\tThe number of milliseconds over which the animation\r\n\t\t//\t\tshould run. Defaults to the global animation default duration\r\n\t\t//\t\t(350ms).\r\n\t\t// easing:\r\n\t\t//\t\tAn easing function over which to calculate acceleration\r\n\t\t//\t\tand deceleration of the animation through its duration.\r\n\t\t//\t\tA default easing algorithm is provided, but you may\r\n\t\t//\t\tplug in any you wish. A large selection of easing algorithms\r\n\t\t//\t\tare available in `dojo/fx/easing`.\r\n\t\t// onEnd:\r\n\t\t//\t\tA function to be called when the animation finishes\r\n\t\t//\t\trunning.\r\n\t\t// delay:\r\n\t\t//\t\tThe number of milliseconds to delay beginning the\r\n\t\t//\t\tanimation by. The default is 0.\r\n\t\t// example:\r\n\t\t//\t\tFade out a node\r\n\t\t//\t|\tbasefx.anim(\"id\", { opacity: 0 });\r\n\t\t// example:\r\n\t\t//\t\tFade out a node over a full second\r\n\t\t//\t|\tbasefx.anim(\"id\", { opacity: 0 }, 1000);\r\n\t\treturn basefx.animateProperty({ // Animation\r\n\t\t\tnode: node,\r\n\t\t\tduration: duration || Animation.prototype.duration,\r\n\t\t\tproperties: properties,\r\n\t\t\teasing: easing,\r\n\t\t\tonEnd: onEnd\r\n\t\t}).play(delay || 0);\r\n\t};\r\n\r\n\r\n\tif(has(\"extend-dojo\")){\r\n\t\t_mixin(dojo, basefx);\r\n\t\t// Alias to drop come 2.0:\r\n\t\tdojo._Animation = Animation;\r\n\t}\r\n\r\n\treturn basefx;\r\n});\r\n\ndefine('dojo/fx',[\r\n\t\"./_base/lang\",\r\n\t\"./Evented\",\r\n\t\"./_base/kernel\",\r\n\t\"./_base/array\",\r\n\t\"./aspect\",\r\n\t\"./_base/fx\",\r\n\t\"./dom\",\r\n\t\"./dom-style\",\r\n\t\"./dom-geometry\",\r\n\t\"./ready\",\r\n\t\"require\" // for context sensitive loading of Toggler\r\n], function(lang, Evented, dojo, arrayUtil, aspect, baseFx, dom, domStyle, geom, ready, require){\r\n\r\n\t// module:\r\n\t//\t\tdojo/fx\r\n\t\r\n\t// For back-compat, remove in 2.0.\r\n\tif(!dojo.isAsync){\r\n\t\tready(0, function(){\r\n\t\t\tvar requires = [\"./fx/Toggler\"];\r\n\t\t\trequire(requires);\t// use indirection so modules not rolled into a build\r\n\t\t});\r\n\t}\r\n\r\n\tvar coreFx = dojo.fx = {\r\n\t\t// summary:\r\n\t\t//\t\tEffects library on top of Base animations\r\n\t};\r\n\r\n\tvar _baseObj = {\r\n\t\t\t_fire: function(evt, args){\r\n\t\t\t\tif(this[evt]){\r\n\t\t\t\t\tthis[evt].apply(this, args||[]);\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\tvar _chain = function(animations){\r\n\t\tthis._index = -1;\r\n\t\tthis._animations = animations||[];\r\n\t\tthis._current = this._onAnimateCtx = this._onEndCtx = null;\r\n\r\n\t\tthis.duration = 0;\r\n\t\tarrayUtil.forEach(this._animations, function(a){\r\n\t\t\tthis.duration += a.duration;\r\n\t\t\tif(a.delay){ this.duration += a.delay; }\r\n\t\t}, this);\r\n\t};\r\n\t_chain.prototype = new Evented();\r\n\tlang.extend(_chain, {\r\n\t\t_onAnimate: function(){\r\n\t\t\tthis._fire(\"onAnimate\", arguments);\r\n\t\t},\r\n\t\t_onEnd: function(){\r\n\t\t\tthis._onAnimateCtx.remove();\r\n\t\t\tthis._onEndCtx.remove();\r\n\t\t\tthis._onAnimateCtx = this._onEndCtx = null;\r\n\t\t\tif(this._index + 1 == this._animations.length){\r\n\t\t\t\tthis._fire(\"onEnd\");\r\n\t\t\t}else{\r\n\t\t\t\t// switch animations\r\n\t\t\t\tthis._current = this._animations[++this._index];\r\n\t\t\t\tthis._onAnimateCtx = aspect.after(this._current, \"onAnimate\", lang.hitch(this, \"_onAnimate\"), true);\r\n\t\t\t\tthis._onEndCtx = aspect.after(this._current, \"onEnd\", lang.hitch(this, \"_onEnd\"), true);\r\n\t\t\t\tthis._current.play(0, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tplay: function(/*int?*/ delay, /*Boolean?*/ gotoStart){\r\n\t\t\tif(!this._current){ this._current = this._animations[this._index = 0]; }\r\n\t\t\tif(!gotoStart && this._current.status() == \"playing\"){ return this; }\r\n\t\t\tvar beforeBegin = aspect.after(this._current, \"beforeBegin\", lang.hitch(this, function(){\r\n\t\t\t\t\tthis._fire(\"beforeBegin\");\r\n\t\t\t\t}), true),\r\n\t\t\t\tonBegin = aspect.after(this._current, \"onBegin\", lang.hitch(this, function(arg){\r\n\t\t\t\t\tthis._fire(\"onBegin\", arguments);\r\n\t\t\t\t}), true),\r\n\t\t\t\tonPlay = aspect.after(this._current, \"onPlay\", lang.hitch(this, function(arg){\r\n\t\t\t\t\tthis._fire(\"onPlay\", arguments);\r\n\t\t\t\t\tbeforeBegin.remove();\r\n\t\t\t\t\tonBegin.remove();\r\n\t\t\t\t\tonPlay.remove();\r\n\t\t\t\t}));\r\n\t\t\tif(this._onAnimateCtx){\r\n\t\t\t\tthis._onAnimateCtx.remove();\r\n\t\t\t}\r\n\t\t\tthis._onAnimateCtx = aspect.after(this._current, \"onAnimate\", lang.hitch(this, \"_onAnimate\"), true);\r\n\t\t\tif(this._onEndCtx){\r\n\t\t\t\tthis._onEndCtx.remove();\r\n\t\t\t}\r\n\t\t\tthis._onEndCtx = aspect.after(this._current, \"onEnd\", lang.hitch(this, \"_onEnd\"), true);\r\n\t\t\tthis._current.play.apply(this._current, arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tpause: function(){\r\n\t\t\tif(this._current){\r\n\t\t\t\tvar e = aspect.after(this._current, \"onPause\", lang.hitch(this, function(arg){\r\n\t\t\t\t\t\tthis._fire(\"onPause\", arguments);\r\n\t\t\t\t\t\te.remove();\r\n\t\t\t\t\t}), true);\r\n\t\t\t\tthis._current.pause();\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tgotoPercent: function(/*Decimal*/percent, /*Boolean?*/ andPlay){\r\n\t\t\tthis.pause();\r\n\t\t\tvar offset = this.duration * percent;\r\n\t\t\tthis._current = null;\r\n\r\n\t\t\tarrayUtil.some(this._animations, function(a, index){\r\n\t\t\t\tif(offset <= a.duration){\r\n\t\t\t\t\tthis._current = a;\r\n\t\t\t\t\tthis._index = index;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\toffset -= a.duration;\r\n\t\t\t\treturn false;\r\n\t\t\t}, this);\r\n\t\t\tif(this._current){\r\n\t\t\t\tthis._current.gotoPercent(offset / this._current.duration);\r\n\t\t\t}\r\n\t\t\tif (andPlay) { this.play(); }\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstop: function(/*boolean?*/ gotoEnd){\r\n\t\t\tif(this._current){\r\n\t\t\t\tif(gotoEnd){\r\n\t\t\t\t\tfor(; this._index + 1 < this._animations.length; ++this._index){\r\n\t\t\t\t\t\tthis._animations[this._index].stop(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._current = this._animations[this._index];\r\n\t\t\t\t}\r\n\t\t\t\tvar e = aspect.after(this._current, \"onStop\", lang.hitch(this, function(arg){\r\n\t\t\t\t\t\tthis._fire(\"onStop\", arguments);\r\n\t\t\t\t\t\te.remove();\r\n\t\t\t\t\t}), true);\r\n\t\t\t\tthis._current.stop();\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstatus: function(){\r\n\t\t\treturn this._current ? this._current.status() : \"stopped\";\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\t\t\tthis.stop();\r\n\t\t\tif(this._onAnimateCtx){ this._onAnimateCtx.remove(); }\r\n\t\t\tif(this._onEndCtx){ this._onEndCtx.remove(); }\r\n\t\t}\r\n\t});\r\n\tlang.extend(_chain, _baseObj);\r\n\r\n\tcoreFx.chain = function(/*dojo/_base/fx.Animation[]*/ animations){\r\n\t\t// summary:\r\n\t\t//\t\tChain a list of `dojo/_base/fx.Animation`s to run in sequence\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tReturn a `dojo/_base/fx.Animation` which will play all passed\r\n\t\t//\t\t`dojo/_base/fx.Animation` instances in sequence, firing its own\r\n\t\t//\t\tsynthesized events simulating a single animation. (eg:\r\n\t\t//\t\tonEnd of this animation means the end of the chain,\r\n\t\t//\t\tnot the individual animations within)\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tOnce `node` is faded out, fade in `otherNode`\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tfx.chain([\r\n\t\t//\t|\t\t\tfx.fadeIn({ node:node }),\r\n\t\t//\t|\t\t\tfx.fadeOut({ node:otherNode })\r\n\t\t//\t|\t\t]).play();\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\treturn new _chain(animations); // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\tvar _combine = function(animations){\r\n\t\tthis._animations = animations||[];\r\n\t\tthis._connects = [];\r\n\t\tthis._finished = 0;\r\n\r\n\t\tthis.duration = 0;\r\n\t\tarrayUtil.forEach(animations, function(a){\r\n\t\t\tvar duration = a.duration;\r\n\t\t\tif(a.delay){ duration += a.delay; }\r\n\t\t\tif(this.duration < duration){ this.duration = duration; }\r\n\t\t\tthis._connects.push(aspect.after(a, \"onEnd\", lang.hitch(this, \"_onEnd\"), true));\r\n\t\t}, this);\r\n\r\n\t\tthis._pseudoAnimation = new baseFx.Animation({curve: [0, 1], duration: this.duration});\r\n\t\tvar self = this;\r\n\t\tarrayUtil.forEach([\"beforeBegin\", \"onBegin\", \"onPlay\", \"onAnimate\", \"onPause\", \"onStop\", \"onEnd\"],\r\n\t\t\tfunction(evt){\r\n\t\t\t\tself._connects.push(aspect.after(self._pseudoAnimation, evt,\r\n\t\t\t\t\tfunction(){ self._fire(evt, arguments); },\r\n\t\t\t\ttrue));\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\tlang.extend(_combine, {\r\n\t\t_doAction: function(action, args){\r\n\t\t\tarrayUtil.forEach(this._animations, function(a){\r\n\t\t\t\ta[action].apply(a, args);\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t_onEnd: function(){\r\n\t\t\tif(++this._finished > this._animations.length){\r\n\t\t\t\tthis._fire(\"onEnd\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t_call: function(action, args){\r\n\t\t\tvar t = this._pseudoAnimation;\r\n\t\t\tt[action].apply(t, args);\r\n\t\t},\r\n\t\tplay: function(/*int?*/ delay, /*Boolean?*/ gotoStart){\r\n\t\t\tthis._finished = 0;\r\n\t\t\tthis._doAction(\"play\", arguments);\r\n\t\t\tthis._call(\"play\", arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tpause: function(){\r\n\t\t\tthis._doAction(\"pause\", arguments);\r\n\t\t\tthis._call(\"pause\", arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tgotoPercent: function(/*Decimal*/percent, /*Boolean?*/ andPlay){\r\n\t\t\tvar ms = this.duration * percent;\r\n\t\t\tarrayUtil.forEach(this._animations, function(a){\r\n\t\t\t\ta.gotoPercent(a.duration < ms ? 1 : (ms / a.duration), andPlay);\r\n\t\t\t});\r\n\t\t\tthis._call(\"gotoPercent\", arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstop: function(/*boolean?*/ gotoEnd){\r\n\t\t\tthis._doAction(\"stop\", arguments);\r\n\t\t\tthis._call(\"stop\", arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstatus: function(){\r\n\t\t\treturn this._pseudoAnimation.status();\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\t\t\tthis.stop();\r\n\t\t\tarrayUtil.forEach(this._connects, function(handle){\r\n\t\t\t\thandle.remove();\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\tlang.extend(_combine, _baseObj);\r\n\r\n\tcoreFx.combine = function(/*dojo/_base/fx.Animation[]*/ animations){\r\n\t\t// summary:\r\n\t\t//\t\tCombine a list of `dojo/_base/fx.Animation`s to run in parallel\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tCombine an array of `dojo/_base/fx.Animation`s to run in parallel,\r\n\t\t//\t\tproviding a new `dojo/_base/fx.Animation` instance encompasing each\r\n\t\t//\t\tanimation, firing standard animation events.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tFade out `node` while fading in `otherNode` simultaneously\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tfx.combine([\r\n\t\t//\t|\t\t\tfx.fadeIn({ node:node }),\r\n\t\t//\t|\t\t\tfx.fadeOut({ node:otherNode })\r\n\t\t//\t|\t\t]).play();\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tWhen the longest animation ends, execute a function:\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tvar anim = fx.combine([\r\n\t\t//\t|\t\t\tfx.fadeIn({ node: n, duration:700 }),\r\n\t\t//\t|\t\t\tfx.fadeOut({ node: otherNode, duration: 300 })\r\n\t\t//\t|\t\t]);\r\n\t\t//\t|\t\taspect.after(anim, \"onEnd\", function(){\r\n\t\t//\t|\t\t\t// overall animation is done.\r\n\t\t//\t|\t\t}, true);\r\n\t\t//\t|\t\tanim.play(); // play the animation\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\treturn new _combine(animations); // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\tcoreFx.wipeIn = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tExpand a node to it's natural height.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tReturns an animation that will expand the\r\n\t\t//\t\tnode defined in 'args' object from it's current height to\r\n\t\t//\t\tit's natural height (with no scrollbar).\r\n\t\t//\t\tNode must have no margin/border/padding.\r\n\t\t//\r\n\t\t// args: Object\r\n\t\t//\t\tA hash-map of standard `dojo/_base/fx.Animation` constructor properties\r\n\t\t//\t\t(such as easing: node: duration: and so on)\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tfx.wipeIn({\r\n\t\t//\t|\t\t\tnode:\"someId\"\r\n\t\t//\t|\t\t}).play()\r\n\t\t//\t|\t});\r\n\r\n\t\tvar node = args.node = dom.byId(args.node), s = node.style, o;\r\n\r\n\t\tvar anim = baseFx.animateProperty(lang.mixin({\r\n\t\t\tproperties: {\r\n\t\t\t\theight: {\r\n\t\t\t\t\t// wrapped in functions so we wait till the last second to query (in case value has changed)\r\n\t\t\t\t\tstart: function(){\r\n\t\t\t\t\t\t// start at current [computed] height, but use 1px rather than 0\r\n\t\t\t\t\t\t// because 0 causes IE to display the whole panel\r\n\t\t\t\t\t\to = s.overflow;\r\n\t\t\t\t\t\ts.overflow = \"hidden\";\r\n\t\t\t\t\t\tif(s.visibility == \"hidden\" || s.display == \"none\"){\r\n\t\t\t\t\t\t\ts.height = \"1px\";\r\n\t\t\t\t\t\t\ts.display = \"\";\r\n\t\t\t\t\t\t\ts.visibility = \"\";\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar height = domStyle.get(node, \"height\");\r\n\t\t\t\t\t\t\treturn Math.max(height, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tend: function(){\r\n\t\t\t\t\t\treturn node.scrollHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, args));\r\n\r\n\t\tvar fini = function(){\r\n\t\t\ts.height = \"auto\";\r\n\t\t\ts.overflow = o;\r\n\t\t};\r\n\t\taspect.after(anim, \"onStop\", fini, true);\r\n\t\taspect.after(anim, \"onEnd\", fini, true);\r\n\r\n\t\treturn anim; // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\tcoreFx.wipeOut = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tShrink a node to nothing and hide it.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tReturns an animation that will shrink node defined in \"args\"\r\n\t\t//\t\tfrom it's current height to 1px, and then hide it.\r\n\t\t//\r\n\t\t// args: Object\r\n\t\t//\t\tA hash-map of standard `dojo/_base/fx.Animation` constructor properties\r\n\t\t//\t\t(such as easing: node: duration: and so on)\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tfx.wipeOut({ node:\"someId\" }).play()\r\n\t\t//\t|\t});\r\n\r\n\t\tvar node = args.node = dom.byId(args.node), s = node.style, o;\r\n\r\n\t\tvar anim = baseFx.animateProperty(lang.mixin({\r\n\t\t\tproperties: {\r\n\t\t\t\theight: {\r\n\t\t\t\t\tend: 1 // 0 causes IE to display the whole panel\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, args));\r\n\r\n\t\taspect.after(anim, \"beforeBegin\", function(){\r\n\t\t\to = s.overflow;\r\n\t\t\ts.overflow = \"hidden\";\r\n\t\t\ts.display = \"\";\r\n\t\t}, true);\r\n\t\tvar fini = function(){\r\n\t\t\ts.overflow = o;\r\n\t\t\ts.height = \"auto\";\r\n\t\t\ts.display = \"none\";\r\n\t\t};\r\n\t\taspect.after(anim, \"onStop\", fini, true);\r\n\t\taspect.after(anim, \"onEnd\", fini, true);\r\n\r\n\t\treturn anim; // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\tcoreFx.slideTo = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tSlide a node to a new top/left position\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tReturns an animation that will slide \"node\"\r\n\t\t//\t\tdefined in args Object from its current position to\r\n\t\t//\t\tthe position defined by (args.left, args.top).\r\n\t\t//\r\n\t\t// args: Object\r\n\t\t//\t\tA hash-map of standard `dojo/_base/fx.Animation` constructor properties\r\n\t\t//\t\t(such as easing: node: duration: and so on). Special args members\r\n\t\t//\t\tare `top` and `left`, which indicate the new position to slide to.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\t.slideTo({ node: node, left:\"40\", top:\"50\", units:\"px\" }).play()\r\n\r\n\t\tvar node = args.node = dom.byId(args.node),\r\n\t\t\ttop = null, left = null;\r\n\r\n\t\tvar init = (function(n){\r\n\t\t\treturn function(){\r\n\t\t\t\tvar cs = domStyle.getComputedStyle(n);\r\n\t\t\t\tvar pos = cs.position;\r\n\t\t\t\ttop = (pos == 'absolute' ? n.offsetTop : parseInt(cs.top) || 0);\r\n\t\t\t\tleft = (pos == 'absolute' ? n.offsetLeft : parseInt(cs.left) || 0);\r\n\t\t\t\tif(pos != 'absolute' && pos != 'relative'){\r\n\t\t\t\t\tvar ret = geom.position(n, true);\r\n\t\t\t\t\ttop = ret.y;\r\n\t\t\t\t\tleft = ret.x;\r\n\t\t\t\t\tn.style.position=\"absolute\";\r\n\t\t\t\t\tn.style.top=top+\"px\";\r\n\t\t\t\t\tn.style.left=left+\"px\";\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t})(node);\r\n\t\tinit();\r\n\r\n\t\tvar anim = baseFx.animateProperty(lang.mixin({\r\n\t\t\tproperties: {\r\n\t\t\t\ttop: args.top || 0,\r\n\t\t\t\tleft: args.left || 0\r\n\t\t\t}\r\n\t\t}, args));\r\n\t\taspect.after(anim, \"beforeBegin\", init, true);\r\n\r\n\t\treturn anim; // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\treturn coreFx;\r\n});\r\n\ndefine('dojo/dom-class',[\"./_base/lang\", \"./_base/array\", \"./dom\"], function(lang, array, dom){\r\n\t// module:\r\n\t//\t\tdojo/dom-class\r\n\r\n\tvar className = \"className\";\r\n\r\n\t/* Part I of classList-based implementation is preserved here for posterity\r\n\tvar classList = \"classList\";\r\n\thas.add(\"dom-classList\", function(){\r\n\t\treturn classList in document.createElement(\"p\");\r\n\t});\r\n\t*/\r\n\r\n\t// =============================\r\n\t// (CSS) Class Functions\r\n\t// =============================\r\n\r\n\tvar cls, // exports object\r\n\t\tspaces = /\\s+/, a1 = [\"\"];\r\n\r\n\tfunction str2array(s){\r\n\t\tif(typeof s == \"string\" || s instanceof String){\r\n\t\t\tif(s && !spaces.test(s)){\r\n\t\t\t\ta1[0] = s;\r\n\t\t\t\treturn a1;\r\n\t\t\t}\r\n\t\t\tvar a = s.split(spaces);\r\n\t\t\tif(a.length && !a[0]){\r\n\t\t\t\ta.shift();\r\n\t\t\t}\r\n\t\t\tif(a.length && !a[a.length - 1]){\r\n\t\t\t\ta.pop();\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t}\r\n\t\t// assumed to be an array\r\n\t\tif(!s){\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\treturn array.filter(s, function(x){ return x; });\r\n\t}\r\n\r\n\t/* Part II of classList-based implementation is preserved here for posterity\r\n\tif(has(\"dom-classList\")){\r\n\t\t// new classList version\r\n\t\tcls = {\r\n\t\t\tcontains: function containsClass(node, classStr){\r\n\t\t\t\tvar clslst = classStr && dom.byId(node)[classList];\r\n\t\t\t\treturn clslst && clslst.contains(classStr); // Boolean\r\n\t\t\t},\r\n\r\n\t\t\tadd: function addClass(node, classStr){\r\n\t\t\t\tnode = dom.byId(node);\r\n\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\tfor(var i = 0, len = classStr.length; i < len; ++i){\r\n\t\t\t\t\tnode[classList].add(classStr[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tremove: function removeClass(node, classStr){\r\n\t\t\t\tnode = dom.byId(node);\r\n\t\t\t\tif(classStr === undefined){\r\n\t\t\t\t\tnode[className] = \"\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\t\tfor(var i = 0, len = classStr.length; i < len; ++i){\r\n\t\t\t\t\t\tnode[classList].remove(classStr[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\treplace: function replaceClass(node, addClassStr, removeClassStr){\r\n\t\t\t\tnode = dom.byId(node);\r\n\t\t\t\tif(removeClassStr === undefined){\r\n\t\t\t\t\tnode[className] = \"\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tremoveClassStr = str2array(removeClassStr);\r\n\t\t\t\t\tfor(var i = 0, len = removeClassStr.length; i < len; ++i){\r\n\t\t\t\t\t\tnode[classList].remove(removeClassStr[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\taddClassStr = str2array(addClassStr);\r\n\t\t\t\tfor(i = 0, len = addClassStr.length; i < len; ++i){\r\n\t\t\t\t\tnode[classList].add(addClassStr[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttoggle: function toggleClass(node, classStr, condition){\r\n\t\t\t\tnode = dom.byId(node);\r\n\t\t\t\tif(condition === undefined){\r\n\t\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\t\tfor(var i = 0, len = classStr.length; i < len; ++i){\r\n\t\t\t\t\t\tnode[classList].toggle(classStr[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcls[condition ? \"add\" : \"remove\"](node, classStr);\r\n\t\t\t\t}\r\n\t\t\t\treturn condition;   // Boolean\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\t// regular DOM version\r\n\tvar fakeNode = {};  // for effective replacement\r\n\tcls = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module defines the core dojo DOM class API.\r\n\r\n\t\tcontains: function containsClass(/*DomNode|String*/ node, /*String*/ classStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns whether or not the specified classes are a portion of the\r\n\t\t\t//\t\tclass list currently applied to the node.\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to check the class for.\r\n\t\t\t// classStr: String\r\n\t\t\t//\t\tA string class name to look for.\r\n\t\t\t// example:\r\n\t\t\t//\t\tDo something if a node with id=\"someNode\" has class=\"aSillyClassName\" present\r\n\t\t\t//\t|\tif(dojo.hasClass(\"someNode\",\"aSillyClassName\")){ ... }\r\n\r\n\t\t\treturn ((\" \" + dom.byId(node)[className] + \" \").indexOf(\" \" + classStr + \" \") >= 0); // Boolean\r\n\t\t},\r\n\r\n\t\tadd: function addClass(/*DomNode|String*/ node, /*String|Array*/ classStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds the specified classes to the end of the class list on the\r\n\t\t\t//\t\tpassed node. Will not re-apply duplicate classes.\r\n\t\t\t//\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to add a class string too\r\n\t\t\t//\r\n\t\t\t// classStr: String|Array\r\n\t\t\t//\t\tA String class name to add, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAdd a class to some node:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.add(\"someNode\", \"anewClass\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAdd two classes at once:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.add(\"someNode\", \"firstClass secondClass\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAdd two classes at once (using array):\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.add(\"someNode\", [\"firstClass\", \"secondClass\"]);\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAvailable in `dojo/NodeList` for multiple additions\r\n\t\t\t//\t|\trequire([\"dojo/query\"], function(query){\r\n\t\t\t//\t|\t\tquery(\"ul > li\").addClass(\"firstLevel\");\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\tnode = dom.byId(node);\r\n\t\t\tclassStr = str2array(classStr);\r\n\t\t\tvar cls = node[className], oldLen;\r\n\t\t\tcls = cls ? \" \" + cls + \" \" : \" \";\r\n\t\t\toldLen = cls.length;\r\n\t\t\tfor(var i = 0, len = classStr.length, c; i < len; ++i){\r\n\t\t\t\tc = classStr[i];\r\n\t\t\t\tif(c && cls.indexOf(\" \" + c + \" \") < 0){\r\n\t\t\t\t\tcls += c + \" \";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(oldLen < cls.length){\r\n\t\t\t\tnode[className] = cls.substr(1, cls.length - 2);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tremove: function removeClass(/*DomNode|String*/ node, /*String|Array?*/ classStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRemoves the specified classes from node. No `contains()`\r\n\t\t\t//\t\tcheck is required.\r\n\t\t\t//\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to remove the class from.\r\n\t\t\t//\r\n\t\t\t// classStr: String|Array\r\n\t\t\t//\t\tAn optional String class name to remove, or several space-separated\r\n\t\t\t//\t\tclass names, or an array of class names. If omitted, all class names\r\n\t\t\t//\t\twill be deleted.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tRemove a class from some node:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.remove(\"someNode\", \"firstClass\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tRemove two classes from some node:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.remove(\"someNode\", \"firstClass secondClass\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tRemove two classes from some node (using array):\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.remove(\"someNode\", [\"firstClass\", \"secondClass\"]);\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tRemove all classes from some node:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.remove(\"someNode\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAvailable in `dojo/NodeList` for multiple removal\r\n\t\t\t//\t|\trequire([\"dojo/query\"], function(query){\r\n\t\t\t//\t|\t\tquery(\"ul > li\").removeClass(\"foo\");\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\tnode = dom.byId(node);\r\n\t\t\tvar cls;\r\n\t\t\tif(classStr !== undefined){\r\n\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\tcls = \" \" + node[className] + \" \";\r\n\t\t\t\tfor(var i = 0, len = classStr.length; i < len; ++i){\r\n\t\t\t\t\tcls = cls.replace(\" \" + classStr[i] + \" \", \" \");\r\n\t\t\t\t}\r\n\t\t\t\tcls = lang.trim(cls);\r\n\t\t\t}else{\r\n\t\t\t\tcls = \"\";\r\n\t\t\t}\r\n\t\t\tif(node[className] != cls){ node[className] = cls; }\r\n\t\t},\r\n\r\n\t\treplace: function replaceClass(/*DomNode|String*/ node, /*String|Array*/ addClassStr, /*String|Array?*/ removeClassStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReplaces one or more classes on a node if not present.\r\n\t\t\t//\t\tOperates more quickly than calling dojo.removeClass and dojo.addClass\r\n\t\t\t//\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to remove the class from.\r\n\t\t\t//\r\n\t\t\t// addClassStr: String|Array\r\n\t\t\t//\t\tA String class name to add, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\t//\r\n\t\t\t// removeClassStr: String|Array?\r\n\t\t\t//\t\tA String class name to remove, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.replace(\"someNode\", \"add1 add2\", \"remove1 remove2\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\tReplace all classes with addMe\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.replace(\"someNode\", \"addMe\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\tAvailable in `dojo/NodeList` for multiple toggles\r\n\t\t\t//\t|\trequire([\"dojo/query\"], function(query){\r\n\t\t\t//\t|\t\tquery(\".findMe\").replaceClass(\"addMe\", \"removeMe\");\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\tnode = dom.byId(node);\r\n\t\t\tfakeNode[className] = node[className];\r\n\t\t\tcls.remove(fakeNode, removeClassStr);\r\n\t\t\tcls.add(fakeNode, addClassStr);\r\n\t\t\tif(node[className] !== fakeNode[className]){\r\n\t\t\t\tnode[className] = fakeNode[className];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttoggle: function toggleClass(/*DomNode|String*/ node, /*String|Array*/ classStr, /*Boolean?*/ condition){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds a class to node if not present, or removes if present.\r\n\t\t\t//\t\tPass a boolean condition if you want to explicitly add or remove.\r\n\t\t\t//\t\tReturns the condition that was specified directly or indirectly.\r\n\t\t\t//\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to toggle a class string\r\n\t\t\t//\r\n\t\t\t// classStr: String|Array\r\n\t\t\t//\t\tA String class name to toggle, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\t//\r\n\t\t\t// condition:\r\n\t\t\t//\t\tIf passed, true means to add the class, false means to remove.\r\n\t\t\t//\t\tOtherwise dojo.hasClass(node, classStr) is used to detect the class presence.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.toggle(\"someNode\", \"hovered\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tForcefully add a class\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.toggle(\"someNode\", \"hovered\", true);\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAvailable in `dojo/NodeList` for multiple toggles\r\n\t\t\t//\t|\trequire([\"dojo/query\"], function(query){\r\n\t\t\t//\t|\t\tquery(\".toggleMe\").toggleClass(\"toggleMe\");\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\tnode = dom.byId(node);\r\n\t\t\tif(condition === undefined){\r\n\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\tfor(var i = 0, len = classStr.length, c; i < len; ++i){\r\n\t\t\t\t\tc = classStr[i];\r\n\t\t\t\t\tcls[cls.contains(node, c) ? \"remove\" : \"add\"](node, c);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tcls[condition ? \"add\" : \"remove\"](node, classStr);\r\n\t\t\t}\r\n\t\t\treturn condition;   // Boolean\r\n\t\t}\r\n\t};\r\n\r\n\treturn cls;\r\n});\r\n\ndefine('dojo/domReady',['./has'], function(has){\r\n\tvar global = (function () { return this; })(),\r\n\t\tdoc = document,\r\n\t\treadyStates = { 'loaded': 1, 'complete': 1 },\r\n\t\tfixReadyState = typeof doc.readyState != \"string\",\r\n\t\tready = !!readyStates[doc.readyState],\r\n\t\treadyQ = [],\r\n\t\trecursiveGuard;\r\n\r\n\tfunction domReady(callback){\r\n\t\t// summary:\r\n\t\t//\t\tPlugin to delay require()/define() callback from firing until the DOM has finished loading.\r\n\t\treadyQ.push(callback);\r\n\t\tif(ready){ processQ(); }\r\n\t}\r\n\tdomReady.load = function(id, req, load){\r\n\t\tdomReady(load);\r\n\t};\r\n\r\n\t// Export queue so that ready() can check if it's empty or not.\r\n\tdomReady._Q = readyQ;\r\n\tdomReady._onQEmpty = function(){\r\n\t\t// summary:\r\n\t\t//\t\tPrivate method overridden by dojo/ready, to notify when everything in the\r\n\t\t//\t\tdomReady queue has been processed.  Do not use directly.\r\n\t\t//\t\tWill be removed in 2.0, along with domReady._Q.\r\n\t};\r\n\r\n\t// For FF <= 3.5\r\n\tif(fixReadyState){ doc.readyState = \"loading\"; }\r\n\r\n\tfunction processQ(){\r\n\t\t// Calls all functions in the queue in order, unless processQ() is already running, in which case just return\r\n\r\n\t\tif(recursiveGuard){ return; }\r\n\t\trecursiveGuard = true;\r\n\r\n\t\twhile(readyQ.length){\r\n\t\t\ttry{\r\n\t\t\t\t(readyQ.shift())(doc);\r\n\t\t\t}catch(err){\r\n\t\t\t\tconsole.error(err, \"in domReady callback\", err.stack);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trecursiveGuard = false;\r\n\r\n\t\t// Notification for dojo/ready.  Remove for 2.0.\r\n\t\t// Note that this could add more tasks to the ready queue.\r\n\t\tdomReady._onQEmpty();\r\n\t}\r\n\r\n\tif(!ready){\r\n\t\tvar tests = [],\r\n\t\t\tdetectReady = function(evt){\r\n\t\t\t\tevt = evt || global.event;\r\n\t\t\t\tif(ready || (evt.type == \"readystatechange\" && !readyStates[doc.readyState])){ return; }\r\n\r\n\t\t\t\t// For FF <= 3.5\r\n\t\t\t\tif(fixReadyState){ doc.readyState = \"complete\"; }\r\n\r\n\t\t\t\tready = 1;\r\n\t\t\t\tprocessQ();\r\n\t\t\t},\r\n\t\t\ton = function(node, event){\r\n\t\t\t\tnode.addEventListener(event, detectReady, false);\r\n\t\t\t\treadyQ.push(function(){ node.removeEventListener(event, detectReady, false); });\r\n\t\t\t};\r\n\r\n\t\tif(!has(\"dom-addeventlistener\")){\r\n\t\t\ton = function(node, event){\r\n\t\t\t\tevent = \"on\" + event;\r\n\t\t\t\tnode.attachEvent(event, detectReady);\r\n\t\t\t\treadyQ.push(function(){ node.detachEvent(event, detectReady); });\r\n\t\t\t};\r\n\r\n\t\t\tvar div = doc.createElement(\"div\");\r\n\t\t\ttry{\r\n\t\t\t\tif(div.doScroll && global.frameElement === null){\r\n\t\t\t\t\t// the doScroll test is only useful if we're in the top-most frame\r\n\t\t\t\t\ttests.push(function(){\r\n\t\t\t\t\t\t// Derived with permission from Diego Perini's IEContentLoaded\r\n\t\t\t\t\t\t// http://javascript.nwbox.com/IEContentLoaded/\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tdiv.doScroll(\"left\");\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}catch(e){}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}catch(e){}\r\n\t\t}\r\n\r\n\t\ton(doc, \"DOMContentLoaded\");\r\n\t\ton(global, \"load\");\r\n\r\n\t\tif(\"onreadystatechange\" in doc){\r\n\t\t\ton(doc, \"readystatechange\");\r\n\t\t}else if(!fixReadyState){\r\n\t\t\t// if the ready state property exists and there's\r\n\t\t\t// no readystatechange event, poll for the state\r\n\t\t\t// to change\r\n\t\t\ttests.push(function(){\r\n\t\t\t\treturn readyStates[doc.readyState];\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(tests.length){\r\n\t\t\tvar poller = function(){\r\n\t\t\t\tif(ready){ return; }\r\n\t\t\t\tvar i = tests.length;\r\n\t\t\t\twhile(i--){\r\n\t\t\t\t\tif(tests[i]()){\r\n\t\t\t\t\t\tdetectReady(\"poller\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(poller, 30);\r\n\t\t\t};\r\n\t\t\tpoller();\r\n\t\t}\r\n\t}\r\n\r\n\treturn domReady;\r\n});\r\n\ndefine('dojo/hccss',[\r\n\t\"require\",\t\t\t// require, require.toUrl\r\n\t\"./_base/config\", // config.blankGif\r\n\t\"./dom-class\", // domClass.add\r\n\t\"./dom-style\", // domStyle.getComputedStyle\r\n\t\"./has\",\r\n\t\"./domReady\",\r\n\t\"./_base/window\" // win.body\r\n], function(require, config, domClass, domStyle, has, domReady, win){\r\n\r\n\t// module:\r\n\t//\t\tdojo/hccss\r\n\r\n\t/*=====\r\n\treturn function(){\r\n\t\t// summary:\r\n\t\t//\t\tTest if computer is in high contrast mode (i.e. if browser is not displaying background images).\r\n\t\t//\t\tDefines `has(\"highcontrast\")` and sets `dj_a11y` CSS class on `<body>` if machine is in high contrast mode.\r\n\t\t//\t\tReturns `has()` method;\r\n\t};\r\n\t=====*/\r\n\r\n\t// Has() test for when background images aren't displayed.  Don't call has(\"highcontrast\") before dojo/domReady!.\r\n\thas.add(\"highcontrast\", function(){\r\n\t\t// note: if multiple documents, doesn't matter which one we use\r\n\t\tvar div = win.doc.createElement(\"div\");\r\n\t\tdiv.style.cssText = \"border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;\" +\r\n\t\t\t\"background-image: url(\\\"\" + (config.blankGif || require.toUrl(\"./resources/blank.gif\")) + \"\\\");\";\r\n\t\twin.body().appendChild(div);\r\n\r\n\t\tvar cs = domStyle.getComputedStyle(div),\r\n\t\t\tbkImg = cs.backgroundImage,\r\n\t\t\thc = (cs.borderTopColor == cs.borderRightColor) ||\r\n\t\t\t\t(bkImg && (bkImg == \"none\" || bkImg == \"url(invalid-url:)\" ));\r\n\r\n\t\tif(has(\"ie\") <= 8){\r\n\t\t\tdiv.outerHTML = \"\";\t\t// prevent mixed-content warning, see http://support.microsoft.com/kb/925014\r\n\t\t}else{\r\n\t\t\twin.body().removeChild(div);\r\n\t\t}\r\n\r\n\t\treturn hc;\r\n\t});\r\n\r\n\tdomReady(function(){\r\n\t\tif(has(\"highcontrast\")){\r\n\t\t\tdomClass.add(win.body(), \"dj_a11y\");\r\n\t\t}\r\n\t});\r\n\r\n\treturn has;\r\n});\r\n\ndefine('dojo/dom-prop',[\"exports\", \"./_base/kernel\", \"./sniff\", \"./_base/lang\", \"./dom\", \"./dom-style\", \"./dom-construct\", \"./_base/connect\"],\r\n\t\tfunction(exports, dojo, has, lang, dom, style, ctr, conn){\r\n\t// module:\r\n\t//\t\tdojo/dom-prop\r\n\t// summary:\r\n\t//\t\tThis module defines the core dojo DOM properties API.\r\n\r\n\t// TODOC: summary not showing up in output, see https://github.com/csnover/js-doc-parse/issues/42\r\n\r\n\t// =============================\r\n\t// Element properties Functions\r\n\t// =============================\r\n\r\n\t// helper to connect events\r\n\tvar _evtHdlrMap = {}, _ctr = 0, _attrId = dojo._scopeName + \"attrid\";\r\n\thas.add('dom-textContent', function (global, doc, element) { return 'textContent' in element; });\r\n\r\n\texports.names = {\r\n\t\t// properties renamed to avoid clashes with reserved words\r\n\t\t\"class\": \"className\",\r\n\t\t\"for\": \"htmlFor\",\r\n\t\t// properties written as camelCase\r\n\t\ttabindex: \"tabIndex\",\r\n\t\treadonly: \"readOnly\",\r\n\t\tcolspan: \"colSpan\",\r\n\t\tframeborder: \"frameBorder\",\r\n\t\trowspan: \"rowSpan\",\r\n\t\ttextcontent: \"textContent\",\r\n\t\tvaluetype: \"valueType\"\r\n\t};\r\n\t\r\n\tfunction getText(/*DOMNode*/node){\r\n\t\t// summary:\r\n\t\t//\t\trecursion method for get('textContent') to use. Gets text value for a node.\r\n\t\t// description:\r\n\t\t//\t\tJuse uses nodedValue so things like <br/> tags do not end up in\r\n\t\t//\t\tthe text as any sort of line return.\r\n\t\tvar text = \"\", ch = node.childNodes;\r\n\t\tfor(var i = 0, n; n = ch[i]; i++){\r\n\t\t\t//Skip comments.\r\n\t\t\tif(n.nodeType != 8){\r\n\t\t\t\tif(n.nodeType == 1){\r\n\t\t\t\t\ttext += getText(n);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttext += n.nodeValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\texports.get = function getProp(/*DOMNode|String*/ node, /*String*/ name){\r\n\t\t// summary:\r\n\t\t//\t\tGets a property on an HTML element.\r\n\t\t// description:\r\n\t\t//\t\tHandles normalized getting of properties on DOM nodes.\r\n\t\t//\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to the element to get the property on\r\n\t\t// name: String\r\n\t\t//\t\tthe name of the property to get.\r\n\t\t// returns:\r\n\t\t//\t\tthe value of the requested property or its default value\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\t// get the current value of the \"foo\" property on a node\r\n\t\t//\t|\trequire([\"dojo/dom-prop\", \"dojo/dom\"], function(domProp, dom){\r\n\t\t//\t|\t\tdomProp.get(dom.byId(\"nodeId\"), \"foo\");\r\n\t\t//\t|\t\t// or we can just pass the id:\r\n\t\t//\t|\t\tdomProp.get(\"nodeId\", \"foo\");\r\n\t\t//\t|\t});\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar lc = name.toLowerCase(), propName = exports.names[lc] || name;\r\n\t\t\r\n\t\tif(propName == \"textContent\" && !has(\"dom-textContent\")){\r\n\t\t\treturn getText(node);\r\n\t\t}\r\n\t\t\r\n\t\treturn node[propName];\t// Anything\r\n\t};\r\n\r\n\texports.set = function setProp(/*DOMNode|String*/ node, /*String|Object*/ name, /*String?*/ value){\r\n\t\t// summary:\r\n\t\t//\t\tSets a property on an HTML element.\r\n\t\t// description:\r\n\t\t//\t\tHandles normalized setting of properties on DOM nodes.\r\n\t\t//\r\n\t\t//\t\tWhen passing functions as values, note that they will not be\r\n\t\t//\t\tdirectly assigned to slots on the node, but rather the default\r\n\t\t//\t\tbehavior will be removed and the new behavior will be added\r\n\t\t//\t\tusing `dojo.connect()`, meaning that event handler properties\r\n\t\t//\t\twill be normalized and that some caveats with regards to\r\n\t\t//\t\tnon-standard behaviors for onsubmit apply. Namely that you\r\n\t\t//\t\tshould cancel form submission using `dojo.stopEvent()` on the\r\n\t\t//\t\tpassed event object instead of returning a boolean value from\r\n\t\t//\t\tthe handler itself.\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to the element to set the property on\r\n\t\t// name: String|Object\r\n\t\t//\t\tthe name of the property to set, or a hash object to set\r\n\t\t//\t\tmultiple properties at once.\r\n\t\t// value: String?\r\n\t\t//\t\tThe value to set for the property\r\n\t\t// returns:\r\n\t\t//\t\tthe DOM node\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\t// use prop() to set the tab index\r\n\t\t//\t|\trequire([\"dojo/dom-prop\"], function(domProp){\r\n\t\t//\t|\t\tdomProp.set(\"nodeId\", \"tabIndex\", 3);\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tSet multiple values at once, including event handlers:\r\n\t\t//\t|\trequire([\"dojo/dom-prop\"], function(domProp){\r\n\t\t//\t|\t\tdomProp.set(\"formId\", {\r\n\t\t//\t|\t\t\t\"foo\": \"bar\",\r\n\t\t//\t|\t\t\t\"tabIndex\": -1,\r\n\t\t//\t|\t\t\t\"method\": \"POST\",\r\n\t\t//\t|\t\t});\r\n\t\t//\t|\t});\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar l = arguments.length;\r\n\t\tif(l == 2 && typeof name != \"string\"){ // inline'd type check\r\n\t\t\t// the object form of setter: the 2nd argument is a dictionary\r\n\t\t\tfor(var x in name){\r\n\t\t\t\texports.set(node, x, name[x]);\r\n\t\t\t}\r\n\t\t\treturn node; // DomNode\r\n\t\t}\r\n\t\tvar lc = name.toLowerCase(), propName = exports.names[lc] || name;\r\n\t\tif(propName == \"style\" && typeof value != \"string\"){ // inline'd type check\r\n\t\t\t// special case: setting a style\r\n\t\t\tstyle.set(node, value);\r\n\t\t\treturn node; // DomNode\r\n\t\t}\r\n\t\tif(propName == \"innerHTML\"){\r\n\t\t\t// special case: assigning HTML\r\n\t\t\t// the hash lists elements with read-only innerHTML on IE\r\n\t\t\tif(has(\"ie\") && node.tagName.toLowerCase() in {col: 1, colgroup: 1,\r\n\t\t\t\t\t\ttable: 1, tbody: 1, tfoot: 1, thead: 1, tr: 1, title: 1}){\r\n\t\t\t\tctr.empty(node);\r\n\t\t\t\tnode.appendChild(ctr.toDom(value, node.ownerDocument));\r\n\t\t\t}else{\r\n\t\t\t\tnode[propName] = value;\r\n\t\t\t}\r\n\t\t\treturn node; // DomNode\r\n\t\t}\r\n\t\tif(propName == \"textContent\" && !has(\"dom-textContent\")) {\r\n\t\t\tctr.empty(node);\r\n\t\t\tnode.appendChild(node.ownerDocument.createTextNode(value));\r\n\t\t\treturn node;\r\n\t\t}\r\n\t\tif(lang.isFunction(value)){\r\n\t\t\t// special case: assigning an event handler\r\n\t\t\t// clobber if we can\r\n\t\t\tvar attrId = node[_attrId];\r\n\t\t\tif(!attrId){\r\n\t\t\t\tattrId = _ctr++;\r\n\t\t\t\tnode[_attrId] = attrId;\r\n\t\t\t}\r\n\t\t\tif(!_evtHdlrMap[attrId]){\r\n\t\t\t\t_evtHdlrMap[attrId] = {};\r\n\t\t\t}\r\n\t\t\tvar h = _evtHdlrMap[attrId][propName];\r\n\t\t\tif(h){\r\n\t\t\t\t//h.remove();\r\n\t\t\t\tconn.disconnect(h);\r\n\t\t\t}else{\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdelete node[propName];\r\n\t\t\t\t}catch(e){}\r\n\t\t\t}\r\n\t\t\t// ensure that event objects are normalized, etc.\r\n\t\t\tif(value){\r\n\t\t\t\t//_evtHdlrMap[attrId][propName] = on(node, propName, value);\r\n\t\t\t\t_evtHdlrMap[attrId][propName] = conn.connect(node, propName, value);\r\n\t\t\t}else{\r\n\t\t\t\tnode[propName] = null;\r\n\t\t\t}\r\n\t\t\treturn node; // DomNode\r\n\t\t}\r\n\t\tnode[propName] = value;\r\n\t\treturn node;\t// DomNode\r\n\t};\r\n});\r\n\ndefine('dojo/dom-attr',[\"exports\", \"./sniff\", \"./_base/lang\", \"./dom\", \"./dom-style\", \"./dom-prop\"],\r\n\t\tfunction(exports, has, lang, dom, style, prop){\r\n\t// module:\r\n\t//\t\tdojo/dom-attr\r\n\t// summary:\r\n\t//\t\tThis module defines the core dojo DOM attributes API.\r\n\r\n\t// TODOC: summary not showing up in output see https://github.com/csnover/js-doc-parse/issues/42\r\n\r\n\t// =============================\r\n\t// Element attribute Functions\r\n\t// =============================\r\n\r\n\t// This module will be obsolete soon. Use dojo/prop instead.\r\n\r\n\t// dojo/dom-attr.get() should conform to http://www.w3.org/TR/DOM-Level-2-Core/\r\n\r\n\t// attribute-related functions (to be obsolete soon)\r\n\tvar forcePropNames = {\r\n\t\t\tinnerHTML:\t1,\r\n\t\t\ttextContent:1,\r\n\t\t\tclassName:\t1,\r\n\t\t\thtmlFor:\thas(\"ie\"),\r\n\t\t\tvalue:\t\t1\r\n\t\t},\r\n\t\tattrNames = {\r\n\t\t\t// original attribute names\r\n\t\t\tclassname: \"class\",\r\n\t\t\thtmlfor: \"for\",\r\n\t\t\t// for IE\r\n\t\t\ttabindex: \"tabIndex\",\r\n\t\t\treadonly: \"readOnly\"\r\n\t\t};\r\n\r\n\tfunction _hasAttr(node, name){\r\n\t\tvar attr = node.getAttributeNode && node.getAttributeNode(name);\r\n\t\treturn !!attr && attr.specified; // Boolean\r\n\t}\r\n\t\r\n\t// There is a difference in the presence of certain properties and their default values\r\n\t// between browsers. For example, on IE \"disabled\" is present on all elements,\r\n\t// but it is value is \"false\"; \"tabIndex\" of <div> returns 0 by default on IE, yet other browsers\r\n\t// can return -1.\r\n\r\n\texports.has = function hasAttr(/*DOMNode|String*/ node, /*String*/ name){\r\n\t\t// summary:\r\n\t\t//\t\tReturns true if the requested attribute is specified on the\r\n\t\t//\t\tgiven element, and false otherwise.\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to the element to check\r\n\t\t// name: String\r\n\t\t//\t\tthe name of the attribute\r\n\t\t// returns: Boolean\r\n\t\t//\t\ttrue if the requested attribute is specified on the\r\n\t\t//\t\tgiven element, and false otherwise\r\n\r\n\t\tvar lc = name.toLowerCase();\r\n\t\treturn forcePropNames[prop.names[lc] || name] || _hasAttr(dom.byId(node), attrNames[lc] || name);\t// Boolean\r\n\t};\r\n\r\n\texports.get = function getAttr(/*DOMNode|String*/ node, /*String*/ name){\r\n\t\t// summary:\r\n\t\t//\t\tGets an attribute on an HTML element.\r\n\t\t// description:\r\n\t\t//\t\tHandles normalized getting of attributes on DOM Nodes.\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to the element to get the attribute on\r\n\t\t// name: String\r\n\t\t//\t\tthe name of the attribute to get.\r\n\t\t// returns:\r\n\t\t//\t\tthe value of the requested attribute or null if that attribute does not have a specified or\r\n\t\t//\t\tdefault value;\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\t// get the current value of the \"foo\" attribute on a node\r\n\t\t//\t|\trequire([\"dojo/dom-attr\", \"dojo/dom\"], function(domAttr, dom){\r\n\t\t//\t|\t\tdomAttr.get(dom.byId(\"nodeId\"), \"foo\");\r\n\t\t//\t|\t\t// or we can just pass the id:\r\n\t\t//\t|\t\tdomAttr.get(\"nodeId\", \"foo\");\r\n\t\t//\t|\t});\t\r\n\t\t//\t|\t\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar lc = name.toLowerCase(),\r\n\t\t\tpropName = prop.names[lc] || name,\r\n\t\t\tforceProp = forcePropNames[propName],\r\n\t\t\tvalue = node[propName];\t\t// should we access this attribute via a property or via getAttribute()?\r\n\r\n\t\tif(forceProp && typeof value != \"undefined\"){\r\n\t\t\t// node's property\r\n\t\t\treturn value;\t// Anything\r\n\t\t}\r\n\t\t\r\n\t\tif(propName == \"textContent\"){\r\n\t\t\treturn prop.get(node, propName);\r\n\t\t}\r\n\t\t\r\n\t\tif(propName != \"href\" && (typeof value == \"boolean\" || lang.isFunction(value))){\r\n\t\t\t// node's property\r\n\t\t\treturn value;\t// Anything\r\n\t\t}\r\n\t\t// node's attribute\r\n\t\t// we need _hasAttr() here to guard against IE returning a default value\r\n\t\tvar attrName = attrNames[lc] || name;\r\n\t\treturn _hasAttr(node, attrName) ? node.getAttribute(attrName) : null; // Anything\r\n\t};\r\n\r\n\texports.set = function setAttr(/*DOMNode|String*/ node, /*String|Object*/ name, /*String?*/ value){\r\n\t\t// summary:\r\n\t\t//\t\tSets an attribute on an HTML element.\r\n\t\t// description:\r\n\t\t//\t\tHandles normalized setting of attributes on DOM Nodes.\r\n\t\t//\r\n\t\t//\t\tWhen passing functions as values, note that they will not be\r\n\t\t//\t\tdirectly assigned to slots on the node, but rather the default\r\n\t\t//\t\tbehavior will be removed and the new behavior will be added\r\n\t\t//\t\tusing `dojo.connect()`, meaning that event handler properties\r\n\t\t//\t\twill be normalized and that some caveats with regards to\r\n\t\t//\t\tnon-standard behaviors for onsubmit apply. Namely that you\r\n\t\t//\t\tshould cancel form submission using `dojo.stopEvent()` on the\r\n\t\t//\t\tpassed event object instead of returning a boolean value from\r\n\t\t//\t\tthe handler itself.\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to the element to set the attribute on\r\n\t\t// name: String|Object\r\n\t\t//\t\tthe name of the attribute to set, or a hash of key-value pairs to set.\r\n\t\t// value: String?\r\n\t\t//\t\tthe value to set for the attribute, if the name is a string.\r\n\t\t// returns:\r\n\t\t//\t\tthe DOM node\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\t// use attr() to set the tab index\r\n\t\t//\t|\trequire([\"dojo/dom-attr\"], function(domAttr){\r\n\t\t//\t|\t\tdomAttr.set(\"nodeId\", \"tabIndex\", 3);\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tSet multiple values at once, including event handlers:\r\n\t\t//\t|\trequire([\"dojo/dom-attr\"],\r\n\t\t//\t|\tfunction(domAttr){\r\n\t\t//\t|\t\tdomAttr.set(\"formId\", {\r\n\t\t//\t|\t\t\t\"foo\": \"bar\",\r\n\t\t//\t|\t\t\t\"tabIndex\": -1,\r\n\t\t//\t|\t\t\t\"method\": \"POST\"\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t});\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tif(arguments.length == 2){ // inline'd type check\r\n\t\t\t// the object form of setter: the 2nd argument is a dictionary\r\n\t\t\tfor(var x in name){\r\n\t\t\t\texports.set(node, x, name[x]);\r\n\t\t\t}\r\n\t\t\treturn node; // DomNode\r\n\t\t}\r\n\t\tvar lc = name.toLowerCase(),\r\n\t\t\tpropName = prop.names[lc] || name,\r\n\t\t\tforceProp = forcePropNames[propName];\r\n\t\tif(propName == \"style\" && typeof value != \"string\"){ // inline'd type check\r\n\t\t\t// special case: setting a style\r\n\t\t\tstyle.set(node, value);\r\n\t\t\treturn node; // DomNode\r\n\t\t}\r\n\t\tif(forceProp || typeof value == \"boolean\" || lang.isFunction(value)){\r\n\t\t\treturn prop.set(node, name, value);\r\n\t\t}\r\n\t\t// node's attribute\r\n\t\tnode.setAttribute(attrNames[lc] || name, value);\r\n\t\treturn node; // DomNode\r\n\t};\r\n\r\n\texports.remove = function removeAttr(/*DOMNode|String*/ node, /*String*/ name){\r\n\t\t// summary:\r\n\t\t//\t\tRemoves an attribute from an HTML element.\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to the element to remove the attribute from\r\n\t\t// name: String\r\n\t\t//\t\tthe name of the attribute to remove\r\n\r\n\t\tdom.byId(node).removeAttribute(attrNames[name.toLowerCase()] || name);\r\n\t};\r\n\r\n\texports.getNodeProp = function getNodeProp(/*DomNode|String*/ node, /*String*/ name){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an effective value of a property or an attribute.\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tid or reference to the element to remove the attribute from\r\n\t\t// name: String\r\n\t\t//\t\tthe name of the attribute\r\n\t\t// returns:\r\n\t\t//\t\tthe value of the attribute\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tvar lc = name.toLowerCase(), propName = prop.names[lc] || name;\r\n\t\tif((propName in node) && propName != \"href\"){\r\n\t\t\t// node's property\r\n\t\t\treturn node[propName];\t// Anything\r\n\t\t}\r\n\t\t// node's attribute\r\n\t\tvar attrName = attrNames[lc] || name;\r\n\t\treturn _hasAttr(node, attrName) ? node.getAttribute(attrName) : null; // Anything\r\n\t};\r\n});\r\n\ndefine('dojo/dom-construct',[\"exports\", \"./_base/kernel\", \"./sniff\", \"./_base/window\", \"./dom\", \"./dom-attr\"],\r\n\t\tfunction(exports, dojo, has, win, dom, attr){\r\n\t// module:\r\n\t//\t\tdojo/dom-construct\r\n\t// summary:\r\n\t//\t\tThis module defines the core dojo DOM construction API.\r\n\r\n\t// TODOC: summary not showing up in output, see https://github.com/csnover/js-doc-parse/issues/42\r\n\r\n\t// support stuff for toDom()\r\n\tvar tagWrap = {\r\n\t\t\toption: [\"select\"],\r\n\t\t\ttbody: [\"table\"],\r\n\t\t\tthead: [\"table\"],\r\n\t\t\ttfoot: [\"table\"],\r\n\t\t\ttr: [\"table\", \"tbody\"],\r\n\t\t\ttd: [\"table\", \"tbody\", \"tr\"],\r\n\t\t\tth: [\"table\", \"thead\", \"tr\"],\r\n\t\t\tlegend: [\"fieldset\"],\r\n\t\t\tcaption: [\"table\"],\r\n\t\t\tcolgroup: [\"table\"],\r\n\t\t\tcol: [\"table\", \"colgroup\"],\r\n\t\t\tli: [\"ul\"]\r\n\t\t},\r\n\t\treTag = /<\\s*([\\w\\:]+)/,\r\n\t\tmasterNode = {}, masterNum = 0,\r\n\t\tmasterName = \"__\" + dojo._scopeName + \"ToDomId\";\r\n\r\n\t// generate start/end tag strings to use\r\n\t// for the injection for each special tag wrap case.\r\n\tfor(var param in tagWrap){\r\n\t\tif(tagWrap.hasOwnProperty(param)){\r\n\t\t\tvar tw = tagWrap[param];\r\n\t\t\ttw.pre = param == \"option\" ? '<select multiple=\"multiple\">' : \"<\" + tw.join(\"><\") + \">\";\r\n\t\t\ttw.post = \"</\" + tw.reverse().join(\"></\") + \">\";\r\n\t\t\t// the last line is destructive: it reverses the array,\r\n\t\t\t// but we don't care at this point\r\n\t\t}\r\n\t}\r\n\r\n\tvar html5domfix;\r\n\tif(has(\"ie\") <= 8){\r\n\t\thtml5domfix = function(doc){\r\n\t\t\tdoc.__dojo_html5_tested = \"yes\";\r\n\t\t\tvar div = create('div', {innerHTML: \"<nav>a</nav>\", style: {visibility: \"hidden\"}}, doc.body);\r\n\t\t\tif(div.childNodes.length !== 1){\r\n\t\t\t\t('abbr article aside audio canvas details figcaption figure footer header ' +\r\n\t\t\t\t'hgroup mark meter nav output progress section summary time video').replace(\r\n\t\t\t\t\t/\\b\\w+\\b/g, function(n){\r\n\t\t\t\t\t\tdoc.createElement(n);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tdestroy(div);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _insertBefore(/*DomNode*/ node, /*DomNode*/ ref){\r\n\t\tvar parent = ref.parentNode;\r\n\t\tif(parent){\r\n\t\t\tparent.insertBefore(node, ref);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _insertAfter(/*DomNode*/ node, /*DomNode*/ ref){\r\n\t\t// summary:\r\n\t\t//\t\tTry to insert node after ref\r\n\t\tvar parent = ref.parentNode;\r\n\t\tif(parent){\r\n\t\t\tif(parent.lastChild == ref){\r\n\t\t\t\tparent.appendChild(node);\r\n\t\t\t}else{\r\n\t\t\t\tparent.insertBefore(node, ref.nextSibling);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\texports.toDom = function toDom(frag, doc){\r\n\t\t// summary:\r\n\t\t//\t\tinstantiates an HTML fragment returning the corresponding DOM.\r\n\t\t// frag: String\r\n\t\t//\t\tthe HTML fragment\r\n\t\t// doc: DocumentNode?\r\n\t\t//\t\toptional document to use when creating DOM nodes, defaults to\r\n\t\t//\t\tdojo/_base/window.doc if not specified.\r\n\t\t// returns:\r\n\t\t//\t\tDocument fragment, unless it's a single node in which case it returns the node itself\r\n\t\t// example:\r\n\t\t//\t\tCreate a table row:\r\n\t\t//\t|\trequire([\"dojo/dom-construct\"], function(domConstruct){\r\n\t\t//\t|\t\tvar tr = domConstruct.toDom(\"<tr><td>First!</td></tr>\");\r\n\t\t//\t|\t});\r\n\r\n\t\tdoc = doc || win.doc;\r\n\t\tvar masterId = doc[masterName];\r\n\t\tif(!masterId){\r\n\t\t\tdoc[masterName] = masterId = ++masterNum + \"\";\r\n\t\t\tmasterNode[masterId] = doc.createElement(\"div\");\r\n\t\t}\r\n\r\n\t\tif(has(\"ie\") <= 8){\r\n\t\t\tif(!doc.__dojo_html5_tested && doc.body){\r\n\t\t\t\thtml5domfix(doc);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// make sure the frag is a string.\r\n\t\tfrag += \"\";\r\n\r\n\t\t// find the starting tag, and get node wrapper\r\n\t\tvar match = frag.match(reTag),\r\n\t\t\ttag = match ? match[1].toLowerCase() : \"\",\r\n\t\t\tmaster = masterNode[masterId],\r\n\t\t\twrap, i, fc, df;\r\n\t\tif(match && tagWrap[tag]){\r\n\t\t\twrap = tagWrap[tag];\r\n\t\t\tmaster.innerHTML = wrap.pre + frag + wrap.post;\r\n\t\t\tfor(i = wrap.length; i; --i){\r\n\t\t\t\tmaster = master.firstChild;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tmaster.innerHTML = frag;\r\n\t\t}\r\n\r\n\t\t// one node shortcut => return the node itself\r\n\t\tif(master.childNodes.length == 1){\r\n\t\t\treturn master.removeChild(master.firstChild); // DOMNode\r\n\t\t}\r\n\r\n\t\t// return multiple nodes as a document fragment\r\n\t\tdf = doc.createDocumentFragment();\r\n\t\twhile((fc = master.firstChild)){ // intentional assignment\r\n\t\t\tdf.appendChild(fc);\r\n\t\t}\r\n\t\treturn df; // DocumentFragment\r\n\t};\r\n\r\n\texports.place = function place(node, refNode, position){\r\n\t\t// summary:\r\n\t\t//\t\tAttempt to insert node into the DOM, choosing from various positioning options.\r\n\t\t//\t\tReturns the first argument resolved to a DOM node.\r\n\t\t// node: DOMNode|DocumentFragment|String\r\n\t\t//\t\tid or node reference, or HTML fragment starting with \"<\" to place relative to refNode\r\n\t\t// refNode: DOMNode|String\r\n\t\t//\t\tid or node reference to use as basis for placement\r\n\t\t// position: String|Number?\r\n\t\t//\t\tstring noting the position of node relative to refNode or a\r\n\t\t//\t\tnumber indicating the location in the childNodes collection of refNode.\r\n\t\t//\t\tAccepted string values are:\r\n\t\t//\r\n\t\t//\t\t- before\r\n\t\t//\t\t- after\r\n\t\t//\t\t- replace\r\n\t\t//\t\t- only\r\n\t\t//\t\t- first\r\n\t\t//\t\t- last\r\n\t\t//\r\n\t\t//\t\t\"first\" and \"last\" indicate positions as children of refNode, \"replace\" replaces refNode,\r\n\t\t//\t\t\"only\" replaces all children.  position defaults to \"last\" if not specified\r\n\t\t// returns: DOMNode\r\n\t\t//\t\tReturned values is the first argument resolved to a DOM node.\r\n\t\t//\r\n\t\t//\t\t.place() is also a method of `dojo/NodeList`, allowing `dojo/query` node lookups.\r\n\t\t// example:\r\n\t\t//\t\tPlace a node by string id as the last child of another node by string id:\r\n\t\t//\t|\trequire([\"dojo/dom-construct\"], function(domConstruct){\r\n\t\t//\t|\t\tdomConstruct.place(\"someNode\", \"anotherNode\");\r\n\t\t//\t|\t});\r\n\t\t// example:\r\n\t\t//\t\tPlace a node by string id before another node by string id\r\n\t\t//\t|\trequire([\"dojo/dom-construct\"], function(domConstruct){\r\n\t\t//\t|\t\tdomConstruct.place(\"someNode\", \"anotherNode\", \"before\");\r\n\t\t//\t|\t});\r\n\t\t// example:\r\n\t\t//\t\tCreate a Node, and place it in the body element (last child):\r\n\t\t//\t|\trequire([\"dojo/dom-construct\", \"dojo/_base/window\"\r\n\t\t//\t|\t], function(domConstruct, win){\r\n\t\t//\t|\t\tdomConstruct.place(\"<div></div>\", win.body());\r\n\t\t//\t|\t});\r\n\t\t// example:\r\n\t\t//\t\tPut a new LI as the first child of a list by id:\r\n\t\t//\t|\trequire([\"dojo/dom-construct\"], function(domConstruct){\r\n\t\t//\t|\t\tdomConstruct.place(\"<li></li>\", \"someUl\", \"first\");\r\n\t\t//\t|\t});\r\n\r\n\t\trefNode = dom.byId(refNode);\r\n\t\tif(typeof node == \"string\"){ // inline'd type check\r\n\t\t\tnode = /^\\s*</.test(node) ? exports.toDom(node, refNode.ownerDocument) : dom.byId(node);\r\n\t\t}\r\n\t\tif(typeof position == \"number\"){ // inline'd type check\r\n\t\t\tvar cn = refNode.childNodes;\r\n\t\t\tif(!cn.length || cn.length <= position){\r\n\t\t\t\trefNode.appendChild(node);\r\n\t\t\t}else{\r\n\t\t\t\t_insertBefore(node, cn[position < 0 ? 0 : position]);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tswitch(position){\r\n\t\t\t\tcase \"before\":\r\n\t\t\t\t\t_insertBefore(node, refNode);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"after\":\r\n\t\t\t\t\t_insertAfter(node, refNode);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"replace\":\r\n\t\t\t\t\trefNode.parentNode.replaceChild(node, refNode);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"only\":\r\n\t\t\t\t\texports.empty(refNode);\r\n\t\t\t\t\trefNode.appendChild(node);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"first\":\r\n\t\t\t\t\tif(refNode.firstChild){\r\n\t\t\t\t\t\t_insertBefore(node, refNode.firstChild);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// else fallthrough...\r\n\t\t\t\tdefault: // aka: last\r\n\t\t\t\t\trefNode.appendChild(node);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn node; // DomNode\r\n\t};\r\n\r\n\tvar create = exports.create = function create(/*DOMNode|String*/ tag, /*Object*/ attrs, /*DOMNode|String?*/ refNode, /*String?*/ pos){\r\n\t\t// summary:\r\n\t\t//\t\tCreate an element, allowing for optional attribute decoration\r\n\t\t//\t\tand placement.\r\n\t\t// description:\r\n\t\t//\t\tA DOM Element creation function. A shorthand method for creating a node or\r\n\t\t//\t\ta fragment, and allowing for a convenient optional attribute setting step,\r\n\t\t//\t\tas well as an optional DOM placement reference.\r\n\t\t//\r\n\t\t//\t\tAttributes are set by passing the optional object through `dojo/dom-attr.set`.\r\n\t\t//\t\tSee `dojo/dom-attr.set` for noted caveats and nuances, and API if applicable.\r\n\t\t//\r\n\t\t//\t\tPlacement is done via `dojo/dom-construct.place`, assuming the new node to be\r\n\t\t//\t\tthe action node, passing along the optional reference node and position.\r\n\t\t// tag: DOMNode|String\r\n\t\t//\t\tA string of the element to create (eg: \"div\", \"a\", \"p\", \"li\", \"script\", \"br\"),\r\n\t\t//\t\tor an existing DOM node to process.\r\n\t\t// attrs: Object\r\n\t\t//\t\tAn object-hash of attributes to set on the newly created node.\r\n\t\t//\t\tCan be null, if you don't want to set any attributes/styles.\r\n\t\t//\t\tSee: `dojo/dom-attr.set` for a description of available attributes.\r\n\t\t// refNode: DOMNode|String?\r\n\t\t//\t\tOptional reference node. Used by `dojo/dom-construct.place` to place the newly created\r\n\t\t//\t\tnode somewhere in the dom relative to refNode. Can be a DomNode reference\r\n\t\t//\t\tor String ID of a node.\r\n\t\t// pos: String?\r\n\t\t//\t\tOptional positional reference. Defaults to \"last\" by way of `dojo/domConstruct.place`,\r\n\t\t//\t\tthough can be set to \"first\",\"after\",\"before\",\"last\", \"replace\" or \"only\"\r\n\t\t//\t\tto further control the placement of the new node relative to the refNode.\r\n\t\t//\t\t'refNode' is required if a 'pos' is specified.\r\n\t\t// example:\r\n\t\t//\t\tCreate a DIV:\r\n\t\t//\t|\trequire([\"dojo/dom-construct\"], function(domConstruct){\r\n\t\t//\t|\t\tvar n = domConstruct.create(\"div\");\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tCreate a DIV with content:\r\n\t\t//\t|\trequire([\"dojo/dom-construct\"], function(domConstruct){\r\n\t\t//\t|\t\tvar n = domConstruct.create(\"div\", { innerHTML:\"<p>hi</p>\" });\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tPlace a new DIV in the BODY, with no attributes set\r\n\t\t//\t|\trequire([\"dojo/dom-construct\", \"dojo/_base/window\"], function(domConstruct, win){\r\n\t\t//\t|\t\tvar n = domConstruct.create(\"div\", null, win.body());\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tCreate an UL, and populate it with LI's. Place the list as the first-child of a\r\n\t\t//\t\tnode with id=\"someId\":\r\n\t\t//\t|\trequire([\"dojo/dom-construct\", \"dojo/_base/array\"],\r\n\t\t//\t|\tfunction(domConstruct, arrayUtil){\r\n\t\t//\t|\t\tvar ul = domConstruct.create(\"ul\", null, \"someId\", \"first\");\r\n\t\t//\t|\t\tvar items = [\"one\", \"two\", \"three\", \"four\"];\r\n\t\t//\t|\t\tarrayUtil.forEach(items, function(data){\r\n\t\t//\t|\t\t\tdomConstruct.create(\"li\", { innerHTML: data }, ul);\r\n\t\t//\t|\t\t});\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tCreate an anchor, with an href. Place in BODY:\r\n\t\t//\t|\trequire([\"dojo/dom-construct\", \"dojo/_base/window\"], function(domConstruct, win){\r\n\t\t//\t|\t\tdomConstruct.create(\"a\", { href:\"foo.html\", title:\"Goto FOO!\" }, win.body());\r\n\t\t//\t|\t});\r\n\r\n\t\tvar doc = win.doc;\r\n\t\tif(refNode){\r\n\t\t\trefNode = dom.byId(refNode);\r\n\t\t\tdoc = refNode.ownerDocument;\r\n\t\t}\r\n\t\tif(typeof tag == \"string\"){ // inline'd type check\r\n\t\t\ttag = doc.createElement(tag);\r\n\t\t}\r\n\t\tif(attrs){ attr.set(tag, attrs); }\r\n\t\tif(refNode){ exports.place(tag, refNode, pos); }\r\n\t\treturn tag; // DomNode\r\n\t};\r\n\r\n\tfunction _empty(/*DomNode*/ node){\r\n\t\t// TODO: remove this if() block in 2.0 when we no longer have to worry about IE memory leaks,\r\n\t\t// and then uncomment the emptyGrandchildren() test case from html.html.\r\n\t\t// Note that besides fixing #16957, using removeChild() is actually faster than setting node.innerHTML,\r\n\t\t// see http://jsperf.com/clear-dom-node.\r\n\t\tif(\"innerHTML\" in node){\r\n\t\t\ttry{\r\n\t\t\t\t// fast path\r\n\t\t\t\tnode.innerHTML = \"\";\r\n\t\t\t\treturn;\r\n\t\t\t}catch(e){\r\n\t\t\t\t// innerHTML is readOnly (e.g. TABLE (sub)elements in quirks mode)\r\n\t\t\t\t// Fall through (saves bytes)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// SVG/strict elements don't support innerHTML\r\n\t\tfor(var c; c = node.lastChild;){ // intentional assignment\r\n\t\t\tnode.removeChild(c);\r\n\t\t}\r\n\t}\r\n\r\n\texports.empty = function empty(/*DOMNode|String*/ node){\r\n\t\t// summary:\r\n\t\t//\t\tsafely removes all children of the node.\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\ta reference to a DOM node or an id.\r\n\t\t// example:\r\n\t\t//\t\tDestroy node's children byId:\r\n\t\t//\t|\trequire([\"dojo/dom-construct\"], function(domConstruct){\r\n\t\t//\t|\t\tdomConstruct.empty(\"someId\");\r\n\t\t//\t|\t});\r\n\r\n\t\t_empty(dom.byId(node));\r\n\t};\r\n\r\n\r\n\tfunction _destroy(/*DomNode*/ node, /*DomNode*/ parent){\r\n\t\t// in IE quirks, node.canHaveChildren can be false but firstChild can be non-null (OBJECT/APPLET)\r\n\t\tif(node.firstChild){\r\n\t\t\t_empty(node);\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\t// removeNode(false) doesn't leak in IE 6+, but removeChild() and removeNode(true) are known to leak under IE 8- while 9+ is TBD.\r\n\t\t\t// In IE quirks mode, PARAM nodes as children of OBJECT/APPLET nodes have a removeNode method that does nothing and\r\n\t\t\t// the parent node has canHaveChildren=false even though removeChild correctly removes the PARAM children.\r\n\t\t\t// In IE, SVG/strict nodes don't have a removeNode method nor a canHaveChildren boolean.\r\n\t\t\thas(\"ie\") && parent.canHaveChildren && \"removeNode\" in node ? node.removeNode(false) : parent.removeChild(node);\r\n\t\t}\r\n\t}\r\n\tvar destroy = exports.destroy = function destroy(/*DOMNode|String*/ node){\r\n\t\t// summary:\r\n\t\t//\t\tRemoves a node from its parent, clobbering it and all of its\r\n\t\t//\t\tchildren.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tRemoves a node from its parent, clobbering it and all of its\r\n\t\t//\t\tchildren. Function only works with DomNodes, and returns nothing.\r\n\t\t//\r\n\t\t// node: DOMNode|String\r\n\t\t//\t\tA String ID or DomNode reference of the element to be destroyed\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tDestroy a node byId:\r\n\t\t//\t|\trequire([\"dojo/dom-construct\"], function(domConstruct){\r\n\t\t//\t|\t\tdomConstruct.destroy(\"someId\");\r\n\t\t//\t|\t});\r\n\r\n\t\tnode = dom.byId(node);\r\n\t\tif(!node){ return; }\r\n\t\t_destroy(node, node.parentNode);\r\n\t};\r\n});\r\n\ndefine('dojo/_base/url',[\"./kernel\"], function(dojo){\r\n\t// module:\r\n\t//\t\tdojo/url\r\n\r\n\tvar\r\n\t\tore = new RegExp(\"^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\\\?([^#]*))?(#(.*))?$\"),\r\n\t\tire = new RegExp(\"^((([^\\\\[:]+):)?([^@]+)@)?(\\\\[([^\\\\]]+)\\\\]|([^\\\\[:]*))(:([0-9]+))?$\"),\r\n\t\t_Url = function(){\r\n\t\t\tvar n = null,\r\n\t\t\t\t_a = arguments,\r\n\t\t\t\turi = [_a[0]];\r\n\t\t\t// resolve uri components relative to each other\r\n\t\t\tfor(var i = 1; i<_a.length; i++){\r\n\t\t\t\tif(!_a[i]){ continue; }\r\n\r\n\t\t\t\t// Safari doesn't support this.constructor so we have to be explicit\r\n\t\t\t\t// FIXME: Tracked (and fixed) in Webkit bug 3537.\r\n\t\t\t\t//\t\thttp://bugs.webkit.org/show_bug.cgi?id=3537\r\n\t\t\t\tvar relobj = new _Url(_a[i]+\"\"),\r\n\t\t\t\t\turiobj = new _Url(uri[0]+\"\");\r\n\r\n\t\t\t\tif(\r\n\t\t\t\t\trelobj.path == \"\" &&\r\n\t\t\t\t\t!relobj.scheme &&\r\n\t\t\t\t\t!relobj.authority &&\r\n\t\t\t\t\t!relobj.query\r\n\t\t\t\t){\r\n\t\t\t\t\tif(relobj.fragment != n){\r\n\t\t\t\t\t\turiobj.fragment = relobj.fragment;\r\n\t\t\t\t\t}\r\n\t\t\t\t\trelobj = uriobj;\r\n\t\t\t\t}else if(!relobj.scheme){\r\n\t\t\t\t\trelobj.scheme = uriobj.scheme;\r\n\r\n\t\t\t\t\tif(!relobj.authority){\r\n\t\t\t\t\t\trelobj.authority = uriobj.authority;\r\n\r\n\t\t\t\t\t\tif(relobj.path.charAt(0) != \"/\"){\r\n\t\t\t\t\t\t\tvar path = uriobj.path.substring(0,\r\n\t\t\t\t\t\t\t\turiobj.path.lastIndexOf(\"/\") + 1) + relobj.path;\r\n\r\n\t\t\t\t\t\t\tvar segs = path.split(\"/\");\r\n\t\t\t\t\t\t\tfor(var j = 0; j < segs.length; j++){\r\n\t\t\t\t\t\t\t\tif(segs[j] == \".\"){\r\n\t\t\t\t\t\t\t\t\t// flatten \"./\" references\r\n\t\t\t\t\t\t\t\t\tif(j == segs.length - 1){\r\n\t\t\t\t\t\t\t\t\t\tsegs[j] = \"\";\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tsegs.splice(j, 1);\r\n\t\t\t\t\t\t\t\t\t\tj--;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}else if(j > 0 && !(j == 1 && segs[0] == \"\") &&\r\n\t\t\t\t\t\t\t\t\tsegs[j] == \"..\" && segs[j-1] != \"..\"){\r\n\t\t\t\t\t\t\t\t\t// flatten \"../\" references\r\n\t\t\t\t\t\t\t\t\tif(j == (segs.length - 1)){\r\n\t\t\t\t\t\t\t\t\t\tsegs.splice(j, 1);\r\n\t\t\t\t\t\t\t\t\t\tsegs[j - 1] = \"\";\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tsegs.splice(j - 1, 2);\r\n\t\t\t\t\t\t\t\t\t\tj -= 2;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\trelobj.path = segs.join(\"/\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\turi = [];\r\n\t\t\t\tif(relobj.scheme){\r\n\t\t\t\t\turi.push(relobj.scheme, \":\");\r\n\t\t\t\t}\r\n\t\t\t\tif(relobj.authority){\r\n\t\t\t\t\turi.push(\"//\", relobj.authority);\r\n\t\t\t\t}\r\n\t\t\t\turi.push(relobj.path);\r\n\t\t\t\tif(relobj.query){\r\n\t\t\t\t\turi.push(\"?\", relobj.query);\r\n\t\t\t\t}\r\n\t\t\t\tif(relobj.fragment){\r\n\t\t\t\t\turi.push(\"#\", relobj.fragment);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.uri = uri.join(\"\");\r\n\r\n\t\t\t// break the uri into its main components\r\n\t\t\tvar r = this.uri.match(ore);\r\n\r\n\t\t\tthis.scheme = r[2] || (r[1] ? \"\" : n);\r\n\t\t\tthis.authority = r[4] || (r[3] ? \"\" : n);\r\n\t\t\tthis.path = r[5]; // can never be undefined\r\n\t\t\tthis.query = r[7] || (r[6] ? \"\" : n);\r\n\t\t\tthis.fragment\t = r[9] || (r[8] ? \"\" : n);\r\n\r\n\t\t\tif(this.authority != n){\r\n\t\t\t\t// server based naming authority\r\n\t\t\t\tr = this.authority.match(ire);\r\n\r\n\t\t\t\tthis.user = r[3] || n;\r\n\t\t\t\tthis.password = r[4] || n;\r\n\t\t\t\tthis.host = r[6] || r[7]; // ipv6 || ipv4\r\n\t\t\t\tthis.port = r[9] || n;\r\n\t\t\t}\r\n\t\t};\r\n\t_Url.prototype.toString = function(){ return this.uri; };\r\n\r\n\treturn dojo._Url = _Url;\r\n});\r\n\ndefine('dojo/promise/all',[\r\n\t\"../_base/array\",\r\n\t\"../Deferred\",\r\n\t\"../when\"\r\n], function(array, Deferred, when){\r\n\t\"use strict\";\r\n\r\n\t// module:\r\n\t//\t\tdojo/promise/all\r\n\r\n\tvar some = array.some;\r\n\r\n\treturn function all(objectOrArray){\r\n\t\t// summary:\r\n\t\t//\t\tTakes multiple promises and returns a new promise that is fulfilled\r\n\t\t//\t\twhen all promises have been resolved or one has been rejected.\r\n\t\t// description:\r\n\t\t//\t\tTakes multiple promises and returns a new promise that is fulfilled\r\n\t\t//\t\twhen all promises have been resolved or one has been rejected. If one of\r\n\t\t//\t\tthe promises is rejected, the returned promise is also rejected. Canceling\r\n\t\t//\t\tthe returned promise will *not* cancel any passed promises.\r\n\t\t// objectOrArray: Object|Array?\r\n\t\t//\t\tThe promise will be fulfilled with a list of results if invoked with an\r\n\t\t//\t\tarray, or an object of results when passed an object (using the same\r\n\t\t//\t\tkeys). If passed neither an object or array it is resolved with an\r\n\t\t//\t\tundefined value.\r\n\t\t// returns: dojo/promise/Promise\r\n\r\n\t\tvar object, array;\r\n\t\tif(objectOrArray instanceof Array){\r\n\t\t\tarray = objectOrArray;\r\n\t\t}else if(objectOrArray && typeof objectOrArray === \"object\"){\r\n\t\t\tobject = objectOrArray;\r\n\t\t}\r\n\r\n\t\tvar results;\r\n\t\tvar keyLookup = [];\r\n\t\tif(object){\r\n\t\t\tarray = [];\r\n\t\t\tfor(var key in object){\r\n\t\t\t\tif(Object.hasOwnProperty.call(object, key)){\r\n\t\t\t\t\tkeyLookup.push(key);\r\n\t\t\t\t\tarray.push(object[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresults = {};\r\n\t\t}else if(array){\r\n\t\t\tresults = [];\r\n\t\t}\r\n\r\n\t\tif(!array || !array.length){\r\n\t\t\treturn new Deferred().resolve(results);\r\n\t\t}\r\n\r\n\t\tvar deferred = new Deferred();\r\n\t\tdeferred.promise.always(function(){\r\n\t\t\tresults = keyLookup = null;\r\n\t\t});\r\n\t\tvar waiting = array.length;\r\n\t\tsome(array, function(valueOrPromise, index){\r\n\t\t\tif(!object){\r\n\t\t\t\tkeyLookup.push(index);\r\n\t\t\t}\r\n\t\t\twhen(valueOrPromise, function(value){\r\n\t\t\t\tif(!deferred.isFulfilled()){\r\n\t\t\t\t\tresults[keyLookup[index]] = value;\r\n\t\t\t\t\tif(--waiting === 0){\r\n\t\t\t\t\t\tdeferred.resolve(results);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, deferred.reject);\r\n\t\t\treturn deferred.isFulfilled();\r\n\t\t});\r\n\t\treturn deferred.promise;\t// dojo/promise/Promise\r\n\t};\r\n});\r\n\ndefine('dojo/date/stamp',[\"../_base/lang\", \"../_base/array\"], function(lang, array){\r\n\r\n// module:\r\n//\t\tdojo/date/stamp\r\n\r\nvar stamp = {\r\n\t// summary:\r\n\t//\t\tTODOC\r\n};\r\nlang.setObject(\"dojo.date.stamp\", stamp);\r\n\r\n// Methods to convert dates to or from a wire (string) format using well-known conventions\r\n\r\nstamp.fromISOString = function(/*String*/ formattedString, /*Number?*/ defaultTime){\r\n\t// summary:\r\n\t//\t\tReturns a Date object given a string formatted according to a subset of the ISO-8601 standard.\r\n\t//\r\n\t// description:\r\n\t//\t\tAccepts a string formatted according to a profile of ISO8601 as defined by\r\n\t//\t\t[RFC3339](http://www.ietf.org/rfc/rfc3339.txt), except that partial input is allowed.\r\n\t//\t\tCan also process dates as specified [by the W3C](http://www.w3.org/TR/NOTE-datetime)\r\n\t//\t\tThe following combinations are valid:\r\n\t//\r\n\t//\t\t- dates only\r\n\t//\t\t\t- yyyy\r\n\t//\t\t\t- yyyy-MM\r\n\t//\t\t\t- yyyy-MM-dd\r\n\t//\t\t- times only, with an optional time zone appended\r\n\t//\t\t\t- THH:mm\r\n\t//\t\t\t- THH:mm:ss\r\n\t//\t\t\t- THH:mm:ss.SSS\r\n\t//\t\t- and \"datetimes\" which could be any combination of the above\r\n\t//\r\n\t//\t\ttimezones may be specified as Z (for UTC) or +/- followed by a time expression HH:mm\r\n\t//\t\tAssumes the local time zone if not specified.  Does not validate.  Improperly formatted\r\n\t//\t\tinput may return null.  Arguments which are out of bounds will be handled\r\n\t//\t\tby the Date constructor (e.g. January 32nd typically gets resolved to February 1st)\r\n\t//\t\tOnly years between 100 and 9999 are supported.\r\n  \t// formattedString:\r\n\t//\t\tA string such as 2005-06-30T08:05:00-07:00 or 2005-06-30 or T08:05:00\r\n\t// defaultTime:\r\n\t//\t\tUsed for defaults for fields omitted in the formattedString.\r\n\t//\t\tUses 1970-01-01T00:00:00.0Z by default.\r\n\r\n\tif(!stamp._isoRegExp){\r\n\t\tstamp._isoRegExp =\r\n//TODO: could be more restrictive and check for 00-59, etc.\r\n\t\t\t/^(?:(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?)?(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(.\\d+)?)?((?:[+-](\\d{2}):(\\d{2}))|Z)?)?$/;\r\n\t}\r\n\r\n\tvar match = stamp._isoRegExp.exec(formattedString),\r\n\t\tresult = null;\r\n\r\n\tif(match){\r\n\t\tmatch.shift();\r\n\t\tif(match[1]){match[1]--;} // Javascript Date months are 0-based\r\n\t\tif(match[6]){match[6] *= 1000;} // Javascript Date expects fractional seconds as milliseconds\r\n\r\n\t\tif(defaultTime){\r\n\t\t\t// mix in defaultTime.  Relatively expensive, so use || operators for the fast path of defaultTime === 0\r\n\t\t\tdefaultTime = new Date(defaultTime);\r\n\t\t\tarray.forEach(array.map([\"FullYear\", \"Month\", \"Date\", \"Hours\", \"Minutes\", \"Seconds\", \"Milliseconds\"], function(prop){\r\n\t\t\t\treturn defaultTime[\"get\" + prop]();\r\n\t\t\t}), function(value, index){\r\n\t\t\t\tmatch[index] = match[index] || value;\r\n\t\t\t});\r\n\t\t}\r\n\t\tresult = new Date(match[0]||1970, match[1]||0, match[2]||1, match[3]||0, match[4]||0, match[5]||0, match[6]||0); //TODO: UTC defaults\r\n\t\tif(match[0] < 100){\r\n\t\t\tresult.setFullYear(match[0] || 1970);\r\n\t\t}\r\n\r\n\t\tvar offset = 0,\r\n\t\t\tzoneSign = match[7] && match[7].charAt(0);\r\n\t\tif(zoneSign != 'Z'){\r\n\t\t\toffset = ((match[8] || 0) * 60) + (Number(match[9]) || 0);\r\n\t\t\tif(zoneSign != '-'){ offset *= -1; }\r\n\t\t}\r\n\t\tif(zoneSign){\r\n\t\t\toffset -= result.getTimezoneOffset();\r\n\t\t}\r\n\t\tif(offset){\r\n\t\t\tresult.setTime(result.getTime() + offset * 60000);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result; // Date or null\r\n};\r\n\r\n/*=====\r\nvar __Options = {\r\n\t// selector: String\r\n\t//\t\t\"date\" or \"time\" for partial formatting of the Date object.\r\n\t//\t\tBoth date and time will be formatted by default.\r\n\t// zulu: Boolean\r\n\t//\t\tif true, UTC/GMT is used for a timezone\r\n\t// milliseconds: Boolean\r\n\t//\t\tif true, output milliseconds\r\n};\r\n=====*/\r\n\r\nstamp.toISOString = function(/*Date*/ dateObject, /*__Options?*/ options){\r\n\t// summary:\r\n\t//\t\tFormat a Date object as a string according a subset of the ISO-8601 standard\r\n\t//\r\n\t// description:\r\n\t//\t\tWhen options.selector is omitted, output follows [RFC3339](http://www.ietf.org/rfc/rfc3339.txt)\r\n\t//\t\tThe local time zone is included as an offset from GMT, except when selector=='time' (time without a date)\r\n\t//\t\tDoes not check bounds.  Only years between 100 and 9999 are supported.\r\n\t//\r\n\t// dateObject:\r\n\t//\t\tA Date object\r\n\r\n\tvar _ = function(n){ return (n < 10) ? \"0\" + n : n; };\r\n\toptions = options || {};\r\n\tvar formattedDate = [],\r\n\t\tgetter = options.zulu ? \"getUTC\" : \"get\",\r\n\t\tdate = \"\";\r\n\tif(options.selector != \"time\"){\r\n\t\tvar year = dateObject[getter+\"FullYear\"]();\r\n\t\tdate = [\"0000\".substr((year+\"\").length)+year, _(dateObject[getter+\"Month\"]()+1), _(dateObject[getter+\"Date\"]())].join('-');\r\n\t}\r\n\tformattedDate.push(date);\r\n\tif(options.selector != \"date\"){\r\n\t\tvar time = [_(dateObject[getter+\"Hours\"]()), _(dateObject[getter+\"Minutes\"]()), _(dateObject[getter+\"Seconds\"]())].join(':');\r\n\t\tvar millis = dateObject[getter+\"Milliseconds\"]();\r\n\t\tif(options.milliseconds){\r\n\t\t\ttime += \".\"+ (millis < 100 ? \"0\" : \"\") + _(millis);\r\n\t\t}\r\n\t\tif(options.zulu){\r\n\t\t\ttime += \"Z\";\r\n\t\t}else if(options.selector != \"time\"){\r\n\t\t\tvar timezoneOffset = dateObject.getTimezoneOffset();\r\n\t\t\tvar absOffset = Math.abs(timezoneOffset);\r\n\t\t\ttime += (timezoneOffset > 0 ? \"-\" : \"+\") +\r\n\t\t\t\t_(Math.floor(absOffset/60)) + \":\" + _(absOffset%60);\r\n\t\t}\r\n\t\tformattedDate.push(time);\r\n\t}\r\n\treturn formattedDate.join('T'); // String\r\n};\r\n\r\nreturn stamp;\r\n});\r\n\ndefine('dojo/selector/_loader',[\"../has\", \"require\",\"module\"],function(has, require,module){\r\n\r\n\r\n\r\n\tif (require.isBrowser===false) { // for build,will be changed with better implementation. by LWF\r\n\r\n\t\treturn {\r\n\t        load: function (name, req, onLoad, config) {\r\n\t            onLoad();\r\n\t        }\t\t\t\r\n\t\t};\r\n\t}\r\n\r\n\r\nvar testDiv = document.createElement(\"div\");\r\nhas.add(\"dom-qsa2.1\", !!testDiv.querySelectorAll);\r\nhas.add(\"dom-qsa3\", function(){\r\n\t\t\t// test to see if we have a reasonable native selector engine available\r\n\t\t\ttry{\r\n\t\t\t\ttestDiv.innerHTML = \"<p class='TEST'></p>\"; // test kind of from sizzle\r\n\t\t\t\t// Safari can't handle uppercase or unicode characters when\r\n\t\t\t\t// in quirks mode, IE8 can't handle pseudos like :empty\r\n\t\t\t\treturn testDiv.querySelectorAll(\".TEST:empty\").length == 1;\r\n\t\t\t}catch(e){}\r\n\t\t});\r\n\r\nvar fullEngine;\r\nvar acme = \"./acme\", lite = \"./lite\";\r\nreturn {\r\n\t// summary:\r\n\t//\t\tThis module handles loading the appropriate selector engine for the given browser\r\n\r\n\tload: function(id, parentRequire, loaded, config){\r\n\t\tvar req = require;\r\n\t\t// here we implement the default logic for choosing a selector engine\r\n\t\tid = id == \"default\" ? has(\"config-selectorEngine\") || \"css3\" : id;\r\n\t\tid = id == \"css2\" || id == \"lite\" ? lite :\r\n\t\t\t\tid == \"css2.1\" ? has(\"dom-qsa2.1\") ? lite : acme :\r\n\t\t\t\tid == \"css3\" ? has(\"dom-qsa3\") ? lite : acme :\r\n\t\t\t\tid == \"acme\" ? acme : (req = parentRequire) && id;\r\n\t\tif(id.charAt(id.length-1) == '?'){\r\n\t\t\tid = id.substring(0,id.length - 1);\r\n\t\t\tvar optionalLoad = true;\r\n\t\t}\r\n\t\t// the query engine is optional, only load it if a native one is not available or existing one has not been loaded\r\n\t\tif(optionalLoad && (has(\"dom-compliant-qsa\") || fullEngine)){\r\n\t\t\treturn loaded(fullEngine);\r\n\t\t}\r\n\t\t// load the referenced selector engine\r\n\t\treq([id], function(engine){\r\n\t\t\tif(id != \"./lite\"){\r\n\t\t\t\tfullEngine = engine;\r\n\t\t\t}\r\n\t\t\tloaded(engine);\r\n\t\t});\r\n\t}\r\n};\r\n});\r\n\n\ndefine('dojo/query',[\"./_base/kernel\", \"./has\", \"./dom\", \"./on\", \"./_base/array\", \"./_base/lang\", \"./selector/_loader\", \"./selector/_loader!default\"],\r\n\tfunction(dojo, has, dom, on, array, lang, loader, defaultEngine){\r\n\r\n\t\"use strict\";\r\n\r\n\thas.add(\"array-extensible\", function(){\r\n\t\t// test to see if we can extend an array (not supported in old IE)\r\n\t\treturn lang.delegate([], {length: 1}).length == 1 && !has(\"bug-for-in-skips-shadowed\");\r\n\t});\r\n\t\r\n\tvar ap = Array.prototype, aps = ap.slice, apc = ap.concat, forEach = array.forEach;\r\n\r\n\tvar tnl = function(/*Array*/ a, /*dojo/NodeList?*/ parent, /*Function?*/ NodeListCtor){\r\n\t\t// summary:\r\n\t\t//\t\tdecorate an array to make it look like a `dojo/NodeList`.\r\n\t\t// a:\r\n\t\t//\t\tArray of nodes to decorate.\r\n\t\t// parent:\r\n\t\t//\t\tAn optional parent NodeList that generated the current\r\n\t\t//\t\tlist of nodes. Used to call _stash() so the parent NodeList\r\n\t\t//\t\tcan be accessed via end() later.\r\n\t\t// NodeListCtor:\r\n\t\t//\t\tAn optional constructor function to use for any\r\n\t\t//\t\tnew NodeList calls. This allows a certain chain of\r\n\t\t//\t\tNodeList calls to use a different object than dojo/NodeList.\r\n\t\tvar nodeList = new (NodeListCtor || this._NodeListCtor || nl)(a);\r\n\t\treturn parent ? nodeList._stash(parent) : nodeList;\r\n\t};\r\n\r\n\tvar loopBody = function(f, a, o){\r\n\t\ta = [0].concat(aps.call(a, 0));\r\n\t\to = o || dojo.global;\r\n\t\treturn function(node){\r\n\t\t\ta[0] = node;\r\n\t\t\treturn f.apply(o, a);\r\n\t\t};\r\n\t};\r\n\r\n\t// adapters\r\n\r\n\tvar adaptAsForEach = function(f, o){\r\n\t\t// summary:\r\n\t\t//\t\tadapts a single node function to be used in the forEach-type\r\n\t\t//\t\tactions. The initial object is returned from the specialized\r\n\t\t//\t\tfunction.\r\n\t\t// f: Function\r\n\t\t//\t\ta function to adapt\r\n\t\t// o: Object?\r\n\t\t//\t\tan optional context for f\r\n\t\treturn function(){\r\n\t\t\tthis.forEach(loopBody(f, arguments, o));\r\n\t\t\treturn this;\t// Object\r\n\t\t};\r\n\t};\r\n\r\n\tvar adaptAsMap = function(f, o){\r\n\t\t// summary:\r\n\t\t//\t\tadapts a single node function to be used in the map-type\r\n\t\t//\t\tactions. The return is a new array of values, as via `dojo/_base/array.map`\r\n\t\t// f: Function\r\n\t\t//\t\ta function to adapt\r\n\t\t// o: Object?\r\n\t\t//\t\tan optional context for f\r\n\t\treturn function(){\r\n\t\t\treturn this.map(loopBody(f, arguments, o));\r\n\t\t};\r\n\t};\r\n\r\n\tvar adaptAsFilter = function(f, o){\r\n\t\t// summary:\r\n\t\t//\t\tadapts a single node function to be used in the filter-type actions\r\n\t\t// f: Function\r\n\t\t//\t\ta function to adapt\r\n\t\t// o: Object?\r\n\t\t//\t\tan optional context for f\r\n\t\treturn function(){\r\n\t\t\treturn this.filter(loopBody(f, arguments, o));\r\n\t\t};\r\n\t};\r\n\r\n\tvar adaptWithCondition = function(f, g, o){\r\n\t\t// summary:\r\n\t\t//\t\tadapts a single node function to be used in the map-type\r\n\t\t//\t\tactions, behaves like forEach() or map() depending on arguments\r\n\t\t// f: Function\r\n\t\t//\t\ta function to adapt\r\n\t\t// g: Function\r\n\t\t//\t\ta condition function, if true runs as map(), otherwise runs as forEach()\r\n\t\t// o: Object?\r\n\t\t//\t\tan optional context for f and g\r\n\t\treturn function(){\r\n\t\t\tvar a = arguments, body = loopBody(f, a, o);\r\n\t\t\tif(g.call(o || dojo.global, a)){\r\n\t\t\t\treturn this.map(body);\t// self\r\n\t\t\t}\r\n\t\t\tthis.forEach(body);\r\n\t\t\treturn this;\t// self\r\n\t\t};\r\n\t};\r\n\r\n\tvar NodeList = function(array){\r\n\t\t// summary:\r\n\t\t//\t\tArray-like object which adds syntactic\r\n\t\t//\t\tsugar for chaining, common iteration operations, animation, and\r\n\t\t//\t\tnode manipulation. NodeLists are most often returned as the\r\n\t\t//\t\tresult of dojo/query() calls.\r\n\t\t// description:\r\n\t\t//\t\tNodeList instances provide many utilities that reflect\r\n\t\t//\t\tcore Dojo APIs for Array iteration and manipulation, DOM\r\n\t\t//\t\tmanipulation, and event handling. Instead of needing to dig up\r\n\t\t//\t\tfunctions in the dojo package, NodeLists generally make the\r\n\t\t//\t\tfull power of Dojo available for DOM manipulation tasks in a\r\n\t\t//\t\tsimple, chainable way.\r\n\t\t// example:\r\n\t\t//\t\tcreate a node list from a node\r\n\t\t//\t\t|\trequire([\"dojo/query\", \"dojo/dom\"\r\n\t\t//\t\t|\t], function(query, dom){\r\n\t\t//\t\t|\t\tquery.NodeList(dom.byId(\"foo\"));\r\n\t\t//\t\t|\t});\r\n\t\t// example:\r\n\t\t//\t\tget a NodeList from a CSS query and iterate on it\r\n\t\t//\t\t|\trequire([\"dojo/on\", \"dojo/dom\"\r\n\t\t//\t\t|\t], function(on, dom){\r\n\t\t//\t\t|\t\tvar l = query(\".thinger\");\r\n\t\t//\t\t|\t\tl.forEach(function(node, index, nodeList){\r\n\t\t//\t\t|\t\t\tconsole.log(index, node.innerHTML);\r\n\t\t//\t\t|\t\t});\r\n\t\t//\t\t|\t});\r\n\t\t// example:\r\n\t\t//\t\tuse native and Dojo-provided array methods to manipulate a\r\n\t\t//\t\tNodeList without needing to use dojo.* functions explicitly:\r\n\t\t//\t\t|\trequire([\"dojo/query\", \"dojo/dom-construct\", \"dojo/dom\"\r\n\t\t//\t\t|\t], function(query, domConstruct, dom){\r\n\t\t//\t\t|\t\tvar l = query(\".thinger\");\r\n\t\t//\t\t|\t\t// since NodeLists are real arrays, they have a length\r\n\t\t//\t\t|\t\t// property that is both readable and writable and\r\n\t\t//\t\t|\t\t// push/pop/shift/unshift methods\r\n\t\t//\t\t|\t\tconsole.log(l.length);\r\n\t\t//\t\t|\t\tl.push(domConstruct.create(\"span\"));\r\n\t\t//\t\t|\r\n\t\t//\t\t|\t\t// dojo's normalized array methods work too:\r\n\t\t//\t\t|\t\tconsole.log( l.indexOf(dom.byId(\"foo\")) );\r\n\t\t//\t\t|\t\t// ...including the special \"function as string\" shorthand\r\n\t\t//\t\t|\t\tconsole.log( l.every(\"item.nodeType == 1\") );\r\n\t\t//\t\t|\r\n\t\t//\t\t|\t\t// NodeLists can be [..] indexed, or you can use the at()\r\n\t\t//\t\t|\t\t// function to get specific items wrapped in a new NodeList:\r\n\t\t//\t\t|\t\tvar node = l[3]; // the 4th element\r\n\t\t//\t\t|\t\tvar newList = l.at(1, 3); // the 2nd and 4th elements\r\n\t\t//\t\t|\t});\r\n\t\t// example:\r\n\t\t//\t\tchainability is a key advantage of NodeLists:\r\n\t\t//\t\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t//\t\t|\t], function(query){\r\n\t\t//\t\t|\t\tquery(\".thinger\")\r\n\t\t//\t\t|\t\t\t.onclick(function(e){ /* ... */ })\r\n\t\t//\t\t|\t\t\t.at(1, 3, 8) // get a subset\r\n\t\t//\t\t|\t\t\t\t.style(\"padding\", \"5px\")\r\n\t\t//\t\t|\t\t\t\t.forEach(console.log);\r\n\t\t//\t\t|\t});\r\n\r\n\t\tvar isNew = this instanceof nl && has(\"array-extensible\");\r\n\t\tif(typeof array == \"number\"){\r\n\t\t\tarray = Array(array);\r\n\t\t}\r\n\t\tvar nodeArray = (array && \"length\" in array) ? array : arguments;\r\n\t\tif(isNew || !nodeArray.sort){\r\n\t\t\t// make sure it's a real array before we pass it on to be wrapped \r\n\t\t\tvar target = isNew ? this : [],\r\n\t\t\t\tl = target.length = nodeArray.length;\r\n\t\t\tfor(var i = 0; i < l; i++){\r\n\t\t\t\ttarget[i] = nodeArray[i];\r\n\t\t\t}\r\n\t\t\tif(isNew){\r\n\t\t\t\t// called with new operator, this means we are going to use this instance and push\r\n\t\t\t\t// the nodes on to it. This is usually much faster since the NodeList properties\r\n\t\t\t\t//\tdon't need to be copied (unless the list of nodes is extremely large).\r\n\t\t\t\treturn target;\r\n\t\t\t}\r\n\t\t\tnodeArray = target;\r\n\t\t}\r\n\t\t// called without new operator, use a real array and copy prototype properties,\r\n\t\t// this is slower and exists for back-compat. Should be removed in 2.0.\r\n\t\tlang._mixin(nodeArray, nlp);\r\n\t\tnodeArray._NodeListCtor = function(array){\r\n\t\t\t// call without new operator to preserve back-compat behavior\r\n\t\t\treturn nl(array);\r\n\t\t};\r\n\t\treturn nodeArray;\r\n\t};\r\n\t\r\n\tvar nl = NodeList, nlp = nl.prototype = \r\n\t\thas(\"array-extensible\") ? [] : {};// extend an array if it is extensible\r\n\r\n\t// expose adapters and the wrapper as private functions\r\n\r\n\tnl._wrap = nlp._wrap = tnl;\r\n\tnl._adaptAsMap = adaptAsMap;\r\n\tnl._adaptAsForEach = adaptAsForEach;\r\n\tnl._adaptAsFilter  = adaptAsFilter;\r\n\tnl._adaptWithCondition = adaptWithCondition;\r\n\r\n\t// mass assignment\r\n\r\n\t// add array redirectors\r\n\tforEach([\"slice\", \"splice\"], function(name){\r\n\t\tvar f = ap[name];\r\n\t\t//Use a copy of the this array via this.slice() to allow .end() to work right in the splice case.\r\n\t\t// CANNOT apply ._stash()/end() to splice since it currently modifies\r\n\t\t// the existing this array -- it would break backward compatibility if we copy the array before\r\n\t\t// the splice so that we can use .end(). So only doing the stash option to this._wrap for slice.\r\n\t\tnlp[name] = function(){ return this._wrap(f.apply(this, arguments), name == \"slice\" ? this : null); };\r\n\t});\r\n\t// concat should be here but some browsers with native NodeList have problems with it\r\n\r\n\t// add array.js redirectors\r\n\tforEach([\"indexOf\", \"lastIndexOf\", \"every\", \"some\"], function(name){\r\n\t\tvar f = array[name];\r\n\t\tnlp[name] = function(){ return f.apply(dojo, [this].concat(aps.call(arguments, 0))); };\r\n\t});\r\n\r\n\tlang.extend(NodeList, {\r\n\t\t// copy the constructors\r\n\t\tconstructor: nl,\r\n\t\t_NodeListCtor: nl,\r\n\t\ttoString: function(){\r\n\t\t\t// Array.prototype.toString can't be applied to objects, so we use join\r\n\t\t\treturn this.join(\",\");\r\n\t\t},\r\n\t\t_stash: function(parent){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tprivate function to hold to a parent NodeList. end() to return the parent NodeList.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tHow to make a `dojo/NodeList` method that only returns the third node in\r\n\t\t\t//\t\tthe dojo/NodeList but allows access to the original NodeList by using this._stash:\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/_base/lang\", \"dojo/NodeList\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(query, lang){\r\n\t\t\t//\t|\t\tlang.extend(NodeList, {\r\n\t\t\t//\t|\t\t\tthird: function(){\r\n\t\t\t//\t|\t\t\t\tvar newNodeList = NodeList(this[2]);\r\n\t\t\t//\t|\t\t\t\treturn newNodeList._stash(this);\r\n\t\t\t//\t|\t\t\t}\r\n\t\t\t//\t|\t\t});\r\n\t\t\t//\t|\t\t// then see how _stash applies a sub-list, to be .end()'ed out of\r\n\t\t\t//\t|\t\tquery(\".foo\")\r\n\t\t\t//\t|\t\t\t.third()\r\n\t\t\t//\t|\t\t\t\t.addClass(\"thirdFoo\")\r\n\t\t\t//\t|\t\t\t.end()\r\n\t\t\t//\t|\t\t\t// access to the orig .foo list\r\n\t\t\t//\t|\t\t\t.removeClass(\"foo\")\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\tthis._parent = parent;\r\n\t\t\treturn this; // dojo/NodeList\r\n\t\t},\r\n\r\n\t\ton: function(eventName, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tListen for events on the nodes in the NodeList. Basic usage is:\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\t|\trequire([\"dojo/query\"\r\n\t\t\t//\t\t|\t], function(query){\r\n\t\t\t//\t\t|\t\tquery(\".my-class\").on(\"click\", listener);\r\n\t\t\t//\t\t\tThis supports event delegation by using selectors as the first argument with the event names as\r\n\t\t\t//\t\t\tpseudo selectors. For example:\r\n\t\t\t//\t\t| \t\tquery(\"#my-list\").on(\"li:click\", listener);\r\n\t\t\t//\t\t\tThis will listen for click events within `<li>` elements that are inside the `#my-list` element.\r\n\t\t\t//\t\t\tBecause on supports CSS selector syntax, we can use comma-delimited events as well:\r\n\t\t\t//\t\t| \t\tquery(\"#my-list\").on(\"li button:mouseover, li:click\", listener);\r\n\t\t\t//\t\t|\t});\r\n\t\t\tvar handles = this.map(function(node){\r\n\t\t\t\treturn on(node, eventName, listener); // TODO: apply to the NodeList so the same selector engine is used for matches\r\n\t\t\t});\r\n\t\t\thandles.remove = function(){\r\n\t\t\t\tfor(var i = 0; i < handles.length; i++){\r\n\t\t\t\t\thandles[i].remove();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn handles;\r\n\t\t},\r\n\r\n\t\tend: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tEnds use of the current `NodeList` by returning the previous NodeList\r\n\t\t\t//\t\tthat generated the current NodeList.\r\n\t\t\t// description:\r\n\t\t\t//\t\tReturns the `NodeList` that generated the current `NodeList`. If there\r\n\t\t\t//\t\tis no parent NodeList, an empty NodeList is returned.\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(query){\r\n\t\t\t//\t|\t\tquery(\"a\")\r\n\t\t\t//\t|\t\t\t.filter(\".disabled\")\r\n\t\t\t//\t|\t\t\t\t// operate on the anchors that only have a disabled class\r\n\t\t\t//\t|\t\t\t\t.style(\"color\", \"grey\")\r\n\t\t\t//\t|\t\t\t.end()\r\n\t\t\t//\t|\t\t\t// jump back to the list of anchors\r\n\t\t\t//\t|\t\t\t.style(...)\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\tif(this._parent){\r\n\t\t\t\treturn this._parent;\r\n\t\t\t}else{\r\n\t\t\t\t//Just return empty list.\r\n\t\t\t\treturn new this._NodeListCtor(0);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:Array#Methods\r\n\r\n\t\t// FIXME: handle return values for #3244\r\n\t\t//\t\thttp://trac.dojotoolkit.org/ticket/3244\r\n\r\n\t\t// FIXME:\r\n\t\t//\t\tneed to wrap or implement:\r\n\t\t//\t\t\tjoin (perhaps w/ innerHTML/outerHTML overload for toString() of items?)\r\n\t\t//\t\t\treduce\r\n\t\t//\t\t\treduceRight\r\n\r\n\t\t/*=====\r\n\t\tslice: function(begin, end){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a new NodeList, maintaining this one in place\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis method behaves exactly like the Array.slice method\r\n\t\t\t//\t\twith the caveat that it returns a `dojo/NodeList` and not a\r\n\t\t\t//\t\traw Array. For more details, see Mozilla's [slice\r\n\t\t\t//\t\tdocumentation](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)\r\n\t\t\t// begin: Integer\r\n\t\t\t//\t\tCan be a positive or negative integer, with positive\r\n\t\t\t//\t\tintegers noting the offset to begin at, and negative\r\n\t\t\t//\t\tintegers denoting an offset from the end (i.e., to the left\r\n\t\t\t//\t\tof the end)\r\n\t\t\t// end: Integer?\r\n\t\t\t//\t\tOptional parameter to describe what position relative to\r\n\t\t\t//\t\tthe NodeList's zero index to end the slice at. Like begin,\r\n\t\t\t//\t\tcan be positive or negative.\r\n\t\t\treturn this._wrap(a.slice.apply(this, arguments));\r\n\t\t},\r\n\r\n\t\tsplice: function(index, howmany, item){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a new NodeList, manipulating this NodeList based on\r\n\t\t\t//\t\tthe arguments passed, potentially splicing in new elements\r\n\t\t\t//\t\tat an offset, optionally deleting elements\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis method behaves exactly like the Array.splice method\r\n\t\t\t//\t\twith the caveat that it returns a `dojo/NodeList` and not a\r\n\t\t\t//\t\traw Array. For more details, see Mozilla's [splice\r\n\t\t\t//\t\tdocumentation](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)\r\n\t\t\t//\t\tFor backwards compatibility, calling .end() on the spliced NodeList\r\n\t\t\t//\t\tdoes not return the original NodeList -- splice alters the NodeList in place.\r\n\t\t\t// index: Integer\r\n\t\t\t//\t\tbegin can be a positive or negative integer, with positive\r\n\t\t\t//\t\tintegers noting the offset to begin at, and negative\r\n\t\t\t//\t\tintegers denoting an offset from the end (i.e., to the left\r\n\t\t\t//\t\tof the end)\r\n\t\t\t// howmany: Integer?\r\n\t\t\t//\t\tOptional parameter to describe what position relative to\r\n\t\t\t//\t\tthe NodeList's zero index to end the slice at. Like begin,\r\n\t\t\t//\t\tcan be positive or negative.\r\n\t\t\t// item: Object...?\r\n\t\t\t//\t\tAny number of optional parameters may be passed in to be\r\n\t\t\t//\t\tspliced into the NodeList\r\n\t\t\treturn this._wrap(a.splice.apply(this, arguments));\t// dojo/NodeList\r\n\t\t},\r\n\r\n\t\tindexOf: function(value, fromIndex){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tsee `dojo/_base/array.indexOf()`. The primary difference is that the acted-on\r\n\t\t\t//\t\tarray is implicitly this NodeList\r\n\t\t\t// value: Object\r\n\t\t\t//\t\tThe value to search for.\r\n\t\t\t// fromIndex: Integer?\r\n\t\t\t//\t\tThe location to start searching from. Optional. Defaults to 0.\r\n\t\t\t// description:\r\n\t\t\t//\t\tFor more details on the behavior of indexOf, see Mozilla's\r\n\t\t\t//\t\t[indexOf\r\n\t\t\t//\t\tdocs](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)\r\n\t\t\t// returns:\r\n\t\t\t//\t\tPositive Integer or 0 for a match, -1 of not found.\r\n\t\t\treturn d.indexOf(this, value, fromIndex); // Integer\r\n\t\t},\r\n\r\n\t\tlastIndexOf: function(value, fromIndex){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tsee `dojo/_base/array.lastIndexOf()`. The primary difference is that the\r\n\t\t\t//\t\tacted-on array is implicitly this NodeList\r\n\t\t\t// description:\r\n\t\t\t//\t\tFor more details on the behavior of lastIndexOf, see\r\n\t\t\t//\t\tMozilla's [lastIndexOf\r\n\t\t\t//\t\tdocs](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf)\r\n\t\t\t// value: Object\r\n\t\t\t//\t\tThe value to search for.\r\n\t\t\t// fromIndex: Integer?\r\n\t\t\t//\t\tThe location to start searching from. Optional. Defaults to 0.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tPositive Integer or 0 for a match, -1 of not found.\r\n\t\t\treturn d.lastIndexOf(this, value, fromIndex); // Integer\r\n\t\t},\r\n\r\n\t\tevery: function(callback, thisObject){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tsee `dojo/_base/array.every()` and the [Array.every\r\n\t\t\t//\t\tdocs](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every).\r\n\t\t\t//\t\tTakes the same structure of arguments and returns as\r\n\t\t\t//\t\tdojo/_base/array.every() with the caveat that the passed array is\r\n\t\t\t//\t\timplicitly this NodeList\r\n\t\t\t// callback: Function\r\n\t\t\t//\t\tthe callback\r\n\t\t\t// thisObject: Object?\r\n\t\t\t//\t\tthe context\r\n\t\t\treturn d.every(this, callback, thisObject); // Boolean\r\n\t\t},\r\n\r\n\t\tsome: function(callback, thisObject){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTakes the same structure of arguments and returns as\r\n\t\t\t//\t\t`dojo/_base/array.some()` with the caveat that the passed array is\r\n\t\t\t//\t\timplicitly this NodeList.  See `dojo/_base/array.some()` and Mozilla's\r\n\t\t\t//\t\t[Array.some\r\n\t\t\t//\t\tdocumentation](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some).\r\n\t\t\t// callback: Function\r\n\t\t\t//\t\tthe callback\r\n\t\t\t// thisObject: Object?\r\n\t\t\t//\t\tthe context\r\n\t\t\treturn d.some(this, callback, thisObject); // Boolean\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tconcat: function(item){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a new NodeList comprised of items in this NodeList\r\n\t\t\t//\t\tas well as items passed in as parameters\r\n\t\t\t// description:\r\n\t\t\t//\t\tThis method behaves exactly like the Array.concat method\r\n\t\t\t//\t\twith the caveat that it returns a `NodeList` and not a\r\n\t\t\t//\t\traw Array. For more details, see the [Array.concat\r\n\t\t\t//\t\tdocs](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/concat)\r\n\t\t\t// item: Object?\r\n\t\t\t//\t\tAny number of optional parameters may be passed in to be\r\n\t\t\t//\t\tspliced into the NodeList\r\n\r\n\t\t\t//return this._wrap(apc.apply(this, arguments));\r\n\t\t\t// the line above won't work for the native NodeList, or for Dojo NodeLists either :-(\r\n\r\n\t\t\t// implementation notes:\r\n\t\t\t// Array.concat() doesn't recognize native NodeLists or Dojo NodeLists\r\n\t\t\t// as arrays, and so does not inline them into a unioned array, but\r\n\t\t\t// appends them as single entities. Both the original NodeList and the\r\n\t\t\t// items passed in as parameters must be converted to raw Arrays\r\n\t\t\t// and then the concatenation result may be re-_wrap()ed as a Dojo NodeList.\r\n\r\n\t\t\tvar t = aps.call(this, 0),\r\n\t\t\t\tm = array.map(arguments, function(a){\r\n\t\t\t\t\treturn aps.call(a, 0);\r\n\t\t\t\t});\r\n\t\t\treturn this._wrap(apc.apply(t, m), this);\t// dojo/NodeList\r\n\t\t},\r\n\r\n\t\tmap: function(/*Function*/ func, /*Function?*/ obj){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tsee `dojo/_base/array.map()`. The primary difference is that the acted-on\r\n\t\t\t//\t\tarray is implicitly this NodeList and the return is a\r\n\t\t\t//\t\tNodeList (a subclass of Array)\r\n\t\t\treturn this._wrap(array.map(this, func, obj), this); // dojo/NodeList\r\n\t\t},\r\n\r\n\t\tforEach: function(callback, thisObj){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tsee `dojo/_base/array.forEach()`. The primary difference is that the acted-on\r\n\t\t\t//\t\tarray is implicitly this NodeList. If you want the option to break out\r\n\t\t\t//\t\tof the forEach loop, use every() or some() instead.\r\n\t\t\tforEach(this, callback, thisObj);\r\n\t\t\t// non-standard return to allow easier chaining\r\n\t\t\treturn this; // dojo/NodeList\r\n\t\t},\r\n\t\tfilter: function(/*String|Function*/ filter){\r\n\t\t\t// summary:\r\n\t\t\t//\t\t\"masks\" the built-in javascript filter() method (supported\r\n\t\t\t//\t\tin Dojo via `dojo/_base/array.filter`) to support passing a simple\r\n\t\t\t//\t\tstring filter in addition to supporting filtering function\r\n\t\t\t//\t\tobjects.\r\n\t\t\t// filter:\r\n\t\t\t//\t\tIf a string, a CSS rule like \".thinger\" or \"div > span\".\r\n\t\t\t// example:\r\n\t\t\t//\t\t\"regular\" JS filter syntax as exposed in `dojo/_base/array.filter`:\r\n\t\t\t//\t\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t\t|\t], function(query){\r\n\t\t\t//\t\t|\t\tquery(\"*\").filter(function(item){\r\n\t\t\t//\t\t|\t\t\t// highlight every paragraph\r\n\t\t\t//\t\t|\t\t\treturn (item.nodeName == \"p\");\r\n\t\t\t//\t\t|\t\t}).style(\"backgroundColor\", \"yellow\");\r\n\t\t\t//\t\t|\t});\r\n\t\t\t// example:\r\n\t\t\t//\t\tthe same filtering using a CSS selector\r\n\t\t\t//\t\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t\t|\t], function(query){\r\n\t\t\t//\t\t|\t\tquery(\"*\").filter(\"p\").styles(\"backgroundColor\", \"yellow\");\r\n\t\t\t//\t\t|\t});\r\n\r\n\t\t\tvar a = arguments, items = this, start = 0;\r\n\t\t\tif(typeof filter == \"string\"){ // inline'd type check\r\n\t\t\t\titems = query._filterResult(this, a[0]);\r\n\t\t\t\tif(a.length == 1){\r\n\t\t\t\t\t// if we only got a string query, pass back the filtered results\r\n\t\t\t\t\treturn items._stash(this); // dojo/NodeList\r\n\t\t\t\t}\r\n\t\t\t\t// if we got a callback, run it over the filtered items\r\n\t\t\t\tstart = 1;\r\n\t\t\t}\r\n\t\t\treturn this._wrap(array.filter(items, a[start], a[start + 1]), this);\t// dojo/NodeList\r\n\t\t},\r\n\t\tinstantiate: function(/*String|Object*/ declaredClass, /*Object?*/ properties){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreate a new instance of a specified class, using the\r\n\t\t\t//\t\tspecified properties and each node in the NodeList as a\r\n\t\t\t//\t\tsrcNodeRef.\r\n\t\t\t// example:\r\n\t\t\t//\t\tGrabs all buttons in the page and converts them to dijit/form/Button's.\r\n\t\t\t//\t|\tvar buttons = query(\"button\").instantiate(Button, {showLabel: true});\r\n\t\t\tvar c = lang.isFunction(declaredClass) ? declaredClass : lang.getObject(declaredClass);\r\n\t\t\tproperties = properties || {};\r\n\t\t\treturn this.forEach(function(node){\r\n\t\t\t\tnew c(properties, node);\r\n\t\t\t});\t// dojo/NodeList\r\n\t\t},\r\n\t\tat: function(/*===== index =====*/){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a new NodeList comprised of items in this NodeList\r\n\t\t\t//\t\tat the given index or indices.\r\n\t\t\t//\r\n\t\t\t// index: Integer...\r\n\t\t\t//\t\tOne or more 0-based indices of items in the current\r\n\t\t\t//\t\tNodeList. A negative index will start at the end of the\r\n\t\t\t//\t\tlist and go backwards.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\tShorten the list to the first, second, and third elements\r\n\t\t\t//\t|\trequire([\"dojo/query\"\r\n\t\t\t//\t|\t], function(query){\r\n\t\t\t//\t|\t\tquery(\"a\").at(0, 1, 2).forEach(fn);\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\tRetrieve the first and last elements of a unordered list:\r\n\t\t\t//\t|\trequire([\"dojo/query\"\r\n\t\t\t//\t|\t], function(query){\r\n\t\t\t//\t|\t\tquery(\"ul > li\").at(0, -1).forEach(cb);\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\tDo something for the first element only, but end() out back to\r\n\t\t\t//\tthe original list and continue chaining:\r\n\t\t\t//\t|\trequire([\"dojo/query\"\r\n\t\t\t//\t|\t], function(query){\r\n\t\t\t//\t|\t\tquery(\"a\").at(0).onclick(fn).end().forEach(function(n){\r\n\t\t\t//\t|\t\t\tconsole.log(n); // all anchors on the page.\r\n\t\t\t//\t|\t})\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\tvar t = new this._NodeListCtor(0);\r\n\t\t\tforEach(arguments, function(i){\r\n\t\t\t\tif(i < 0){ i = this.length + i; }\r\n\t\t\t\tif(this[i]){ t.push(this[i]); }\r\n\t\t\t}, this);\r\n\t\t\treturn t._stash(this); // dojo/NodeList\r\n\t\t}\r\n\t});\r\n\r\n\tfunction queryForEngine(engine, NodeList){\r\n\t\tvar query = function(/*String*/ query, /*String|DOMNode?*/ root){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns nodes which match the given CSS selector, searching the\r\n\t\t\t//\t\tentire document by default but optionally taking a node to scope\r\n\t\t\t//\t\tthe search by. Returns an instance of NodeList.\r\n\t\t\tif(typeof root == \"string\"){\r\n\t\t\t\troot = dom.byId(root);\r\n\t\t\t\tif(!root){\r\n\t\t\t\t\treturn new NodeList([]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar results = typeof query == \"string\" ? engine(query, root) : query ? (query.end && query.on) ? query : [query] : [];\r\n\t\t\tif(results.end && results.on){\r\n\t\t\t\t// already wrapped\r\n\t\t\t\treturn results;\r\n\t\t\t}\r\n\t\t\treturn new NodeList(results);\r\n\t\t};\r\n\t\tquery.matches = engine && engine.match || function(node, selector, root){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTest to see if a node matches a selector\r\n\t\t\treturn query.filter([node], selector, root).length > 0;\r\n\t\t};\r\n\t\t// the engine provides a filtering function, use it to for matching\r\n\t\tquery.filter = engine && engine.filter || function(nodes, selector, root){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFilters an array of nodes. Note that this does not guarantee to return a NodeList, just an array.\r\n\t\t\treturn query(selector, root).filter(function(node){\r\n\t\t\t\treturn array.indexOf(nodes, node) > -1;\r\n\t\t\t});\r\n\t\t};\r\n\t\tif(typeof engine != \"function\"){\r\n\t\t\tvar search = engine && engine.search || function(el,selector) {\r\n\t\t\t\treturn el.querySelectorAll(selector);\r\n\t\t\t};\r\n\t\t\tengine = function(selector, root){\r\n\t\t\t\t// Slick does it backwards (or everyone else does it backwards, probably the latter)\r\n\t\t\t\treturn search(root || document, selector);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn query;\r\n\t}\r\n\tvar query = queryForEngine(defaultEngine, NodeList);\r\n\t/*=====\r\n\tquery = function(selector, context){\r\n\t\t// summary:\r\n\t\t//\t\tThis modules provides DOM querying functionality. The module export is a function\r\n\t\t//\t\tthat can be used to query for DOM nodes by CSS selector and returns a NodeList\r\n\t\t//\t\trepresenting the matching nodes.\r\n\t\t// selector: String\r\n\t\t//\t\tA CSS selector to search for.\r\n\t\t// context: String|DomNode?\r\n\t\t//\t\tAn optional context to limit the searching scope. Only nodes under `context` will be\r\n\t\t//\t\tscanned.\r\n\t\t// example:\r\n\t\t//\t\tadd an onclick handler to every submit button in the document\r\n\t\t//\t\twhich causes the form to be sent via Ajax instead:\r\n\t\t//\t|\trequire([\"dojo/query\", \"dojo/request\", \"dojo/dom-form\", \"dojo/dom-construct\", \"dojo/dom-style\"\r\n\t\t//\t|\t], function(query, request, domForm, domConstruct, domStyle){\r\n\t\t//\t|\t\tquery(\"input[type='submit']\").on(\"click\", function(e){\r\n\t\t//\t|\t\t\te.preventDefault(); // prevent sending the form\r\n\t\t//\t|\t\t\tvar btn = e.target;\r\n\t\t//\t|\t\t\trequest.post(\"http://example.com/\", {\r\n\t\t//\t|\t\t\t\tdata: domForm.toObject(btn.form)\r\n\t\t//\t|\t\t\t}).then(function(response){\r\n\t\t//\t|\t\t\t\t// replace the form with the response\r\n\t\t//\t|\t\t\t\tdomConstruct.create(div, {innerHTML: response}, btn.form, \"after\");\r\n\t\t//\t|\t\t\t\tdomStyle.set(btn.form, \"display\", \"none\");\r\n\t\t//\t|\t\t\t});\r\n\t\t//\t|\t\t});\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tdojo/query is responsible for loading the appropriate query engine and wrapping\r\n\t\t//\t\tits results with a `NodeList`. You can use dojo/query with a specific selector engine\r\n\t\t//\t\tby using it as a plugin. For example, if you installed the sizzle package, you could\r\n\t\t//\t\tuse it as the selector engine with:\r\n\t\t//\t\t|\trequire([\"dojo/query!sizzle\"], function(query){\r\n\t\t//\t\t|\t\tquery(\"div\")...\r\n\t\t//\r\n\t\t//\t\tThe id after the ! can be a module id of the selector engine or one of the following values:\r\n\t\t//\r\n\t\t//\t\t- acme: This is the default engine used by Dojo base, and will ensure that the full\r\n\t\t//\t\tAcme engine is always loaded.\r\n\t\t//\r\n\t\t//\t\t- css2: If the browser has a native selector engine, this will be used, otherwise a\r\n\t\t//\t\tvery minimal lightweight selector engine will be loaded that can do simple CSS2 selectors\r\n\t\t//\t\t(by #id, .class, tag, and [name=value] attributes, with standard child or descendant (>)\r\n\t\t//\t\toperators) and nothing more.\r\n\t\t//\r\n\t\t//\t\t- css2.1: If the browser has a native selector engine, this will be used, otherwise the\r\n\t\t//\t\tfull Acme engine will be loaded.\r\n\t\t//\r\n\t\t//\t\t- css3: If the browser has a native selector engine with support for CSS3 pseudo\r\n\t\t//\t\tselectors (most modern browsers except IE8), this will be used, otherwise the\r\n\t\t//\t\tfull Acme engine will be loaded.\r\n\t\t//\r\n\t\t//\t\t- Or the module id of a selector engine can be used to explicitly choose the selector engine\r\n\t\t//\r\n\t\t//\t\tFor example, if you are using CSS3 pseudo selectors in module, you can specify that\r\n\t\t//\t\tyou will need support them with:\r\n\t\t//\t\t|\trequire([\"dojo/query!css3\"], function(query){\r\n\t\t//\t\t|\t\tquery('#t > h3:nth-child(odd)')...\r\n\t\t//\r\n\t\t//\t\tYou can also choose the selector engine/load configuration by setting the query-selector:\r\n\t\t//\t\tFor example:\r\n\t\t//\t\t|\t<script data-dojo-config=\"query-selector:'css3'\" src=\"dojo.js\"></script>\r\n\t\t//\r\n\t\treturn new NodeList(); // dojo/NodeList\r\n\t };\r\n\t =====*/\r\n\r\n\t// the query that is returned from this module is slightly different than dojo.query,\r\n\t// because dojo.query has to maintain backwards compatibility with returning a\r\n\t// true array which has performance problems. The query returned from the module\r\n\t// does not use true arrays, but rather inherits from Array, making it much faster to\r\n\t// instantiate.\r\n\tdojo.query = queryForEngine(defaultEngine, function(array){\r\n\t\t// call it without the new operator to invoke the back-compat behavior that returns a true array\r\n\t\treturn NodeList(array);\t// dojo/NodeList\r\n\t});\r\n\r\n\r\n\tif (require.isBrowser===false) { // for build,will be changed with better implementation. by LWF\r\n\t\tquery.load = function (name, req, onLoad, config) {\r\n\t        onLoad();\r\n\t    };\t\t\r\n\t} else {\r\n\t\tquery.load = function(id, parentRequire, loaded){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tcan be used as AMD plugin to conditionally load new query engine\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/query!custom\"], function(qsa){\r\n\t\t\t//\t|\t\t// loaded selector/custom.js as engine\r\n\t\t\t//\t|\t\tqsa(\"#foobar\").forEach(...);\r\n\t\t\t//\t|\t});\r\n\t\t\tloader.load(id, parentRequire, function(engine){\r\n\t\t\t\tloaded(queryForEngine(engine, NodeList));\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n\r\n\tdojo._filterQueryResult = query._filterResult = function(nodes, selector, root){\r\n\t\treturn new NodeList(query.filter(nodes, selector, root));\r\n\t};\r\n\tdojo.NodeList = query.NodeList = NodeList;\r\n\treturn query;\r\n});\r\n\ndefine('dojo/parser',[\r\n\t\"require\", \"./_base/kernel\", \"./_base/lang\", \"./_base/array\", \"./_base/config\", \"./dom\", \"./_base/window\",\r\n\t\t\"./_base/url\", \"./aspect\", \"./promise/all\", \"./date/stamp\", \"./Deferred\", \"./has\", \"./query\", \"./on\", \"./ready\"\r\n], function(require, dojo, dlang, darray, config, dom, dwindow, _Url, aspect, all, dates, Deferred, has, query, don, ready){\r\n\r\n\t// module:\r\n\t//\t\tdojo/parser\r\n\r\n\tnew Date(\"X\"); // workaround for #11279, new Date(\"\") == NaN\r\n\r\n\t// data-dojo-props etc. is not restricted to JSON, it can be any javascript\r\n\tfunction myEval(text){\r\n\t\treturn eval(\"(\" + text + \")\");\r\n\t}\r\n\r\n\t// Widgets like BorderContainer add properties to _Widget via dojo.extend().\r\n\t// If BorderContainer is loaded after _Widget's parameter list has been cached,\r\n\t// we need to refresh that parameter list (for _Widget and all widgets that extend _Widget).\r\n\tvar extendCnt = 0;\r\n\taspect.after(dlang, \"extend\", function(){\r\n\t\textendCnt++;\r\n\t}, true);\r\n\r\n\tfunction getNameMap(ctor){\r\n\t\t// summary:\r\n\t\t//\t\tReturns map from lowercase name to attribute name in class, ex: {onclick: \"onClick\"}\r\n\t\tvar map = ctor._nameCaseMap, proto = ctor.prototype;\r\n\r\n\t\t// Create the map if it's undefined.\r\n\t\t// Refresh the map if a superclass was possibly extended with new methods since the map was created.\r\n\t\tif(!map || map._extendCnt < extendCnt){\r\n\t\t\tmap = ctor._nameCaseMap = {};\r\n\t\t\tfor(var name in proto){\r\n\t\t\t\tif(name.charAt(0) === \"_\"){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\t// skip internal properties\r\n\t\t\t\tmap[name.toLowerCase()] = name;\r\n\t\t\t}\r\n\t\t\tmap._extendCnt = extendCnt;\r\n\t\t}\r\n\t\treturn map;\r\n\t}\r\n\r\n\t// Map from widget name or list of widget names(ex: \"dijit/form/Button,acme/MyMixin\") to a constructor.\r\n\tvar _ctorMap = {};\r\n\r\n\tfunction getCtor(/*String[]*/ types, /*Function?*/ contextRequire){\r\n\t\t// summary:\r\n\t\t//\t\tRetrieves a constructor.  If the types array contains more than one class/MID then the\r\n\t\t//\t\tsubsequent classes will be mixed into the first class and a unique constructor will be\r\n\t\t//\t\treturned for that array.\r\n\r\n\t\tvar ts = types.join();\r\n\t\tif(!_ctorMap[ts]){\r\n\t\t\tvar mixins = [];\r\n\t\t\tfor(var i = 0, l = types.length; i < l; i++){\r\n\t\t\t\tvar t = types[i];\r\n\t\t\t\t// TODO: Consider swapping getObject and require in the future\r\n\t\t\t\tmixins[mixins.length] = (_ctorMap[t] = _ctorMap[t] || (dlang.getObject(t) || (~t.indexOf('/') &&\r\n\t\t\t\t\t(contextRequire ? contextRequire(t) : require(t)))));\r\n\t\t\t}\r\n\t\t\tvar ctor = mixins.shift();\r\n\t\t\t_ctorMap[ts] = mixins.length ? (ctor.createSubclass ? ctor.createSubclass(mixins) : ctor.extend.apply(ctor, mixins)) : ctor;\r\n\t\t}\r\n\r\n\t\treturn _ctorMap[ts];\r\n\t}\r\n\r\n\tvar parser = {\r\n\t\t// summary:\r\n\t\t//\t\tThe Dom/Widget parsing package\r\n\r\n\t\t_clearCache: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tClear cached data.   Used mainly for benchmarking.\r\n\t\t\textendCnt++;\r\n\t\t\t_ctorMap = {};\r\n\t\t},\r\n\r\n\t\t_functionFromScript: function(script, attrData){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tConvert a `<script type=\"dojo/method\" args=\"a, b, c\"> ... </script>`\r\n\t\t\t//\t\tinto a function\r\n\t\t\t// script: DOMNode\r\n\t\t\t//\t\tThe `<script>` DOMNode\r\n\t\t\t// attrData: String\r\n\t\t\t//\t\tFor HTML5 compliance, searches for attrData + \"args\" (typically\r\n\t\t\t//\t\t\"data-dojo-args\") instead of \"args\"\r\n\t\t\tvar preamble = \"\",\r\n\t\t\t\tsuffix = \"\",\r\n\t\t\t\targsStr = (script.getAttribute(attrData + \"args\") || script.getAttribute(\"args\")),\r\n\t\t\t\twithStr = script.getAttribute(\"with\");\r\n\r\n\t\t\t// Convert any arguments supplied in script tag into an array to be passed to the\r\n\t\t\tvar fnArgs = (argsStr || \"\").split(/\\s*,\\s*/);\r\n\r\n\t\t\tif(withStr && withStr.length){\r\n\t\t\t\tdarray.forEach(withStr.split(/\\s*,\\s*/), function(part){\r\n\t\t\t\t\tpreamble += \"with(\" + part + \"){\";\r\n\t\t\t\t\tsuffix += \"}\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn new Function(fnArgs, preamble + script.innerHTML + suffix);\r\n\t\t},\r\n\r\n\t\tinstantiate: function(nodes, mixin, options){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTakes array of nodes, and turns them into class instances and\r\n\t\t\t//\t\tpotentially calls a startup method to allow them to connect with\r\n\t\t\t//\t\tany children.\r\n\t\t\t// nodes: Array\r\n\t\t\t//\t\tArray of DOM nodes\r\n\t\t\t// mixin: Object?\r\n\t\t\t//\t\tAn object that will be mixed in with each node in the array.\r\n\t\t\t//\t\tValues in the mixin will override values in the node, if they\r\n\t\t\t//\t\texist.\r\n\t\t\t// options: Object?\r\n\t\t\t//\t\tAn object used to hold kwArgs for instantiation.\r\n\t\t\t//\t\tSee parse.options argument for details.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tArray of instances.\r\n\r\n\t\t\tmixin = mixin || {};\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\tvar dojoType = (options.scope || dojo._scopeName) + \"Type\", // typically \"dojoType\"\r\n\t\t\t\tattrData = \"data-\" + (options.scope || dojo._scopeName) + \"-\", // typically \"data-dojo-\"\r\n\t\t\t\tdataDojoType = attrData + \"type\", // typically \"data-dojo-type\"\r\n\t\t\t\tdataDojoMixins = attrData + \"mixins\";\t\t\t\t\t// typically \"data-dojo-mixins\"\r\n\r\n\t\t\tvar list = [];\r\n\t\t\tdarray.forEach(nodes, function(node){\r\n\t\t\t\tvar type = dojoType in mixin ? mixin[dojoType] : node.getAttribute(dataDojoType) || node.getAttribute(dojoType);\r\n\t\t\t\tif(type){\r\n\t\t\t\t\tvar mixinsValue = node.getAttribute(dataDojoMixins),\r\n\t\t\t\t\t\ttypes = mixinsValue ? [type].concat(mixinsValue.split(/\\s*,\\s*/)) : [type];\r\n\r\n\t\t\t\t\tlist.push({\r\n\t\t\t\t\t\tnode: node,\r\n\t\t\t\t\t\ttypes: types\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Instantiate the nodes and return the list of instances.\r\n\t\t\treturn this._instantiate(list, mixin, options);\r\n\t\t},\r\n\r\n\t\t_instantiate: function(nodes, mixin, options, returnPromise){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tTakes array of objects representing nodes, and turns them into class instances and\r\n\t\t\t//\t\tpotentially calls a startup method to allow them to connect with\r\n\t\t\t//\t\tany children.\r\n\t\t\t// nodes: Array\r\n\t\t\t//\t\tArray of objects like\r\n\t\t\t//\t|\t\t{\r\n\t\t\t//\t|\t\t\tctor: Function (may be null)\r\n\t\t\t//\t|\t\t\ttypes: [\"dijit/form/Button\", \"acme/MyMixin\"] (used if ctor not specified)\r\n\t\t\t//\t|\t\t\tnode: DOMNode,\r\n\t\t\t//\t|\t\t\tscripts: [ ... ],\t// array of <script type=\"dojo/...\"> children of node\r\n\t\t\t//\t|\t\t\tinherited: { ... }\t// settings inherited from ancestors like dir, theme, etc.\r\n\t\t\t//\t|\t\t}\r\n\t\t\t// mixin: Object\r\n\t\t\t//\t\tAn object that will be mixed in with each node in the array.\r\n\t\t\t//\t\tValues in the mixin will override values in the node, if they\r\n\t\t\t//\t\texist.\r\n\t\t\t// options: Object\r\n\t\t\t//\t\tAn options object used to hold kwArgs for instantiation.\r\n\t\t\t//\t\tSee parse.options argument for details.\r\n\t\t\t// returnPromise: Boolean\r\n\t\t\t//\t\tReturn a Promise rather than the instance; supports asynchronous widget creation.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tArray of instances, or if returnPromise is true, a promise for array of instances\r\n\t\t\t//\t\tthat resolves when instances have finished initializing.\r\n\r\n\t\t\t// Call widget constructors.   Some may be asynchronous and return promises.\r\n\t\t\tvar thelist = darray.map(nodes, function(obj){\r\n\t\t\t\tvar ctor = obj.ctor || getCtor(obj.types, options.contextRequire);\r\n\t\t\t\t// If we still haven't resolved a ctor, it is fatal now\r\n\t\t\t\tif(!ctor){\r\n\t\t\t\t\tthrow new Error(\"Unable to resolve constructor for: '\" + obj.types.join() + \"'\");\r\n\t\t\t\t}\r\n\t\t\t\treturn this.construct(ctor, obj.node, mixin, options, obj.scripts, obj.inherited);\r\n\t\t\t}, this);\r\n\r\n\t\t\t// After all widget construction finishes, call startup on each top level instance if it makes sense (as for\r\n\t\t\t// widgets).  Parent widgets will recursively call startup on their (non-top level) children\r\n\t\t\tfunction onConstruct(thelist){\r\n\t\t\t\tif(!mixin._started && !options.noStart){\r\n\t\t\t\t\tdarray.forEach(thelist, function(instance){\r\n\t\t\t\t\t\tif(typeof instance.startup === \"function\" && !instance._started){\r\n\t\t\t\t\t\t\tinstance.startup();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn thelist;\r\n\t\t\t}\r\n\r\n\t\t\tif(returnPromise){\r\n\t\t\t\treturn all(thelist).then(onConstruct);\r\n\t\t\t}else{\r\n\t\t\t\t// Back-compat path, remove for 2.0\r\n\t\t\t\treturn onConstruct(thelist);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tconstruct: function(ctor, node, mixin, options, scripts, inherited){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalls new ctor(params, node), where params is the hash of parameters specified on the node,\r\n\t\t\t//\t\texcluding data-dojo-type and data-dojo-mixins.   Does not call startup().\r\n\t\t\t// ctor: Function\r\n\t\t\t//\t\tWidget constructor.\r\n\t\t\t// node: DOMNode\r\n\t\t\t//\t\tThis node will be replaced/attached to by the widget.  It also specifies the arguments to pass to ctor.\r\n\t\t\t// mixin: Object?\r\n\t\t\t//\t\tAttributes in this object will be passed as parameters to ctor,\r\n\t\t\t//\t\toverriding attributes specified on the node.\r\n\t\t\t// options: Object?\r\n\t\t\t//\t\tAn options object used to hold kwArgs for instantiation.   See parse.options argument for details.\r\n\t\t\t// scripts: DomNode[]?\r\n\t\t\t//\t\tArray of `<script type=\"dojo/*\">` DOMNodes.  If not specified, will search for `<script>` tags inside node.\r\n\t\t\t// inherited: Object?\r\n\t\t\t//\t\tSettings from dir=rtl or lang=... on a node above this node.   Overrides options.inherited.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tInstance or Promise for the instance, if markupFactory() itself returned a promise\r\n\r\n\t\t\tvar proto = ctor && ctor.prototype;\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\t// Setup hash to hold parameter settings for this widget.\tStart with the parameter\r\n\t\t\t// settings inherited from ancestors (\"dir\" and \"lang\").\r\n\t\t\t// Inherited setting may later be overridden by explicit settings on node itself.\r\n\t\t\tvar params = {};\r\n\r\n\t\t\tif(options.defaults){\r\n\t\t\t\t// settings for the document itself (or whatever subtree is being parsed)\r\n\t\t\t\tdlang.mixin(params, options.defaults);\r\n\t\t\t}\r\n\t\t\tif(inherited){\r\n\t\t\t\t// settings from dir=rtl or lang=... on a node above this node\r\n\t\t\t\tdlang.mixin(params, inherited);\r\n\t\t\t}\r\n\r\n\t\t\t// Get list of attributes explicitly listed in the markup\r\n\t\t\tvar attributes;\r\n\t\t\tif(has(\"dom-attributes-explicit\")){\r\n\t\t\t\t// Standard path to get list of user specified attributes\r\n\t\t\t\tattributes = node.attributes;\r\n\t\t\t}else if(has(\"dom-attributes-specified-flag\")){\r\n\t\t\t\t// Special processing needed for IE8, to skip a few faux values in attributes[]\r\n\t\t\t\tattributes = darray.filter(node.attributes, function(a){\r\n\t\t\t\t\treturn a.specified;\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\t// Special path for IE6-7, avoid (sometimes >100) bogus entries in node.attributes\r\n\t\t\t\tvar clone = /^input$|^img$/i.test(node.nodeName) ? node : node.cloneNode(false),\r\n\t\t\t\t\tattrs = clone.outerHTML.replace(/=[^\\s\"']+|=\"[^\"]*\"|='[^']*'/g, \"\").replace(/^\\s*<[a-zA-Z0-9]*\\s*/, \"\").replace(/\\s*>.*$/, \"\");\r\n\r\n\t\t\t\tattributes = darray.map(attrs.split(/\\s+/), function(name){\r\n\t\t\t\t\tvar lcName = name.toLowerCase();\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\t// getAttribute() doesn't work for button.value, returns innerHTML of button.\r\n\t\t\t\t\t\t// but getAttributeNode().value doesn't work for the form.encType or li.value\r\n\t\t\t\t\t\tvalue: (node.nodeName == \"LI\" && name == \"value\") || lcName == \"enctype\" ?\r\n\t\t\t\t\t\t\tnode.getAttribute(lcName) : node.getAttributeNode(lcName).value\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Hash to convert scoped attribute name (ex: data-dojo17-params) to something friendly (ex: data-dojo-params)\r\n\t\t\t// TODO: remove scope for 2.0\r\n\t\t\tvar scope = options.scope || dojo._scopeName,\r\n\t\t\t\tattrData = \"data-\" + scope + \"-\", // typically \"data-dojo-\"\r\n\t\t\t\thash = {};\r\n\t\t\tif(scope !== \"dojo\"){\r\n\t\t\t\thash[attrData + \"props\"] = \"data-dojo-props\";\r\n\t\t\t\thash[attrData + \"type\"] = \"data-dojo-type\";\r\n\t\t\t\thash[attrData + \"mixins\"] = \"data-dojo-mixins\";\r\n\t\t\t\thash[scope + \"type\"] = \"dojoType\";\r\n\t\t\t\thash[attrData + \"id\"] = \"data-dojo-id\";\r\n\t\t\t}\r\n\r\n\t\t\t// Read in attributes and process them, including data-dojo-props, data-dojo-type,\r\n\t\t\t// dojoAttachPoint, etc., as well as normal foo=bar attributes.\r\n\t\t\tvar i = 0, item, funcAttrs = [], jsname, extra;\r\n\t\t\twhile(item = attributes[i++]){\r\n\t\t\t\tvar name = item.name,\r\n\t\t\t\t\tlcName = name.toLowerCase(),\r\n\t\t\t\t\tvalue = item.value;\r\n\r\n\t\t\t\tswitch(hash[lcName] || lcName){\r\n\t\t\t\t// Already processed, just ignore\r\n\t\t\t\tcase \"data-dojo-type\":\r\n\t\t\t\tcase \"dojotype\":\r\n\t\t\t\tcase \"data-dojo-mixins\":\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// Data-dojo-props.   Save for later to make sure it overrides direct foo=bar settings\r\n\t\t\t\tcase \"data-dojo-props\":\r\n\t\t\t\t\textra = value;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// data-dojo-id or jsId. TODO: drop jsId in 2.0\r\n\t\t\t\tcase \"data-dojo-id\":\r\n\t\t\t\tcase \"jsid\":\r\n\t\t\t\t\tjsname = value;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// For the benefit of _Templated\r\n\t\t\t\tcase \"data-dojo-attach-point\":\r\n\t\t\t\tcase \"dojoattachpoint\":\r\n\t\t\t\t\tparams.dojoAttachPoint = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"data-dojo-attach-event\":\r\n\t\t\t\tcase \"dojoattachevent\":\r\n\t\t\t\t\tparams.dojoAttachEvent = value;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// Special parameter handling needed for IE\r\n\t\t\t\tcase \"class\":\r\n\t\t\t\t\tparams[\"class\"] = node.className;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"style\":\r\n\t\t\t\t\tparams[\"style\"] = node.style && node.style.cssText;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// Normal attribute, ex: value=\"123\"\r\n\r\n\t\t\t\t\t// Find attribute in widget corresponding to specified name.\r\n\t\t\t\t\t// May involve case conversion, ex: onclick --> onClick\r\n\t\t\t\t\tif(!(name in proto)){\r\n\t\t\t\t\t\tvar map = getNameMap(ctor);\r\n\t\t\t\t\t\tname = map[lcName] || name;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Set params[name] to value, doing type conversion\r\n\t\t\t\t\tif(name in proto){\r\n\t\t\t\t\t\tswitch(typeof proto[name]){\r\n\t\t\t\t\t\tcase \"string\":\r\n\t\t\t\t\t\t\tparams[name] = value;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"number\":\r\n\t\t\t\t\t\t\tparams[name] = value.length ? Number(value) : NaN;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\t\t\t// for checked/disabled value might be \"\" or \"checked\".\t interpret as true.\r\n\t\t\t\t\t\t\tparams[name] = value.toLowerCase() != \"false\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"function\":\r\n\t\t\t\t\t\t\tif(value === \"\" || value.search(/[^\\w\\.]+/i) != -1){\r\n\t\t\t\t\t\t\t\t// The user has specified some text for a function like \"return x+5\"\r\n\t\t\t\t\t\t\t\tparams[name] = new Function(value);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t// The user has specified the name of a global function like \"myOnClick\"\r\n\t\t\t\t\t\t\t\t// or a single word function \"return\"\r\n\t\t\t\t\t\t\t\tparams[name] = dlang.getObject(value, false) || new Function(value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfuncAttrs.push(name);\t// prevent \"double connect\", see #15026\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tvar pVal = proto[name];\r\n\t\t\t\t\t\t\tparams[name] =\r\n\t\t\t\t\t\t\t\t(pVal && \"length\" in pVal) ? (value ? value.split(/\\s*,\\s*/) : []) :\t// array\r\n\t\t\t\t\t\t\t\t\t(pVal instanceof Date) ?\r\n\t\t\t\t\t\t\t\t\t\t(value == \"\" ? new Date(\"\") :\t// the NaN of dates\r\n\t\t\t\t\t\t\t\t\t\tvalue == \"now\" ? new Date() :\t// current date\r\n\t\t\t\t\t\t\t\t\t\tdates.fromISOString(value)) :\r\n\t\t\t\t\t\t\t\t(pVal instanceof _Url) ? (dojo.baseUrl + value) :\r\n\t\t\t\t\t\t\t\tmyEval(value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tparams[name] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Remove function attributes from DOMNode to prevent \"double connect\" problem, see #15026.\r\n\t\t\t// Do this as a separate loop since attributes[] is often a live collection (depends on the browser though).\r\n\t\t\tfor(var j = 0; j < funcAttrs.length; j++){\r\n\t\t\t\tvar lcfname = funcAttrs[j].toLowerCase();\r\n\t\t\t\tnode.removeAttribute(lcfname);\r\n\t\t\t\tnode[lcfname] = null;\r\n\t\t\t}\r\n\r\n\t\t\t// Mix things found in data-dojo-props into the params, overriding any direct settings\r\n\t\t\tif(extra){\r\n\t\t\t\ttry{\r\n\t\t\t\t\textra = myEval.call(options.propsThis, \"{\" + extra + \"}\");\r\n\t\t\t\t\tdlang.mixin(params, extra);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\t// give the user a pointer to their invalid parameters. FIXME: can we kill this in production?\r\n\t\t\t\t\tthrow new Error(e.toString() + \" in data-dojo-props='\" + extra + \"'\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Any parameters specified in \"mixin\" override everything else.\r\n\t\t\tdlang.mixin(params, mixin);\r\n\r\n\t\t\t// Get <script> nodes associated with this widget, if they weren't specified explicitly\r\n\t\t\tif(!scripts){\r\n\t\t\t\tscripts = (ctor && (ctor._noScript || proto._noScript) ? [] : query(\"> script[type^='dojo/']\", node));\r\n\t\t\t}\r\n\r\n\t\t\t// Process <script type=\"dojo/*\"> script tags\r\n\t\t\t// <script type=\"dojo/method\" data-dojo-event=\"foo\"> tags are added to params, and passed to\r\n\t\t\t// the widget on instantiation.\r\n\t\t\t// <script type=\"dojo/method\"> tags (with no event) are executed after instantiation\r\n\t\t\t// <script type=\"dojo/connect\" data-dojo-event=\"foo\"> tags are dojo.connected after instantiation,\r\n\t\t\t// and likewise with <script type=\"dojo/aspect\" data-dojo-method=\"foo\">\r\n\t\t\t// <script type=\"dojo/watch\" data-dojo-prop=\"foo\"> tags are dojo.watch after instantiation\r\n\t\t\t// <script type=\"dojo/on\" data-dojo-event=\"foo\"> tags are dojo.on after instantiation\r\n\t\t\t// note: dojo/* script tags cannot exist in self closing widgets, like <input />\r\n\t\t\tvar aspects = [],\t// aspects to connect after instantiation\r\n\t\t\t\tcalls = [],\t\t// functions to call after instantiation\r\n\t\t\t\twatches = [],  // functions to watch after instantiation\r\n\t\t\t\tons = []; // functions to on after instantiation\r\n\r\n\t\t\tif(scripts){\r\n\t\t\t\tfor(i = 0; i < scripts.length; i++){\r\n\t\t\t\t\tvar script = scripts[i];\r\n\t\t\t\t\tnode.removeChild(script);\r\n\t\t\t\t\t// FIXME: drop event=\"\" support in 2.0. use data-dojo-event=\"\" instead\r\n\t\t\t\t\tvar event = (script.getAttribute(attrData + \"event\") || script.getAttribute(\"event\")),\r\n\t\t\t\t\t\tprop = script.getAttribute(attrData + \"prop\"),\r\n\t\t\t\t\t\tmethod = script.getAttribute(attrData + \"method\"),\r\n\t\t\t\t\t\tadvice = script.getAttribute(attrData + \"advice\"),\r\n\t\t\t\t\t\tscriptType = script.getAttribute(\"type\"),\r\n\t\t\t\t\t\tnf = this._functionFromScript(script, attrData);\r\n\t\t\t\t\tif(event){\r\n\t\t\t\t\t\tif(scriptType == \"dojo/connect\"){\r\n\t\t\t\t\t\t\taspects.push({ method: event, func: nf });\r\n\t\t\t\t\t\t}else if(scriptType == \"dojo/on\"){\r\n\t\t\t\t\t\t\tons.push({ event: event, func: nf });\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t// <script type=\"dojo/method\" data-dojo-event=\"foo\">\r\n\t\t\t\t\t\t\t// TODO for 2.0: use data-dojo-method=\"foo\" instead (also affects dijit/Declaration)\r\n\t\t\t\t\t\t\tparams[event] = nf;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(scriptType == \"dojo/aspect\"){\r\n\t\t\t\t\t\taspects.push({ method: method, advice: advice, func: nf });\r\n\t\t\t\t\t}else if(scriptType == \"dojo/watch\"){\r\n\t\t\t\t\t\twatches.push({ prop: prop, func: nf });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcalls.push(nf);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// create the instance\r\n\t\t\tvar markupFactory = ctor.markupFactory || proto.markupFactory;\r\n\t\t\tvar instance = markupFactory ? markupFactory(params, node, ctor) : new ctor(params, node);\r\n\r\n\t\t\tfunction onInstantiate(instance){\r\n\t\t\t\t// map it to the JS namespace if that makes sense\r\n\t\t\t\tif(jsname){\r\n\t\t\t\t\tdlang.setObject(jsname, instance);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// process connections and startup functions\r\n\t\t\t\tfor(i = 0; i < aspects.length; i++){\r\n\t\t\t\t\taspect[aspects[i].advice || \"after\"](instance, aspects[i].method, dlang.hitch(instance, aspects[i].func), true);\r\n\t\t\t\t}\r\n\t\t\t\tfor(i = 0; i < calls.length; i++){\r\n\t\t\t\t\tcalls[i].call(instance);\r\n\t\t\t\t}\r\n\t\t\t\tfor(i = 0; i < watches.length; i++){\r\n\t\t\t\t\tinstance.watch(watches[i].prop, watches[i].func);\r\n\t\t\t\t}\r\n\t\t\t\tfor(i = 0; i < ons.length; i++){\r\n\t\t\t\t\tdon(instance, ons[i].event, ons[i].func);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn instance;\r\n\t\t\t}\r\n\r\n\t\t\tif(instance.then){\r\n\t\t\t\treturn instance.then(onInstantiate);\r\n\t\t\t}else{\r\n\t\t\t\treturn onInstantiate(instance);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscan: function(root, options){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tScan a DOM tree and return an array of objects representing the DOMNodes\r\n\t\t\t//\t\tthat need to be turned into widgets.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSearch specified node (or document root node) recursively for class instances\r\n\t\t\t//\t\tand return an array of objects that represent potential widgets to be\r\n\t\t\t//\t\tinstantiated. Searches for either data-dojo-type=\"MID\" or dojoType=\"MID\" where\r\n\t\t\t//\t\t\"MID\" is a module ID like \"dijit/form/Button\" or a fully qualified Class name\r\n\t\t\t//\t\tlike \"dijit/form/Button\".  If the MID is not currently available, scan will\r\n\t\t\t//\t\tattempt to require() in the module.\r\n\t\t\t//\r\n\t\t\t//\t\tSee parser.parse() for details of markup.\r\n\t\t\t// root: DomNode?\r\n\t\t\t//\t\tA default starting root node from which to start the parsing. Can be\r\n\t\t\t//\t\tomitted, defaulting to the entire document. If omitted, the `options`\r\n\t\t\t//\t\tobject can be passed in this place. If the `options` object has a\r\n\t\t\t//\t\t`rootNode` member, that is used.\r\n\t\t\t// options: Object\r\n\t\t\t//\t\ta kwArgs options object, see parse() for details\r\n\t\t\t//\r\n\t\t\t// returns: Promise\r\n\t\t\t//\t\tA promise that is resolved with the nodes that have been parsed.\r\n\r\n\t\t\tvar list = [], // Output List\r\n\t\t\t\tmids = [], // An array of modules that are not yet loaded\r\n\t\t\t\tmidsHash = {}; // Used to keep the mids array unique\r\n\r\n\t\t\tvar dojoType = (options.scope || dojo._scopeName) + \"Type\", // typically \"dojoType\"\r\n\t\t\t\tattrData = \"data-\" + (options.scope || dojo._scopeName) + \"-\", // typically \"data-dojo-\"\r\n\t\t\t\tdataDojoType = attrData + \"type\", // typically \"data-dojo-type\"\r\n\t\t\t\tdataDojoTextDir = attrData + \"textdir\", // typically \"data-dojo-textdir\"\r\n\t\t\t\tdataDojoMixins = attrData + \"mixins\";\t\t\t\t\t// typically \"data-dojo-mixins\"\r\n\r\n\t\t\t// Info on DOMNode currently being processed\r\n\t\t\tvar node = root.firstChild;\r\n\r\n\t\t\t// Info on parent of DOMNode currently being processed\r\n\t\t\t//\t- inherited: dir, lang, and textDir setting of parent, or inherited by parent\r\n\t\t\t//\t- parent: pointer to identical structure for my parent (or null if no parent)\r\n\t\t\t//\t- scripts: if specified, collects <script type=\"dojo/...\"> type nodes from children\r\n\t\t\tvar inherited = options.inherited;\r\n\t\t\tif(!inherited){\r\n\t\t\t\tfunction findAncestorAttr(node, attr){\r\n\t\t\t\t\treturn (node.getAttribute && node.getAttribute(attr)) ||\r\n\t\t\t\t\t\t(node.parentNode && findAncestorAttr(node.parentNode, attr));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinherited = {\r\n\t\t\t\t\tdir: findAncestorAttr(root, \"dir\"),\r\n\t\t\t\t\tlang: findAncestorAttr(root, \"lang\"),\r\n\t\t\t\t\ttextDir: findAncestorAttr(root, dataDojoTextDir)\r\n\t\t\t\t};\r\n\t\t\t\tfor(var key in inherited){\r\n\t\t\t\t\tif(!inherited[key]){\r\n\t\t\t\t\t\tdelete inherited[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Metadata about parent node\r\n\t\t\tvar parent = {\r\n\t\t\t\tinherited: inherited\r\n\t\t\t};\r\n\r\n\t\t\t// For collecting <script type=\"dojo/...\"> type nodes (when null, we don't need to collect)\r\n\t\t\tvar scripts;\r\n\r\n\t\t\t// when true, only look for <script type=\"dojo/...\"> tags, and don't recurse to children\r\n\t\t\tvar scriptsOnly;\r\n\r\n\t\t\tfunction getEffective(parent){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tGet effective dir, lang, textDir settings for specified obj\r\n\t\t\t\t//\t\t(matching \"parent\" object structure above), and do caching.\r\n\t\t\t\t//\t\tTake care not to return null entries.\r\n\t\t\t\tif(!parent.inherited){\r\n\t\t\t\t\tparent.inherited = {};\r\n\t\t\t\t\tvar node = parent.node,\r\n\t\t\t\t\t\tgrandparent = getEffective(parent.parent);\r\n\t\t\t\t\tvar inherited = {\r\n\t\t\t\t\t\tdir: node.getAttribute(\"dir\") || grandparent.dir,\r\n\t\t\t\t\t\tlang: node.getAttribute(\"lang\") || grandparent.lang,\r\n\t\t\t\t\t\ttextDir: node.getAttribute(dataDojoTextDir) || grandparent.textDir\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor(var key in inherited){\r\n\t\t\t\t\t\tif(inherited[key]){\r\n\t\t\t\t\t\t\tparent.inherited[key] = inherited[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn parent.inherited;\r\n\t\t\t}\r\n\r\n\t\t\t// DFS on DOM tree, collecting nodes with data-dojo-type specified.\r\n\t\t\twhile(true){\r\n\t\t\t\tif(!node){\r\n\t\t\t\t\t// Finished this level, continue to parent's next sibling\r\n\t\t\t\t\tif(!parent || !parent.node){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode = parent.node.nextSibling;\r\n\t\t\t\t\tscriptsOnly = false;\r\n\t\t\t\t\tparent = parent.parent;\r\n\t\t\t\t\tscripts = parent.scripts;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(node.nodeType != 1){\r\n\t\t\t\t\t// Text or comment node, skip to next sibling\r\n\t\t\t\t\tnode = node.nextSibling;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(scripts && node.nodeName.toLowerCase() == \"script\"){\r\n\t\t\t\t\t// Save <script type=\"dojo/...\"> for parent, then continue to next sibling\r\n\t\t\t\t\ttype = node.getAttribute(\"type\");\r\n\t\t\t\t\tif(type && /^dojo\\/\\w/i.test(type)){\r\n\t\t\t\t\t\tscripts.push(node);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode = node.nextSibling;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif(scriptsOnly){\r\n\t\t\t\t\t// scriptsOnly flag is set, we have already collected scripts if the parent wants them, so now we shouldn't\r\n\t\t\t\t\t// continue further analysis of the node and will continue to the next sibling\r\n\t\t\t\t\tnode = node.nextSibling;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check for data-dojo-type attribute, fallback to backward compatible dojoType\r\n\t\t\t\t// TODO: Remove dojoType in 2.0\r\n\t\t\t\tvar type = node.getAttribute(dataDojoType) || node.getAttribute(dojoType);\r\n\r\n\t\t\t\t// Short circuit for leaf nodes containing nothing [but text]\r\n\t\t\t\tvar firstChild = node.firstChild;\r\n\t\t\t\tif(!type && (!firstChild || (firstChild.nodeType == 3 && !firstChild.nextSibling))){\r\n\t\t\t\t\tnode = node.nextSibling;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Meta data about current node\r\n\t\t\t\tvar current;\r\n\r\n\t\t\t\tvar ctor = null;\r\n\t\t\t\tif(type){\r\n\t\t\t\t\t// If dojoType/data-dojo-type specified, add to output array of nodes to instantiate.\r\n\t\t\t\t\tvar mixinsValue = node.getAttribute(dataDojoMixins),\r\n\t\t\t\t\t\ttypes = mixinsValue ? [type].concat(mixinsValue.split(/\\s*,\\s*/)) : [type];\r\n\r\n\t\t\t\t\t// Note: won't find classes declared via dojo/Declaration or any modules that haven't been\r\n\t\t\t\t\t// loaded yet so use try/catch to avoid throw from require()\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tctor = getCtor(types, options.contextRequire);\r\n\t\t\t\t\t}catch(e){}\r\n\r\n\t\t\t\t\t// If the constructor was not found, check to see if it has modules that can be loaded\r\n\t\t\t\t\tif(!ctor){\r\n\t\t\t\t\t\tdarray.forEach(types, function(t){\r\n\t\t\t\t\t\t\tif(~t.indexOf('/') && !midsHash[t]){\r\n\t\t\t\t\t\t\t\t// If the type looks like a MID and it currently isn't in the array of MIDs to load, add it.\r\n\t\t\t\t\t\t\t\tmidsHash[t] = true;\r\n\t\t\t\t\t\t\t\tmids[mids.length] = t;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar childScripts = ctor && !ctor.prototype._noScript ? [] : null; // <script> nodes that are parent's children\r\n\r\n\t\t\t\t\t// Setup meta data about this widget node, and save it to list of nodes to instantiate\r\n\t\t\t\t\tcurrent = {\r\n\t\t\t\t\t\ttypes: types,\r\n\t\t\t\t\t\tctor: ctor,\r\n\t\t\t\t\t\tparent: parent,\r\n\t\t\t\t\t\tnode: node,\r\n\t\t\t\t\t\tscripts: childScripts\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcurrent.inherited = getEffective(current); // dir & lang settings for current node, explicit or inherited\r\n\t\t\t\t\tlist.push(current);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// Meta data about this non-widget node\r\n\t\t\t\t\tcurrent = {\r\n\t\t\t\t\t\tnode: node,\r\n\t\t\t\t\t\tscripts: scripts,\r\n\t\t\t\t\t\tparent: parent\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Recurse, collecting <script type=\"dojo/...\"> children, and also looking for\r\n\t\t\t\t// descendant nodes with dojoType specified (unless the widget has the stopParser flag).\r\n\t\t\t\t// When finished with children, go to my next sibling.\r\n\t\t\t\tscripts = childScripts;\r\n\t\t\t\tscriptsOnly = node.stopParser || (ctor && ctor.prototype.stopParser && !(options.template));\r\n\t\t\t\tparent = current;\r\n\t\t\t\tnode = firstChild;\r\n\t\t\t}\r\n\r\n\t\t\tvar d = new Deferred();\r\n\r\n\t\t\t// If there are modules to load then require them in\r\n\t\t\tif(mids.length){\r\n\t\t\t\t// Warn that there are modules being auto-required\r\n\t\t\t\tif(has(\"dojo-debug-messages\")){\r\n\t\t\t\t\tconsole.warn(\"WARNING: Modules being Auto-Required: \" + mids.join(\", \"));\r\n\t\t\t\t}\r\n\t\t\t\tvar r = options.contextRequire || require;\r\n\t\t\t\tr(mids, function(){\r\n\t\t\t\t\t// Go through list of widget nodes, filling in missing constructors, and filtering out nodes that shouldn't\r\n\t\t\t\t\t// be instantiated due to a stopParser flag on an ancestor that we belatedly learned about due to\r\n\t\t\t\t\t// auto-require of a module like ContentPane.   Assumes list is in DFS order.\r\n\t\t\t\t\td.resolve(darray.filter(list, function(widget){\r\n\t\t\t\t\t\tif(!widget.ctor){\r\n\t\t\t\t\t\t\t// Attempt to find the constructor again.   Still won't find classes defined via\r\n\t\t\t\t\t\t\t// dijit/Declaration so need to try/catch.\r\n\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\twidget.ctor = getCtor(widget.types, options.contextRequire);\r\n\t\t\t\t\t\t\t}catch(e){}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Get the parent widget\r\n\t\t\t\t\t\tvar parent = widget.parent;\r\n\t\t\t\t\t\twhile(parent && !parent.types){\r\n\t\t\t\t\t\t\tparent = parent.parent;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Return false if this node should be skipped due to stopParser on an ancestor.\r\n\t\t\t\t\t\t// Since list[] is in DFS order, this loop will always set parent.instantiateChildren before\r\n\t\t\t\t\t\t// trying to compute widget.instantiate.\r\n\t\t\t\t\t\tvar proto = widget.ctor && widget.ctor.prototype;\r\n\t\t\t\t\t\twidget.instantiateChildren = !(proto && proto.stopParser && !(options.template));\r\n\t\t\t\t\t\twidget.instantiate = !parent || (parent.instantiate && parent.instantiateChildren);\r\n\t\t\t\t\t\treturn widget.instantiate;\r\n\t\t\t\t\t}));\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\t// There were no modules to load, so just resolve with the parsed nodes.   This separate code path is for\r\n\t\t\t\t// efficiency, to avoid running the require() and the callback code above.\r\n\t\t\t\td.resolve(list);\r\n\t\t\t}\r\n\r\n\t\t\t// Return the promise\r\n\t\t\treturn d.promise;\r\n\t\t},\r\n\r\n\t\t_require: function(/*DOMNode*/ script, /*Object?*/ options){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHelper for _scanAMD().  Takes a `<script type=dojo/require>bar: \"acme/bar\", ...</script>` node,\r\n\t\t\t//\t\tcalls require() to load the specified modules and (asynchronously) assign them to the specified global\r\n\t\t\t//\t\tvariables, and returns a Promise for when that operation completes.\r\n\t\t\t//\r\n\t\t\t//\t\tIn the example above, it is effectively doing a require([\"acme/bar\", ...], function(a){ bar = a; }).\r\n\r\n\t\t\tvar hash = myEval(\"{\" + script.innerHTML + \"}\"), // can't use dojo/json::parse() because maybe no quotes\r\n\t\t\t\tvars = [],\r\n\t\t\t\tmids = [],\r\n\t\t\t\td = new Deferred();\r\n\r\n\t\t\tvar contextRequire = (options && options.contextRequire) || require;\r\n\r\n\t\t\tfor(var name in hash){\r\n\t\t\t\tvars.push(name);\r\n\t\t\t\tmids.push(hash[name]);\r\n\t\t\t}\r\n\r\n\t\t\tcontextRequire(mids, function(){\r\n\t\t\t\tfor(var i = 0; i < vars.length; i++){\r\n\t\t\t\t\tdlang.setObject(vars[i], arguments[i]);\r\n\t\t\t\t}\r\n\t\t\t\td.resolve(arguments);\r\n\t\t\t});\r\n\r\n\t\t\treturn d.promise;\r\n\t\t},\r\n\r\n\t\t_scanAmd: function(root, options){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tScans the DOM for any declarative requires and returns their values.\r\n\t\t\t// description:\r\n\t\t\t//\t\tLooks for `<script type=dojo/require>bar: \"acme/bar\", ...</script>` node, calls require() to load the\r\n\t\t\t//\t\tspecified modules and (asynchronously) assign them to the specified global variables,\r\n\t\t\t//\t\tand returns a Promise for when those operations complete.\r\n\t\t\t// root: DomNode\r\n\t\t\t//\t\tThe node to base the scan from.\r\n\t\t\t// options: Object?\r\n\t\t\t//\t\ta kwArgs options object, see parse() for details\r\n\r\n\t\t\t// Promise that resolves when all the <script type=dojo/require> nodes have finished loading.\r\n\t\t\tvar deferred = new Deferred(),\r\n\t\t\t\tpromise = deferred.promise;\r\n\t\t\tdeferred.resolve(true);\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tquery(\"script[type='dojo/require']\", root).forEach(function(node){\r\n\t\t\t\t// Fire off require() call for specified modules.  Chain this require to fire after\r\n\t\t\t\t// any previous requires complete, so that layers can be loaded before individual module require()'s fire.\r\n\t\t\t\tpromise = promise.then(function(){\r\n\t\t\t\t\treturn self._require(node, options);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Remove from DOM so it isn't seen again\r\n\t\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\t});\r\n\r\n\t\t\treturn promise;\r\n\t\t},\r\n\r\n\t\tparse: function(rootNode, options){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tScan the DOM for class instances, and instantiate them.\r\n\t\t\t// description:\r\n\t\t\t//\t\tSearch specified node (or root node) recursively for class instances,\r\n\t\t\t//\t\tand instantiate them. Searches for either data-dojo-type=\"Class\" or\r\n\t\t\t//\t\tdojoType=\"Class\" where \"Class\" is a a fully qualified class name,\r\n\t\t\t//\t\tlike `dijit/form/Button`\r\n\t\t\t//\r\n\t\t\t//\t\tUsing `data-dojo-type`:\r\n\t\t\t//\t\tAttributes using can be mixed into the parameters used to instantiate the\r\n\t\t\t//\t\tClass by using a `data-dojo-props` attribute on the node being converted.\r\n\t\t\t//\t\t`data-dojo-props` should be a string attribute to be converted from JSON.\r\n\t\t\t//\r\n\t\t\t//\t\tUsing `dojoType`:\r\n\t\t\t//\t\tAttributes are read from the original domNode and converted to appropriate\r\n\t\t\t//\t\ttypes by looking up the Class prototype values. This is the default behavior\r\n\t\t\t//\t\tfrom Dojo 1.0 to Dojo 1.5. `dojoType` support is deprecated, and will\r\n\t\t\t//\t\tgo away in Dojo 2.0.\r\n\t\t\t// rootNode: DomNode?\r\n\t\t\t//\t\tA default starting root node from which to start the parsing. Can be\r\n\t\t\t//\t\tomitted, defaulting to the entire document. If omitted, the `options`\r\n\t\t\t//\t\tobject can be passed in this place. If the `options` object has a\r\n\t\t\t//\t\t`rootNode` member, that is used.\r\n\t\t\t// options: Object?\r\n\t\t\t//\t\tA hash of options.\r\n\t\t\t//\r\n\t\t\t//\t\t- noStart: Boolean?:\r\n\t\t\t//\t\t\twhen set will prevent the parser from calling .startup()\r\n\t\t\t//\t\t\twhen locating the nodes.\r\n\t\t\t//\t\t- rootNode: DomNode?:\r\n\t\t\t//\t\t\tidentical to the function's `rootNode` argument, though\r\n\t\t\t//\t\t\tallowed to be passed in via this `options object.\r\n\t\t\t//\t\t- template: Boolean:\r\n\t\t\t//\t\t\tIf true, ignores ContentPane's stopParser flag and parses contents inside of\r\n\t\t\t//\t\t\ta ContentPane inside of a template.   This allows dojoAttachPoint on widgets/nodes\r\n\t\t\t//\t\t\tnested inside the ContentPane to work.\r\n\t\t\t//\t\t- inherited: Object:\r\n\t\t\t//\t\t\tHash possibly containing dir and lang settings to be applied to\r\n\t\t\t//\t\t\tparsed widgets, unless there's another setting on a sub-node that overrides\r\n\t\t\t//\t\t- scope: String:\r\n\t\t\t//\t\t\tRoot for attribute names to search for.   If scopeName is dojo,\r\n\t\t\t//\t\t\twill search for data-dojo-type (or dojoType).   For backwards compatibility\r\n\t\t\t//\t\t\treasons defaults to dojo._scopeName (which is \"dojo\" except when\r\n\t\t\t//\t\t\tmulti-version support is used, when it will be something like dojo16, dojo20, etc.)\r\n\t\t\t//\t\t- propsThis: Object:\r\n\t\t\t//\t\t\tIf specified, \"this\" referenced from data-dojo-props will refer to propsThis.\r\n\t\t\t//\t\t\tIntended for use from the widgets-in-template feature of `dijit._WidgetsInTemplateMixin`\r\n\t\t\t//\t\t- contextRequire: Function:\r\n\t\t\t//\t\t\tIf specified, this require is utilised for looking resolving modules instead of the\r\n\t\t\t//\t\t\t`dojo/parser` context `require()`.  Intended for use from the widgets-in-template feature of\r\n\t\t\t//\t\t\t`dijit._WidgetsInTemplateMixin`.\r\n\t\t\t// returns: Mixed\r\n\t\t\t//\t\tReturns a blended object that is an array of the instantiated objects, but also can include\r\n\t\t\t//\t\ta promise that is resolved with the instantiated objects.  This is done for backwards\r\n\t\t\t//\t\tcompatibility.  If the parser auto-requires modules, it will always behave in a promise\r\n\t\t\t//\t\tfashion and `parser.parse().then(function(instances){...})` should be used.\r\n\t\t\t// example:\r\n\t\t\t//\t\tParse all widgets on a page:\r\n\t\t\t//\t|\t\tparser.parse();\r\n\t\t\t// example:\r\n\t\t\t//\t\tParse all classes within the node with id=\"foo\"\r\n\t\t\t//\t|\t\tparser.parse(dojo.byId('foo'));\r\n\t\t\t// example:\r\n\t\t\t//\t\tParse all classes in a page, but do not call .startup() on any\r\n\t\t\t//\t\tchild\r\n\t\t\t//\t|\t\tparser.parse({ noStart: true })\r\n\t\t\t// example:\r\n\t\t\t//\t\tParse all classes in a node, but do not call .startup()\r\n\t\t\t//\t|\t\tparser.parse(someNode, { noStart:true });\r\n\t\t\t//\t|\t\t// or\r\n\t\t\t//\t|\t\tparser.parse({ noStart:true, rootNode: someNode });\r\n\r\n\t\t\t// determine the root node and options based on the passed arguments.\r\n\t\t\tvar root;\r\n\t\t\tif(!options && rootNode && rootNode.rootNode){\r\n\t\t\t\toptions = rootNode;\r\n\t\t\t\troot = options.rootNode;\r\n\t\t\t}else if(rootNode && dlang.isObject(rootNode) && !(\"nodeType\" in rootNode)){\r\n\t\t\t\toptions = rootNode;\r\n\t\t\t}else{\r\n\t\t\t\troot = rootNode;\r\n\t\t\t}\r\n\t\t\troot = root ? dom.byId(root) : dwindow.body();\r\n\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\tvar mixin = options.template ? { template: true } : {},\r\n\t\t\t\tinstances = [],\r\n\t\t\t\tself = this;\r\n\r\n\t\t\t// First scan for any <script type=dojo/require> nodes, and execute.\r\n\t\t\t// Then scan for all nodes with data-dojo-type, and load any unloaded modules.\r\n\t\t\t// Then build the object instances.  Add instances to already existing (but empty) instances[] array,\r\n\t\t\t// which may already have been returned to caller.  Also, use otherwise to collect and throw any errors\r\n\t\t\t// that occur during the parse().\r\n\t\t\tvar p =\r\n\t\t\t\tthis._scanAmd(root, options).then(function(){\r\n\t\t\t\t\treturn self.scan(root, options);\r\n\t\t\t\t}).then(function(parsedNodes){\r\n\t\t\t\t\treturn self._instantiate(parsedNodes, mixin, options, true);\r\n\t\t\t\t}).then(function(_instances){\r\n\t\t\t\t\t// Copy the instances into the instances[] array we declared above, and are accessing as\r\n\t\t\t\t\t// our return value.\r\n\t\t\t\t\treturn instances = instances.concat(_instances);\r\n\t\t\t\t}).otherwise(function(e){\r\n\t\t\t\t\t// TODO Modify to follow better pattern for promise error management when available\r\n\t\t\t\t\tconsole.error(\"dojo/parser::parse() error\", e);\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t});\r\n\r\n\t\t\t// Blend the array with the promise\r\n\t\t\tdlang.mixin(instances, p);\r\n\t\t\treturn instances;\r\n\t\t}\r\n\t};\r\n\r\n\tif(has(\"extend-dojo\")){\r\n\t\tdojo.parser = parser;\r\n\t}\r\n\r\n\t// Register the parser callback. It should be the first callback\r\n\t// after the a11y test.\r\n\tif(config.parseOnLoad){\r\n\t\tready(100, parser, \"parse\");\r\n\t}\r\n\r\n\treturn parser;\r\n});\r\n\ndefine('dojo/html',[\"./_base/kernel\", \"./_base/lang\", \"./_base/array\", \"./_base/declare\", \"./dom\", \"./dom-construct\", \"./parser\"],\r\n\tfunction(kernel, lang, darray, declare, dom, domConstruct, parser){\r\n\t// module:\r\n\t//\t\tdojo/html\r\n\r\n\t// the parser might be needed..\r\n\r\n\t// idCounter is incremented with each instantiation to allow assignment of a unique id for tracking, logging purposes\r\n\tvar idCounter = 0;\r\n\r\n\tvar html = {\r\n\t\t// summary:\r\n\t\t//\t\tTODOC\r\n\r\n\t\t_secureForInnerHtml: function(/*String*/ cont){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tremoves !DOCTYPE and title elements from the html string.\r\n\t\t\t//\r\n\t\t\t//\t\tkhtml is picky about dom faults, you can't attach a style or `<title>` node as child of body\r\n\t\t\t//\t\tmust go into head, so we need to cut out those tags\r\n\t\t\t// cont:\r\n\t\t\t//\t\tAn html string for insertion into the dom\r\n\t\t\t//\r\n\t\t\treturn cont.replace(/(?:\\s*<!DOCTYPE\\s[^>]+>|<title[^>]*>[\\s\\S]*?<\\/title>)/ig, \"\"); // String\r\n\t\t},\r\n\r\n\t\t// Deprecated, should use dojo/dom-constuct.empty() directly, remove in 2.0.\r\n\t\t_emptyNode: domConstruct.empty,\r\n\r\n\t\t_setNodeContent: function(/*DomNode*/ node, /*String|DomNode|NodeList*/ cont){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tinserts the given content into the given node\r\n\t\t\t// node:\r\n\t\t\t//\t\tthe parent element\r\n\t\t\t// content:\r\n\t\t\t//\t\tthe content to be set on the parent element.\r\n\t\t\t//\t\tThis can be an html string, a node reference or a NodeList, dojo/NodeList, Array or other enumerable list of nodes\r\n\r\n\t\t\t// always empty\r\n\t\t\tdomConstruct.empty(node);\r\n\r\n\t\t\tif(cont){\r\n\t\t\t\tif(typeof cont == \"string\"){\r\n\t\t\t\t\tcont = domConstruct.toDom(cont, node.ownerDocument);\r\n\t\t\t\t}\r\n\t\t\t\tif(!cont.nodeType && lang.isArrayLike(cont)){\r\n\t\t\t\t\t// handle as enumerable, but it may shrink as we enumerate it\r\n\t\t\t\t\tfor(var startlen=cont.length, i=0; i<cont.length; i=startlen==cont.length ? i+1 : 0){\r\n\t\t\t\t\t\tdomConstruct.place( cont[i], node, \"last\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// pass nodes, documentFragments and unknowns through to dojo.place\r\n\t\t\t\t\tdomConstruct.place(cont, node, \"last\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// return DomNode\r\n\t\t\treturn node;\r\n\t\t},\r\n\r\n\t\t// we wrap up the content-setting operation in a object\r\n\t\t_ContentSetter: declare(\"dojo.html._ContentSetter\", null, {\r\n\t\t\t// node: DomNode|String\r\n\t\t\t//\t\tAn node which will be the parent element that we set content into\r\n\t\t\tnode: \"\",\r\n\r\n\t\t\t// content: String|DomNode|DomNode[]\r\n\t\t\t//\t\tThe content to be placed in the node. Can be an HTML string, a node reference, or a enumerable list of nodes\r\n\t\t\tcontent: \"\",\r\n\r\n\t\t\t// id: String?\r\n\t\t\t//\t\tUsually only used internally, and auto-generated with each instance\r\n\t\t\tid: \"\",\r\n\r\n\t\t\t// cleanContent: Boolean\r\n\t\t\t//\t\tShould the content be treated as a full html document,\r\n\t\t\t//\t\tand the real content stripped of <html>, <body> wrapper before injection\r\n\t\t\tcleanContent: false,\r\n\r\n\t\t\t// extractContent: Boolean\r\n\t\t\t//\t\tShould the content be treated as a full html document,\r\n\t\t\t//\t\tand the real content stripped of `<html> <body>` wrapper before injection\r\n\t\t\textractContent: false,\r\n\r\n\t\t\t// parseContent: Boolean\r\n\t\t\t//\t\tShould the node by passed to the parser after the new content is set\r\n\t\t\tparseContent: false,\r\n\r\n\t\t\t// parserScope: String\r\n\t\t\t//\t\tFlag passed to parser.\tRoot for attribute names to search for.\t  If scopeName is dojo,\r\n\t\t\t//\t\twill search for data-dojo-type (or dojoType).  For backwards compatibility\r\n\t\t\t//\t\treasons defaults to dojo._scopeName (which is \"dojo\" except when\r\n\t\t\t//\t\tmulti-version support is used, when it will be something like dojo16, dojo20, etc.)\r\n\t\t\tparserScope: kernel._scopeName,\r\n\r\n\t\t\t// startup: Boolean\r\n\t\t\t//\t\tStart the child widgets after parsing them.\t  Only obeyed if parseContent is true.\r\n\t\t\tstartup: true,\r\n\r\n\t\t\t// lifecycle methods\r\n\t\t\tconstructor: function(/*Object*/ params, /*String|DomNode*/ node){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tProvides a configurable, extensible object to wrap the setting on content on a node\r\n\t\t\t\t//\t\tcall the set() method to actually set the content..\r\n\r\n\t\t\t\t// the original params are mixed directly into the instance \"this\"\r\n\t\t\t\tlang.mixin(this, params || {});\r\n\r\n\t\t\t\t// give precedence to params.node vs. the node argument\r\n\t\t\t\t// and ensure its a node, not an id string\r\n\t\t\t\tnode = this.node = dom.byId( this.node || node );\r\n\r\n\t\t\t\tif(!this.id){\r\n\t\t\t\t\tthis.id = [\r\n\t\t\t\t\t\t\"Setter\",\r\n\t\t\t\t\t\t(node) ? node.id || node.tagName : \"\",\r\n\t\t\t\t\t\tidCounter++\r\n\t\t\t\t\t].join(\"_\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tset: function(/* String|DomNode|NodeList? */ cont, /*Object?*/ params){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tfront-end to the set-content sequence\r\n\t\t\t\t// cont:\r\n\t\t\t\t//\t\tAn html string, node or enumerable list of nodes for insertion into the dom\r\n\t\t\t\t//\t\tIf not provided, the object's content property will be used\r\n\t\t\t\tif(undefined !== cont){\r\n\t\t\t\t\tthis.content = cont;\r\n\t\t\t\t}\r\n\t\t\t\t// in the re-use scenario, set needs to be able to mixin new configuration\r\n\t\t\t\tif(params){\r\n\t\t\t\t\tthis._mixin(params);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.onBegin();\r\n\t\t\t\tthis.setContent();\r\n\r\n\t\t\t\tvar ret = this.onEnd();\r\n\r\n\t\t\t\tif(ret && ret.then){\r\n\t\t\t\t\t// Make dojox/html/_ContentSetter.set() return a Promise that resolves when load and parse complete.\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// Vanilla dojo/html._ContentSetter.set() returns a DOMNode for back compat.   For 2.0, switch it to\r\n\t\t\t\t\t// return a Deferred like above.\r\n\t\t\t\t\treturn this.node;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsetContent: function(){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tsets the content on the node\r\n\r\n\t\t\t\tvar node = this.node;\r\n\t\t\t\tif(!node){\r\n\t\t\t\t\t// can't proceed\r\n\t\t\t\t\tthrow new Error(this.declaredClass + \": setContent given no node\");\r\n\t\t\t\t}\r\n\t\t\t\ttry{\r\n\t\t\t\t\tnode = html._setNodeContent(node, this.content);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\t// check if a domfault occurs when we are appending this.errorMessage\r\n\t\t\t\t\t// like for instance if domNode is a UL and we try append a DIV\r\n\r\n\t\t\t\t\t// FIXME: need to allow the user to provide a content error message string\r\n\t\t\t\t\tvar errMess = this.onContentError(e);\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tnode.innerHTML = errMess;\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.error('Fatal ' + this.declaredClass + '.setContent could not change content due to '+e.message, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// always put back the node for the next method\r\n\t\t\t\tthis.node = node; // DomNode\r\n\t\t\t},\r\n\r\n\t\t\tempty: function(){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tcleanly empty out existing content\r\n\r\n\t\t\t\t// If there is a parse in progress, cancel it.\r\n\t\t\t\tif(this.parseDeferred){\r\n\t\t\t\t\tif(!this.parseDeferred.isResolved()){\r\n\t\t\t\t\t\tthis.parseDeferred.cancel();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete this.parseDeferred;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// destroy any widgets from a previous run\r\n\t\t\t\t// NOTE: if you don't want this you'll need to empty\r\n\t\t\t\t// the parseResults array property yourself to avoid bad things happening\r\n\t\t\t\tif(this.parseResults && this.parseResults.length){\r\n\t\t\t\t\tdarray.forEach(this.parseResults, function(w){\r\n\t\t\t\t\t\tif(w.destroy){\r\n\t\t\t\t\t\t\tw.destroy();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdelete this.parseResults;\r\n\t\t\t\t}\r\n\t\t\t\t// this is fast, but if you know its already empty or safe, you could\r\n\t\t\t\t// override empty to skip this step\r\n\t\t\t\tdomConstruct.empty(this.node);\r\n\t\t\t},\r\n\r\n\t\t\tonBegin: function(){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tCalled after instantiation, but before set();\r\n\t\t\t\t//\t\tIt allows modification of any of the object properties -\r\n\t\t\t\t//\t\tincluding the node and content provided - before the set operation actually takes place\r\n\t\t\t\t//\t\tThis default implementation checks for cleanContent and extractContent flags to\r\n\t\t\t\t//\t\toptionally pre-process html string content\r\n\t\t\t\tvar cont = this.content;\r\n\r\n\t\t\t\tif(lang.isString(cont)){\r\n\t\t\t\t\tif(this.cleanContent){\r\n\t\t\t\t\t\tcont = html._secureForInnerHtml(cont);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.extractContent){\r\n\t\t\t\t\t\tvar match = cont.match(/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\/body>/im);\r\n\t\t\t\t\t\tif(match){ cont = match[1]; }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// clean out the node and any cruft associated with it - like widgets\r\n\t\t\t\tthis.empty();\r\n\r\n\t\t\t\tthis.content = cont;\r\n\t\t\t\treturn this.node; // DomNode\r\n\t\t\t},\r\n\r\n\t\t\tonEnd: function(){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tCalled after set(), when the new content has been pushed into the node\r\n\t\t\t\t//\t\tIt provides an opportunity for post-processing before handing back the node to the caller\r\n\t\t\t\t//\t\tThis default implementation checks a parseContent flag to optionally run the dojo parser over the new content\r\n\t\t\t\tif(this.parseContent){\r\n\t\t\t\t\t// populates this.parseResults and this.parseDeferred if you need those..\r\n\t\t\t\t\tthis._parse();\r\n\t\t\t\t}\r\n\t\t\t\treturn this.node; // DomNode\r\n\t\t\t\t// TODO: for 2.0 return a Promise indicating that the parse completed.\r\n\t\t\t},\r\n\r\n\t\t\ttearDown: function(){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tmanually reset the Setter instance if its being re-used for example for another set()\r\n\t\t\t\t// description:\r\n\t\t\t\t//\t\ttearDown() is not called automatically.\r\n\t\t\t\t//\t\tIn normal use, the Setter instance properties are simply allowed to fall out of scope\r\n\t\t\t\t//\t\tbut the tearDown method can be called to explicitly reset this instance.\r\n\t\t\t\tdelete this.parseResults;\r\n\t\t\t\tdelete this.parseDeferred;\r\n\t\t\t\tdelete this.node;\r\n\t\t\t\tdelete this.content;\r\n\t\t\t},\r\n\r\n\t\t\tonContentError: function(err){\r\n\t\t\t\treturn \"Error occurred setting content: \" + err;\r\n\t\t\t},\r\n\r\n\t\t\tonExecError: function(err){\r\n\t\t\t\treturn \"Error occurred executing scripts: \" + err;\r\n\t\t\t},\r\n\r\n\t\t\t_mixin: function(params){\r\n\t\t\t\t// mix properties/methods into the instance\r\n\t\t\t\t// TODO: the intention with tearDown is to put the Setter's state\r\n\t\t\t\t// back to that of the original constructor (vs. deleting/resetting everything regardless of ctor params)\r\n\t\t\t\t// so we could do something here to move the original properties aside for later restoration\r\n\t\t\t\tvar empty = {}, key;\r\n\t\t\t\tfor(key in params){\r\n\t\t\t\t\tif(key in empty){ continue; }\r\n\t\t\t\t\t// TODO: here's our opportunity to mask the properties we don't consider configurable/overridable\r\n\t\t\t\t\t// .. but history shows we'll almost always guess wrong\r\n\t\t\t\t\tthis[key] = params[key];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_parse: function(){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\truns the dojo parser over the node contents, storing any results in this.parseResults\r\n\t\t\t\t//\t\tand the parse promise in this.parseDeferred\r\n\t\t\t\t//\t\tAny errors resulting from parsing are passed to _onError for handling\r\n\r\n\t\t\t\tvar rootNode = this.node;\r\n\t\t\t\ttry{\r\n\t\t\t\t\t// store the results (widgets, whatever) for potential retrieval\r\n\t\t\t\t\tvar inherited = {};\r\n\t\t\t\t\tdarray.forEach([\"dir\", \"lang\", \"textDir\"], function(name){\r\n\t\t\t\t\t\tif(this[name]){\r\n\t\t\t\t\t\t\tinherited[name] = this[name];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t\tvar self = this;\r\n\t\t\t\t\tthis.parseDeferred = parser.parse({\r\n\t\t\t\t\t\trootNode: rootNode,\r\n\t\t\t\t\t\tnoStart: !this.startup,\r\n\t\t\t\t\t\tinherited: inherited,\r\n\t\t\t\t\t\tscope: this.parserScope\r\n\t\t\t\t\t}).then(function(results){\r\n\t\t\t\t\t\t\treturn self.parseResults = results;\r\n\t\t\t\t\t\t}, function(e){\r\n\t\t\t\t\t\t\tself._onError('Content', e, \"Error parsing in _ContentSetter#\" + this.id);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tthis._onError('Content', e, \"Error parsing in _ContentSetter#\" + this.id);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t_onError: function(type, err, consoleText){\r\n\t\t\t\t// summary:\r\n\t\t\t\t//\t\tshows user the string that is returned by on[type]Error\r\n\t\t\t\t//\t\toverride/implement on[type]Error and return your own string to customize\r\n\t\t\t\tvar errText = this['on' + type + 'Error'].call(this, err);\r\n\t\t\t\tif(consoleText){\r\n\t\t\t\t\tconsole.error(consoleText, err);\r\n\t\t\t\t}else if(errText){ // a empty string won't change current content\r\n\t\t\t\t\thtml._setNodeContent(this.node, errText, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}), // end declare()\r\n\r\n\t\tset: function(/*DomNode*/ node, /*String|DomNode|NodeList*/ cont, /*Object?*/ params){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tinserts (replaces) the given content into the given node. dojo/dom-construct.place(cont, node, \"only\")\r\n\t\t\t//\t\tmay be a better choice for simple HTML insertion.\r\n\t\t\t// description:\r\n\t\t\t//\t\tUnless you need to use the params capabilities of this method, you should use\r\n\t\t\t//\t\tdojo/dom-construct.place(cont, node, \"only\"). dojo/dom-construct..place() has more robust support for injecting\r\n\t\t\t//\t\tan HTML string into the DOM, but it only handles inserting an HTML string as DOM\r\n\t\t\t//\t\telements, or inserting a DOM node. dojo/dom-construct..place does not handle NodeList insertions\r\n\t\t\t//\t\tdojo/dom-construct.place(cont, node, \"only\"). dojo/dom-construct.place() has more robust support for injecting\r\n\t\t\t//\t\tan HTML string into the DOM, but it only handles inserting an HTML string as DOM\r\n\t\t\t//\t\telements, or inserting a DOM node. dojo/dom-construct.place does not handle NodeList insertions\r\n\t\t\t//\t\tor the other capabilities as defined by the params object for this method.\r\n\t\t\t// node:\r\n\t\t\t//\t\tthe parent element that will receive the content\r\n\t\t\t// cont:\r\n\t\t\t//\t\tthe content to be set on the parent element.\r\n\t\t\t//\t\tThis can be an html string, a node reference or a NodeList, dojo/NodeList, Array or other enumerable list of nodes\r\n\t\t\t// params:\r\n\t\t\t//\t\tOptional flags/properties to configure the content-setting. See dojo/html/_ContentSetter\r\n\t\t\t// example:\r\n\t\t\t//\t\tA safe string/node/nodelist content replacement/injection with hooks for extension\r\n\t\t\t//\t\tExample Usage:\r\n\t\t\t//\t|\thtml.set(node, \"some string\");\r\n\t\t\t//\t|\thtml.set(node, contentNode, {options});\r\n\t\t\t//\t|\thtml.set(node, myNode.childNodes, {options});\r\n\t\t\tif(undefined == cont){\r\n\t\t\t\tconsole.warn(\"dojo.html.set: no cont argument provided, using empty string\");\r\n\t\t\t\tcont = \"\";\r\n\t\t\t}\r\n\t\t\tif(!params){\r\n\t\t\t\t// simple and fast\r\n\t\t\t\treturn html._setNodeContent(node, cont, true);\r\n\t\t\t}else{\r\n\t\t\t\t// more options but slower\r\n\t\t\t\t// note the arguments are reversed in order, to match the convention for instantiation via the parser\r\n\t\t\t\tvar op = new html._ContentSetter(lang.mixin(\r\n\t\t\t\t\tparams,\r\n\t\t\t\t\t{ content: cont, node: node }\r\n\t\t\t\t));\r\n\t\t\t\treturn op.set();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tlang.setObject(\"dojo.html\", html);\r\n\r\n\treturn html;\r\n});\r\n\n\ndefine('dojo/string',[\r\n\t\"./_base/kernel\",\t// kernel.global\r\n\t\"./_base/lang\"\r\n], function(kernel, lang){\r\n\r\n// module:\r\n//\t\tdojo/string\r\nvar ESCAPE_REGEXP = /[&<>'\"\\/]/g;\r\nvar ESCAPE_MAP = {\r\n\t'&': '&amp;',\r\n\t'<': '&lt;',\r\n\t'>': '&gt;',\r\n\t'\"': '&quot;',\r\n\t\"'\": '&#x27;',\r\n\t'/': '&#x2F;'\r\n};\r\nvar string = {\r\n\t// summary:\r\n\t//\t\tString utilities for Dojo\r\n};\r\nlang.setObject(\"dojo.string\", string);\r\n\r\nstring.escape = function(/*String*/str){\r\n\t// summary:\r\n\t//\t\tEfficiently escape a string for insertion into HTML (innerHTML or attributes), replacing &, <, >, \", ', and / characters.\r\n\t// str:\r\n\t//\t\tthe string to escape\r\n\tif(!str){ return \"\"; }\r\n\treturn str.replace(ESCAPE_REGEXP, function(c) {\r\n\t\treturn ESCAPE_MAP[c];\r\n\t});\r\n};\r\n\r\nstring.rep = function(/*String*/str, /*Integer*/num){\r\n\t// summary:\r\n\t//\t\tEfficiently replicate a string `n` times.\r\n\t// str:\r\n\t//\t\tthe string to replicate\r\n\t// num:\r\n\t//\t\tnumber of times to replicate the string\r\n\r\n\tif(num <= 0 || !str){ return \"\"; }\r\n\r\n\tvar buf = [];\r\n\tfor(;;){\r\n\t\tif(num & 1){\r\n\t\t\tbuf.push(str);\r\n\t\t}\r\n\t\tif(!(num >>= 1)){ break; }\r\n\t\tstr += str;\r\n\t}\r\n\treturn buf.join(\"\");\t// String\r\n};\r\n\r\nstring.pad = function(/*String*/text, /*Integer*/size, /*String?*/ch, /*Boolean?*/end){\r\n\t// summary:\r\n\t//\t\tPad a string to guarantee that it is at least `size` length by\r\n\t//\t\tfilling with the character `ch` at either the start or end of the\r\n\t//\t\tstring. Pads at the start, by default.\r\n\t// text:\r\n\t//\t\tthe string to pad\r\n\t// size:\r\n\t//\t\tlength to provide padding\r\n\t// ch:\r\n\t//\t\tcharacter to pad, defaults to '0'\r\n\t// end:\r\n\t//\t\tadds padding at the end if true, otherwise pads at start\r\n\t// example:\r\n\t//\t|\t// Fill the string to length 10 with \"+\" characters on the right.  Yields \"Dojo++++++\".\r\n\t//\t|\tstring.pad(\"Dojo\", 10, \"+\", true);\r\n\r\n\tif(!ch){\r\n\t\tch = '0';\r\n\t}\r\n\tvar out = String(text),\r\n\t\tpad = string.rep(ch, Math.ceil((size - out.length) / ch.length));\r\n\treturn end ? out + pad : pad + out;\t// String\r\n};\r\n\r\nstring.substitute = function(\t/*String*/\t\ttemplate,\r\n\t\t\t\t\t\t\t\t\t/*Object|Array*/map,\r\n\t\t\t\t\t\t\t\t\t/*Function?*/\ttransform,\r\n\t\t\t\t\t\t\t\t\t/*Object?*/\t\tthisObject){\r\n\t// summary:\r\n\t//\t\tPerforms parameterized substitutions on a string. Throws an\r\n\t//\t\texception if any parameter is unmatched.\r\n\t// template:\r\n\t//\t\ta string with expressions in the form `${key}` to be replaced or\r\n\t//\t\t`${key:format}` which specifies a format function. keys are case-sensitive.\r\n\t// map:\r\n\t//\t\thash to search for substitutions\r\n\t// transform:\r\n\t//\t\ta function to process all parameters before substitution takes\r\n\t//\t\tplace, e.g. mylib.encodeXML\r\n\t// thisObject:\r\n\t//\t\twhere to look for optional format function; default to the global\r\n\t//\t\tnamespace\r\n\t// example:\r\n\t//\t\tSubstitutes two expressions in a string from an Array or Object\r\n\t//\t|\t// returns \"File 'foo.html' is not found in directory '/temp'.\"\r\n\t//\t|\t// by providing substitution data in an Array\r\n\t//\t|\tstring.substitute(\r\n\t//\t|\t\t\"File '${0}' is not found in directory '${1}'.\",\r\n\t//\t|\t\t[\"foo.html\",\"/temp\"]\r\n\t//\t|\t);\r\n\t//\t|\r\n\t//\t|\t// also returns \"File 'foo.html' is not found in directory '/temp'.\"\r\n\t//\t|\t// but provides substitution data in an Object structure.  Dotted\r\n\t//\t|\t// notation may be used to traverse the structure.\r\n\t//\t|\tstring.substitute(\r\n\t//\t|\t\t\"File '${name}' is not found in directory '${info.dir}'.\",\r\n\t//\t|\t\t{ name: \"foo.html\", info: { dir: \"/temp\" } }\r\n\t//\t|\t);\r\n\t// example:\r\n\t//\t\tUse a transform function to modify the values:\r\n\t//\t|\t// returns \"file 'foo.html' is not found in directory '/temp'.\"\r\n\t//\t|\tstring.substitute(\r\n\t//\t|\t\t\"${0} is not found in ${1}.\",\r\n\t//\t|\t\t[\"foo.html\",\"/temp\"],\r\n\t//\t|\t\tfunction(str){\r\n\t//\t|\t\t\t// try to figure out the type\r\n\t//\t|\t\t\tvar prefix = (str.charAt(0) == \"/\") ? \"directory\": \"file\";\r\n\t//\t|\t\t\treturn prefix + \" '\" + str + \"'\";\r\n\t//\t|\t\t}\r\n\t//\t|\t);\r\n\t// example:\r\n\t//\t\tUse a formatter\r\n\t//\t|\t// returns \"thinger -- howdy\"\r\n\t//\t|\tstring.substitute(\r\n\t//\t|\t\t\"${0:postfix}\", [\"thinger\"], null, {\r\n\t//\t|\t\t\tpostfix: function(value, key){\r\n\t//\t|\t\t\t\treturn value + \" -- howdy\";\r\n\t//\t|\t\t\t}\r\n\t//\t|\t\t}\r\n\t//\t|\t);\r\n\r\n\tthisObject = thisObject || kernel.global;\r\n\ttransform = transform ?\r\n\t\tlang.hitch(thisObject, transform) : function(v){ return v; };\r\n\r\n\treturn template.replace(/\\$\\{([^\\s\\:\\}]+)(?:\\:([^\\s\\:\\}]+))?\\}/g,\r\n\t\tfunction(match, key, format){\r\n\t\t\tvar value = lang.getObject(key, false, map);\r\n\t\t\tif(format){\r\n\t\t\t\tvalue = lang.getObject(format, false, thisObject).call(thisObject, value, key);\r\n\t\t\t}\r\n\t\t\treturn transform(value, key).toString();\r\n\t\t}); // String\r\n};\r\n\r\nstring.trim = String.prototype.trim ?\r\n\tlang.trim : // aliasing to the native function\r\n\tfunction(str){\r\n\t\tstr = str.replace(/^\\s+/, '');\r\n\t\tfor(var i = str.length - 1; i >= 0; i--){\r\n\t\t\tif(/\\S/.test(str.charAt(i))){\r\n\t\t\t\tstr = str.substring(0, i + 1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str;\r\n\t};\r\n\r\n/*=====\r\n string.trim = function(str){\r\n\t // summary:\r\n\t //\t\tTrims whitespace from both sides of the string\r\n\t // str: String\r\n\t //\t\tString to be trimmed\r\n\t // returns: String\r\n\t //\t\tReturns the trimmed string\r\n\t // description:\r\n\t //\t\tThis version of trim() was taken from [Steven Levithan's blog](http://blog.stevenlevithan.com/archives/faster-trim-javascript).\r\n\t //\t\tThe short yet performant version of this function is dojo/_base/lang.trim(),\r\n\t //\t\twhich is part of Dojo base.  Uses String.prototype.trim instead, if available.\r\n\t return \"\";\t// String\r\n };\r\n =====*/\r\n\r\n\treturn string;\r\n});\r\n\ndefine('dojo/number',[/*===== \"./_base/declare\", =====*/ \"./_base/lang\", \"./i18n\", \"./i18n!./cldr/nls/number\", \"./string\", \"./regexp\"],\r\n\tfunction(/*===== declare, =====*/ lang, i18n, nlsNumber, dstring, dregexp){\r\n\r\n// module:\r\n//\t\tdojo/number\r\n\r\nvar number = {\r\n\t// summary:\r\n\t//\t\tlocalized formatting and parsing routines for Number\r\n};\r\nlang.setObject(\"dojo.number\", number);\r\n\r\n/*=====\r\nnumber.__FormatOptions = declare(null, {\r\n\t// pattern: String?\r\n\t//\t\toverride [formatting pattern](http://www.unicode.org/reports/tr35/#Number_Format_Patterns)\r\n\t//\t\twith this string.  Default value is based on locale.  Overriding this property will defeat\r\n\t//\t\tlocalization.  Literal characters in patterns are not supported.\r\n\t// type: String?\r\n\t//\t\tchoose a format type based on the locale from the following:\r\n\t//\t\tdecimal, scientific (not yet supported), percent, currency. decimal by default.\r\n\t// places: Number?\r\n\t//\t\tfixed number of decimal places to show.  This overrides any\r\n\t//\t\tinformation in the provided pattern.\r\n\t// round: Number?\r\n\t//\t\t5 rounds to nearest .5; 0 rounds to nearest whole (default). -1\r\n\t//\t\tmeans do not round.\r\n\t// locale: String?\r\n\t//\t\toverride the locale used to determine formatting rules\r\n\t// fractional: Boolean?\r\n\t//\t\tIf false, show no decimal places, overriding places and pattern settings.\r\n});\r\n=====*/\r\n\r\nnumber.format = function(/*Number*/ value, /*number.__FormatOptions?*/ options){\r\n\t// summary:\r\n\t//\t\tFormat a Number as a String, using locale-specific settings\r\n\t// description:\r\n\t//\t\tCreate a string from a Number using a known localized pattern.\r\n\t//\t\tFormatting patterns appropriate to the locale are chosen from the\r\n\t//\t\t[Common Locale Data Repository](http://unicode.org/cldr) as well as the appropriate symbols and\r\n\t//\t\tdelimiters.\r\n\t//\t\tIf value is Infinity, -Infinity, or is not a valid JavaScript number, return null.\r\n\t// value:\r\n\t//\t\tthe number to be formatted\r\n\r\n\toptions = lang.mixin({}, options || {});\r\n\tvar locale = i18n.normalizeLocale(options.locale),\r\n\t\tbundle = i18n.getLocalization(\"dojo.cldr\", \"number\", locale);\r\n\toptions.customs = bundle;\r\n\tvar pattern = options.pattern || bundle[(options.type || \"decimal\") + \"Format\"];\r\n\tif(isNaN(value) || Math.abs(value) == Infinity){ return null; } // null\r\n\treturn number._applyPattern(value, pattern, options); // String\r\n};\r\n\r\n//number._numberPatternRE = /(?:[#0]*,?)*[#0](?:\\.0*#*)?/; // not precise, but good enough\r\nnumber._numberPatternRE = /[#0,]*[#0](?:\\.0*#*)?/; // not precise, but good enough\r\n\r\nnumber._applyPattern = function(/*Number*/ value, /*String*/ pattern, /*number.__FormatOptions?*/ options){\r\n\t// summary:\r\n\t//\t\tApply pattern to format value as a string using options. Gives no\r\n\t//\t\tconsideration to local customs.\r\n\t// value:\r\n\t//\t\tthe number to be formatted.\r\n\t// pattern:\r\n\t//\t\ta pattern string as described by\r\n\t//\t\t[unicode.org TR35](http://www.unicode.org/reports/tr35/#Number_Format_Patterns)\r\n\t// options: number.__FormatOptions?\r\n\t//\t\t_applyPattern is usually called via `dojo/number.format()` which\r\n\t//\t\tpopulates an extra property in the options parameter, \"customs\".\r\n\t//\t\tThe customs object specifies group and decimal parameters if set.\r\n\r\n\t//TODO: support escapes\r\n\toptions = options || {};\r\n\tvar group = options.customs.group,\r\n\t\tdecimal = options.customs.decimal,\r\n\t\tpatternList = pattern.split(';'),\r\n\t\tpositivePattern = patternList[0];\r\n\tpattern = patternList[(value < 0) ? 1 : 0] || (\"-\" + positivePattern);\r\n\r\n\t//TODO: only test against unescaped\r\n\tif(pattern.indexOf('%') != -1){\r\n\t\tvalue *= 100;\r\n\t}else if(pattern.indexOf('\\u2030') != -1){\r\n\t\tvalue *= 1000; // per mille\r\n\t}else if(pattern.indexOf('\\u00a4') != -1){\r\n\t\tgroup = options.customs.currencyGroup || group;//mixins instead?\r\n\t\tdecimal = options.customs.currencyDecimal || decimal;// Should these be mixins instead?\r\n\t\tpattern = pattern.replace(/\\u00a4{1,3}/, function(match){\r\n\t\t\tvar prop = [\"symbol\", \"currency\", \"displayName\"][match.length-1];\r\n\t\t\treturn options[prop] || options.currency || \"\";\r\n\t\t});\r\n\t}else if(pattern.indexOf('E') != -1){\r\n\t\tthrow new Error(\"exponential notation not supported\");\r\n\t}\r\n\r\n\t//TODO: support @ sig figs?\r\n\tvar numberPatternRE = number._numberPatternRE;\r\n\tvar numberPattern = positivePattern.match(numberPatternRE);\r\n\tif(!numberPattern){\r\n\t\tthrow new Error(\"unable to find a number expression in pattern: \"+pattern);\r\n\t}\r\n\tif(options.fractional === false){ options.places = 0; }\r\n\treturn pattern.replace(numberPatternRE,\r\n\t\tnumber._formatAbsolute(value, numberPattern[0], {decimal: decimal, group: group, places: options.places, round: options.round}));\r\n};\r\n\r\nnumber.round = function(/*Number*/ value, /*Number?*/ places, /*Number?*/ increment){\r\n\t// summary:\r\n\t//\t\tRounds to the nearest value with the given number of decimal places, away from zero\r\n\t// description:\r\n\t//\t\tRounds to the nearest value with the given number of decimal places, away from zero if equal.\r\n\t//\t\tSimilar to Number.toFixed(), but compensates for browser quirks. Rounding can be done by\r\n\t//\t\tfractional increments also, such as the nearest quarter.\r\n\t//\t\tNOTE: Subject to floating point errors.  See dojox/math/round for experimental workaround.\r\n\t// value:\r\n\t//\t\tThe number to round\r\n\t// places:\r\n\t//\t\tThe number of decimal places where rounding takes place.  Defaults to 0 for whole rounding.\r\n\t//\t\tMust be non-negative.\r\n\t// increment:\r\n\t//\t\tRounds next place to nearest value of increment/10.  10 by default.\r\n\t// example:\r\n\t// |\t>>> number.round(-0.5)\r\n\t// |\t-1\r\n\t// |\t>>> number.round(162.295, 2)\r\n\t// |\t162.29  // note floating point error.  Should be 162.3\r\n\t// |\t>>> number.round(10.71, 0, 2.5)\r\n\t// |\t10.75\r\n\tvar factor = 10 / (increment || 10);\r\n\treturn (factor * +value).toFixed(places) / factor; // Number\r\n};\r\n\r\nif((0.9).toFixed() == 0){\r\n\t// (isIE) toFixed() bug workaround: Rounding fails on IE when most significant digit\r\n\t// is just after the rounding place and is >=5\r\n\tvar round = number.round;\r\n\tnumber.round = function(v, p, m){\r\n\t\tvar d = Math.pow(10, -p || 0), a = Math.abs(v);\r\n\t\tif(!v || a >= d){\r\n\t\t\td = 0;\r\n\t\t}else{\r\n\t\t\ta /= d;\r\n\t\t\tif(a < 0.5 || a >= 0.95){\r\n\t\t\t\td = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn round(v, p, m) + (v > 0 ? d : -d);\r\n\t};\r\n\r\n\t// Use \"doc hint\" so the doc parser ignores this new definition of round(), and uses the one above.\r\n\t/*===== number.round = round; =====*/\r\n}\r\n\r\n/*=====\r\nnumber.__FormatAbsoluteOptions = declare(null, {\r\n\t// decimal: String?\r\n\t//\t\tthe decimal separator\r\n\t// group: String?\r\n\t//\t\tthe group separator\r\n\t// places: Number|String?\r\n\t//\t\tnumber of decimal places.  the range \"n,m\" will format to m places.\r\n\t// round: Number?\r\n\t//\t\t5 rounds to nearest .5; 0 rounds to nearest whole (default). -1\r\n\t//\t\tmeans don't round.\r\n});\r\n=====*/\r\n\r\nnumber._formatAbsolute = function(/*Number*/ value, /*String*/ pattern, /*number.__FormatAbsoluteOptions?*/ options){\r\n\t// summary:\r\n\t//\t\tApply numeric pattern to absolute value using options. Gives no\r\n\t//\t\tconsideration to local customs.\r\n\t// value:\r\n\t//\t\tthe number to be formatted, ignores sign\r\n\t// pattern:\r\n\t//\t\tthe number portion of a pattern (e.g. `#,##0.00`)\r\n\toptions = options || {};\r\n\tif(options.places === true){options.places=0;}\r\n\tif(options.places === Infinity){options.places=6;} // avoid a loop; pick a limit\r\n\r\n\tvar patternParts = pattern.split(\".\"),\r\n\t\tcomma = typeof options.places == \"string\" && options.places.indexOf(\",\"),\r\n\t\tmaxPlaces = options.places;\r\n\tif(comma){\r\n\t\tmaxPlaces = options.places.substring(comma + 1);\r\n\t}else if(!(maxPlaces >= 0)){\r\n\t\tmaxPlaces = (patternParts[1] || []).length;\r\n\t}\r\n\tif(!(options.round < 0)){\r\n\t\tvalue = number.round(value, maxPlaces, options.round);\r\n\t}\r\n\r\n\tvar valueParts = String(Math.abs(value)).split(\".\"),\r\n\t\tfractional = valueParts[1] || \"\";\r\n\tif(patternParts[1] || options.places){\r\n\t\tif(comma){\r\n\t\t\toptions.places = options.places.substring(0, comma);\r\n\t\t}\r\n\t\t// Pad fractional with trailing zeros\r\n\t\tvar pad = options.places !== undefined ? options.places : (patternParts[1] && patternParts[1].lastIndexOf(\"0\") + 1);\r\n\t\tif(pad > fractional.length){\r\n\t\t\tvalueParts[1] = dstring.pad(fractional, pad, '0', true);\r\n\t\t}\r\n\r\n\t\t// Truncate fractional\r\n\t\tif(maxPlaces < fractional.length){\r\n\t\t\tvalueParts[1] = fractional.substr(0, maxPlaces);\r\n\t\t}\r\n\t}else{\r\n\t\tif(valueParts[1]){ valueParts.pop(); }\r\n\t}\r\n\r\n\t// Pad whole with leading zeros\r\n\tvar patternDigits = patternParts[0].replace(',', '');\r\n\tpad = patternDigits.indexOf(\"0\");\r\n\tif(pad != -1){\r\n\t\tpad = patternDigits.length - pad;\r\n\t\tif(pad > valueParts[0].length){\r\n\t\t\tvalueParts[0] = dstring.pad(valueParts[0], pad);\r\n\t\t}\r\n\r\n\t\t// Truncate whole\r\n\t\tif(patternDigits.indexOf(\"#\") == -1){\r\n\t\t\tvalueParts[0] = valueParts[0].substr(valueParts[0].length - pad);\r\n\t\t}\r\n\t}\r\n\r\n\t// Add group separators\r\n\tvar index = patternParts[0].lastIndexOf(','),\r\n\t\tgroupSize, groupSize2;\r\n\tif(index != -1){\r\n\t\tgroupSize = patternParts[0].length - index - 1;\r\n\t\tvar remainder = patternParts[0].substr(0, index);\r\n\t\tindex = remainder.lastIndexOf(',');\r\n\t\tif(index != -1){\r\n\t\t\tgroupSize2 = remainder.length - index - 1;\r\n\t\t}\r\n\t}\r\n\tvar pieces = [];\r\n\tfor(var whole = valueParts[0]; whole;){\r\n\t\tvar off = whole.length - groupSize;\r\n\t\tpieces.push((off > 0) ? whole.substr(off) : whole);\r\n\t\twhole = (off > 0) ? whole.slice(0, off) : \"\";\r\n\t\tif(groupSize2){\r\n\t\t\tgroupSize = groupSize2;\r\n\t\t\tdelete groupSize2;\r\n\t\t}\r\n\t}\r\n\tvalueParts[0] = pieces.reverse().join(options.group || \",\");\r\n\r\n\treturn valueParts.join(options.decimal || \".\");\r\n};\r\n\r\n/*=====\r\nnumber.__RegexpOptions = declare(null, {\r\n\t// pattern: String?\r\n\t//\t\toverride [formatting pattern](http://www.unicode.org/reports/tr35/#Number_Format_Patterns)\r\n\t//\t\twith this string.  Default value is based on locale.  Overriding this property will defeat\r\n\t//\t\tlocalization.\r\n\t// type: String?\r\n\t//\t\tchoose a format type based on the locale from the following:\r\n\t//\t\tdecimal, scientific (not yet supported), percent, currency. decimal by default.\r\n\t// locale: String?\r\n\t//\t\toverride the locale used to determine formatting rules\r\n\t// strict: Boolean?\r\n\t//\t\tstrict parsing, false by default.  Strict parsing requires input as produced by the format() method.\r\n\t//\t\tNon-strict is more permissive, e.g. flexible on white space, omitting thousands separators\r\n\t// places: Number|String?\r\n\t//\t\tnumber of decimal places to accept: Infinity, a positive number, or\r\n\t//\t\ta range \"n,m\".  Defined by pattern or Infinity if pattern not provided.\r\n});\r\n=====*/\r\nnumber.regexp = function(/*number.__RegexpOptions?*/ options){\r\n\t// summary:\r\n\t//\t\tBuilds the regular needed to parse a number\r\n\t// description:\r\n\t//\t\tReturns regular expression with positive and negative match, group\r\n\t//\t\tand decimal separators\r\n\treturn number._parseInfo(options).regexp; // String\r\n};\r\n\r\nnumber._parseInfo = function(/*Object?*/ options){\r\n\toptions = options || {};\r\n\tvar locale = i18n.normalizeLocale(options.locale),\r\n\t\tbundle = i18n.getLocalization(\"dojo.cldr\", \"number\", locale),\r\n\t\tpattern = options.pattern || bundle[(options.type || \"decimal\") + \"Format\"],\r\n//TODO: memoize?\r\n\t\tgroup = bundle.group,\r\n\t\tdecimal = bundle.decimal,\r\n\t\tfactor = 1;\r\n\r\n\tif(pattern.indexOf('%') != -1){\r\n\t\tfactor /= 100;\r\n\t}else if(pattern.indexOf('\\u2030') != -1){\r\n\t\tfactor /= 1000; // per mille\r\n\t}else{\r\n\t\tvar isCurrency = pattern.indexOf('\\u00a4') != -1;\r\n\t\tif(isCurrency){\r\n\t\t\tgroup = bundle.currencyGroup || group;\r\n\t\t\tdecimal = bundle.currencyDecimal || decimal;\r\n\t\t}\r\n\t}\r\n\r\n\t//TODO: handle quoted escapes\r\n\tvar patternList = pattern.split(';');\r\n\tif(patternList.length == 1){\r\n\t\tpatternList.push(\"-\" + patternList[0]);\r\n\t}\r\n\r\n\tvar re = dregexp.buildGroupRE(patternList, function(pattern){\r\n\t\tpattern = \"(?:\"+dregexp.escapeString(pattern, '.')+\")\";\r\n\t\treturn pattern.replace(number._numberPatternRE, function(format){\r\n\t\t\tvar flags = {\r\n\t\t\t\tsigned: false,\r\n\t\t\t\tseparator: options.strict ? group : [group,\"\"],\r\n\t\t\t\tfractional: options.fractional,\r\n\t\t\t\tdecimal: decimal,\r\n\t\t\t\texponent: false\r\n\t\t\t\t},\r\n\r\n\t\t\t\tparts = format.split('.'),\r\n\t\t\t\tplaces = options.places;\r\n\r\n\t\t\t// special condition for percent (factor != 1)\r\n\t\t\t// allow decimal places even if not specified in pattern\r\n\t\t\tif(parts.length == 1 && factor != 1){\r\n\t\t\t    parts[1] = \"###\";\r\n\t\t\t}\r\n\t\t\tif(parts.length == 1 || places === 0){\r\n\t\t\t\tflags.fractional = false;\r\n\t\t\t}else{\r\n\t\t\t\tif(places === undefined){ places = options.pattern ? parts[1].lastIndexOf('0') + 1 : Infinity; }\r\n\t\t\t\tif(places && options.fractional == undefined){flags.fractional = true;} // required fractional, unless otherwise specified\r\n\t\t\t\tif(!options.places && (places < parts[1].length)){ places += \",\" + parts[1].length; }\r\n\t\t\t\tflags.places = places;\r\n\t\t\t}\r\n\t\t\tvar groups = parts[0].split(',');\r\n\t\t\tif(groups.length > 1){\r\n\t\t\t\tflags.groupSize = groups.pop().length;\r\n\t\t\t\tif(groups.length > 1){\r\n\t\t\t\t\tflags.groupSize2 = groups.pop().length;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn \"(\"+number._realNumberRegexp(flags)+\")\";\r\n\t\t});\r\n\t}, true);\r\n\r\n\tif(isCurrency){\r\n\t\t// substitute the currency symbol for the placeholder in the pattern\r\n\t\tre = re.replace(/([\\s\\xa0]*)(\\u00a4{1,3})([\\s\\xa0]*)/g, function(match, before, target, after){\r\n\t\t\tvar prop = [\"symbol\", \"currency\", \"displayName\"][target.length-1],\r\n\t\t\t\tsymbol = dregexp.escapeString(options[prop] || options.currency || \"\");\r\n\t\t\tbefore = before ? \"[\\\\s\\\\xa0]\" : \"\";\r\n\t\t\tafter = after ? \"[\\\\s\\\\xa0]\" : \"\";\r\n\t\t\tif(!options.strict){\r\n\t\t\t\tif(before){before += \"*\";}\r\n\t\t\t\tif(after){after += \"*\";}\r\n\t\t\t\treturn \"(?:\"+before+symbol+after+\")?\";\r\n\t\t\t}\r\n\t\t\treturn before+symbol+after;\r\n\t\t});\r\n\t}\r\n\r\n//TODO: substitute localized sign/percent/permille/etc.?\r\n\r\n\t// normalize whitespace and return\r\n\treturn {regexp: re.replace(/[\\xa0 ]/g, \"[\\\\s\\\\xa0]\"), group: group, decimal: decimal, factor: factor}; // Object\r\n};\r\n\r\n/*=====\r\nnumber.__ParseOptions = declare(null, {\r\n\t// pattern: String?\r\n\t//\t\toverride [formatting pattern](http://www.unicode.org/reports/tr35/#Number_Format_Patterns)\r\n\t//\t\twith this string.  Default value is based on locale.  Overriding this property will defeat\r\n\t//\t\tlocalization.  Literal characters in patterns are not supported.\r\n\t// type: String?\r\n\t//\t\tchoose a format type based on the locale from the following:\r\n\t//\t\tdecimal, scientific (not yet supported), percent, currency. decimal by default.\r\n\t// locale: String?\r\n\t//\t\toverride the locale used to determine formatting rules\r\n\t// strict: Boolean?\r\n\t//\t\tstrict parsing, false by default.  Strict parsing requires input as produced by the format() method.\r\n\t//\t\tNon-strict is more permissive, e.g. flexible on white space, omitting thousands separators\r\n\t// fractional: Boolean|Array?\r\n\t//\t\tWhether to include the fractional portion, where the number of decimal places are implied by pattern\r\n\t//\t\tor explicit 'places' parameter.  The value [true,false] makes the fractional portion optional.\r\n});\r\n=====*/\r\nnumber.parse = function(/*String*/ expression, /*number.__ParseOptions?*/ options){\r\n\t// summary:\r\n\t//\t\tConvert a properly formatted string to a primitive Number, using\r\n\t//\t\tlocale-specific settings.\r\n\t// description:\r\n\t//\t\tCreate a Number from a string using a known localized pattern.\r\n\t//\t\tFormatting patterns are chosen appropriate to the locale\r\n\t//\t\tand follow the syntax described by\r\n\t//\t\t[unicode.org TR35](http://www.unicode.org/reports/tr35/#Number_Format_Patterns)\r\n    \t//\t\tNote that literal characters in patterns are not supported.\r\n\t// expression:\r\n\t//\t\tA string representation of a Number\r\n\tvar info = number._parseInfo(options),\r\n\t\tresults = (new RegExp(\"^\"+info.regexp+\"$\")).exec(expression);\r\n\tif(!results){\r\n\t\treturn NaN; //NaN\r\n\t}\r\n\tvar absoluteMatch = results[1]; // match for the positive expression\r\n\tif(!results[1]){\r\n\t\tif(!results[2]){\r\n\t\t\treturn NaN; //NaN\r\n\t\t}\r\n\t\t// matched the negative pattern\r\n\t\tabsoluteMatch =results[2];\r\n\t\tinfo.factor *= -1;\r\n\t}\r\n\r\n\t// Transform it to something Javascript can parse as a number.  Normalize\r\n\t// decimal point and strip out group separators or alternate forms of whitespace\r\n\tabsoluteMatch = absoluteMatch.\r\n\t\treplace(new RegExp(\"[\"+info.group + \"\\\\s\\\\xa0\"+\"]\", \"g\"), \"\").\r\n\t\treplace(info.decimal, \".\");\r\n\t// Adjust for negative sign, percent, etc. as necessary\r\n\treturn absoluteMatch * info.factor; //Number\r\n};\r\n\r\n/*=====\r\nnumber.__RealNumberRegexpFlags = declare(null, {\r\n\t// places: Number?\r\n\t//\t\tThe integer number of decimal places or a range given as \"n,m\".  If\r\n\t//\t\tnot given, the decimal part is optional and the number of places is\r\n\t//\t\tunlimited.\r\n\t// decimal: String?\r\n\t//\t\tA string for the character used as the decimal point.  Default\r\n\t//\t\tis \".\".\r\n\t// fractional: Boolean|Array?\r\n\t//\t\tWhether decimal places are used.  Can be true, false, or [true,\r\n\t//\t\tfalse].  Default is [true, false] which means optional.\r\n\t// exponent: Boolean|Array?\r\n\t//\t\tExpress in exponential notation.  Can be true, false, or [true,\r\n\t//\t\tfalse]. Default is [true, false], (i.e. will match if the\r\n\t//\t\texponential part is present are not).\r\n\t// eSigned: Boolean|Array?\r\n\t//\t\tThe leading plus-or-minus sign on the exponent.  Can be true,\r\n\t//\t\tfalse, or [true, false].  Default is [true, false], (i.e. will\r\n\t//\t\tmatch if it is signed or unsigned).  flags in regexp.integer can be\r\n\t//\t\tapplied.\r\n});\r\n=====*/\r\n\r\nnumber._realNumberRegexp = function(/*__RealNumberRegexpFlags?*/ flags){\r\n\t// summary:\r\n\t//\t\tBuilds a regular expression to match a real number in exponential\r\n\t//\t\tnotation\r\n\r\n\t// assign default values to missing parameters\r\n\tflags = flags || {};\r\n\t//TODO: use mixin instead?\r\n\tif(!(\"places\" in flags)){ flags.places = Infinity; }\r\n\tif(typeof flags.decimal != \"string\"){ flags.decimal = \".\"; }\r\n\tif(!(\"fractional\" in flags) || /^0/.test(flags.places)){ flags.fractional = [true, false]; }\r\n\tif(!(\"exponent\" in flags)){ flags.exponent = [true, false]; }\r\n\tif(!(\"eSigned\" in flags)){ flags.eSigned = [true, false]; }\r\n\r\n\tvar integerRE = number._integerRegexp(flags),\r\n\t\tdecimalRE = dregexp.buildGroupRE(flags.fractional,\r\n\t\tfunction(q){\r\n\t\t\tvar re = \"\";\r\n\t\t\tif(q && (flags.places!==0)){\r\n\t\t\t\tre = \"\\\\\" + flags.decimal;\r\n\t\t\t\tif(flags.places == Infinity){\r\n\t\t\t\t\tre = \"(?:\" + re + \"\\\\d+)?\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tre += \"\\\\d{\" + flags.places + \"}\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn re;\r\n\t\t},\r\n\t\ttrue\r\n\t);\r\n\r\n\tvar exponentRE = dregexp.buildGroupRE(flags.exponent,\r\n\t\tfunction(q){\r\n\t\t\tif(q){ return \"([eE]\" + number._integerRegexp({ signed: flags.eSigned}) + \")\"; }\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t);\r\n\r\n\tvar realRE = integerRE + decimalRE;\r\n\t// allow for decimals without integers, e.g. .25\r\n\tif(decimalRE){realRE = \"(?:(?:\"+ realRE + \")|(?:\" + decimalRE + \"))\";}\r\n\treturn realRE + exponentRE; // String\r\n};\r\n\r\n/*=====\r\nnumber.__IntegerRegexpFlags = declare(null, {\r\n\t// signed: Boolean?\r\n\t//\t\tThe leading plus-or-minus sign. Can be true, false, or `[true,false]`.\r\n\t//\t\tDefault is `[true, false]`, (i.e. will match if it is signed\r\n\t//\t\tor unsigned).\r\n\t// separator: String?\r\n\t//\t\tThe character used as the thousands separator. Default is no\r\n\t//\t\tseparator. For more than one symbol use an array, e.g. `[\",\", \"\"]`,\r\n\t//\t\tmakes ',' optional.\r\n\t// groupSize: Number?\r\n\t//\t\tgroup size between separators\r\n\t// groupSize2: Number?\r\n\t//\t\tsecond grouping, where separators 2..n have a different interval than the first separator (for India)\r\n});\r\n=====*/\r\n\r\nnumber._integerRegexp = function(/*number.__IntegerRegexpFlags?*/ flags){\r\n\t// summary:\r\n\t//\t\tBuilds a regular expression that matches an integer\r\n\r\n\t// assign default values to missing parameters\r\n\tflags = flags || {};\r\n\tif(!(\"signed\" in flags)){ flags.signed = [true, false]; }\r\n\tif(!(\"separator\" in flags)){\r\n\t\tflags.separator = \"\";\r\n\t}else if(!(\"groupSize\" in flags)){\r\n\t\tflags.groupSize = 3;\r\n\t}\r\n\r\n\tvar signRE = dregexp.buildGroupRE(flags.signed,\r\n\t\tfunction(q){ return q ? \"[-+]\" : \"\"; },\r\n\t\ttrue\r\n\t);\r\n\r\n\tvar numberRE = dregexp.buildGroupRE(flags.separator,\r\n\t\tfunction(sep){\r\n\t\t\tif(!sep){\r\n\t\t\t\treturn \"(?:\\\\d+)\";\r\n\t\t\t}\r\n\r\n\t\t\tsep = dregexp.escapeString(sep);\r\n\t\t\tif(sep == \" \"){ sep = \"\\\\s\"; }\r\n\t\t\telse if(sep == \"\\xa0\"){ sep = \"\\\\s\\\\xa0\"; }\r\n\r\n\t\t\tvar grp = flags.groupSize, grp2 = flags.groupSize2;\r\n\t\t\t//TODO: should we continue to enforce that numbers with separators begin with 1-9?  See #6933\r\n\t\t\tif(grp2){\r\n\t\t\t\tvar grp2RE = \"(?:0|[1-9]\\\\d{0,\" + (grp2-1) + \"}(?:[\" + sep + \"]\\\\d{\" + grp2 + \"})*[\" + sep + \"]\\\\d{\" + grp + \"})\";\r\n\t\t\t\treturn ((grp-grp2) > 0) ? \"(?:\" + grp2RE + \"|(?:0|[1-9]\\\\d{0,\" + (grp-1) + \"}))\" : grp2RE;\r\n\t\t\t}\r\n\t\t\treturn \"(?:0|[1-9]\\\\d{0,\" + (grp-1) + \"}(?:[\" + sep + \"]\\\\d{\" + grp + \"})*)\";\r\n\t\t},\r\n\t\ttrue\r\n\t);\r\n\r\n\treturn signRE + numberRE; // String\r\n};\r\n\r\nreturn number;\r\n});\r\n\ndefine('dojo/request/default',[\r\n\t'exports',\r\n\t'module',\r\n\t'require',\r\n\t'../has'\r\n], function(exports, module, require, has){\r\n\tif (require.isBrowser===false) { // for build,will be changed with better implementation. by LWF\r\n\t\treturn {\r\n\t        load: function (name, req, onLoad, config) {\r\n\t            onLoad();\r\n\t        }\t\t\t\r\n\t\t};\r\n\t}\r\n\r\n\tvar defId = has('config-requestProvider'),\r\n\t\tplatformId;\r\n\r\n\tif(has('host-browser') || has('host-webworker')){\r\n\t\tplatformId = './xhr';\r\n\t}else if(has('host-node')){\r\n\t\tplatformId = './node';\r\n\t/* TODO:\r\n\t}else if(has('host-rhino')){\r\n\t\tplatformId = './rhino';\r\n   */\r\n\t}\r\n\r\n\tif(!defId){\r\n\t\tdefId = platformId;\r\n\t}\r\n\r\n\texports.getPlatformDefaultId = function(){\r\n\t\treturn platformId;\r\n\t};\r\n\r\n\texports.load = function(id, parentRequire, loaded, config){\r\n\t\trequire([id == 'platform' ? platformId : defId], function(provider){\r\n\t\t\tloaded(provider);\r\n\t\t});\r\n\t};\r\n});\r\n\n\ndefine('dojo/request',[\r\n\t'./request/default!'/*=====,\r\n\t'./_base/declare',\r\n\t'./promise/Promise' =====*/\r\n], function(request/*=====, declare, Promise =====*/){\r\n\t/*=====\r\n\trequest = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend a request using the default transport for the current platform.\r\n\t\t// url: String\r\n\t\t//\t\tThe URL to request.\r\n\t\t// options: dojo/request.__Options?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\trequest.__Promise = declare(Promise, {\r\n\t\t// response: dojo/promise/Promise\r\n\t\t//\t\tA promise resolving to an object representing\r\n\t\t//\t\tthe response from the server.\r\n\t});\r\n\trequest.__BaseOptions = declare(null, {\r\n\t\t// query: String|Object?\r\n\t\t//\t\tQuery parameters to append to the URL.\r\n\t\t// data: String|Object?\r\n\t\t//\t\tData to transfer.  This is ignored for GET and DELETE\r\n\t\t//\t\trequests.\r\n\t\t// preventCache: Boolean?\r\n\t\t//\t\tWhether to append a cache-busting parameter to the URL.\r\n\t\t// timeout: Integer?\r\n\t\t//\t\tMilliseconds to wait for the response.  If this time\r\n\t\t//\t\tpasses, the then the promise is rejected.\r\n\t\t// handleAs: String?\r\n\t\t//\t\tHow to handle the response from the server.  Default is\r\n\t\t//\t\t'text'.  Other values are 'json', 'javascript', and 'xml'.\r\n\t});\r\n\trequest.__MethodOptions = declare(null, {\r\n\t\t// method: String?\r\n\t\t//\t\tThe HTTP method to use to make the request.  Must be\r\n\t\t//\t\tuppercase.\r\n\t});\r\n\trequest.__Options = declare([request.__BaseOptions, request.__MethodOptions]);\r\n\r\n\trequest.get = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP GET request using the default transport for the current platform.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\trequest.post = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP POST request using the default transport for the current platform.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\trequest.put = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP POST request using the default transport for the current platform.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\trequest.del = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP DELETE request using the default transport for the current platform.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\t=====*/\r\n\treturn request;\r\n});\r\n\ndefine('dojo/Stateful',[\"./_base/declare\", \"./_base/lang\", \"./_base/array\", \"./when\"], function(declare, lang, array, when){\r\n\t// module:\r\n\t//\t\tdojo/Stateful\r\n\r\nreturn declare(\"dojo.Stateful\", null, {\r\n\t// summary:\r\n\t//\t\tBase class for objects that provide named properties with optional getter/setter\r\n\t//\t\tcontrol and the ability to watch for property changes\r\n\t//\r\n\t//\t\tThe class also provides the functionality to auto-magically manage getters\r\n\t//\t\tand setters for object attributes/properties.\r\n\t//\t\t\r\n\t//\t\tGetters and Setters should follow the format of _xxxGetter or _xxxSetter where \r\n\t//\t\tthe xxx is a name of the attribute to handle.  So an attribute of \"foo\" \r\n\t//\t\twould have a custom getter of _fooGetter and a custom setter of _fooSetter.\r\n\t//\r\n\t// example:\r\n\t//\t|\trequire([\"dojo/Stateful\", function(Stateful) {\r\n\t//\t|\t\tvar obj = new Stateful();\r\n\t//\t|\t\tobj.watch(\"foo\", function(){\r\n\t//\t|\t\t\tconsole.log(\"foo changed to \" + this.get(\"foo\"));\r\n\t//\t|\t\t});\r\n\t//\t|\t\tobj.set(\"foo\",\"bar\");\r\n\t//\t|\t});\r\n\r\n\t// _attrPairNames: Hash\r\n\t//\t\tUsed across all instances a hash to cache attribute names and their getter \r\n\t//\t\tand setter names.\r\n\t_attrPairNames: {},\r\n\r\n\t_getAttrNames: function(name){\r\n\t\t// summary:\r\n\t\t//\t\tHelper function for get() and set().\r\n\t\t//\t\tCaches attribute name values so we don't do the string ops every time.\r\n\t\t// tags:\r\n\t\t//\t\tprivate\r\n\r\n\t\tvar apn = this._attrPairNames;\r\n\t\tif(apn[name]){ return apn[name]; }\r\n\t\treturn (apn[name] = {\r\n\t\t\ts: \"_\" + name + \"Setter\",\r\n\t\t\tg: \"_\" + name + \"Getter\"\r\n\t\t});\r\n\t},\r\n\r\n\tpostscript: function(/*Object?*/ params){\r\n\t\t// Automatic setting of params during construction\r\n\t\tif (params){ this.set(params); }\r\n\t},\r\n\r\n\t_get: function(name, names){\r\n\t\t// summary:\r\n\t\t//\t\tPrivate function that does a get based off a hash of names\r\n\t\t// names:\r\n\t\t//\t\tHash of names of custom attributes\r\n\t\treturn typeof this[names.g] === \"function\" ? this[names.g]() : this[name];\r\n\t},\r\n\tget: function(/*String*/name){\r\n\t\t// summary:\r\n\t\t//\t\tGet a property on a Stateful instance.\r\n\t\t// name:\r\n\t\t//\t\tThe property to get.\r\n\t\t// returns:\r\n\t\t//\t\tThe property value on this Stateful instance.\r\n\t\t// description:\r\n\t\t//\t\tGet a named property on a Stateful object. The property may\r\n\t\t//\t\tpotentially be retrieved via a getter method in subclasses. In the base class\r\n\t\t//\t\tthis just retrieves the object's property.\r\n\t\t// example:\r\n\t\t//\t|\trequire([\"dojo/Stateful\", function(Stateful) {\r\n\t\t//\t|\t\tvar stateful = new Stateful({foo: 3});\r\n\t\t//\t|\t\tstateful.get(\"foo\") // returns 3\r\n\t\t//\t|\t\tstateful.foo // returns 3\r\n\t\t//\t|\t});\r\n\r\n\t\treturn this._get(name, this._getAttrNames(name)); //Any\r\n\t},\r\n\tset: function(/*String*/name, /*Object*/value){\r\n\t\t// summary:\r\n\t\t//\t\tSet a property on a Stateful instance\r\n\t\t// name:\r\n\t\t//\t\tThe property to set.\r\n\t\t// value:\r\n\t\t//\t\tThe value to set in the property.\r\n\t\t// returns:\r\n\t\t//\t\tThe function returns this dojo.Stateful instance.\r\n\t\t// description:\r\n\t\t//\t\tSets named properties on a stateful object and notifies any watchers of\r\n\t\t//\t\tthe property. A programmatic setter may be defined in subclasses.\r\n\t\t// example:\r\n\t\t//\t|\trequire([\"dojo/Stateful\", function(Stateful) {\r\n\t\t//\t|\t\tvar stateful = new Stateful();\r\n\t\t//\t|\t\tstateful.watch(function(name, oldValue, value){\r\n\t\t//\t|\t\t\t// this will be called on the set below\r\n\t\t//\t|\t\t}\r\n\t\t//\t|\t\tstateful.set(foo, 5);\r\n\t\t//\tset() may also be called with a hash of name/value pairs, ex:\r\n\t\t//\t|\t\tstateful.set({\r\n\t\t//\t|\t\t\tfoo: \"Howdy\",\r\n\t\t//\t|\t\t\tbar: 3\r\n\t\t//\t|\t\t});\r\n\t\t//\t|\t});\r\n\t\t//\tThis is equivalent to calling set(foo, \"Howdy\") and set(bar, 3)\r\n\r\n\t\t// If an object is used, iterate through object\r\n\t\tif(typeof name === \"object\"){\r\n\t\t\tfor(var x in name){\r\n\t\t\t\tif(name.hasOwnProperty(x) && x !=\"_watchCallbacks\"){\r\n\t\t\t\t\tthis.set(x, name[x]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar names = this._getAttrNames(name),\r\n\t\t\toldValue = this._get(name, names),\r\n\t\t\tsetter = this[names.s],\r\n\t\t\tresult;\r\n\t\tif(typeof setter === \"function\"){\r\n\t\t\t// use the explicit setter\r\n\t\t\tresult = setter.apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t}else{\r\n\t\t\t// no setter so set attribute directly\r\n\t\t\tthis[name] = value;\r\n\t\t}\r\n\t\tif(this._watchCallbacks){\r\n\t\t\tvar self = this;\r\n\t\t\t// If setter returned a promise, wait for it to complete, otherwise call watches immediately\r\n\t\t\twhen(result, function(){\r\n\t\t\t\tself._watchCallbacks(name, oldValue, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this; // dojo/Stateful\r\n\t},\r\n\t_changeAttrValue: function(name, value){\r\n\t\t// summary:\r\n\t\t//\t\tInternal helper for directly changing an attribute value.\r\n\t\t//\r\n\t\t// name: String\r\n\t\t//\t\tThe property to set.\r\n\t\t// value: Mixed\r\n\t\t//\t\tThe value to set in the property.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tDirectly change the value of an attribute on an object, bypassing any \r\n\t\t//\t\taccessor setter.  Also handles the calling of watch and emitting events. \r\n\t\t//\t\tIt is designed to be used by descendant class when there are two values \r\n\t\t//\t\tof attributes that are linked, but calling .set() is not appropriate.\r\n\r\n\t\tvar oldValue = this.get(name);\r\n\t\tthis[name] = value;\r\n\t\tif(this._watchCallbacks){\r\n\t\t\tthis._watchCallbacks(name, oldValue, value);\r\n\t\t}\r\n\t\treturn this; // dojo/Stateful\r\n\t},\r\n\twatch: function(/*String?*/name, /*Function*/callback){\r\n\t\t// summary:\r\n\t\t//\t\tWatches a property for changes\r\n\t\t// name:\r\n\t\t//\t\tIndicates the property to watch. This is optional (the callback may be the\r\n\t\t//\t\tonly parameter), and if omitted, all the properties will be watched\r\n\t\t// returns:\r\n\t\t//\t\tAn object handle for the watch. The unwatch method of this object\r\n\t\t//\t\tcan be used to discontinue watching this property:\r\n\t\t//\t\t|\tvar watchHandle = obj.watch(\"foo\", callback);\r\n\t\t//\t\t|\twatchHandle.unwatch(); // callback won't be called now\r\n\t\t// callback:\r\n\t\t//\t\tThe function to execute when the property changes. This will be called after\r\n\t\t//\t\tthe property has been changed. The callback will be called with the |this|\r\n\t\t//\t\tset to the instance, the first argument as the name of the property, the\r\n\t\t//\t\tsecond argument as the old value and the third argument as the new value.\r\n\r\n\t\tvar callbacks = this._watchCallbacks;\r\n\t\tif(!callbacks){\r\n\t\t\tvar self = this;\r\n\t\t\tcallbacks = this._watchCallbacks = function(name, oldValue, value, ignoreCatchall){\r\n\t\t\t\tvar notify = function(propertyCallbacks){\r\n\t\t\t\t\tif(propertyCallbacks){\r\n\t\t\t\t\t\tpropertyCallbacks = propertyCallbacks.slice();\r\n\t\t\t\t\t\tfor(var i = 0, l = propertyCallbacks.length; i < l; i++){\r\n\t\t\t\t\t\t\tpropertyCallbacks[i].call(self, name, oldValue, value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tnotify(callbacks['_' + name]);\r\n\t\t\t\tif(!ignoreCatchall){\r\n\t\t\t\t\tnotify(callbacks[\"*\"]); // the catch-all\r\n\t\t\t\t}\r\n\t\t\t}; // we use a function instead of an object so it will be ignored by JSON conversion\r\n\t\t}\r\n\t\tif(!callback && typeof name === \"function\"){\r\n\t\t\tcallback = name;\r\n\t\t\tname = \"*\";\r\n\t\t}else{\r\n\t\t\t// prepend with dash to prevent name conflicts with function (like \"name\" property)\r\n\t\t\tname = '_' + name;\r\n\t\t}\r\n\t\tvar propertyCallbacks = callbacks[name];\r\n\t\tif(typeof propertyCallbacks !== \"object\"){\r\n\t\t\tpropertyCallbacks = callbacks[name] = [];\r\n\t\t}\r\n\t\tpropertyCallbacks.push(callback);\r\n\r\n\t\t// TODO: Remove unwatch in 2.0\r\n\t\tvar handle = {};\r\n\t\thandle.unwatch = handle.remove = function(){\r\n\t\t\tvar index = array.indexOf(propertyCallbacks, callback);\r\n\t\t\tif(index > -1){\r\n\t\t\t\tpropertyCallbacks.splice(index, 1);\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn handle; //Object\r\n\t}\r\n\r\n});\r\n\r\n});\r\n\ndefine('dojo/touch',[\"./_base/kernel\", \"./aspect\", \"./dom\", \"./dom-class\", \"./_base/lang\", \"./on\", \"./has\", \"./mouse\", \"./domReady\", \"./_base/window\"],\r\nfunction(dojo, aspect, dom, domClass, lang, on, has, mouse, domReady, win){\r\n\r\n\t// module:\r\n\t//\t\tdojo/touch\r\n\r\n\tvar ios4 = has(\"ios\") < 5;\r\n\r\n\t// Detect if platform supports Pointer Events, and if so, the names of the events (pointerdown vs. MSPointerDown).\r\n\tvar hasPointer = has(\"pointer-events\") || has(\"MSPointer\"),\r\n\t\tpointer = (function () {\r\n\t\t\tvar pointer = {};\r\n\t\t\tfor (var type in { down: 1, move: 1, up: 1, cancel: 1, over: 1, out: 1 }) {\r\n\t\t\t\tpointer[type] = has(\"MSPointer\") ?\r\n\t\t\t\t\t\"MSPointer\" + type.charAt(0).toUpperCase() + type.slice(1) :\r\n\t\t\t\t\t\"pointer\" + type;\r\n\t\t\t}\r\n\t\t\treturn pointer;\r\n\t\t})();\r\n\r\n\t// Detect if platform supports the webkit touchstart/touchend/... events\r\n\tvar hasTouch = has(\"touch-events\");\r\n\r\n\t// Click generation variables\r\n\tvar clicksInited, clickTracker, useTarget = false, clickTarget, clickX, clickY, clickDx, clickDy, clickTime;\r\n\r\n\t// Time of most recent touchstart, touchmove, or touchend event\r\n\tvar lastTouch;\r\n\r\n\tfunction dualEvent(mouseType, touchType, pointerType){\r\n\t\t// Returns synthetic event that listens for both the specified mouse event and specified touch event.\r\n\t\t// But ignore fake mouse events that were generated due to the user touching the screen.\r\n\t\tif(hasPointer && pointerType){\r\n\t\t\t// IE10+: MSPointer* events are designed to handle both mouse and touch in a uniform way,\r\n\t\t\t// so just use that regardless of hasTouch.\r\n\t\t\treturn function(node, listener){\r\n\t\t\t\treturn on(node, pointerType, listener);\r\n\t\t\t}\r\n\t\t}else if(hasTouch){\r\n\t\t\treturn function(node, listener){\r\n\t\t\t\tvar handle1 = on(node, touchType, function(evt){\r\n\t\t\t\t\t\tlistener.call(this, evt);\r\n\r\n\t\t\t\t\t\t// On slow mobile browsers (see https://bugs.dojotoolkit.org/ticket/17634),\r\n\t\t\t\t\t\t// a handler for a touch event may take >1s to run.  That time shouldn't\r\n\t\t\t\t\t\t// be included in the calculation for lastTouch.\r\n\t\t\t\t\t\tlastTouch = (new Date()).getTime();\r\n\t\t\t\t\t}),\r\n\t\t\t\t\thandle2 = on(node, mouseType, function(evt){\r\n\t\t\t\t\t\tif(!lastTouch || (new Date()).getTime() > lastTouch + 1000){\r\n\t\t\t\t\t\t\tlistener.call(this, evt);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\treturn {\r\n\t\t\t\t\tremove: function(){\r\n\t\t\t\t\t\thandle1.remove();\r\n\t\t\t\t\t\thandle2.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t}else{\r\n\t\t\t// Avoid creating listeners for touch events on performance sensitive older browsers like IE6\r\n\t\t\treturn function(node, listener){\r\n\t\t\t\treturn on(node, mouseType, listener);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction marked(/*DOMNode*/ node){\r\n\t\t// Search for node ancestor has been marked with the dojoClick property to indicate special processing.\r\n\t\t// Returns marked ancestor.\r\n\t\tdo{\r\n\t\t\tif(node.dojoClick !== undefined){ return node; }\r\n\t\t}while(node = node.parentNode);\r\n\t}\r\n\t\r\n\tfunction doClicks(e, moveType, endType){\r\n\t\t// summary:\r\n\t\t//\t\tSetup touch listeners to generate synthetic clicks immediately (rather than waiting for the browser\r\n\t\t//\t\tto generate clicks after the double-tap delay) and consistently (regardless of whether event.preventDefault()\r\n\t\t//\t\twas called in an event listener. Synthetic clicks are generated only if a node or one of its ancestors has\r\n\t\t//\t\tits dojoClick property set to truthy. If a node receives synthetic clicks because one of its ancestors has its\r\n\t\t//      dojoClick property set to truthy, you can disable synthetic clicks on this node by setting its own dojoClick property\r\n\t\t//      to falsy.\r\n\t\t\r\n\t\tvar markedNode = marked(e.target);\r\n\t\tclickTracker  = !e.target.disabled && markedNode && markedNode.dojoClick; // click threshold = true, number, x/y object, or \"useTarget\"\r\n\t\tif(clickTracker){\r\n\t\t\tuseTarget = (clickTracker == \"useTarget\");\r\n\t\t\tclickTarget = (useTarget?markedNode:e.target);\r\n\t\t\tif(useTarget){\r\n\t\t\t\t// We expect a click, so prevent any other \r\n\t\t\t\t// default action on \"touchpress\"\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\tclickX = e.changedTouches ? e.changedTouches[0].pageX - win.global.pageXOffset : e.clientX;\r\n\t\t\tclickY = e.changedTouches ? e.changedTouches[0].pageY - win.global.pageYOffset : e.clientY;\r\n\t\t\tclickDx = (typeof clickTracker == \"object\" ? clickTracker.x : (typeof clickTracker == \"number\" ? clickTracker : 0)) || 4;\r\n\t\t\tclickDy = (typeof clickTracker == \"object\" ? clickTracker.y : (typeof clickTracker == \"number\" ? clickTracker : 0)) || 4;\r\n\r\n\t\t\t// add move/end handlers only the first time a node with dojoClick is seen,\r\n\t\t\t// so we don't add too much overhead when dojoClick is never set.\r\n\t\t\tif(!clicksInited){\r\n\t\t\t\tclicksInited = true;\r\n\r\n\t\t\t\tfunction updateClickTracker(e){\r\n\t\t\t\t\tif(useTarget){\r\n\t\t\t\t\t\tclickTracker = dom.isDescendant(\r\n\t\t\t\t\t\t\twin.doc.elementFromPoint(\r\n\t\t\t\t\t\t\t\t(e.changedTouches ? e.changedTouches[0].pageX - win.global.pageXOffset : e.clientX),\r\n\t\t\t\t\t\t\t\t(e.changedTouches ? e.changedTouches[0].pageY - win.global.pageYOffset : e.clientY)),\r\n\t\t\t\t\t\t\tclickTarget);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tclickTracker = clickTracker &&\r\n\t\t\t\t\t\t\t(e.changedTouches ? e.changedTouches[0].target : e.target) == clickTarget &&\r\n\t\t\t\t\t\t\tMath.abs((e.changedTouches ? e.changedTouches[0].pageX - win.global.pageXOffset : e.clientX) - clickX) <= clickDx &&\r\n\t\t\t\t\t\t\tMath.abs((e.changedTouches ? e.changedTouches[0].pageY - win.global.pageYOffset : e.clientY) - clickY) <= clickDy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\twin.doc.addEventListener(moveType, function(e){\r\n\t\t\t\t\tupdateClickTracker(e);\r\n\t\t\t\t\tif(useTarget){\r\n\t\t\t\t\t\t// prevent native scroll event and ensure touchend is\r\n\t\t\t\t\t\t// fire after touch moves between press and release.\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, true);\r\n\r\n\t\t\t\twin.doc.addEventListener(endType, function(e){\r\n\t\t\t\t\tupdateClickTracker(e);\r\n\t\t\t\t\tif(clickTracker){\r\n\t\t\t\t\t\tclickTime = (new Date()).getTime();\r\n\t\t\t\t\t\tvar target = (useTarget?clickTarget:e.target);\r\n\t\t\t\t\t\tif(target.tagName === \"LABEL\"){\r\n\t\t\t\t\t\t\t// when clicking on a label, forward click to its associated input if any\r\n\t\t\t\t\t\t\ttarget = dom.byId(target.getAttribute(\"for\")) || target;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//some attributes can be on the Touch object, not on the Event:\r\n\t\t\t\t\t\t//http://www.w3.org/TR/touch-events/#touch-interface\r\n\t\t\t\t\t\tvar src = (e.changedTouches) ? e.changedTouches[0] : e;\r\n\t\t\t\t\t\t//create the synthetic event.\r\n\t\t\t\t\t\t//http://www.w3.org/TR/DOM-Level-3-Events/#widl-MouseEvent-initMouseEvent\r\n\t\t\t\t\t\tvar clickEvt = document.createEvent(\"MouseEvents\");\r\n\t\t\t\t\t\tclickEvt._dojo_click = true;\r\n\t\t\t\t\t\tclickEvt.initMouseEvent(\"click\",\r\n\t\t\t\t\t\t\ttrue, //bubbles\r\n\t\t\t\t\t\t\ttrue, //cancelable\r\n\t\t\t\t\t\t\te.view,\r\n\t\t\t\t\t\t\te.detail,\r\n\t\t\t\t\t\t\tsrc.screenX,\r\n\t\t\t\t\t\t\tsrc.screenY,\r\n\t\t\t\t\t\t\tsrc.clientX,\r\n\t\t\t\t\t\t\tsrc.clientY,\r\n\t\t\t\t\t\t\te.ctrlKey,\r\n\t\t\t\t\t\t\te.altKey,\r\n\t\t\t\t\t\t\te.shiftKey,\r\n\t\t\t\t\t\t\te.metaKey,\r\n\t\t\t\t\t\t\t0, //button\r\n\t\t\t\t\t\t\tnull //related target\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\ton.emit(target, \"click\", clickEvt);\r\n\r\n\t\t\t\t\t\t\t// refresh clickTime in case app-defined click handler took a long time to run\r\n\t\t\t\t\t\t\tclickTime = (new Date()).getTime();\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, true);\r\n\r\n\t\t\t\tfunction stopNativeEvents(type){\r\n\t\t\t\t\twin.doc.addEventListener(type, function(e){\r\n\t\t\t\t\t\t// Stop native events when we emitted our own click event.  Note that the native click may occur\r\n\t\t\t\t\t\t// on a different node than the synthetic click event was generated on.  For example,\r\n\t\t\t\t\t\t// click on a menu item, causing the menu to disappear, and then (~300ms later) the browser\r\n\t\t\t\t\t\t// sends a click event to the node that was *underneath* the menu.  So stop all native events\r\n\t\t\t\t\t\t// sent shortly after ours, similar to what is done in dualEvent.\r\n\t\t\t\t\t\t// The INPUT.dijitOffScreen test is for offscreen inputs used in dijit/form/Button, on which\r\n\t\t\t\t\t\t// we call click() explicitly, we don't want to stop this event.\r\n\t\t\t\t\t\t\tif(!e._dojo_click &&\r\n\t\t\t\t\t\t\t\t(new Date()).getTime() <= clickTime + 1000 &&\r\n\t\t\t\t\t\t\t\t!(e.target.tagName == \"INPUT\" && domClass.contains(e.target, \"dijitOffScreen\"))){\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\te.stopImmediatePropagation && e.stopImmediatePropagation();\r\n\t\t\t\t\t\t\tif(type == \"click\" && (e.target.tagName != \"INPUT\" || e.target.type == \"radio\" || e.target.type == \"checkbox\")\r\n\t\t\t\t\t\t\t\t&& e.target.tagName != \"TEXTAREA\" && e.target.tagName != \"AUDIO\" && e.target.tagName != \"VIDEO\"){\r\n\t\t\t\t\t\t\t\t // preventDefault() breaks textual <input>s on android, keyboard doesn't popup,\r\n\t\t\t\t\t\t\t\t // but it is still needed for checkboxes and radio buttons, otherwise in some cases\r\n\t\t\t\t\t\t\t\t // the checked state becomes inconsistent with the widget's state\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstopNativeEvents(\"click\");\r\n\r\n\t\t\t\t// We also stop mousedown/up since these would be sent well after with our \"fast\" click (300ms),\r\n\t\t\t\t// which can confuse some dijit widgets.\r\n\t\t\t\tstopNativeEvents(\"mousedown\");\r\n\t\t\t\tstopNativeEvents(\"mouseup\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar hoveredNode;\r\n\r\n\tif(hasPointer){\r\n\t\t // MSPointer (IE10+) already has support for over and out, so we just need to init click support\r\n\t\tdomReady(function(){\r\n\t\t\twin.doc.addEventListener(pointer.down, function(evt){\r\n\t\t\t\tdoClicks(evt, pointer.move, pointer.up);\r\n\t\t\t}, true);\r\n\t\t});\r\n\t}else if(hasTouch){\r\n\t\tdomReady(function(){\r\n\t\t\t// Keep track of currently hovered node\r\n\t\t\thoveredNode = win.body();\t// currently hovered node\r\n\r\n\t\t\twin.doc.addEventListener(\"touchstart\", function(evt){\r\n\t\t\t\t\tlastTouch = (new Date()).getTime();\r\n\r\n\t\t\t\t// Precede touchstart event with touch.over event.  DnD depends on this.\r\n\t\t\t\t// Use addEventListener(cb, true) to run cb before any touchstart handlers on node run,\r\n\t\t\t\t// and to ensure this code runs even if the listener on the node does event.stop().\r\n\t\t\t\tvar oldNode = hoveredNode;\r\n\t\t\t\thoveredNode = evt.target;\r\n\t\t\t\ton.emit(oldNode, \"dojotouchout\", {\r\n\t\t\t\t\trelatedTarget: hoveredNode,\r\n\t\t\t\t\tbubbles: true\r\n\t\t\t\t});\r\n\t\t\t\ton.emit(hoveredNode, \"dojotouchover\", {\r\n\t\t\t\t\trelatedTarget: oldNode,\r\n\t\t\t\t\tbubbles: true\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdoClicks(evt, \"touchmove\", \"touchend\"); // init click generation\r\n\t\t\t}, true);\r\n\r\n\t\t\tfunction copyEventProps(evt){\r\n\t\t\t\t// Make copy of event object and also set bubbles:true.  Used when calling on.emit().\r\n\t\t\t\tvar props = lang.delegate(evt, {\r\n\t\t\t\t\tbubbles: true\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(has(\"ios\") >= 6){\r\n\t\t\t\t\t// On iOS6 \"touches\" became a non-enumerable property, which\r\n\t\t\t\t\t// is not hit by for...in.  Ditto for the other properties below.\r\n\t\t\t\t\tprops.touches = evt.touches;\r\n\t\t\t\t\tprops.altKey = evt.altKey;\r\n\t\t\t\t\tprops.changedTouches = evt.changedTouches;\r\n\t\t\t\t\tprops.ctrlKey = evt.ctrlKey;\r\n\t\t\t\t\tprops.metaKey = evt.metaKey;\r\n\t\t\t\t\tprops.shiftKey = evt.shiftKey;\r\n\t\t\t\t\tprops.targetTouches = evt.targetTouches;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn props;\r\n\t\t\t}\r\n\r\n\t\t\ton(win.doc, \"touchmove\", function(evt){\r\n\t\t\t\tlastTouch = (new Date()).getTime();\r\n\r\n\t\t\t\tvar newNode = win.doc.elementFromPoint(\r\n\t\t\t\t\tevt.pageX - (ios4 ? 0 : win.global.pageXOffset), // iOS 4 expects page coords\r\n\t\t\t\t\tevt.pageY - (ios4 ? 0 : win.global.pageYOffset)\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif(newNode){\r\n\t\t\t\t\t// Fire synthetic touchover and touchout events on nodes since the browser won't do it natively.\r\n\t\t\t\t\tif(hoveredNode !== newNode){\r\n\t\t\t\t\t\t// touch out on the old node\r\n\t\t\t\t\t\ton.emit(hoveredNode, \"dojotouchout\", {\r\n\t\t\t\t\t\t\trelatedTarget: newNode,\r\n\t\t\t\t\t\t\tbubbles: true\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// touchover on the new node\r\n\t\t\t\t\t\ton.emit(newNode, \"dojotouchover\", {\r\n\t\t\t\t\t\t\trelatedTarget: hoveredNode,\r\n\t\t\t\t\t\t\tbubbles: true\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\thoveredNode = newNode;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Unlike a listener on \"touchmove\", on(node, \"dojotouchmove\", listener) fires when the finger\r\n\t\t\t\t\t// drags over the specified node, regardless of which node the touch started on.\r\n\t\t\t\t\tif(!on.emit(newNode, \"dojotouchmove\", copyEventProps(evt))){\r\n\t\t\t\t\t\t// emit returns false when synthetic event \"dojotouchmove\" is cancelled, so we prevent the\r\n\t\t\t\t\t\t// default behavior of the underlying native event \"touchmove\".\r\n\t\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Fire a dojotouchend event on the node where the finger was before it was removed from the screen.\r\n\t\t\t// This is different than the native touchend, which fires on the node where the drag started.\r\n\t\t\ton(win.doc, \"touchend\", function(evt){\r\n\t\t\t\t\tlastTouch = (new Date()).getTime();\r\n\t\t\t\tvar node = win.doc.elementFromPoint(\r\n\t\t\t\t\tevt.pageX - (ios4 ? 0 : win.global.pageXOffset), // iOS 4 expects page coords\r\n\t\t\t\t\tevt.pageY - (ios4 ? 0 : win.global.pageYOffset)\r\n\t\t\t\t) || win.body(); // if out of the screen\r\n\r\n\t\t\t\ton.emit(node, \"dojotouchend\", copyEventProps(evt));\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t//device neutral events - touch.press|move|release|cancel/over/out\r\n\tvar touch = {\r\n\t\tpress: dualEvent(\"mousedown\", \"touchstart\", pointer.down),\r\n\t\tmove: dualEvent(\"mousemove\", \"dojotouchmove\", pointer.move),\r\n\t\trelease: dualEvent(\"mouseup\", \"dojotouchend\", pointer.up),\r\n\t\tcancel: dualEvent(mouse.leave, \"touchcancel\", hasPointer ? pointer.cancel : null),\r\n\t\tover: dualEvent(\"mouseover\", \"dojotouchover\", pointer.over),\r\n\t\tout: dualEvent(\"mouseout\", \"dojotouchout\", pointer.out),\r\n\t\tenter: mouse._eventHandler(dualEvent(\"mouseover\",\"dojotouchover\", pointer.over)),\r\n\t\tleave: mouse._eventHandler(dualEvent(\"mouseout\", \"dojotouchout\", pointer.out))\r\n\t};\r\n\r\n\t/*=====\r\n\ttouch = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module provides unified touch event handlers by exporting\r\n\t\t//\t\tpress, move, release and cancel which can also run well on desktop.\r\n\t\t//\t\tBased on http://dvcs.w3.org/hg/webevents/raw-file/tip/touchevents.html\r\n\t\t//      Also, if the dojoClick property is set to truthy on a DOM node, dojo/touch generates\r\n\t\t//      click events immediately for this node and its descendants (except for descendants that\r\n\t\t//      have a dojoClick property set to falsy), to avoid the delay before native browser click events,\r\n\t\t//      and regardless of whether evt.preventDefault() was called in a touch.press event listener.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tUsed with dojo/on\r\n\t\t//\t\t|\tdefine([\"dojo/on\", \"dojo/touch\"], function(on, touch){\r\n\t\t//\t\t|\t\ton(node, touch.press, function(e){});\r\n\t\t//\t\t|\t\ton(node, touch.move, function(e){});\r\n\t\t//\t\t|\t\ton(node, touch.release, function(e){});\r\n\t\t//\t\t|\t\ton(node, touch.cancel, function(e){});\r\n\t\t// example:\r\n\t\t//\t\tUsed with touch.* directly\r\n\t\t//\t\t|\ttouch.press(node, function(e){});\r\n\t\t//\t\t|\ttouch.move(node, function(e){});\r\n\t\t//\t\t|\ttouch.release(node, function(e){});\r\n\t\t//\t\t|\ttouch.cancel(node, function(e){});\r\n\t\t// example:\r\n\t\t//\t\tHave dojo/touch generate clicks without delay, with a default move threshold of 4 pixels\r\n\t\t//\t\t|\tnode.dojoClick = true;\r\n\t\t// example:\r\n\t\t//\t\tHave dojo/touch generate clicks without delay, with a move threshold of 10 pixels horizontally and vertically\r\n\t\t//\t\t|\tnode.dojoClick = 10;\r\n\t\t// example:\r\n\t\t//\t\tHave dojo/touch generate clicks without delay, with a move threshold of 50 pixels horizontally and 10 pixels vertically\r\n\t\t//\t\t|\tnode.dojoClick = {x:50, y:5};\r\n\t\t// example:\r\n\t\t//\t\tDisable clicks without delay generated by dojo/touch on a node that has an ancestor with property dojoClick set to truthy\r\n\t\t//\t\t|  node.dojoClick = false;\r\n\r\n\t\tpress: function(node, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRegister a listener to 'touchstart'|'mousedown' for the given node\r\n\t\t\t// node: Dom\r\n\t\t\t//\t\tTarget node to listen to\r\n\t\t\t// listener: Function\r\n\t\t\t//\t\tCallback function\r\n\t\t\t// returns:\r\n\t\t\t//\t\tA handle which will be used to remove the listener by handle.remove()\r\n\t\t},\r\n\t\tmove: function(node, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRegister a listener that fires when the mouse cursor or a finger is dragged over the given node.\r\n\t\t\t// node: Dom\r\n\t\t\t//\t\tTarget node to listen to\r\n\t\t\t// listener: Function\r\n\t\t\t//\t\tCallback function\r\n\t\t\t// returns:\r\n\t\t\t//\t\tA handle which will be used to remove the listener by handle.remove()\r\n\t\t},\r\n\t\trelease: function(node, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRegister a listener to releasing the mouse button while the cursor is over the given node\r\n\t\t\t//\t\t(i.e. \"mouseup\") or for removing the finger from the screen while touching the given node.\r\n\t\t\t// node: Dom\r\n\t\t\t//\t\tTarget node to listen to\r\n\t\t\t// listener: Function\r\n\t\t\t//\t\tCallback function\r\n\t\t\t// returns:\r\n\t\t\t//\t\tA handle which will be used to remove the listener by handle.remove()\r\n\t\t},\r\n\t\tcancel: function(node, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRegister a listener to 'touchcancel'|'mouseleave' for the given node\r\n\t\t\t// node: Dom\r\n\t\t\t//\t\tTarget node to listen to\r\n\t\t\t// listener: Function\r\n\t\t\t//\t\tCallback function\r\n\t\t\t// returns:\r\n\t\t\t//\t\tA handle which will be used to remove the listener by handle.remove()\r\n\t\t},\r\n\t\tover: function(node, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRegister a listener to 'mouseover' or touch equivalent for the given node\r\n\t\t\t// node: Dom\r\n\t\t\t//\t\tTarget node to listen to\r\n\t\t\t// listener: Function\r\n\t\t\t//\t\tCallback function\r\n\t\t\t// returns:\r\n\t\t\t//\t\tA handle which will be used to remove the listener by handle.remove()\r\n\t\t},\r\n\t\tout: function(node, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRegister a listener to 'mouseout' or touch equivalent for the given node\r\n\t\t\t// node: Dom\r\n\t\t\t//\t\tTarget node to listen to\r\n\t\t\t// listener: Function\r\n\t\t\t//\t\tCallback function\r\n\t\t\t// returns:\r\n\t\t\t//\t\tA handle which will be used to remove the listener by handle.remove()\r\n\t\t},\r\n\t\tenter: function(node, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRegister a listener to mouse.enter or touch equivalent for the given node\r\n\t\t\t// node: Dom\r\n\t\t\t//\t\tTarget node to listen to\r\n\t\t\t// listener: Function\r\n\t\t\t//\t\tCallback function\r\n\t\t\t// returns:\r\n\t\t\t//\t\tA handle which will be used to remove the listener by handle.remove()\r\n\t\t},\r\n\t\tleave: function(node, listener){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRegister a listener to mouse.leave or touch equivalent for the given node\r\n\t\t\t// node: Dom\r\n\t\t\t//\t\tTarget node to listen to\r\n\t\t\t// listener: Function\r\n\t\t\t//\t\tCallback function\r\n\t\t\t// returns:\r\n\t\t\t//\t\tA handle which will be used to remove the listener by handle.remove()\r\n\t\t}\r\n\t};\r\n\t=====*/\r\n\r\n\thas(\"extend-dojo\") && (dojo.touch = touch);\r\n\r\n\treturn touch;\r\n});\r\n\ndefine('dojo/uacss',[\"./dom-geometry\", \"./_base/lang\", \"./domReady\", \"./sniff\", \"./_base/window\"],\r\n\tfunction(geometry, lang, domReady, has, baseWindow){\r\n\r\n\t// module:\r\n\t//\t\tdojo/uacss\r\n\r\n\t/*=====\r\n\treturn {\r\n\t\t// summary:\r\n\t\t//\t\tApplies pre-set CSS classes to the top-level HTML node, based on:\r\n\t\t//\r\n\t\t//\t\t- browser (ex: dj_ie)\r\n\t\t//\t\t- browser version (ex: dj_ie6)\r\n\t\t//\t\t- box model (ex: dj_contentBox)\r\n\t\t//\t\t- text direction (ex: dijitRtl)\r\n\t\t//\r\n\t\t//\t\tIn addition, browser, browser version, and box model are\r\n\t\t//\t\tcombined with an RTL flag when browser text is RTL. ex: dj_ie-rtl.\r\n\t\t//\r\n\t\t//\t\tReturns the has() method.\r\n\t};\r\n\t=====*/\r\n\r\n\tvar\r\n\t\thtml = baseWindow.doc.documentElement,\r\n\t\tie = has(\"ie\"),\r\n\t\topera = has(\"opera\"),\r\n\t\tmaj = Math.floor,\r\n\t\tff = has(\"ff\"),\r\n\t\tboxModel = geometry.boxModel.replace(/-/,''),\r\n\r\n\t\tclasses = {\r\n\t\t\t\"dj_quirks\": has(\"quirks\"),\r\n\r\n\t\t\t// NOTE: Opera not supported by dijit\r\n\t\t\t\"dj_opera\": opera,\r\n\r\n\t\t\t\"dj_khtml\": has(\"khtml\"),\r\n\r\n\t\t\t\"dj_webkit\": has(\"webkit\"),\r\n\t\t\t\"dj_safari\": has(\"safari\"),\r\n\t\t\t\"dj_chrome\": has(\"chrome\"),\r\n\r\n\t\t\t\"dj_gecko\": has(\"mozilla\"),\r\n\r\n\t\t\t\"dj_ios\": has(\"ios\"),\r\n\t\t\t\"dj_android\": has(\"android\")\r\n\t\t}; // no dojo unsupported browsers\r\n\r\n\tif(ie){\r\n\t\tclasses[\"dj_ie\"] = true;\r\n\t\tclasses[\"dj_ie\" + maj(ie)] = true;\r\n\t\tclasses[\"dj_iequirks\"] = has(\"quirks\");\r\n\t}\r\n\tif(ff){\r\n\t\tclasses[\"dj_ff\" + maj(ff)] = true;\r\n\t}\r\n\r\n\tclasses[\"dj_\" + boxModel] = true;\r\n\r\n\t// apply browser, browser version, and box model class names\r\n\tvar classStr = \"\";\r\n\tfor(var clz in classes){\r\n\t\tif(classes[clz]){\r\n\t\t\tclassStr += clz + \" \";\r\n\t\t}\r\n\t}\r\n\thtml.className = lang.trim(html.className + \" \" + classStr);\r\n\r\n\t// If RTL mode, then add dj_rtl flag plus repeat existing classes with -rtl extension.\r\n\t// We can't run the code below until the <body> tag has loaded (so we can check for dir=rtl).\r\n\tdomReady(function(){\r\n\t\tif(!geometry.isBodyLtr()){\r\n\t\t\tvar rtlClassStr = \"dj_rtl dijitRtl \" + classStr.replace(/ /g, \"-rtl \");\r\n\t\t\thtml.className = lang.trim(html.className + \" \" + rtlClassStr + \"dj_rtl dijitRtl \" + classStr.replace(/ /g, \"-rtl \"));\r\n\t\t}\r\n\t});\r\n\treturn has;\r\n});\r\n\ndefine('dojo/window',[\"./_base/lang\", \"./sniff\", \"./_base/window\", \"./dom\", \"./dom-geometry\", \"./dom-style\", \"./dom-construct\"],\r\n\tfunction(lang, has, baseWindow, dom, geom, style, domConstruct){\r\n\r\n\t// feature detection\r\n\t/* not needed but included here for future reference\r\n\thas.add(\"rtl-innerVerticalScrollBar-on-left\", function(win, doc){\r\n\t\tvar\tbody = baseWindow.body(doc),\r\n\t\t\tscrollable = domConstruct.create('div', {\r\n\t\t\t\tstyle: {overflow:'scroll', overflowX:'hidden', direction:'rtl', visibility:'hidden', position:'absolute', left:'0', width:'64px', height:'64px'}\r\n\t\t\t}, body, \"last\"),\r\n\t\t\tcenter = domConstruct.create('center', {\r\n\t\t\t\tstyle: {overflow:'hidden', direction:'ltr'}\r\n\t\t\t}, scrollable, \"last\"),\r\n\t\t\tinner = domConstruct.create('div', {\r\n\t\t\t\tstyle: {overflow:'visible', display:'inline' }\r\n\t\t\t}, center, \"last\");\r\n\t\tinner.innerHTML=\"&nbsp;\";\r\n\t\tvar midPoint = Math.max(inner.offsetLeft, geom.position(inner).x);\r\n\t\tvar ret = midPoint >= 32;\r\n\t\tcenter.removeChild(inner);\r\n\t\tscrollable.removeChild(center);\r\n\t\tbody.removeChild(scrollable);\r\n\t\treturn ret;\r\n\t});\r\n\t*/\r\n\thas.add(\"rtl-adjust-position-for-verticalScrollBar\", function(win, doc){\r\n\t\tvar\tbody = baseWindow.body(doc),\r\n\t\t\tscrollable = domConstruct.create('div', {\r\n\t\t\t\tstyle: {overflow:'scroll', overflowX:'visible', direction:'rtl', visibility:'hidden', position:'absolute', left:'0', top:'0', width:'64px', height:'64px'}\r\n\t\t\t}, body, \"last\"),\r\n\t\t\tdiv = domConstruct.create('div', {\r\n\t\t\t\tstyle: {overflow:'hidden', direction:'ltr'}\r\n\t\t\t}, scrollable, \"last\"),\r\n\t\t\tret = geom.position(div).x != 0;\r\n\t\tscrollable.removeChild(div);\r\n\t\tbody.removeChild(scrollable);\r\n\t\treturn ret;\r\n\t});\r\n\r\n\thas.add(\"position-fixed-support\", function(win, doc){\r\n\t\t// IE6, IE7+quirks, and some older mobile browsers don't support position:fixed\r\n\t\tvar\tbody = baseWindow.body(doc),\r\n\t\t\touter = domConstruct.create('span', {\r\n\t\t\t\tstyle: {visibility:'hidden', position:'fixed', left:'1px', top:'1px'}\r\n\t\t\t}, body, \"last\"),\r\n\t\t\tinner = domConstruct.create('span', {\r\n\t\t\t\tstyle: {position:'fixed', left:'0', top:'0'}\r\n\t\t\t}, outer, \"last\"),\r\n\t\t\tret = geom.position(inner).x != geom.position(outer).x;\r\n\t\touter.removeChild(inner);\r\n\t\tbody.removeChild(outer);\r\n\t\treturn ret;\r\n\t});\r\n\r\n\t// module:\r\n\t//\t\tdojo/window\r\n\r\n\tvar window = {\r\n\t\t// summary:\r\n\t\t//\t\tTODOC\r\n\r\n\t\tgetBox: function(/*Document?*/ doc){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns the dimensions and scroll position of the viewable area of a browser window\r\n\r\n\t\t\tdoc = doc || baseWindow.doc;\r\n\r\n\t\t\tvar\r\n\t\t\t\tscrollRoot = (doc.compatMode == 'BackCompat') ? baseWindow.body(doc) : doc.documentElement,\r\n\t\t\t\t// get scroll position\r\n\t\t\t\tscroll = geom.docScroll(doc), // scrollRoot.scrollTop/Left should work\r\n\t\t\t\tw, h;\r\n\r\n\t\t\tif(has(\"touch\")){ // if(scrollbars not supported)\r\n\t\t\t\tvar uiWindow = window.get(doc);   // use UI window, not dojo.global window\r\n\t\t\t\t// on mobile, scrollRoot.clientHeight <= uiWindow.innerHeight <= scrollRoot.offsetHeight, return uiWindow.innerHeight\r\n\t\t\t\tw = uiWindow.innerWidth || scrollRoot.clientWidth; // || scrollRoot.clientXXX probably never evaluated\r\n\t\t\t\th = uiWindow.innerHeight || scrollRoot.clientHeight;\r\n\t\t\t}else{\r\n\t\t\t\t// on desktops, scrollRoot.clientHeight <= scrollRoot.offsetHeight <= uiWindow.innerHeight, return scrollRoot.clientHeight\r\n\t\t\t\t// uiWindow.innerWidth/Height includes the scrollbar and cannot be used\r\n\t\t\t\tw = scrollRoot.clientWidth;\r\n\t\t\t\th = scrollRoot.clientHeight;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tl: scroll.x,\r\n\t\t\t\tt: scroll.y,\r\n\t\t\t\tw: w,\r\n\t\t\t\th: h\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tget: function(/*Document*/ doc){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGet window object associated with document doc.\r\n\t\t\t// doc:\r\n\t\t\t//\t\tThe document to get the associated window for.\r\n\r\n\t\t\t// In some IE versions (at least 6.0), document.parentWindow does not return a\r\n\t\t\t// reference to the real window object (maybe a copy), so we must fix it as well\r\n\t\t\t// We use IE specific execScript to attach the real window reference to\r\n\t\t\t// document._parentWindow for later use\r\n\t\t\tif(has(\"ie\") && window !== document.parentWindow){\r\n\t\t\t\t/*\r\n\t\t\t\tIn IE 6, only the variable \"window\" can be used to connect events (others\r\n\t\t\t\tmay be only copies).\r\n\t\t\t\t*/\r\n\t\t\t\tdoc.parentWindow.execScript(\"document._parentWindow = window;\", \"Javascript\");\r\n\t\t\t\t//to prevent memory leak, unset it after use\r\n\t\t\t\t//another possibility is to add an onUnload handler which seems overkill to me (liucougar)\r\n\t\t\t\tvar win = doc._parentWindow;\r\n\t\t\t\tdoc._parentWindow = null;\r\n\t\t\t\treturn win;\t//\tWindow\r\n\t\t\t}\r\n\r\n\t\t\treturn doc.parentWindow || doc.defaultView;\t//\tWindow\r\n\t\t},\r\n\r\n\t\tscrollIntoView: function(/*DomNode*/ node, /*Object?*/ pos){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tScroll the passed node into view using minimal movement, if it is not already.\r\n\r\n\t\t\t// Don't rely on node.scrollIntoView working just because the function is there since\r\n\t\t\t// it forces the node to the page's bottom or top (and left or right in IE) without consideration for the minimal movement.\r\n\t\t\t// WebKit's node.scrollIntoViewIfNeeded doesn't work either for inner scrollbars in right-to-left mode\r\n\t\t\t// and when there's a fixed position scrollable element\r\n\r\n\t\t\ttry{ // catch unexpected/unrecreatable errors (#7808) since we can recover using a semi-acceptable native method\r\n\t\t\t\tnode = dom.byId(node);\r\n\t\t\t\tvar\tdoc = node.ownerDocument || baseWindow.doc,\t// TODO: why baseWindow.doc?  Isn't node.ownerDocument always defined?\r\n\t\t\t\t\tbody = baseWindow.body(doc),\r\n\t\t\t\t\thtml = doc.documentElement || body.parentNode,\r\n\t\t\t\t\tisIE = has(\"ie\"),\r\n\t\t\t\t\tisWK = has(\"webkit\");\r\n\t\t\t\t// if an untested browser, then use the native method\r\n\t\t\t\tif(node == body || node == html){ return; }\r\n\t\t\t\tif(!(has(\"mozilla\") || isIE || isWK || has(\"opera\") || has(\"trident\")) && (\"scrollIntoView\" in node)){\r\n\t\t\t\t\tnode.scrollIntoView(false); // short-circuit to native if possible\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar\tbackCompat = doc.compatMode == 'BackCompat',\r\n\t\t\t\t\trootWidth = Math.min(body.clientWidth || html.clientWidth, html.clientWidth || body.clientWidth),\r\n\t\t\t\t\trootHeight = Math.min(body.clientHeight || html.clientHeight, html.clientHeight || body.clientHeight),\r\n\t\t\t\t\tscrollRoot = (isWK || backCompat) ? body : html,\r\n\t\t\t\t\tnodePos = pos || geom.position(node),\r\n\t\t\t\t\tel = node.parentNode,\r\n\t\t\t\t\tisFixed = function(el){\r\n\t\t\t\t\t\treturn (isIE <= 6 || (isIE == 7 && backCompat))\r\n\t\t\t\t\t\t\t? false\r\n\t\t\t\t\t\t\t: (has(\"position-fixed-support\") && (style.get(el, 'position').toLowerCase() == \"fixed\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tself = this,\r\n\t\t\t\t\tscrollElementBy = function(el, x, y){\r\n\t\t\t\t\t\tif(el.tagName == \"BODY\" || el.tagName == \"HTML\"){\r\n\t\t\t\t\t\t\tself.get(el.ownerDocument).scrollBy(x, y);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tx && (el.scrollLeft += x);\r\n\t\t\t\t\t\t\ty && (el.scrollTop += y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\tif(isFixed(node)){ return; } // nothing to do\r\n\t\t\t\twhile(el){\r\n\t\t\t\t\tif(el == body){ el = scrollRoot; }\r\n\t\t\t\t\tvar\telPos = geom.position(el),\r\n\t\t\t\t\t\tfixedPos = isFixed(el),\r\n\t\t\t\t\t\trtl = style.getComputedStyle(el).direction.toLowerCase() == \"rtl\";\r\n\r\n\t\t\t\t\tif(el == scrollRoot){\r\n\t\t\t\t\t\telPos.w = rootWidth; elPos.h = rootHeight;\r\n\t\t\t\t\t\tif(scrollRoot == html && (isIE || has(\"trident\")) && rtl){ elPos.x += scrollRoot.offsetWidth-elPos.w; } // IE workaround where scrollbar causes negative x\r\n\t\t\t\t\t\tif(elPos.x < 0 || !isIE || isIE >= 9 || has(\"trident\")){ elPos.x = 0; } // older IE can have values > 0\r\n\t\t\t\t\t\tif(elPos.y < 0 || !isIE || isIE >= 9 || has(\"trident\")){ elPos.y = 0; }\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar pb = geom.getPadBorderExtents(el);\r\n\t\t\t\t\t\telPos.w -= pb.w; elPos.h -= pb.h; elPos.x += pb.l; elPos.y += pb.t;\r\n\t\t\t\t\t\tvar clientSize = el.clientWidth,\r\n\t\t\t\t\t\t\tscrollBarSize = elPos.w - clientSize;\r\n\t\t\t\t\t\tif(clientSize > 0 && scrollBarSize > 0){\r\n\t\t\t\t\t\t\tif(rtl && has(\"rtl-adjust-position-for-verticalScrollBar\")){\r\n\t\t\t\t\t\t\t\telPos.x += scrollBarSize;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telPos.w = clientSize;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclientSize = el.clientHeight;\r\n\t\t\t\t\t\tscrollBarSize = elPos.h - clientSize;\r\n\t\t\t\t\t\tif(clientSize > 0 && scrollBarSize > 0){\r\n\t\t\t\t\t\t\telPos.h = clientSize;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(fixedPos){ // bounded by viewport, not parents\r\n\t\t\t\t\t\tif(elPos.y < 0){\r\n\t\t\t\t\t\t\telPos.h += elPos.y; elPos.y = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(elPos.x < 0){\r\n\t\t\t\t\t\t\telPos.w += elPos.x; elPos.x = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(elPos.y + elPos.h > rootHeight){\r\n\t\t\t\t\t\t\telPos.h = rootHeight - elPos.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(elPos.x + elPos.w > rootWidth){\r\n\t\t\t\t\t\t\telPos.w = rootWidth - elPos.x;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// calculate overflow in all 4 directions\r\n\t\t\t\t\tvar\tl = nodePos.x - elPos.x, // beyond left: < 0\r\n//\t\t\t\t\t\tt = nodePos.y - Math.max(elPos.y, 0), // beyond top: < 0\r\n\t\t\t\t\t\tt = nodePos.y - elPos.y, // beyond top: < 0\r\n\t\t\t\t\t\tr = l + nodePos.w - elPos.w, // beyond right: > 0\r\n\t\t\t\t\t\tbot = t + nodePos.h - elPos.h; // beyond bottom: > 0\r\n\t\t\t\t\tvar s, old;\r\n\t\t\t\t\tif(r * l > 0 && (!!el.scrollLeft || el == scrollRoot || el.scrollWidth > el.offsetHeight)){\r\n\t\t\t\t\t\ts = Math[l < 0? \"max\" : \"min\"](l, r);\r\n\t\t\t\t\t\tif(rtl && ((isIE == 8 && !backCompat) || isIE >= 9 || has(\"trident\"))){ s = -s; }\r\n\t\t\t\t\t\told = el.scrollLeft;\r\n\t\t\t\t\t\tscrollElementBy(el, s, 0);\r\n\t\t\t\t\t\ts = el.scrollLeft - old;\r\n\t\t\t\t\t\tnodePos.x -= s;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(bot * t > 0 && (!!el.scrollTop || el == scrollRoot || el.scrollHeight > el.offsetHeight)){\r\n\t\t\t\t\t\ts = Math.ceil(Math[t < 0? \"max\" : \"min\"](t, bot));\r\n\t\t\t\t\t\told = el.scrollTop;\r\n\t\t\t\t\t\tscrollElementBy(el, 0, s);\r\n\t\t\t\t\t\ts = el.scrollTop - old;\r\n\t\t\t\t\t\tnodePos.y -= s;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel = (el != scrollRoot) && !fixedPos && el.parentNode;\r\n\t\t\t\t}\r\n\t\t\t}catch(error){\r\n\t\t\t\tconsole.error('scrollIntoView: ' + error);\r\n\t\t\t\tnode.scrollIntoView(false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thas(\"extend-dojo\") && lang.setObject(\"dojo.window\", window);\r\n\r\n\treturn window;\r\n});\r\n\ndefine('dojo/cldr/nls/currency',{ root:\r\n\r\n//begin v1.x content\r\n{\r\n\t\"USD_symbol\": \"US$\",\r\n\t\"CAD_symbol\": \"CA$\",\r\n\t\"GBP_symbol\": \"\",\r\n\t\"HKD_symbol\": \"HK$\",\r\n\t\"JPY_symbol\": \"JP\",\r\n\t\"AUD_symbol\": \"A$\",\r\n\t\"CNY_symbol\": \"CN\",\r\n\t\"EUR_symbol\": \"\"\r\n}\r\n//end v1.x content\r\n,\r\n\t\"ar\": true,\r\n\t\"ca\": true,\r\n\t\"cs\": true,\r\n\t\"da\": true,\r\n\t\"de\": true,\r\n\t\"el\": true,\r\n\t\"en\": true,\r\n\t\"en-au\": true,\r\n\t\"en-ca\": true,\r\n\t\"en-gb\": true,\r\n\t\"es\": true,\r\n\t\"fi\": true,\r\n\t\"fr\": true,\r\n\t\"fr-ch\": true,\r\n\t\"he\": true,\r\n\t\"hu\": true,\r\n\t\"it\": true,\r\n\t\"ja\": true,\r\n\t\"ko\": true,\r\n\t\"nb\": true,\r\n\t\"nl\": true,\r\n\t\"pl\": true,\r\n\t\"pt\": true,\r\n\t\"pt-pt\": true,\r\n\t\"ro\": true,\r\n\t\"ru\": true,\r\n\t\"sk\": true,\r\n\t\"sl\": true,\r\n\t\"sv\": true,\r\n\t\"th\": true,\r\n\t\"tr\": true,\r\n\t\"zh\": true,\r\n\t\"zh-hant\": true,\r\n\t\"zh-hk\": true,\r\n\t\"zh-tw\": true\r\n});\ndefine('dojo/cldr/nls/gregorian',{ root:\r\n\r\n//begin v1.x content\r\n{\r\n\t\"dateFormatItem-Ehm\": \"E h:mm a\",\r\n\t\"days-standAlone-short\": [\r\n\t\t\"Sun\",\r\n\t\t\"Mon\",\r\n\t\t\"Tue\",\r\n\t\t\"Wed\",\r\n\t\t\"Thu\",\r\n\t\t\"Fri\",\r\n\t\t\"Sat\"\r\n\t],\r\n\t\"months-format-narrow\": [\r\n\t\t\"1\",\r\n\t\t\"2\",\r\n\t\t\"3\",\r\n\t\t\"4\",\r\n\t\t\"5\",\r\n\t\t\"6\",\r\n\t\t\"7\",\r\n\t\t\"8\",\r\n\t\t\"9\",\r\n\t\t\"10\",\r\n\t\t\"11\",\r\n\t\t\"12\"\r\n\t],\r\n\t\"field-second-relative+0\": \"now\",\r\n\t\"quarters-standAlone-narrow\": [\r\n\t\t\"1\",\r\n\t\t\"2\",\r\n\t\t\"3\",\r\n\t\t\"4\"\r\n\t],\r\n\t\"field-weekday\": \"Day of the Week\",\r\n\t\"dateFormatItem-yQQQ\": \"y QQQ\",\r\n\t\"dateFormatItem-yMEd\": \"y-MM-dd, E\",\r\n\t\"field-wed-relative+0\": \"this Wednesday\",\r\n\t\"field-wed-relative+1\": \"next Wednesday\",\r\n\t\"dateFormatItem-GyMMMEd\": \"G y MMM d, E\",\r\n\t\"dateFormatItem-MMMEd\": \"MMM d, E\",\r\n\t\"eraNarrow\": [\r\n\t\t\"BCE\",\r\n\t\t\"CE\"\r\n\t],\r\n\t\"field-tue-relative+-1\": \"last Tuesday\",\r\n\t\"days-format-short\": [\r\n\t\t\"Sun\",\r\n\t\t\"Mon\",\r\n\t\t\"Tue\",\r\n\t\t\"Wed\",\r\n\t\t\"Thu\",\r\n\t\t\"Fri\",\r\n\t\t\"Sat\"\r\n\t],\r\n\t\"dateTimeFormats-appendItem-Day-Of-Week\": \"{0} {1}\",\r\n\t\"dateFormat-long\": \"y MMMM d\",\r\n\t\"field-fri-relative+-1\": \"last Friday\",\r\n\t\"field-wed-relative+-1\": \"last Wednesday\",\r\n\t\"months-format-wide\": [\r\n\t\t\"M01\",\r\n\t\t\"M02\",\r\n\t\t\"M03\",\r\n\t\t\"M04\",\r\n\t\t\"M05\",\r\n\t\t\"M06\",\r\n\t\t\"M07\",\r\n\t\t\"M08\",\r\n\t\t\"M09\",\r\n\t\t\"M10\",\r\n\t\t\"M11\",\r\n\t\t\"M12\"\r\n\t],\r\n\t\"dateTimeFormat-medium\": \"{1} {0}\",\r\n\t\"dayPeriods-format-wide-pm\": \"PM\",\r\n\t\"dateFormat-full\": \"y MMMM d, EEEE\",\r\n\t\"field-thu-relative+-1\": \"last Thursday\",\r\n\t\"dateFormatItem-Md\": \"MM-dd\",\r\n\t\"dayPeriods-format-abbr-am\": \"AM\",\r\n\t\"dateTimeFormats-appendItem-Second\": \"{0} ({2}: {1})\",\r\n\t\"dayPeriods-format-wide-noon\": \"noon\",\r\n\t\"dateFormatItem-yMd\": \"y-MM-dd\",\r\n\t\"field-era\": \"Era\",\r\n\t\"dateFormatItem-yM\": \"y-MM\",\r\n\t\"months-standAlone-wide\": [\r\n\t\t\"M01\",\r\n\t\t\"M02\",\r\n\t\t\"M03\",\r\n\t\t\"M04\",\r\n\t\t\"M05\",\r\n\t\t\"M06\",\r\n\t\t\"M07\",\r\n\t\t\"M08\",\r\n\t\t\"M09\",\r\n\t\t\"M10\",\r\n\t\t\"M11\",\r\n\t\t\"M12\"\r\n\t],\r\n\t\"timeFormat-short\": \"HH:mm\",\r\n\t\"quarters-format-wide\": [\r\n\t\t\"Q1\",\r\n\t\t\"Q2\",\r\n\t\t\"Q3\",\r\n\t\t\"Q4\"\r\n\t],\r\n\t\"dateFormatItem-yQQQQ\": \"y QQQQ\",\r\n\t\"timeFormat-long\": \"HH:mm:ss z\",\r\n\t\"field-year\": \"Year\",\r\n\t\"dateFormatItem-yMMM\": \"y MMM\",\r\n\t\"dateTimeFormats-appendItem-Era\": \"{1} {0}\",\r\n\t\"field-hour\": \"Hour\",\r\n\t\"months-format-abbr\": [\r\n\t\t\"M01\",\r\n\t\t\"M02\",\r\n\t\t\"M03\",\r\n\t\t\"M04\",\r\n\t\t\"M05\",\r\n\t\t\"M06\",\r\n\t\t\"M07\",\r\n\t\t\"M08\",\r\n\t\t\"M09\",\r\n\t\t\"M10\",\r\n\t\t\"M11\",\r\n\t\t\"M12\"\r\n\t],\r\n\t\"field-sat-relative+0\": \"this Saturday\",\r\n\t\"field-sat-relative+1\": \"next Saturday\",\r\n\t\"timeFormat-full\": \"HH:mm:ss zzzz\",\r\n\t\"dateTimeFormats-appendItem-Week\": \"{0} ({2}: {1})\",\r\n\t\"field-day-relative+0\": \"today\",\r\n\t\"field-thu-relative+0\": \"this Thursday\",\r\n\t\"field-day-relative+1\": \"tomorrow\",\r\n\t\"field-thu-relative+1\": \"next Thursday\",\r\n\t\"dateFormatItem-GyMMMd\": \"G y MMM d\",\r\n\t\"dateFormatItem-H\": \"HH\",\r\n\t\"months-standAlone-abbr\": [\r\n\t\t\"M01\",\r\n\t\t\"M02\",\r\n\t\t\"M03\",\r\n\t\t\"M04\",\r\n\t\t\"M05\",\r\n\t\t\"M06\",\r\n\t\t\"M07\",\r\n\t\t\"M08\",\r\n\t\t\"M09\",\r\n\t\t\"M10\",\r\n\t\t\"M11\",\r\n\t\t\"M12\"\r\n\t],\r\n\t\"quarters-format-abbr\": [\r\n\t\t\"Q1\",\r\n\t\t\"Q2\",\r\n\t\t\"Q3\",\r\n\t\t\"Q4\"\r\n\t],\r\n\t\"quarters-standAlone-wide\": [\r\n\t\t\"Q1\",\r\n\t\t\"Q2\",\r\n\t\t\"Q3\",\r\n\t\t\"Q4\"\r\n\t],\r\n\t\"dateFormatItem-Gy\": \"G y\",\r\n\t\"dateFormatItem-M\": \"L\",\r\n\t\"days-standAlone-wide\": [\r\n\t\t\"Sun\",\r\n\t\t\"Mon\",\r\n\t\t\"Tue\",\r\n\t\t\"Wed\",\r\n\t\t\"Thu\",\r\n\t\t\"Fri\",\r\n\t\t\"Sat\"\r\n\t],\r\n\t\"dayPeriods-format-abbr-noon\": \"noon\",\r\n\t\"timeFormat-medium\": \"HH:mm:ss\",\r\n\t\"field-sun-relative+0\": \"this Sunday\",\r\n\t\"dateFormatItem-Hm\": \"HH:mm\",\r\n\t\"field-sun-relative+1\": \"next Sunday\",\r\n\t\"quarters-standAlone-abbr\": [\r\n\t\t\"Q1\",\r\n\t\t\"Q2\",\r\n\t\t\"Q3\",\r\n\t\t\"Q4\"\r\n\t],\r\n\t\"eraAbbr\": [\r\n\t\t\"BCE\",\r\n\t\t\"CE\"\r\n\t],\r\n\t\"field-minute\": \"Minute\",\r\n\t\"field-dayperiod\": \"Dayperiod\",\r\n\t\"days-standAlone-abbr\": [\r\n\t\t\"Sun\",\r\n\t\t\"Mon\",\r\n\t\t\"Tue\",\r\n\t\t\"Wed\",\r\n\t\t\"Thu\",\r\n\t\t\"Fri\",\r\n\t\t\"Sat\"\r\n\t],\r\n\t\"dateFormatItem-d\": \"d\",\r\n\t\"dateFormatItem-ms\": \"mm:ss\",\r\n\t\"quarters-format-narrow\": [\r\n\t\t\"1\",\r\n\t\t\"2\",\r\n\t\t\"3\",\r\n\t\t\"4\"\r\n\t],\r\n\t\"field-day-relative+-1\": \"yesterday\",\r\n\t\"dateTimeFormat-long\": \"{1} {0}\",\r\n\t\"dayPeriods-format-narrow-am\": \"a\",\r\n\t\"dateFormatItem-h\": \"h a\",\r\n\t\"dateFormatItem-MMMd\": \"MMM d\",\r\n\t\"dateFormatItem-MEd\": \"MM-dd, E\",\r\n\t\"dateTimeFormat-full\": \"{1} {0}\",\r\n\t\"field-fri-relative+0\": \"this Friday\",\r\n\t\"field-fri-relative+1\": \"next Friday\",\r\n\t\"field-day\": \"Day\",\r\n\t\"days-format-wide\": [\r\n\t\t\"Sun\",\r\n\t\t\"Mon\",\r\n\t\t\"Tue\",\r\n\t\t\"Wed\",\r\n\t\t\"Thu\",\r\n\t\t\"Fri\",\r\n\t\t\"Sat\"\r\n\t],\r\n\t\"field-zone\": \"Zone\",\r\n\t\"months-standAlone-narrow\": [\r\n\t\t\"1\",\r\n\t\t\"2\",\r\n\t\t\"3\",\r\n\t\t\"4\",\r\n\t\t\"5\",\r\n\t\t\"6\",\r\n\t\t\"7\",\r\n\t\t\"8\",\r\n\t\t\"9\",\r\n\t\t\"10\",\r\n\t\t\"11\",\r\n\t\t\"12\"\r\n\t],\r\n\t\"dateFormatItem-y\": \"y\",\r\n\t\"dateTimeFormats-appendItem-Day\": \"{0} ({2}: {1})\",\r\n\t\"field-year-relative+-1\": \"last year\",\r\n\t\"field-month-relative+-1\": \"last month\",\r\n\t\"dateTimeFormats-appendItem-Year\": \"{1} {0}\",\r\n\t\"dateFormatItem-hm\": \"h:mm a\",\r\n\t\"dateTimeFormats-appendItem-Hour\": \"{0} ({2}: {1})\",\r\n\t\"dayPeriods-format-abbr-pm\": \"PM\",\r\n\t\"days-format-abbr\": [\r\n\t\t\"Sun\",\r\n\t\t\"Mon\",\r\n\t\t\"Tue\",\r\n\t\t\"Wed\",\r\n\t\t\"Thu\",\r\n\t\t\"Fri\",\r\n\t\t\"Sat\"\r\n\t],\r\n\t\"eraNames\": [\r\n\t\t\"BCE\",\r\n\t\t\"CE\"\r\n\t],\r\n\t\"dateFormatItem-yMMMd\": \"y MMM d\",\r\n\t\"days-format-narrow\": [\r\n\t\t\"S\",\r\n\t\t\"M\",\r\n\t\t\"T\",\r\n\t\t\"W\",\r\n\t\t\"T\",\r\n\t\t\"F\",\r\n\t\t\"S\"\r\n\t],\r\n\t\"field-month\": \"Month\",\r\n\t\"days-standAlone-narrow\": [\r\n\t\t\"S\",\r\n\t\t\"M\",\r\n\t\t\"T\",\r\n\t\t\"W\",\r\n\t\t\"T\",\r\n\t\t\"F\",\r\n\t\t\"S\"\r\n\t],\r\n\t\"dateFormatItem-MMM\": \"LLL\",\r\n\t\"field-tue-relative+0\": \"this Tuesday\",\r\n\t\"dateTimeFormats-appendItem-Quarter\": \"{0} ({2}: {1})\",\r\n\t\"field-tue-relative+1\": \"next Tuesday\",\r\n\t\"dayPeriods-format-wide-am\": \"AM\",\r\n\t\"dateTimeFormats-appendItem-Month\": \"{0} ({2}: {1})\",\r\n\t\"dateTimeFormats-appendItem-Minute\": \"{0} ({2}: {1})\",\r\n\t\"dateFormatItem-EHm\": \"E HH:mm\",\r\n\t\"field-mon-relative+0\": \"this Monday\",\r\n\t\"field-mon-relative+1\": \"next Monday\",\r\n\t\"dateFormat-short\": \"y-MM-dd\",\r\n\t\"dateFormatItem-EHms\": \"E HH:mm:ss\",\r\n\t\"dateFormatItem-Ehms\": \"E h:mm:ss a\",\r\n\t\"dayPeriods-format-narrow-noon\": \"n\",\r\n\t\"field-second\": \"Second\",\r\n\t\"field-sat-relative+-1\": \"last Saturday\",\r\n\t\"dateFormatItem-yMMMEd\": \"y MMM d, E\",\r\n\t\"field-sun-relative+-1\": \"last Sunday\",\r\n\t\"field-month-relative+0\": \"this month\",\r\n\t\"field-month-relative+1\": \"next month\",\r\n\t\"dateTimeFormats-appendItem-Timezone\": \"{0} {1}\",\r\n\t\"dateFormatItem-Ed\": \"d, E\",\r\n\t\"field-week\": \"Week\",\r\n\t\"dateFormat-medium\": \"y MMM d\",\r\n\t\"field-week-relative+-1\": \"last week\",\r\n\t\"field-year-relative+0\": \"this year\",\r\n\t\"field-year-relative+1\": \"next year\",\r\n\t\"dayPeriods-format-narrow-pm\": \"p\",\r\n\t\"dateTimeFormat-short\": \"{1} {0}\",\r\n\t\"dateFormatItem-Hms\": \"HH:mm:ss\",\r\n\t\"dateFormatItem-hms\": \"h:mm:ss a\",\r\n\t\"dateFormatItem-GyMMM\": \"G y MMM\",\r\n\t\"field-mon-relative+-1\": \"last Monday\",\r\n\t\"field-week-relative+0\": \"this week\",\r\n\t\"field-week-relative+1\": \"next week\"\r\n}\r\n//end v1.x content\r\n,\r\n\t\"ar\": true,\r\n\t\"ca\": true,\r\n\t\"cs\": true,\r\n\t\"da\": true,\r\n\t\"de\": true,\r\n\t\"el\": true,\r\n\t\"en\": true,\r\n\t\"en-au\": true,\r\n\t\"en-ca\": true,\r\n\t\"en-gb\": true,\r\n\t\"es\": true,\r\n\t\"fi\": true,\r\n\t\"fr\": true,\r\n\t\"fr-ch\": true,\r\n\t\"he\": true,\r\n\t\"hu\": true,\r\n\t\"it\": true,\r\n\t\"ja\": true,\r\n\t\"ko\": true,\r\n\t\"nb\": true,\r\n\t\"nl\": true,\r\n\t\"pl\": true,\r\n\t\"pt\": true,\r\n\t\"pt-pt\": true,\r\n\t\"ro\": true,\r\n\t\"ru\": true,\r\n\t\"sk\": true,\r\n\t\"sl\": true,\r\n\t\"sv\": true,\r\n\t\"th\": true,\r\n\t\"tr\": true,\r\n\t\"zh\": true,\r\n\t\"zh-hant\": true,\r\n\t\"zh-hk\": true,\r\n\t\"zh-tw\": true\r\n});\ndefine('dojo/data/api/Read',[\"../../_base/declare\"], function(declare){\r\n\r\n// module:\r\n//\t\tdojo/data/api/Read\r\n\r\nreturn declare(\"dojo.data.api.Read\", null, {\r\n\t// summary:\r\n\t//\t\tThis is an abstract API that data provider implementations conform to.\r\n\t//\t\tThis file defines methods signatures and intentionally leaves all the\r\n\t//\t\tmethods unimplemented.  For more information on the dojo.data APIs,\r\n\t//\t\tplease visit: http://www.dojotoolkit.org/node/98\r\n\r\n\tgetValue: function(\t/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t/* attribute-name-string */ attribute,\r\n\t\t\t\t\t\t/* value? */ defaultValue){\r\n\t\t// summary:\r\n\t\t//\t\tReturns a single attribute value.\r\n\t\t//\t\tReturns defaultValue if and only if *item* does not have a value for *attribute*.\r\n\t\t//\t\tReturns null if and only if null was explicitly set as the attribute value.\r\n\t\t//\t\tReturns undefined if and only if the item does not have a value for the\r\n\t\t//\t\tgiven attribute (which is the same as saying the item does not have the attribute).\r\n\t\t// description:\r\n\t\t//\t\tSaying that an \"item x does not have a value for an attribute y\"\r\n\t\t//\t\tis identical to saying that an \"item x does not have attribute y\".\r\n\t\t//\t\tIt is an oxymoron to say \"that attribute is present but has no values\"\r\n\t\t//\t\tor \"the item has that attribute but does not have any attribute values\".\r\n\t\t//\t\tIf store.hasAttribute(item, attribute) returns false, then\r\n\t\t//\t\tstore.getValue(item, attribute) will return undefined.\r\n\t\t// item:\r\n\t\t//\t\tThe item to access values on.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute to access represented as a string.\r\n\t\t// defaultValue:\r\n\t\t//\t\tOptional.  A default value to use for the getValue return in the attribute does not exist or has no value.\r\n\t\t// returns:\r\n\t\t//\t\ta literal, an item, null, or undefined (never an array)\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if *item* is not an item, or *attribute* is not a string\r\n\t\t// example:\r\n\t\t//\t|\tvar darthVader = store.getValue(lukeSkywalker, \"father\");\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.getValue');\r\n\t},\r\n\r\n\tgetValues: function(/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t/* attribute-name-string */ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tThis getValues() method works just like the getValue() method, but getValues()\r\n\t\t//\t\talways returns an array rather than a single attribute value.  The array\r\n\t\t//\t\tmay be empty, may contain a single attribute value, or may contain\r\n\t\t//\t\tmany attribute values.\r\n\t\t//\t\tIf the item does not have a value for the given attribute, then getValues()\r\n\t\t//\t\twill return an empty array: [].  (So, if store.hasAttribute(item, attribute)\r\n\t\t//\t\thas a return of false, then store.getValues(item, attribute) will return [].)\r\n\t\t// item:\r\n\t\t//\t\tThe item to access values on.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute to access represented as a string.\r\n\t\t// returns:\r\n\t\t//\t\tan array that may contain literals and items\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if *item* is not an item, or *attribute* is not a string\r\n\t\t// example:\r\n\t\t//\t|\tvar friendsOfLuke = store.getValues(lukeSkywalker, \"friends\");\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.getValues');\r\n\t},\r\n\r\n\tgetAttributes: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an array with all the attributes that this item has.  This\r\n\t\t//\t\tmethod will always return an array; if the item has no attributes\r\n\t\t//\t\tat all, getAttributes() will return an empty array: [].\r\n\t\t// item:\r\n\t\t//\t\tThe item to access attributes on.\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if *item* is not an item, or *attribute* is not a string\r\n\t\t// example:\r\n\t\t//\t|\tvar array = store.getAttributes(kermit);\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.getAttributes');\r\n\t},\r\n\r\n\thasAttribute: function(\t/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t\t/* attribute-name-string */ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tReturns true if the given *item* has a value for the given *attribute*.\r\n\t\t// item:\r\n\t\t//\t\tThe item to access attributes on.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute to access represented as a string.\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if *item* is not an item, or *attribute* is not a string\r\n\t\t// example:\r\n\t\t//\t|\tvar trueOrFalse = store.hasAttribute(kermit, \"color\");\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.hasAttribute');\r\n\t},\r\n\r\n\tcontainsValue: function(/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t\t/* attribute-name-string */ attribute,\r\n\t\t\t\t\t\t\t/* anything */ value){\r\n\t\t// summary:\r\n\t\t//\t\tReturns true if the given *value* is one of the values that getValues()\r\n\t\t//\t\twould return.\r\n\t\t// item:\r\n\t\t//\t\tThe item to access values on.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute to access represented as a string.\r\n\t\t// value:\r\n\t\t//\t\tThe value to match as a value for the attribute.\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if *item* is not an item, or *attribute* is not a string\r\n\t\t// example:\r\n\t\t//\t|\tvar trueOrFalse = store.containsValue(kermit, \"color\", \"green\");\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.containsValue');\r\n\t},\r\n\r\n\tisItem: function(/* anything */ something){\r\n\t\t// summary:\r\n\t\t//\t\tReturns true if *something* is an item and came from the store instance.\r\n\t\t//\t\tReturns false if *something* is a literal, an item from another store instance,\r\n\t\t//\t\tor is any object other than an item.\r\n\t\t// something:\r\n\t\t//\t\tCan be anything.\r\n\t\t// example:\r\n\t\t//\t|\tvar yes = store.isItem(store.newItem());\r\n\t\t//\t|\tvar no  = store.isItem(\"green\");\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.isItem');\r\n\t},\r\n\r\n\tisItemLoaded: function(/* anything */ something){\r\n\t\t// summary:\r\n\t\t//\t\tReturns false if isItem(something) is false.  Returns false if\r\n\t\t//\t\tif isItem(something) is true but the the item is not yet loaded\r\n\t\t//\t\tin local memory (for example, if the item has not yet been read\r\n\t\t//\t\tfrom the server).\r\n\t\t// something:\r\n\t\t//\t\tCan be anything.\r\n\t\t// example:\r\n\t\t//\t|\tvar yes = store.isItemLoaded(store.newItem());\r\n\t\t//\t|\tvar no  = store.isItemLoaded(\"green\");\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.isItemLoaded');\r\n\t},\r\n\r\n\tloadItem: function(/* Object */ keywordArgs){\r\n\t\t// summary:\r\n\t\t//\t\tGiven an item, this method loads the item so that a subsequent call\r\n\t\t//\t\tto store.isItemLoaded(item) will return true.  If a call to\r\n\t\t//\t\tisItemLoaded() returns true before loadItem() is even called,\r\n\t\t//\t\tthen loadItem() need not do any work at all and will not even invoke\r\n\t\t//\t\tthe callback handlers.  So, before invoking this method, check that\r\n\t\t//\t\tthe item has not already been loaded.\r\n\t\t// keywordArgs:\r\n\t\t//\t\tAn anonymous object that defines the item to load and callbacks to invoke when the\r\n\t\t//\t\tload has completed.  The format of the object is as follows:\r\n\t\t// |\t{\r\n\t\t// |\t\titem: object,\r\n\t\t// |\t\tonItem: Function,\r\n\t\t// |\t\tonError: Function,\r\n\t\t// |\t\tscope: object\r\n\t\t// |\t}\r\n\t\t//\r\n\t\t//\t\t####The *item* parameter\r\n\t\t//\r\n\t\t//\t\tThe item parameter is an object that represents the item in question that should be\r\n\t\t//\t\tcontained by the store.  This attribute is required.\r\n\t\t//\r\n\t\t//\t\t####The *onItem* parameter\r\n\t\t//\r\n\t\t//\t\tFunction(item)\r\n\t\t//\t\tThe onItem parameter is the callback to invoke when the item has been loaded.  It takes only one\r\n\t\t//\t\tparameter, the fully loaded item.\r\n\t\t//\r\n\t\t//\t\t####The *onError* parameter\r\n\t\t//\r\n\t\t//\t\tFunction(error)\r\n\t\t//\t\tThe onError parameter is the callback to invoke when the item load encountered an error.  It takes only one\r\n\t\t//\t\tparameter, the error object\r\n\t\t//\r\n\t\t//\t\t####The *scope* parameter\r\n\t\t//\r\n\t\t//\t\tIf a scope object is provided, all of the callback functions (onItem,\r\n\t\t//\t\tonError, etc) will be invoked in the context of the scope object.\r\n\t\t//\t\tIn the body of the callback function, the value of the \"this\"\r\n\t\t//\t\tkeyword will be the scope object.   If no scope object is provided,\r\n\t\t//\t\tthe callback functions will be called in the context of dojo.global().\r\n\t\t//\t\tFor example, onItem.call(scope, item, request) vs.\r\n\t\t//\t\tonItem.call(dojo.global(), item, request)\r\n\t\tif(!this.isItemLoaded(keywordArgs.item)){\r\n\t\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.loadItem');\r\n\t\t}\r\n\t},\r\n\r\n\tfetch: function(/* Object */ keywordArgs){\r\n\t\t// summary:\r\n\t\t//\t\tGiven a query and set of defined options, such as a start and count of items to return,\r\n\t\t//\t\tthis method executes the query and makes the results available as data items.\r\n\t\t//\t\tThe format and expectations of stores is that they operate in a generally asynchronous\r\n\t\t//\t\tmanner, therefore callbacks are always used to return items located by the fetch parameters.\r\n\t\t// description:\r\n\t\t//\t\tA Request object will always be returned and is returned immediately.\r\n\t\t//\t\tThe basic request is nothing more than the keyword args passed to fetch and\r\n\t\t//\t\tan additional function attached, abort().  The returned request object may then be used\r\n\t\t//\t\tto cancel a fetch.  All data items returns are passed through the callbacks defined in the\r\n\t\t//\t\tfetch parameters and are not present on the 'request' object.\r\n\t\t//\r\n\t\t//\t\tThis does not mean that custom stores can not add methods and properties to the request object\r\n\t\t//\t\treturned, only that the API does not require it.  For more info about the Request API,\r\n\t\t//\t\tsee dojo/data/api/Request\r\n\t\t// keywordArgs:\r\n\t\t//\t\tThe keywordArgs parameter may either be an instance of\r\n\t\t//\t\tconforming to dojo/data/api/Request or may be a simple anonymous object\r\n\t\t//\t\tthat may contain any of the following:\r\n\t\t// |\t{\r\n\t\t// |\t\tquery: query-object or query-string,\r\n\t\t// |\t\tqueryOptions: object,\r\n\t\t// |\t\tonBegin: Function,\r\n\t\t// |\t\tonItem: Function,\r\n\t\t// |\t\tonComplete: Function,\r\n\t\t// |\t\tonError: Function,\r\n\t\t// |\t\tscope: object,\r\n\t\t// |\t\tstart: int\r\n\t\t// |\t\tcount: int\r\n\t\t// |\t\tsort: array\r\n\t\t// |\t}\r\n\t\t//\t\tAll implementations should accept keywordArgs objects with any of\r\n\t\t//\t\tthe 9 standard properties: query, onBegin, onItem, onComplete, onError\r\n\t\t//\t\tscope, sort, start, and count.  Some implementations may accept additional\r\n\t\t//\t\tproperties in the keywordArgs object as valid parameters, such as\r\n\t\t//\t\t{includeOutliers:true}.\r\n\t\t//\r\n\t\t//\t\t####The *query* parameter\r\n\t\t//\r\n\t\t//\t\tThe query may be optional in some data store implementations.\r\n\t\t//\t\tThe dojo/data/api/Read API does not specify the syntax or semantics\r\n\t\t//\t\tof the query itself -- each different data store implementation\r\n\t\t//\t\tmay have its own notion of what a query should look like.\r\n\t\t//\t\tHowever, as of dojo 0.9, 1.0, and 1.1, all the provided datastores in dojo.data\r\n\t\t//\t\tand dojox.data support an object structure query, where the object is a set of\r\n\t\t//\t\tname/value parameters such as { attrFoo: valueBar, attrFoo1: valueBar1}.  Most of the\r\n\t\t//\t\tdijit widgets, such as ComboBox assume this to be the case when working with a datastore\r\n\t\t//\t\twhen they dynamically update the query.  Therefore, for maximum compatibility with dijit\r\n\t\t//\t\twidgets the recommended query parameter is a key/value object.  That does not mean that the\r\n\t\t//\t\tthe datastore may not take alternative query forms, such as a simple string, a Date, a number,\r\n\t\t//\t\tor a mix of such.  Ultimately, The dojo/data/api/Read API is agnostic about what the query\r\n\t\t//\t\tformat.\r\n\t\t//\r\n\t\t//\t\tFurther note:  In general for query objects that accept strings as attribute\r\n\t\t//\t\tvalue matches, the store should also support basic filtering capability, such as *\r\n\t\t//\t\t(match any character) and ? (match single character).  An example query that is a query object\r\n\t\t//\t\twould be like: { attrFoo: \"value*\"}.  Which generally means match all items where they have\r\n\t\t//\t\tan attribute named attrFoo, with a value that starts with 'value'.\r\n\t\t//\r\n\t\t//\t\t####The *queryOptions* parameter\r\n\t\t//\r\n\t\t//\t\tThe queryOptions parameter is an optional parameter used to specify options that may modify\r\n\t\t//\t\tthe query in some fashion, such as doing a case insensitive search, or doing a deep search\r\n\t\t//\t\twhere all items in a hierarchical representation of data are scanned instead of just the root\r\n\t\t//\t\titems.  It currently defines two options that all datastores should attempt to honor if possible:\r\n\t\t// |\t{\r\n\t\t// |\t\tignoreCase: boolean, // Whether or not the query should match case sensitively or not.  Default behaviour is false.\r\n\t\t// |\t\tdeep: boolean \t// Whether or not a fetch should do a deep search of items and all child\r\n\t\t// |\t\t\t\t\t\t// items instead of just root-level items in a datastore.  Default is false.\r\n\t\t// |\t}\r\n\t\t//\r\n\t\t//\t\t####The *onBegin* parameter.\r\n\t\t//\r\n\t\t//\t\tfunction(size, request);\r\n\t\t//\t\tIf an onBegin callback function is provided, the callback function\r\n\t\t//\t\twill be called just once, before the first onItem callback is called.\r\n\t\t//\t\tThe onBegin callback function will be passed two arguments, the\r\n\t\t//\t\tthe total number of items identified and the Request object.  If the total number is\r\n\t\t//\t\tunknown, then size will be -1.  Note that size is not necessarily the size of the\r\n\t\t//\t\tcollection of items returned from the query, as the request may have specified to return only a\r\n\t\t//\t\tsubset of the total set of items through the use of the start and count parameters.\r\n\t\t//\r\n\t\t//\t\t####The *onItem* parameter.\r\n\t\t//\r\n\t\t//\t\tfunction(item, request);\r\n\t\t//\r\n\t\t//\t\tIf an onItem callback function is provided, the callback function\r\n\t\t//\t\twill be called as each item in the result is received. The callback\r\n\t\t//\t\tfunction will be passed two arguments: the item itself, and the\r\n\t\t//\t\tRequest object.\r\n\t\t//\r\n\t\t//\t\t####The *onComplete* parameter.\r\n\t\t//\r\n\t\t//\t\tfunction(items, request);\r\n\t\t//\r\n\t\t//\t\tIf an onComplete callback function is provided, the callback function\r\n\t\t//\t\twill be called just once, after the last onItem callback is called.\r\n\t\t//\t\tNote that if the onItem callback is not present, then onComplete will be passed\r\n\t\t//\t\tan array containing all items which matched the query and the request object.\r\n\t\t//\t\tIf the onItem callback is present, then onComplete is called as:\r\n\t\t//\t\tonComplete(null, request).\r\n\t\t//\r\n\t\t//\t\t####The *onError* parameter.\r\n\t\t//\r\n\t\t//\t\tfunction(errorData, request);\r\n\t\t//\r\n\t\t//\t\tIf an onError callback function is provided, the callback function\r\n\t\t//\t\twill be called if there is any sort of error while attempting to\r\n\t\t//\t\texecute the query.\r\n\t\t//\t\tThe onError callback function will be passed two arguments:\r\n\t\t//\t\tan Error object and the Request object.\r\n\t\t//\r\n\t\t//\t\t####The *scope* parameter.\r\n\t\t//\r\n\t\t//\t\tIf a scope object is provided, all of the callback functions (onItem,\r\n\t\t//\t\tonComplete, onError, etc) will be invoked in the context of the scope\r\n\t\t//\t\tobject.  In the body of the callback function, the value of the \"this\"\r\n\t\t//\t\tkeyword will be the scope object.   If no scope object is provided,\r\n\t\t//\t\tthe callback functions will be called in the context of dojo.global().\r\n\t\t//\t\tFor example, onItem.call(scope, item, request) vs.\r\n\t\t//\t\tonItem.call(dojo.global(), item, request)\r\n\t\t//\r\n\t\t//\t\t####The *start* parameter.\r\n\t\t//\r\n\t\t//\t\tIf a start parameter is specified, this is a indication to the datastore to\r\n\t\t//\t\tonly start returning items once the start number of items have been located and\r\n\t\t//\t\tskipped.  When this parameter is paired with 'count', the store should be able\r\n\t\t//\t\tto page across queries with millions of hits by only returning subsets of the\r\n\t\t//\t\thits for each query\r\n\t\t//\r\n\t\t//\t\t####The *count* parameter.\r\n\t\t//\r\n\t\t//\t\tIf a count parameter is specified, this is a indication to the datastore to\r\n\t\t//\t\tonly return up to that many items.  This allows a fetch call that may have\r\n\t\t//\t\tmillions of item matches to be paired down to something reasonable.\r\n\t\t//\r\n\t\t//\t\t####The *sort* parameter.\r\n\t\t//\r\n\t\t//\t\tIf a sort parameter is specified, this is a indication to the datastore to\r\n\t\t//\t\tsort the items in some manner before returning the items.  The array is an array of\r\n\t\t//\t\tjavascript objects that must conform to the following format to be applied to the\r\n\t\t//\t\tfetching of items:\r\n\t\t// |\t{\r\n\t\t// |\t\tattribute: attribute || attribute-name-string,\r\n\t\t// |\t\tdescending: true|false;   // Optional.  Default is false.\r\n\t\t// |\t}\r\n\t\t//\t\tNote that when comparing attributes, if an item contains no value for the attribute\r\n\t\t//\t\t(undefined), then it the default ascending sort logic should push it to the bottom\r\n\t\t//\t\tof the list.  In the descending order case, it such items should appear at the top of the list.\r\n\t\t// returns:\r\n\t\t//\t\tThe fetch() method will return a javascript object conforming to the API\r\n\t\t//\t\tdefined in dojo/data/api/Request.  In general, it will be the keywordArgs\r\n\t\t//\t\tobject returned with the required functions in Request.js attached.\r\n\t\t//\t\tIts general purpose is to provide a convenient way for a caller to abort an\r\n\t\t//\t\tongoing fetch.\r\n\t\t//\r\n\t\t//\t\tThe Request object may also have additional properties when it is returned\r\n\t\t//\t\tsuch as request.store property, which is a pointer to the datastore object that\r\n\t\t//\t\tfetch() is a method of.\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if the query is not valid, or if the query\r\n\t\t//\t\tis required but was not supplied.\r\n\t\t// example:\r\n\t\t//\t\tFetch all books identified by the query and call 'showBooks' when complete\r\n\t\t//\t\t|\tvar request = store.fetch({query:\"all books\", onComplete: showBooks});\r\n\t\t// example:\r\n\t\t//\t\tFetch all items in the story and call 'showEverything' when complete.\r\n\t\t//\t\t|\tvar request = store.fetch(onComplete: showEverything);\r\n\t\t// example:\r\n\t\t//\t\tFetch only 10 books that match the query 'all books', starting at the fifth book found during the search.\r\n\t\t//\t\tThis demonstrates how paging can be done for specific queries.\r\n\t\t//\t\t|\tvar request = store.fetch({query:\"all books\", start: 4, count: 10, onComplete: showBooks});\r\n\t\t// example:\r\n\t\t//\t\tFetch all items that match the query, calling 'callback' each time an item is located.\r\n\t\t//\t\t|\tvar request = store.fetch({query:\"foo/bar\", onItem:callback});\r\n\t\t// example:\r\n\t\t//\t\tFetch the first 100 books by author King, call showKing when up to 100 items have been located.\r\n\t\t//\t\t|\tvar request = store.fetch({query:{author:\"King\"}, start: 0, count:100, onComplete: showKing});\r\n\t\t// example:\r\n\t\t//\t\tLocate the books written by Author King, sort it on title and publisher, then return the first 100 items from the sorted items.\r\n\t\t//\t\t|\tvar request = store.fetch({query:{author:\"King\"}, sort: [{ attribute: \"title\", descending: true}, {attribute: \"publisher\"}], ,start: 0, count:100, onComplete: 'showKing'});\r\n\t\t// example:\r\n\t\t//\t\tFetch the first 100 books by authors starting with the name King, then call showKing when up to 100 items have been located.\r\n\t\t//\t\t|\tvar request = store.fetch({query:{author:\"King*\"}, start: 0, count:100, onComplete: showKing});\r\n\t\t// example:\r\n\t\t//\t\tFetch the first 100 books by authors ending with 'ing', but only have one character before it (King, Bing, Ling, Sing, etc.), then call showBooks when up to 100 items have been located.\r\n\t\t//\t\t|\tvar request = store.fetch({query:{author:\"?ing\"}, start: 0, count:100, onComplete: showBooks});\r\n\t\t// example:\r\n\t\t//\t\tFetch the first 100 books by author King, where the name may appear as King, king, KING, kInG, and so on, then call showKing when up to 100 items have been located.\r\n\t\t//\t\t|\tvar request = store.fetch({query:{author:\"King\"}, queryOptions:(ignoreCase: true}, start: 0, count:100, onComplete: showKing});\r\n\t\t// example:\r\n\t\t//\t\tPaging\r\n\t\t//\t\t|\tvar store = new LargeRdbmsStore({url:\"jdbc:odbc:foobar\"});\r\n\t\t//\t\t|\tvar fetchArgs = {\r\n\t\t//\t\t|\t\tquery: {type:\"employees\", name:\"Hillary *\"}, // string matching\r\n\t\t//\t\t|\t\tsort: [{attribute:\"department\", descending:true}],\r\n\t\t//\t\t|\t\tstart: 0,\r\n\t\t//\t\t|\t\tcount: 20,\r\n\t\t//\t\t|\t\tscope: displayer,\r\n\t\t//\t\t|\t\tonBegin: showThrobber,\r\n\t\t//\t\t|\t\tonItem: displayItem,\r\n\t\t//\t\t|\t\tonComplete: stopThrobber,\r\n\t\t//\t\t|\t\tonError: handleFetchError,\r\n\t\t//\t\t|\t};\r\n\t\t//\t\t|\tstore.fetch(fetchArgs);\r\n\t\t//\t\t|\t...\r\n\t\t//\t\tand then when the user presses the \"Next Page\" button...\r\n\t\t//\t\t|\tfetchArgs.start += 20;\r\n\t\t//\t\t|\tstore.fetch(fetchArgs);  // get the next 20 items\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.fetch');\r\n\t},\r\n\r\n\tgetFeatures: function(){\r\n\t\t// summary:\r\n\t\t//\t\tThe getFeatures() method returns an simple keyword values object\r\n\t\t//\t\tthat specifies what interface features the datastore implements.\r\n\t\t//\t\tA simple CsvStore may be read-only, and the only feature it\r\n\t\t//\t\timplements will be the 'dojo/data/api/Read' interface, so the\r\n\t\t//\t\tgetFeatures() method will return an object like this one:\r\n\t\t//\t\t{'dojo.data.api.Read': true}.\r\n\t\t//\t\tA more sophisticated datastore might implement a variety of\r\n\t\t//\t\tinterface features, like 'dojo.data.api.Read', 'dojo/data/api/Write',\r\n\t\t//\t\t'dojo.data.api.Identity', and 'dojo/data/api/Attribution'.\r\n\t\treturn {\r\n\t\t\t'dojo.data.api.Read': true\r\n\t\t};\r\n\t},\r\n\r\n\tclose: function(/*dojo/data/api/Request|Object?*/ request){\r\n\t\t// summary:\r\n\t\t//\t\tThe close() method is intended for instructing the store to 'close' out\r\n\t\t//\t\tany information associated with a particular request.\r\n\t\t// description:\r\n\t\t//\t\tThe close() method is intended for instructing the store to 'close' out\r\n\t\t//\t\tany information associated with a particular request.  In general, this API\r\n\t\t//\t\texpects to receive as a parameter a request object returned from a fetch.\r\n\t\t//\t\tIt will then close out anything associated with that request, such as\r\n\t\t//\t\tclearing any internal datastore caches and closing any 'open' connections.\r\n\t\t//\t\tFor some store implementations, this call may be a no-op.\r\n\t\t// request:\r\n\t\t//\t\tAn instance of a request for the store to use to identify what to close out.\r\n\t\t//\t\tIf no request is passed, then the store should clear all internal caches (if any)\r\n\t\t//\t\tand close out all 'open' connections.  It does not render the store unusable from\r\n\t\t//\t\tthere on, it merely cleans out any current data and resets the store to initial\r\n\t\t//\t\tstate.\r\n\t\t// example:\r\n\t\t//\t|\tvar request = store.fetch({onComplete: doSomething});\r\n\t\t//\t|\t...\r\n\t\t//\t|\tstore.close(request);\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.close');\r\n\t},\r\n\r\n\tgetLabel: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tMethod to inspect the item and return a user-readable 'label' for the item\r\n\t\t//\t\tthat provides a general/adequate description of what the item is.\r\n\t\t// description:\r\n\t\t//\t\tMethod to inspect the item and return a user-readable 'label' for the item\r\n\t\t//\t\tthat provides a general/adequate description of what the item is.  In general\r\n\t\t//\t\tmost labels will be a specific attribute value or collection of the attribute\r\n\t\t//\t\tvalues that combine to label the item in some manner.  For example for an item\r\n\t\t//\t\tthat represents a person it may return the label as:  \"firstname lastlame\" where\r\n\t\t//\t\tthe firstname and lastname are attributes on the item.  If the store is unable\r\n\t\t//\t\tto determine an adequate human readable label, it should return undefined.  Users that wish\r\n\t\t//\t\tto customize how a store instance labels items should replace the getLabel() function on\r\n\t\t//\t\ttheir instance of the store, or extend the store and replace the function in\r\n\t\t//\t\tthe extension class.\r\n\t\t// item:\r\n\t\t//\t\tThe item to return the label for.\r\n\t\t// returns:\r\n\t\t//\t\tA user-readable string representing the item or undefined if no user-readable label can\r\n\t\t//\t\tbe generated.\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.getLabel');\r\n\t},\r\n\r\n\tgetLabelAttributes: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tMethod to inspect the item and return an array of what attributes of the item were used\r\n\t\t//\t\tto generate its label, if any.\r\n\t\t// description:\r\n\t\t//\t\tMethod to inspect the item and return an array of what attributes of the item were used\r\n\t\t//\t\tto generate its label, if any.  This function is to assist UI developers in knowing what\r\n\t\t//\t\tattributes can be ignored out of the attributes an item has when displaying it, in cases\r\n\t\t//\t\twhere the UI is using the label as an overall identifer should they wish to hide\r\n\t\t//\t\tredundant information.\r\n\t\t// item:\r\n\t\t//\t\tThe item to return the list of label attributes for.\r\n\t\t// returns:\r\n\t\t//\t\tAn array of attribute names that were used to generate the label, or null if public attributes\r\n\t\t//\t\twere not used to generate the label.\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Read.getLabelAttributes');\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/data/api/Identity',[\"../../_base/declare\", \"./Read\"], function(declare, Read){\r\n\r\n// module:\r\n//\t\tdojo/data/api/Identity\r\n\r\nreturn declare(\"dojo.data.api.Identity\", Read, {\r\n\t// summary:\r\n\t//\t\tThis is an abstract API that data provider implementations conform to.\r\n\t//\t\tThis file defines methods signatures and intentionally leaves all the\r\n\t//\t\tmethods unimplemented.\r\n\r\n\tgetFeatures: function(){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.getFeatures()\r\n\t\treturn {\r\n\t\t\t 'dojo.data.api.Read': true,\r\n\t\t\t 'dojo.data.api.Identity': true\r\n\t\t};\r\n\t},\r\n\r\n\tgetIdentity: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tReturns a unique identifier for an item.  The return value will be\r\n\t\t//\t\teither a string or something that has a toString() method (such as,\r\n\t\t//\t\tfor example, a dojox/uuid object).\r\n\t\t// item:\r\n\t\t//\t\tThe item from the store from which to obtain its identifier.\r\n\t\t// exceptions:\r\n\t\t//\t\tConforming implementations may throw an exception or return null if\r\n\t\t//\t\titem is not an item.\r\n\t\t// example:\r\n\t\t//\t|\tvar itemId = store.getIdentity(kermit);\r\n\t\t//\t|\tassert(kermit === store.findByIdentity(store.getIdentity(kermit)));\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Identity.getIdentity');\r\n\t},\r\n\r\n\tgetIdentityAttributes: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an array of attribute names that are used to generate the identity.\r\n\t\t//\t\tFor most stores, this is a single attribute, but for some complex stores\r\n\t\t//\t\tsuch as RDB backed stores that use compound (multi-attribute) identifiers\r\n\t\t//\t\tit can be more than one.  If the identity is not composed of attributes\r\n\t\t//\t\ton the item, it will return null.  This function is intended to identify\r\n\t\t//\t\tthe attributes that comprise the identity so that so that during a render\r\n\t\t//\t\tof all attributes, the UI can hide the the identity information if it\r\n\t\t//\t\tchooses.\r\n\t\t// item:\r\n\t\t//\t\tThe item from the store from which to obtain the array of public attributes that\r\n\t\t//\t\tcompose the identifier, if any.\r\n\t\t// example:\r\n\t\t//\t|\tvar itemId = store.getIdentity(kermit);\r\n\t\t//\t|\tvar identifiers = store.getIdentityAttributes(itemId);\r\n\t\t//\t|\tassert(typeof identifiers === \"array\" || identifiers === null);\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Identity.getIdentityAttributes');\r\n\t},\r\n\r\n\r\n\tfetchItemByIdentity: function(/* object */ keywordArgs){\r\n\t\t// summary:\r\n\t\t//\t\tGiven the identity of an item, this method returns the item that has\r\n\t\t//\t\tthat identity through the onItem callback.  Conforming implementations\r\n\t\t//\t\tshould return null if there is no item with the given identity.\r\n\t\t//\t\tImplementations of fetchItemByIdentity() may sometimes return an item\r\n\t\t//\t\tfrom a local cache and may sometimes fetch an item from a remote server,\r\n\t\t// keywordArgs:\r\n\t\t//\t\tAn anonymous object that defines the item to locate and callbacks to invoke when the\r\n\t\t//\t\titem has been located and load has completed.  The format of the object is as follows:\r\n\t\t// |\t{\r\n\t\t// |\t\tidentity: string|object,\r\n\t\t// |\t\tonItem: Function,\r\n\t\t// |\t\tonError: Function,\r\n\t\t// |\t\tscope: object\r\n\t\t// |\t}\r\n\t\t//\r\n\t\t//\t \t####The *identity* parameter\r\n\t\t//\r\n\t\t//\t\tThe identity parameter is the identity of the item you wish to locate and load\r\n\t\t//\t\tThis attribute is required.  It should be a string or an object that toString()\r\n\t\t//\t\tcan be called on.\r\n\t\t//\r\n\t\t//\t \t####The *onItem* parameter\r\n\t\t//\r\n\t\t//\t\tFunction(item)\r\n\t\t//\t\tThe onItem parameter is the callback to invoke when the item has been loaded.  It takes only one\r\n\t\t//\t\tparameter, the item located, or null if none found.\r\n\t\t//\r\n\t\t//\t \t####The *onError* parameter\r\n\t\t//\r\n\t\t//\t\tFunction(error)\r\n\t\t//\t\tThe onError parameter is the callback to invoke when the item load encountered an error.  It takes only one\r\n\t\t//\t\tparameter, the error object\r\n\t\t//\r\n\t\t//\t \t####The *scope* parameter\r\n\t\t//\r\n\t\t//\t\tIf a scope object is provided, all of the callback functions (onItem,\r\n\t\t//\t\tonError, etc) will be invoked in the context of the scope object.\r\n\t\t//\t\tIn the body of the callback function, the value of the \"this\"\r\n\t\t//\t\tkeyword will be the scope object.   If no scope object is provided,\r\n\t\t//\t\tthe callback functions will be called in the context of dojo.global.\r\n\t\t//\t\tFor example, onItem.call(scope, item, request) vs.\r\n\t\t//\t\tonItem.call(dojo.global, item, request)\r\n\r\n\t\tif(!this.isItemLoaded(keywordArgs.item)){\r\n\t\t\tthrow new Error('Unimplemented API: dojo.data.api.Identity.fetchItemByIdentity');\r\n\t\t}\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/data/api/Notification',[\"../../_base/declare\", \"./Read\"], function(declare, Read){\r\n\r\n// module:\r\n//\t\tdojo/data/api/Notification\r\n\r\nreturn declare(\"dojo.data.api.Notification\", Read, {\r\n\t// summary:\r\n\t//\t\tThis is an abstract API that data provider implementations conform to.\r\n\t//\t\tThis file defines functions signatures and intentionally leaves all the\r\n\t//\t\tfunctions unimplemented.\r\n\t// description:\r\n\t//\t\tThis API defines a set of APIs that all datastores that conform to the\r\n\t//\t\tNotifications API must implement.  In general, most stores will implement\r\n\t//\t\tthese APIs as no-op functions for users who wish to monitor them to be able\r\n\t//\t\tto connect to then via dojo.connect().  For non-users of dojo.connect,\r\n\t//\t\tthey should be able to just replace the function on the store to obtain\r\n\t//\t\t notifications.  Both read-only and read-write stores may implement\r\n\t//\t\tthis feature.  In the case of a read-only store, this feature makes sense if\r\n\t//\t\tthe store itself does internal polling to a back-end server and periodically updates\r\n\t//\t\tits cache of items (deletes, adds, and updates).\r\n\t// example:\r\n\t//\t|\tfunction onSet(item, attribute, oldValue, newValue){\r\n\t//\t|\t\t//Do something with the information...\r\n\t//\t|\t};\r\n\t//\t|\tvar store = new some.newStore();\r\n\t//\t|\tdojo.connect(store, \"onSet\", onSet);\r\n\r\n\tgetFeatures: function(){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.getFeatures()\r\n\t\treturn {\r\n\t\t\t'dojo.data.api.Read': true,\r\n\t\t\t'dojo.data.api.Notification': true\r\n\t\t};\r\n\t},\r\n\r\n\tonSet: function(/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t/* attribute-name-string */ attribute,\r\n\t\t\t\t\t/* object|array */ oldValue,\r\n\t\t\t\t\t/* object|array */ newValue){\r\n\t\t// summary:\r\n\t\t//\t\tThis function is called any time an item is modified via setValue, setValues, unsetAttribute, etc.\r\n\t\t// description:\r\n\t\t//\t\tThis function is called any time an item is modified via setValue, setValues, unsetAttribute, etc.\r\n\t\t//\t\tIts purpose is to provide a hook point for those who wish to monitor actions on items in the store\r\n\t\t//\t\tin a simple manner.  The general expected usage is to dojo.connect() to the store's\r\n\t\t//\t\timplementation and be called after the store function is called.\r\n\t\t// item:\r\n\t\t//\t\tThe item being modified.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute being changed represented as a string name.\r\n\t\t// oldValue:\r\n\t\t//\t\tThe old value of the attribute.  In the case of single value calls, such as setValue, unsetAttribute, etc,\r\n\t\t//\t\tthis value will be generally be an atomic value of some sort (string, int, etc, object).  In the case of\r\n\t\t//\t\tmulti-valued attributes, it will be an array.\r\n\t\t// newValue:\r\n\t\t//\t\tThe new value of the attribute.  In the case of single value calls, such as setValue, this value will be\r\n\t\t//\t\tgenerally be an atomic value of some sort (string, int, etc, object).  In the case of multi-valued attributes,\r\n\t\t//\t\tit will be an array.  In the case of unsetAttribute, the new value will be 'undefined'.\r\n\t\t// returns:\r\n\t\t//\t\tNothing.\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Notification.onSet');\r\n\t},\r\n\r\n\tonNew: function(/* dojo/data/api/Item */ newItem, /*object?*/ parentInfo){\r\n\t\t// summary:\r\n\t\t//\t\tThis function is called any time a new item is created in the store.\r\n\t\t//\t\tIt is called immediately after the store newItem processing has completed.\r\n\t\t// description:\r\n\t\t//\t\tThis function is called any time a new item is created in the store.\r\n\t\t//\t\tIt is called immediately after the store newItem processing has completed.\r\n\t\t// newItem:\r\n\t\t//\t\tThe item created.\r\n\t\t// parentInfo:\r\n\t\t//\t\tAn optional javascript object that is passed when the item created was placed in the store\r\n\t\t//\t\thierarchy as a value f another item's attribute, instead of a root level item.  Note that if this\r\n\t\t//\t\tfunction is invoked with a value for parentInfo, then onSet is not invoked stating the attribute of\r\n\t\t//\t\tthe parent item was modified.  This is to avoid getting two notification  events occurring when a new item\r\n\t\t//\t\twith a parent is created.  The structure passed in is as follows:\r\n\t\t// |\t{\r\n\t\t// |\t\titem: someItem,\t\t\t\t\t\t\t//The parent item\r\n\t\t// |\t\tattribute:\t\"attribute-name-string\",\t//The attribute the new item was assigned to.\r\n\t\t// |\t\toldValue: something\t//Whatever was the previous value for the attribute.\r\n\t\t// |\t\t\t\t\t//If it is a single-value attribute only, then this value will be a single value.\r\n\t\t// |\t\t\t\t\t//If it was a multi-valued attribute, then this will be an array of all the values minus the new one.\r\n\t\t// |\t\tnewValue: something\t//The new value of the attribute.  In the case of single value calls, such as setValue, this value will be\r\n\t\t// |\t\t\t\t\t//generally be an atomic value of some sort (string, int, etc, object).  In the case of multi-valued attributes,\r\n\t\t// |\t\t\t\t\t//it will be an array.\r\n\t\t// |\t}\r\n\t\t// returns:\r\n\t\t//\t\tNothing.\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Notification.onNew');\r\n\t},\r\n\r\n\tonDelete: function(/* dojo/data/api/Item */ deletedItem){\r\n\t\t// summary:\r\n\t\t//\t\tThis function is called any time an item is deleted from the store.\r\n\t\t//\t\tIt is called immediately after the store deleteItem processing has completed.\r\n\t\t// description:\r\n\t\t//\t\tThis function is called any time an item is deleted from the store.\r\n\t\t//\t\tIt is called immediately after the store deleteItem processing has completed.\r\n\t\t// deletedItem:\r\n\t\t//\t\tThe item deleted.\r\n\t\t// returns:\r\n\t\t//\t\tNothing.\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Notification.onDelete');\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/data/api/Request',[\"../../_base/declare\"], function(declare){\r\n\r\n// module:\r\n//\t\tdojo/data/api/Request\r\n\r\nreturn declare(\"dojo.data.api.Request\", null, {\r\n\t// summary:\r\n\t//\t\tThis class defines out the semantics of what a 'Request' object looks like\r\n\t//\t\twhen returned from a fetch() method.  In general, a request object is\r\n\t//\t\tnothing more than the original keywordArgs from fetch with an abort function\r\n\t//\t\tattached to it to allow users to abort a particular request if they so choose.\r\n\t//\t\tNo other functions are required on a general Request object return.  That does not\r\n\t//\t\tinhibit other store implementations from adding extensions to it, of course.\r\n\t//\r\n\t//\t\tThis is an abstract API that data provider implementations conform to.\r\n\t//\t\tThis file defines methods signatures and intentionally leaves all the\r\n\t//\t\tmethods unimplemented.\r\n\t//\r\n\t//\t\tFor more details on fetch, see dojo/data/api/Read.fetch().\r\n\r\n\tabort: function(){\r\n\t\t// summary:\r\n\t\t//\t\tThis function is a hook point for stores to provide as a way for\r\n\t\t//\t\ta fetch to be halted mid-processing.\r\n\t\t// description:\r\n\t\t//\t\tThis function is a hook point for stores to provide as a way for\r\n\t\t//\t\ta fetch to be halted mid-processing.  For more details on the fetch() api,\r\n\t\t//\t\tplease see dojo/data/api/Read.fetch().\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Request.abort');\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/data/api/Write',[\"../../_base/declare\", \"./Read\"], function(declare, Read){\r\n\r\n// module:\r\n//\t\tdojo/data/api/Write\r\n\r\nreturn declare(\"dojo.data.api.Write\", Read, {\r\n\t// summary:\r\n\t//\t\tThis is an abstract API that data provider implementations conform to.\r\n\t//\t\tThis file defines function signatures and intentionally leaves all the\r\n\t//\t\tfunctions unimplemented.\r\n\r\n\tgetFeatures: function(){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.getFeatures()\r\n\t\treturn {\r\n\t\t\t'dojo.data.api.Read': true,\r\n\t\t\t'dojo.data.api.Write': true\r\n\t\t};\r\n\t},\r\n\r\n\tnewItem: function(/* Object? */ keywordArgs, /*Object?*/ parentInfo){\r\n\t\t// summary:\r\n\t\t//\t\tReturns a newly created item.  Sets the attributes of the new\r\n\t\t//\t\titem based on the *keywordArgs* provided.  In general, the attribute\r\n\t\t//\t\tnames in the keywords become the attributes in the new item and as for\r\n\t\t//\t\tthe attribute values in keywordArgs, they become the values of the attributes\r\n\t\t//\t\tin the new item.  In addition, for stores that support hierarchical item\r\n\t\t//\t\tcreation, an optional second parameter is accepted that defines what item is the parent\r\n\t\t//\t\tof the new item and what attribute of that item should the new item be assigned to.\r\n\t\t//\t\tIn general, this will assume that the attribute targeted is multi-valued and a new item\r\n\t\t//\t\tis appended onto the list of values for that attribute.\r\n\t\t// keywordArgs:\r\n\t\t//\t\tA javascript object defining the initial content of the item as a set of JavaScript 'property name: value' pairs.\r\n\t\t// parentInfo:\r\n\t\t//\t\tAn optional javascript object defining what item is the parent of this item (in a hierarchical store.  Not all stores do hierarchical items),\r\n\t\t//\t\tand what attribute of that parent to assign the new item to.  If this is present, and the attribute specified\r\n\t\t//\t\tis a multi-valued attribute, it will append this item into the array of values for that attribute.  The structure\r\n\t\t//\t\tof the object is as follows:\r\n\t\t//\t|\t{\r\n\t\t//\t|\t\tparent: someItem,\r\n\t\t//\t|\t\tattribute: \"attribute-name-string\"\r\n\t\t//\t|\t}\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if *keywordArgs* is a string or a number or\r\n\t\t//\t\tanything other than a simple anonymous object.\r\n\t\t//\t\tThrows an exception if the item in parentInfo is not an item from the store\r\n\t\t//\t\tor if the attribute isn't an attribute name string.\r\n\t\t// example:\r\n\t\t//\t|\tvar kermit = store.newItem({name: \"Kermit\", color:[blue, green]});\r\n\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Write.newItem');\r\n\t},\r\n\r\n\tdeleteItem: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tDeletes an item from the store.\r\n\t\t// item:\r\n\t\t//\t\tThe item to delete.\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if the argument *item* is not an item\r\n\t\t//\t\t(if store.isItem(item) returns false).\r\n\t\t// example:\r\n\t\t//\t|\tvar success = store.deleteItem(kermit);\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Write.deleteItem');\r\n\t},\r\n\r\n\tsetValue: function(\t/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t/* string */ attribute,\r\n\t\t\t\t\t\t/* almost anything */ value){\r\n\t\t// summary:\r\n\t\t//\t\tSets the value of an attribute on an item.\r\n\t\t//\t\tReplaces any previous value or values.\r\n\t\t// item:\r\n\t\t//\t\tThe item to modify.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute of the item to change represented as a string name.\r\n\t\t// value:\r\n\t\t//\t\tThe value to assign to the item.\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if *item* is not an item, or if *attribute*\r\n\t\t//\t\tis neither an attribute object or a string.\r\n\t\t//\t\tThrows an exception if *value* is undefined.\r\n\t\t// example:\r\n\t\t//\t|\tvar success = store.set(kermit, \"color\", \"green\");\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Write.setValue');\r\n\t},\r\n\r\n\tsetValues: function(/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t/* string */ attribute,\r\n\t\t\t\t\t\t/* array */ values){\r\n\t\t// summary:\r\n\t\t//\t\tAdds each value in the *values* array as a value of the given\r\n\t\t//\t\tattribute on the given item.\r\n\t\t//\t\tReplaces any previous value or values.\r\n\t\t//\t\tCalling store.setValues(x, y, []) (with *values* as an empty array) has\r\n\t\t//\t\tthe same effect as calling store.unsetAttribute(x, y).\r\n\t\t// item:\r\n\t\t//\t\tThe item to modify.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute of the item to change represented as a string name.\r\n\t\t// values:\r\n\t\t//\t\tAn array of values to assign to the attribute..\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if *values* is not an array, if *item* is not an\r\n\t\t//\t\titem, or if *attribute* is neither an attribute object or a string.\r\n\t\t// example:\r\n\t\t//\t|\tvar success = store.setValues(kermit, \"color\", [\"green\", \"aqua\"]);\r\n\t\t//\t|\tsuccess = store.setValues(kermit, \"color\", []);\r\n\t\t//\t|\tif (success){assert(!store.hasAttribute(kermit, \"color\"));}\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Write.setValues');\r\n\t},\r\n\r\n\tunsetAttribute: function(\t/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t\t\t/* string */ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tDeletes all the values of an attribute on an item.\r\n\t\t// item:\r\n\t\t//\t\tThe item to modify.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute of the item to unset represented as a string.\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if *item* is not an item, or if *attribute*\r\n\t\t//\t\tis neither an attribute object or a string.\r\n\t\t// example:\r\n\t\t//\t|\tvar success = store.unsetAttribute(kermit, \"color\");\r\n\t\t//\t|\tif (success){assert(!store.hasAttribute(kermit, \"color\"));}\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Write.clear');\r\n\t},\r\n\r\n\tsave: function(/* object */ keywordArgs){\r\n\t\t// summary:\r\n\t\t//\t\tSaves to the server all the changes that have been made locally.\r\n\t\t//\t\tThe save operation may take some time and is generally performed\r\n\t\t//\t\tin an asynchronous fashion.  The outcome of the save action is\r\n\t\t//\t\tis passed into the set of supported callbacks for the save.\r\n\t\t// keywordArgs:\r\n\t\t// |\t{\r\n\t\t// |\t\tonComplete: function\r\n\t\t// |\t\tonError: function\r\n\t\t// |\t\tscope: object\r\n\t\t// |\t}\r\n\t\t//\r\n\t\t//\t\t####The *onComplete* parameter.\r\n\t\t//\r\n\t\t//\t\tfunction();\r\n\t\t//\r\n\t\t//\t\tIf an onComplete callback function is provided, the callback function\r\n\t\t//\t\twill be called just once, after the save has completed.  No parameters\r\n\t\t//\t\tare generally passed to the onComplete.\r\n\t\t//\r\n\t\t//\t\t####The *onError* parameter.\r\n\t\t//\r\n\t\t//\t\tfunction(errorData);\r\n\t\t//\r\n\t\t//\t\tIf an onError callback function is provided, the callback function\r\n\t\t//\t\twill be called if there is any sort of error while attempting to\r\n\t\t//\t\texecute the save.  The onError function will be based one parameter, the\r\n\t\t//\t\terror.\r\n\t\t//\r\n\t\t//\t\t####The *scope* parameter.\r\n\t\t//\r\n\t\t//\t\tIf a scope object is provided, all of the callback function (\r\n\t\t//\t\tonComplete, onError, etc) will be invoked in the context of the scope\r\n\t\t//\t\tobject.  In the body of the callback function, the value of the \"this\"\r\n\t\t//\t\tkeyword will be the scope object.   If no scope object is provided,\r\n\t\t//\t\tthe callback functions will be called in the context of dojo.global.\r\n\t\t//\t\tFor example, onComplete.call(scope) vs.\r\n\t\t//\t\tonComplete.call(dojo.global)\r\n\t\t// returns:\r\n\t\t//\t\tNothing.  Since the saves are generally asynchronous, there is\r\n\t\t//\t\tno need to return anything.  All results are passed via callbacks.\r\n\t\t// example:\r\n\t\t//\t|\tstore.save({onComplete: onSave});\r\n\t\t//\t|\tstore.save({scope: fooObj, onComplete: onSave, onError: saveFailed});\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Write.save');\r\n\t},\r\n\r\n\trevert: function(){\r\n\t\t// summary:\r\n\t\t//\t\tDiscards any unsaved changes.\r\n\t\t// description:\r\n\t\t//\t\tDiscards any unsaved changes.\r\n\t\t// example:\r\n\t\t//\t|\tvar success = store.revert();\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Write.revert');\r\n\t},\r\n\r\n\tisDirty: function(/* item? */ item){\r\n\t\t// summary:\r\n\t\t//\t\tGiven an item, isDirty() returns true if the item has been modified\r\n\t\t//\t\tsince the last save().  If isDirty() is called with no *item* argument,\r\n\t\t//\t\tthen this function returns true if any item has been modified since\r\n\t\t//\t\tthe last save().\r\n\t\t// item:\r\n\t\t//\t\tThe item to check.\r\n\t\t// exceptions:\r\n\t\t//\t\tThrows an exception if isDirty() is passed an argument and the\r\n\t\t//\t\targument is not an item.\r\n\t\t// example:\r\n\t\t//\t|\tvar trueOrFalse = store.isDirty(kermit); // true if kermit is dirty\r\n\t\t//\t|\tvar trueOrFalse = store.isDirty();       // true if any item is dirty\r\n\t\tthrow new Error('Unimplemented API: dojo.data.api.Write.isDirty');\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/io-query',[\"./_base/lang\"], function(lang){\r\n\r\n// module:\r\n//\t\tdojo/io-query\r\n\r\nvar backstop = {};\r\n\r\nreturn {\r\n// summary:\r\n//\t\tThis module defines query string processing functions.\r\n\r\n\tobjectToQuery: function objectToQuery(/*Object*/ map){\r\n\t\t// summary:\r\n        //\t\ttakes a name/value mapping object and returns a string representing\r\n        //\t\ta URL-encoded version of that object.\r\n        // example:\r\n        //\t\tthis object:\r\n        //\r\n        //\t|\t{\r\n        //\t|\t\tblah: \"blah\",\r\n        //\t|\t\tmulti: [\r\n        //\t|\t\t\t\"thud\",\r\n        //\t|\t\t\t\"thonk\"\r\n        //\t|\t\t]\r\n        //\t|\t};\r\n        //\r\n        //\t\tyields the following query string:\r\n        //\r\n        //\t|\t\"blah=blah&multi=thud&multi=thonk\"\r\n\r\n        // FIXME: need to implement encodeAscii!!\r\n        var enc = encodeURIComponent, pairs = [];\r\n        for(var name in map){\r\n            var value = map[name];\r\n            if(value != backstop[name]){\r\n                var assign = enc(name) + \"=\";\r\n                if(lang.isArray(value)){\r\n                    for(var i = 0, l = value.length; i < l; ++i){\r\n                        pairs.push(assign + enc(value[i]));\r\n                    }\r\n                }else{\r\n                    pairs.push(assign + enc(value));\r\n                }\r\n            }\r\n        }\r\n        return pairs.join(\"&\"); // String\r\n    },\r\n\r\n\tqueryToObject: function queryToObject(/*String*/ str){\r\n        // summary:\r\n        //\t\tCreate an object representing a de-serialized query section of a\r\n        //\t\tURL. Query keys with multiple values are returned in an array.\r\n        //\r\n        // example:\r\n        //\t\tThis string:\r\n        //\r\n        //\t|\t\t\"foo=bar&foo=baz&thinger=%20spaces%20=blah&zonk=blarg&\"\r\n        //\r\n        //\t\tresults in this object structure:\r\n        //\r\n        //\t|\t\t{\r\n        //\t|\t\t\tfoo: [ \"bar\", \"baz\" ],\r\n        //\t|\t\t\tthinger: \" spaces =blah\",\r\n        //\t|\t\t\tzonk: \"blarg\"\r\n        //\t|\t\t}\r\n        //\r\n        //\t\tNote that spaces and other urlencoded entities are correctly\r\n        //\t\thandled.\r\n\r\n        // FIXME: should we grab the URL string if we're not passed one?\r\n        var dec = decodeURIComponent, qp = str.split(\"&\"), ret = {}, name, val;\r\n        for(var i = 0, l = qp.length, item; i < l; ++i){\r\n            item = qp[i];\r\n            if(item.length){\r\n                var s = item.indexOf(\"=\");\r\n                if(s < 0){\r\n                    name = dec(item);\r\n                    val = \"\";\r\n                }else{\r\n                    name = dec(item.slice(0, s));\r\n                    val  = dec(item.slice(s + 1));\r\n                }\r\n                if(typeof ret[name] == \"string\"){ // inline'd type check\r\n                    ret[name] = [ret[name]];\r\n                }\r\n\r\n                if(lang.isArray(ret[name])){\r\n                    ret[name].push(val);\r\n                }else{\r\n                    ret[name] = val;\r\n                }\r\n            }\r\n        }\r\n        return ret; // Object\r\n    }\r\n};\r\n});\ndefine('dojo/dom-form',[\"./_base/lang\", \"./dom\", \"./io-query\", \"./json\"], function(lang, dom, ioq, json){\r\n\t// module:\r\n\t//\t\tdojo/dom-form\r\n\r\n    function setValue(/*Object*/ obj, /*String*/ name, /*String*/ value){\r\n        // summary:\r\n        //\t\tFor the named property in object, set the value. If a value\r\n        //\t\talready exists and it is a string, convert the value to be an\r\n        //\t\tarray of values.\r\n\r\n        // Skip it if there is no value\r\n        if(value === null){\r\n            return;\r\n        }\r\n\r\n        var val = obj[name];\r\n        if(typeof val == \"string\"){ // inline'd type check\r\n            obj[name] = [val, value];\r\n        }else if(lang.isArray(val)){\r\n            val.push(value);\r\n        }else{\r\n            obj[name] = value;\r\n        }\r\n    }\r\n\r\n\tvar exclude = \"file|submit|image|reset|button\";\r\n\r\n\tvar form = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module defines form-processing functions.\r\n\r\n\t\tfieldToObject: function fieldToObject(/*DOMNode|String*/ inputNode){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSerialize a form field to a JavaScript object.\r\n\t\t\t// description:\r\n\t\t\t//\t\tReturns the value encoded in a form field as\r\n\t\t\t//\t\tas a string or an array of strings. Disabled form elements\r\n\t\t\t//\t\tand unchecked radio and checkboxes are skipped.\tMulti-select\r\n\t\t\t//\t\telements are returned as an array of string values.\r\n\t\t\t// inputNode: DOMNode|String\r\n\t\t\t// returns: Object\r\n\r\n\t\t\tvar ret = null;\r\n\t\t\tinputNode = dom.byId(inputNode);\r\n\t\t\tif(inputNode){\r\n\t\t\t\tvar _in = inputNode.name, type = (inputNode.type || \"\").toLowerCase();\r\n\t\t\t\tif(_in && type && !inputNode.disabled){\r\n\t\t\t\t\tif(type == \"radio\" || type == \"checkbox\"){\r\n\t\t\t\t\t\tif(inputNode.checked){\r\n\t\t\t\t\t\t\tret = inputNode.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(inputNode.multiple){\r\n\t\t\t\t\t\tret = [];\r\n\t\t\t\t\t\tvar nodes = [inputNode.firstChild];\r\n\t\t\t\t\t\twhile(nodes.length){\r\n\t\t\t\t\t\t\tfor(var node = nodes.pop(); node; node = node.nextSibling){\r\n\t\t\t\t\t\t\t\tif(node.nodeType == 1 && node.tagName.toLowerCase() == \"option\"){\r\n\t\t\t\t\t\t\t\t\tif(node.selected){\r\n\t\t\t\t\t\t\t\t\t\tret.push(node.value);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tif(node.nextSibling){\r\n\t\t\t\t\t\t\t\t\t\tnodes.push(node.nextSibling);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(node.firstChild){\r\n\t\t\t\t\t\t\t\t\t\tnodes.push(node.firstChild);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tret = inputNode.value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn ret; // Object\r\n\t\t},\r\n\r\n\t\ttoObject: function formToObject(/*DOMNode|String*/ formNode){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSerialize a form node to a JavaScript object.\r\n\t\t\t// description:\r\n\t\t\t//\t\tReturns the values encoded in an HTML form as\r\n\t\t\t//\t\tstring properties in an object which it then returns. Disabled form\r\n\t\t\t//\t\telements, buttons, and other non-value form elements are skipped.\r\n\t\t\t//\t\tMulti-select elements are returned as an array of string values.\r\n\t\t\t// formNode: DOMNode|String\r\n\t\t\t// example:\r\n\t\t\t//\t\tThis form:\r\n\t\t\t//\t\t|\t<form id=\"test_form\">\r\n\t\t\t//\t\t|\t\t<input type=\"text\" name=\"blah\" value=\"blah\">\r\n\t\t\t//\t\t|\t\t<input type=\"text\" name=\"no_value\" value=\"blah\" disabled>\r\n\t\t\t//\t\t|\t\t<input type=\"button\" name=\"no_value2\" value=\"blah\">\r\n\t\t\t//\t\t|\t\t<select type=\"select\" multiple name=\"multi\" size=\"5\">\r\n\t\t\t//\t\t|\t\t\t<option value=\"blah\">blah</option>\r\n\t\t\t//\t\t|\t\t\t<option value=\"thud\" selected>thud</option>\r\n\t\t\t//\t\t|\t\t\t<option value=\"thonk\" selected>thonk</option>\r\n\t\t\t//\t\t|\t\t</select>\r\n\t\t\t//\t\t|\t</form>\r\n\t\t\t//\r\n\t\t\t//\t\tyields this object structure as the result of a call to\r\n\t\t\t//\t\tformToObject():\r\n\t\t\t//\r\n\t\t\t//\t\t|\t{\r\n\t\t\t//\t\t|\t\tblah: \"blah\",\r\n\t\t\t//\t\t|\t\tmulti: [\r\n\t\t\t//\t\t|\t\t\t\"thud\",\r\n\t\t\t//\t\t|\t\t\t\"thonk\"\r\n\t\t\t//\t\t|\t\t]\r\n\t\t\t//\t\t|\t};\r\n\r\n\t\t\tvar ret = {}, elems = dom.byId(formNode).elements;\r\n\t\t\tfor(var i = 0, l = elems.length; i < l; ++i){\r\n\t\t\t\tvar item = elems[i], _in = item.name, type = (item.type || \"\").toLowerCase();\r\n\t\t\t\tif(_in && type && exclude.indexOf(type) < 0 && !item.disabled){\r\n\t\t\t\t\tsetValue(ret, _in, form.fieldToObject(item));\r\n\t\t\t\t\tif(type == \"image\"){\r\n\t\t\t\t\t\tret[_in + \".x\"] = ret[_in + \".y\"] = ret[_in].x = ret[_in].y = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn ret; // Object\r\n\t\t},\r\n\r\n\t\ttoQuery: function formToQuery(/*DOMNode|String*/ formNode){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a URL-encoded string representing the form passed as either a\r\n\t\t\t//\t\tnode or string ID identifying the form to serialize\r\n\t\t\t// formNode: DOMNode|String\r\n\t\t\t// returns: String\r\n\r\n\t\t\treturn ioq.objectToQuery(form.toObject(formNode)); // String\r\n\t\t},\r\n\r\n\t\ttoJson: function formToJson(/*DOMNode|String*/ formNode, /*Boolean?*/ prettyPrint){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreate a serialized JSON string from a form node or string\r\n\t\t\t//\t\tID identifying the form to serialize\r\n\t\t\t// formNode: DOMNode|String\r\n\t\t\t// prettyPrint: Boolean?\r\n\t\t\t// returns: String\r\n\r\n\t\t\treturn json.stringify(form.toObject(formNode), null, prettyPrint ? 4 : 0); // String\r\n\t\t}\r\n\t};\r\n\r\n    return form;\r\n});\r\n\ndefine('dojo/errors/RequestError',['./create'], function(create){\r\n\t// module:\r\n\t//\t\tdojo/errors/RequestError\r\n\r\n\t/*=====\r\n\t return function(){\r\n\t\t // summary:\r\n\t\t //\t\tTODOC\r\n\t };\r\n\t =====*/\r\n\r\n\treturn create(\"RequestError\", function(message, response){\r\n\t\tthis.response = response;\r\n\t});\r\n});\r\n\ndefine('dojo/request/util',[\r\n\t'exports',\r\n\t'../errors/RequestError',\r\n\t'../errors/CancelError',\r\n\t'../Deferred',\r\n\t'../io-query',\r\n\t'../_base/array',\r\n\t'../_base/lang',\r\n\t'../promise/Promise'\r\n], function(exports, RequestError, CancelError, Deferred, ioQuery, array, lang, Promise){\r\n\texports.deepCopy = function deepCopy(target, source){\r\n\t\tfor(var name in source){\r\n\t\t\tvar tval = target[name],\r\n\t\t\t\tsval = source[name];\r\n\t\t\tif(tval !== sval){\r\n\t\t\t\tif(tval && typeof tval === 'object' && sval && typeof sval === 'object'){\r\n\t\t\t\t\texports.deepCopy(tval, sval);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttarget[name] = sval;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\texports.deepCreate = function deepCreate(source, properties){\r\n\t\tproperties = properties || {};\r\n\t\tvar target = lang.delegate(source),\r\n\t\t\tname, value;\r\n\r\n\t\tfor(name in source){\r\n\t\t\tvalue = source[name];\r\n\r\n\t\t\tif(value && typeof value === 'object'){\r\n\t\t\t\ttarget[name] = exports.deepCreate(value, properties[name]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn exports.deepCopy(target, properties);\r\n\t};\r\n\r\n\tvar freeze = Object.freeze || function(obj){ return obj; };\r\n\tfunction okHandler(response){\r\n\t\treturn freeze(response);\r\n\t}\r\n\tfunction dataHandler (response) {\r\n\t\treturn response.data || response.text;\r\n\t}\r\n\r\n\texports.deferred = function deferred(response, cancel, isValid, isReady, handleResponse, last){\r\n\t\tvar def = new Deferred(function(reason){\r\n\t\t\tcancel && cancel(def, response);\r\n\r\n\t\t\tif(!reason || !(reason instanceof RequestError) && !(reason instanceof CancelError)){\r\n\t\t\t\treturn new CancelError('Request canceled', response);\r\n\t\t\t}\r\n\t\t\treturn reason;\r\n\t\t});\r\n\r\n\t\tdef.response = response;\r\n\t\tdef.isValid = isValid;\r\n\t\tdef.isReady = isReady;\r\n\t\tdef.handleResponse = handleResponse;\r\n\r\n\t\tfunction errHandler(error){\r\n\t\t\terror.response = response;\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t\tvar responsePromise = def.then(okHandler).otherwise(errHandler);\r\n\r\n\t\tif(exports.notify){\r\n\t\t\tresponsePromise.then(\r\n\t\t\t\tlang.hitch(exports.notify, 'emit', 'load'),\r\n\t\t\t\tlang.hitch(exports.notify, 'emit', 'error')\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tvar dataPromise = responsePromise.then(dataHandler);\r\n\r\n\t\t// http://bugs.dojotoolkit.org/ticket/16794\r\n\t\t// The following works around a leak in IE9 through the\r\n\t\t// prototype using lang.delegate on dataPromise and\r\n\t\t// assigning the result a property with a reference to\r\n\t\t// responsePromise.\r\n\t\tvar promise = new Promise();\r\n\t\tfor (var prop in dataPromise) {\r\n\t\t\tif (dataPromise.hasOwnProperty(prop)) {\r\n\t\t\t\tpromise[prop] = dataPromise[prop];\r\n\t\t\t}\r\n\t\t}\r\n\t\tpromise.response = responsePromise;\r\n\t\tfreeze(promise);\r\n\t\t// End leak fix\r\n\r\n\r\n\t\tif(last){\r\n\t\t\tdef.then(function(response){\r\n\t\t\t\tlast.call(def, response);\r\n\t\t\t}, function(error){\r\n\t\t\t\tlast.call(def, response, error);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tdef.promise = promise;\r\n\t\tdef.then = promise.then;\r\n\r\n\t\treturn def;\r\n\t};\r\n\r\n\texports.addCommonMethods = function addCommonMethods(provider, methods){\r\n\t\tarray.forEach(methods||['GET', 'POST', 'PUT', 'DELETE'], function(method){\r\n\t\t\tprovider[(method === 'DELETE' ? 'DEL' : method).toLowerCase()] = function(url, options){\r\n\t\t\t\toptions = lang.delegate(options||{});\r\n\t\t\t\toptions.method = method;\r\n\t\t\t\treturn provider(url, options);\r\n\t\t\t};\r\n\t\t});\r\n\t};\r\n\r\n\texports.parseArgs = function parseArgs(url, options, skipData){\r\n\t\tvar data = options.data,\r\n\t\t\tquery = options.query;\r\n\t\t\r\n\t\tif(data && !skipData){\r\n\t\t\tif(typeof data === 'object'){\r\n\t\t\t\toptions.data = ioQuery.objectToQuery(data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(query){\r\n\t\t\tif(typeof query === 'object'){\r\n\t\t\t\tquery = ioQuery.objectToQuery(query);\r\n\t\t\t}\r\n\t\t\tif(options.preventCache){\r\n\t\t\t\tquery += (query ? '&' : '') + 'request.preventCache=' + (+(new Date));\r\n\t\t\t}\r\n\t\t}else if(options.preventCache){\r\n\t\t\tquery = 'request.preventCache=' + (+(new Date));\r\n\t\t}\r\n\r\n\t\tif(url && query){\r\n\t\t\turl += (~url.indexOf('?') ? '&' : '?') + query;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\turl: url,\r\n\t\t\toptions: options,\r\n\t\t\tgetHeader: function(headerName){ return null; }\r\n\t\t};\r\n\t};\r\n\r\n\texports.checkStatus = function(stat){\r\n\t\tstat = stat || 0;\r\n\t\treturn (stat >= 200 && stat < 300) || // allow any 2XX response code\r\n\t\t\tstat === 304 ||                 // or, get it out of the cache\r\n\t\t\tstat === 1223 ||                // or, Internet Explorer mangled the status code\r\n\t\t\t!stat;                         // or, we're Titanium/browser chrome/chrome extension requesting a local file\r\n\t};\r\n});\r\n\ndefine('dojo/errors/RequestTimeoutError',['./create', './RequestError'], function(create, RequestError){\r\n\t// module:\r\n\t//\t\tdojo/errors/RequestTimeoutError\r\n\r\n\t/*=====\r\n\t return function(){\r\n\t\t // summary:\r\n\t\t //\t\tTODOC\r\n\t };\r\n\t =====*/\r\n\r\n\treturn create(\"RequestTimeoutError\", null, RequestError, {\r\n\t\tdojoType: \"timeout\"\r\n\t});\r\n});\r\n\ndefine('dojo/request/watch',[\r\n\t'./util',\r\n\t'../errors/RequestTimeoutError',\r\n\t'../errors/CancelError',\r\n\t'../_base/array',\r\n\t'../has!host-browser?../_base/window:',\r\n\t'../has!host-browser?dom-addeventlistener?:../on:'\r\n], function(util, RequestTimeoutError, CancelError, array, win, on){\r\n\t// avoid setting a timer per request. It degrades performance on IE\r\n\t// something fierece if we don't use unified loops.\r\n\tvar _inFlightIntvl = null,\r\n\t\t_inFlight = [];\r\n\r\n\tfunction watchInFlight(){\r\n\t\t// summary:\r\n\t\t//\t\tinternal method that checks each inflight XMLHttpRequest to see\r\n\t\t//\t\tif it has completed or if the timeout situation applies.\r\n\r\n\t\tvar now = +(new Date);\r\n\r\n\t\t// we need manual loop because we often modify _inFlight (and therefore 'i') while iterating\r\n\t\tfor(var i = 0, dfd; i < _inFlight.length && (dfd = _inFlight[i]); i++){\r\n\t\t\tvar response = dfd.response,\r\n\t\t\t\toptions = response.options;\r\n\t\t\tif((dfd.isCanceled && dfd.isCanceled()) || (dfd.isValid && !dfd.isValid(response))){\r\n\t\t\t\t_inFlight.splice(i--, 1);\r\n\t\t\t\twatch._onAction && watch._onAction();\r\n\t\t\t}else if(dfd.isReady && dfd.isReady(response)){\r\n\t\t\t\t_inFlight.splice(i--, 1);\r\n\t\t\t\tdfd.handleResponse(response);\r\n\t\t\t\twatch._onAction && watch._onAction();\r\n\t\t\t}else if(dfd.startTime){\r\n\t\t\t\t// did we timeout?\r\n\t\t\t\tif(dfd.startTime + (options.timeout || 0) < now){\r\n\t\t\t\t\t_inFlight.splice(i--, 1);\r\n\t\t\t\t\t// Cancel the request so the io module can do appropriate cleanup.\r\n\t\t\t\t\tdfd.cancel(new RequestTimeoutError('Timeout exceeded', response));\r\n\t\t\t\t\twatch._onAction && watch._onAction();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twatch._onInFlight && watch._onInFlight(dfd);\r\n\r\n\t\tif(!_inFlight.length){\r\n\t\t\tclearInterval(_inFlightIntvl);\r\n\t\t\t_inFlightIntvl = null;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction watch(dfd){\r\n\t\t// summary:\r\n\t\t//\t\tWatches the io request represented by dfd to see if it completes.\r\n\t\t// dfd: Deferred\r\n\t\t//\t\tThe Deferred object to watch.\r\n\t\t// response: Object\r\n\t\t//\t\tThe object used as the value of the request promise.\r\n\t\t// validCheck: Function\r\n\t\t//\t\tFunction used to check if the IO request is still valid. Gets the dfd\r\n\t\t//\t\tobject as its only argument.\r\n\t\t// ioCheck: Function\r\n\t\t//\t\tFunction used to check if basic IO call worked. Gets the dfd\r\n\t\t//\t\tobject as its only argument.\r\n\t\t// resHandle: Function\r\n\t\t//\t\tFunction used to process response. Gets the dfd\r\n\t\t//\t\tobject as its only argument.\r\n\t\tif(dfd.response.options.timeout){\r\n\t\t\tdfd.startTime = +(new Date);\r\n\t\t}\r\n\r\n\t\tif(dfd.isFulfilled()){\r\n\t\t\t// bail out if the deferred is already fulfilled\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t_inFlight.push(dfd);\r\n\t\tif(!_inFlightIntvl){\r\n\t\t\t_inFlightIntvl = setInterval(watchInFlight, 50);\r\n\t\t}\r\n\r\n\t\t// handle sync requests separately from async:\r\n\t\t// http://bugs.dojotoolkit.org/ticket/8467\r\n\t\tif(dfd.response.options.sync){\r\n\t\t\twatchInFlight();\r\n\t\t}\r\n\t}\r\n\r\n\twatch.cancelAll = function cancelAll(){\r\n\t\t// summary:\r\n\t\t//\t\tCancels all pending IO requests, regardless of IO type\r\n\t\ttry{\r\n\t\t\tarray.forEach(_inFlight, function(dfd){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdfd.cancel(new CancelError('All requests canceled.'));\r\n\t\t\t\t}catch(e){}\r\n\t\t\t});\r\n\t\t}catch(e){}\r\n\t};\r\n\r\n\tif(win && on && win.doc.attachEvent){\r\n\t\t// Automatically call cancel all io calls on unload in IE\r\n\t\t// http://bugs.dojotoolkit.org/ticket/2357\r\n\t\ton(win.global, 'unload', function(){\r\n\t\t\twatch.cancelAll();\r\n\t\t});\r\n\t}\r\n\r\n\treturn watch;\r\n});\r\n\ndefine('dojo/request/handlers',[\r\n\t'../json',\r\n\t'../_base/kernel',\r\n\t'../_base/array',\r\n\t'../has',\r\n\t'../has!dom?../selector/_loader' // only included for has() qsa tests\r\n], function(JSON, kernel, array, has){\r\n\thas.add('activex', typeof ActiveXObject !== 'undefined');\r\n\thas.add('dom-parser', function(global){\r\n\t\treturn 'DOMParser' in global;\r\n\t});\r\n\r\n\tvar handleXML;\r\n\tif(has('activex')){\r\n\t\t// GUIDs obtained from http://msdn.microsoft.com/en-us/library/ms757837(VS.85).aspx\r\n\t\tvar dp = [\r\n\t\t\t'Msxml2.DOMDocument.6.0',\r\n\t\t\t'Msxml2.DOMDocument.4.0',\r\n\t\t\t'MSXML2.DOMDocument.3.0',\r\n\t\t\t'MSXML.DOMDocument' // 2.0\r\n\t\t];\r\n\t\tvar lastParser;\r\n\r\n\t\thandleXML = function(response){\r\n\t\t\tvar result = response.data;\r\n\t\t\tvar text = response.text;\r\n\r\n\t\t\tif(result && has('dom-qsa2.1') && !result.querySelectorAll && has('dom-parser')){\r\n\t\t\t\t// http://bugs.dojotoolkit.org/ticket/15631\r\n\t\t\t\t// IE9 supports a CSS3 querySelectorAll implementation, but the DOM implementation\r\n\t\t\t\t// returned by IE9 xhr.responseXML does not. Manually create the XML DOM to gain\r\n\t\t\t\t// the fuller-featured implementation and avoid bugs caused by the inconsistency\r\n\t\t\t\tresult = new DOMParser().parseFromString(text, 'application/xml');\r\n\t\t\t}\r\n\r\n\t\t\tfunction createDocument(p) {\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tvar dom = new ActiveXObject(p);\r\n\t\t\t\t\t\tdom.async = false;\r\n\t\t\t\t\t\tdom.loadXML(text);\r\n\t\t\t\t\t\tresult = dom;\r\n\t\t\t\t\t\tlastParser = p;\r\n\t\t\t\t\t}catch(e){ return false; }\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif(!result || !result.documentElement){\r\n\t\t\t\t// The creation of an ActiveX object is expensive, so we cache the\r\n\t\t\t\t// parser type to avoid trying all parser types each time we handle a\r\n\t\t\t\t// document. There is some concern that some parser types might fail\r\n\t\t\t\t// depending on the document being parsed. If parsing using the cached\r\n\t\t\t\t// parser type fails, we do the more expensive operation of finding one\r\n\t\t\t\t// that works for the given document.\r\n\t\t\t\t// https://bugs.dojotoolkit.org/ticket/15246\r\n\t\t\t\tif(!lastParser || !createDocument(lastParser)) {\r\n\t\t\t\t\tarray.some(dp, createDocument);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t};\r\n\t}\r\n\r\n\tvar handleNativeResponse = function(response) {\r\n\t\tif(!has('native-xhr2-blob') && response.options.handleAs === 'blob' && typeof Blob !== 'undefined'){\r\n\t\t\treturn new Blob([ response.xhr.response ], { type: response.xhr.getResponseHeader('Content-Type') });\r\n\t\t}\r\n\r\n\t\treturn response.xhr.response;\r\n\t}\r\n\r\n\tvar handlers = {\r\n\t\t'javascript': function(response){\r\n\t\t\treturn kernel.eval(response.text || '');\r\n\t\t},\r\n\t\t'json': function(response){\r\n\t\t\treturn JSON.parse(response.text || null);\r\n\t\t},\r\n\t\t'xml': handleXML,\r\n\t\t'blob': handleNativeResponse,\r\n\t\t'arraybuffer': handleNativeResponse,\r\n\t\t'document': handleNativeResponse\r\n\t};\r\n\r\n\tfunction handle(response){\r\n\t\tvar handler = handlers[response.options.handleAs];\r\n\r\n\t\tresponse.data = handler ? handler(response) : (response.data || response.text);\r\n\r\n\t\treturn response;\r\n\t}\r\n\r\n\thandle.register = function(name, handler){\r\n\t\thandlers[name] = handler;\r\n\t};\r\n\r\n\treturn handle;\r\n});\r\n\ndefine('dojo/request/xhr',[\r\n\t'../errors/RequestError',\r\n\t'./watch',\r\n\t'./handlers',\r\n\t'./util',\r\n\t'../has'/*=====,\r\n\t'../request',\r\n\t'../_base/declare' =====*/\r\n], function(RequestError, watch, handlers, util, has/*=====, request, declare =====*/){\r\n\thas.add('native-xhr', function(){\r\n\t\t// if true, the environment has a native XHR implementation\r\n\t\treturn typeof XMLHttpRequest !== 'undefined';\r\n\t});\r\n\thas.add('dojo-force-activex-xhr', function(){\r\n\t\treturn has('activex') && !document.addEventListener && window.location.protocol === 'file:';\r\n\t});\r\n\r\n\thas.add('native-xhr2', function(){\r\n\t\tif(!has('native-xhr')){ return; }\r\n\t\tvar x = new XMLHttpRequest();\r\n\t\treturn typeof x['addEventListener'] !== 'undefined' &&\r\n\t\t\t(typeof opera === 'undefined' || typeof x['upload'] !== 'undefined');\r\n\t});\r\n\r\n\thas.add('native-formdata', function(){\r\n\t\t// if true, the environment has a native FormData implementation\r\n\t\treturn typeof FormData !== 'undefined';\r\n\t});\r\n\r\n\thas.add('native-response-type', function(){\r\n\t\treturn has('native-xhr') && typeof new XMLHttpRequest().responseType !== 'undefined';\r\n\t});\r\n\r\n\thas.add('native-xhr2-blob', function(){\r\n\t\tif(!has('native-response-type')){ return; }\r\n\t\tvar x = new XMLHttpRequest();\r\n\t\tx.open('GET', '/', true);\r\n\t\tx.responseType = 'blob';\r\n\t\t// will not be set if unsupported\r\n\t\tvar responseType = x.responseType;\r\n\t\tx.abort();\r\n\t\treturn responseType === 'blob';\r\n\t});\r\n\r\n\t// Google Chrome doesn't support \"json\" response type\r\n\t// up to version 30, so it's intentionally not included here\r\n\tvar nativeResponseTypes = {\r\n\t\t'blob': has('native-xhr2-blob') ? 'blob' : 'arraybuffer',\r\n\t\t'document': 'document',\r\n\t\t'arraybuffer': 'arraybuffer'\r\n\t};\r\n\r\n\tfunction handleResponse(response, error){\r\n\t\tvar _xhr = response.xhr;\r\n\t\tresponse.status = response.xhr.status;\r\n\r\n\t\ttry {\r\n\t\t\t// Firefox throws an error when trying to access\r\n\t\t\t// xhr.responseText if response isn't text\r\n\t\t\tresponse.text = _xhr.responseText;\r\n\t\t} catch (e) {}\r\n\r\n\t\tif(response.options.handleAs === 'xml'){\r\n\t\t\tresponse.data = _xhr.responseXML;\r\n\t\t}\r\n\r\n\t\tif(!error){\r\n\t\t\ttry{\r\n\t\t\t\thandlers(response);\r\n\t\t\t}catch(e){\r\n\t\t\t\terror = e;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(error){\r\n\t\t\tthis.reject(error);\r\n\t\t}else if(util.checkStatus(_xhr.status)){\r\n\t\t\tthis.resolve(response);\r\n\t\t}else{\r\n\t\t\terror = new RequestError('Unable to load ' + response.url + ' status: ' + _xhr.status, response);\r\n\r\n\t\t\tthis.reject(error);\r\n\t\t}\r\n\t}\r\n\r\n\tvar isValid, isReady, addListeners, cancel;\r\n\tif(has('native-xhr2')){\r\n\t\t// Any platform with XHR2 will only use the watch mechanism for timeout.\r\n\r\n\t\tisValid = function(response){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCheck to see if the request should be taken out of the watch queue\r\n\t\t\treturn !this.isFulfilled();\r\n\t\t};\r\n\t\tcancel = function(dfd, response){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCanceler for deferred\r\n\t\t\tresponse.xhr.abort();\r\n\t\t};\r\n\t\taddListeners = function(_xhr, dfd, response){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds event listeners to the XMLHttpRequest object\r\n\t\t\tfunction onLoad(evt){\r\n\t\t\t\tdfd.handleResponse(response);\r\n\t\t\t}\r\n\t\t\tfunction onError(evt){\r\n\t\t\t\tvar _xhr = evt.target;\r\n\t\t\t\tvar error = new RequestError('Unable to load ' + response.url + ' status: ' + _xhr.status, response);\r\n\t\t\t\tdfd.handleResponse(response, error);\r\n\t\t\t}\r\n\r\n\t\t\tfunction onProgress(evt){\r\n\t\t\t\tif(evt.lengthComputable){\r\n\t\t\t\t\tresponse.loaded = evt.loaded;\r\n\t\t\t\t\tresponse.total = evt.total;\r\n\t\t\t\t\tdfd.progress(response);\r\n\t\t\t\t} else if(response.xhr.readyState === 3){\r\n\t\t\t\t\tresponse.loaded = evt.position;\r\n\t\t\t\t\tdfd.progress(response);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_xhr.addEventListener('load', onLoad, false);\r\n\t\t\t_xhr.addEventListener('error', onError, false);\r\n\t\t\t_xhr.addEventListener('progress', onProgress, false);\r\n\r\n\t\t\treturn function(){\r\n\t\t\t\t_xhr.removeEventListener('load', onLoad, false);\r\n\t\t\t\t_xhr.removeEventListener('error', onError, false);\r\n\t\t\t\t_xhr.removeEventListener('progress', onProgress, false);\r\n\t\t\t\t_xhr = null;\r\n\t\t\t};\r\n\t\t};\r\n\t}else{\r\n\t\tisValid = function(response){\r\n\t\t\treturn response.xhr.readyState; //boolean\r\n\t\t};\r\n\t\tisReady = function(response){\r\n\t\t\treturn 4 === response.xhr.readyState; //boolean\r\n\t\t};\r\n\t\tcancel = function(dfd, response){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tcanceller function for util.deferred call.\r\n\t\t\tvar xhr = response.xhr;\r\n\t\t\tvar _at = typeof xhr.abort;\r\n\t\t\tif(_at === 'function' || _at === 'object' || _at === 'unknown'){\r\n\t\t\t\txhr.abort();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getHeader(headerName){\r\n\t\treturn this.xhr.getResponseHeader(headerName);\r\n\t}\r\n\r\n\tvar undefined,\r\n\t\tdefaultOptions = {\r\n\t\t\tdata: null,\r\n\t\t\tquery: null,\r\n\t\t\tsync: false,\r\n\t\t\tmethod: 'GET'\r\n\t\t};\r\n\tfunction xhr(url, options, returnDeferred){\r\n\t\tvar isFormData = has('native-formdata') && options && options.data && options.data instanceof FormData;\r\n\t\tvar response = util.parseArgs(\r\n\t\t\turl,\r\n\t\t\tutil.deepCreate(defaultOptions, options),\r\n\t\t\tisFormData\r\n\t\t);\r\n\t\turl = response.url;\r\n\t\toptions = response.options;\r\n\r\n\t\tvar remover,\r\n\t\t\tlast = function(){\r\n\t\t\t\tremover && remover();\r\n\t\t\t};\r\n\r\n\t\t//Make the Deferred object for this xhr request.\r\n\t\tvar dfd = util.deferred(\r\n\t\t\tresponse,\r\n\t\t\tcancel,\r\n\t\t\tisValid,\r\n\t\t\tisReady,\r\n\t\t\thandleResponse,\r\n\t\t\tlast\r\n\t\t);\r\n\t\tvar _xhr = response.xhr = xhr._create();\r\n\r\n\t\tif(!_xhr){\r\n\t\t\t// If XHR factory somehow returns nothings,\r\n\t\t\t// cancel the deferred.\r\n\t\t\tdfd.cancel(new RequestError('XHR was not created'));\r\n\t\t\treturn returnDeferred ? dfd : dfd.promise;\r\n\t\t}\r\n\r\n\t\tresponse.getHeader = getHeader;\r\n\r\n\t\tif(addListeners){\r\n\t\t\tremover = addListeners(_xhr, dfd, response);\r\n\t\t}\r\n\r\n\t\tvar data = options.data,\r\n\t\t\tasync = !options.sync,\r\n\t\t\tmethod = options.method;\r\n\r\n\t\ttry{\r\n\t\t\t// IE6 won't let you call apply() on the native function.\r\n\t\t\t_xhr.open(method, url, async, options.user || undefined, options.password || undefined);\r\n\r\n\t\t\tif(options.withCredentials){\r\n\t\t\t\t_xhr.withCredentials = options.withCredentials;\r\n\t\t\t}\r\n\r\n\t\t\tif(has('native-response-type') && options.handleAs in nativeResponseTypes) {\r\n\t\t\t\t_xhr.responseType = nativeResponseTypes[options.handleAs];\r\n\t\t\t}\r\n\r\n\t\t\tvar headers = options.headers,\r\n\t\t\t\tcontentType = isFormData ? false : 'application/x-www-form-urlencoded';\r\n\t\t\tif(headers){\r\n\t\t\t\tfor(var hdr in headers){\r\n\t\t\t\t\tif(hdr.toLowerCase() === 'content-type'){\r\n\t\t\t\t\t\tcontentType = headers[hdr];\r\n\t\t\t\t\t}else if(headers[hdr]){\r\n\t\t\t\t\t\t//Only add header if it has a value. This allows for instance, skipping\r\n\t\t\t\t\t\t//insertion of X-Requested-With by specifying empty value.\r\n\t\t\t\t\t\t_xhr.setRequestHeader(hdr, headers[hdr]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(contentType && contentType !== false){\r\n\t\t\t\t_xhr.setRequestHeader('Content-Type', contentType);\r\n\t\t\t}\r\n\t\t\tif(!headers || !('X-Requested-With' in headers)){\r\n\t\t\t\t_xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n\t\t\t}\r\n\r\n\t\t\tif(util.notify){\r\n\t\t\t\tutil.notify.emit('send', response, dfd.promise.cancel);\r\n\t\t\t}\r\n\t\t\t_xhr.send(data);\r\n\t\t}catch(e){\r\n\t\t\tdfd.reject(e);\r\n\t\t}\r\n\r\n\t\twatch(dfd);\r\n\t\t_xhr = null;\r\n\r\n\t\treturn returnDeferred ? dfd : dfd.promise;\r\n\t}\r\n\r\n\t/*=====\r\n\txhr = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSends a request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__Options?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\txhr.__BaseOptions = declare(request.__BaseOptions, {\r\n\t\t// sync: Boolean?\r\n\t\t//\t\tWhether to make a synchronous request or not. Default\r\n\t\t//\t\tis `false` (asynchronous).\r\n\t\t// data: String|Object|FormData?\r\n\t\t//\t\tData to transfer. This is ignored for GET and DELETE\r\n\t\t//\t\trequests.\r\n\t\t// headers: Object?\r\n\t\t//\t\tHeaders to use for the request.\r\n\t\t// user: String?\r\n\t\t//\t\tUsername to use during the request.\r\n\t\t// password: String?\r\n\t\t//\t\tPassword to use during the request.\r\n\t\t// withCredentials: Boolean?\r\n\t\t//\t\tFor cross-site requests, whether to send credentials\r\n\t\t//\t\tor not.\r\n\t});\r\n\txhr.__MethodOptions = declare(null, {\r\n\t\t// method: String?\r\n\t\t//\t\tThe HTTP method to use to make the request. Must be\r\n\t\t//\t\tuppercase. Default is `\"GET\"`.\r\n\t});\r\n\txhr.__Options = declare([xhr.__BaseOptions, xhr.__MethodOptions]);\r\n\r\n\txhr.get = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP GET request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\txhr.post = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP POST request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\txhr.put = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP PUT request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\txhr.del = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP DELETE request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\t=====*/\r\n\txhr._create = function(){\r\n\t\t// summary:\r\n\t\t//\t\tdoes the work of portably generating a new XMLHTTPRequest object.\r\n\t\tthrow new Error('XMLHTTP not available');\r\n\t};\r\n\tif(has('native-xhr') && !has('dojo-force-activex-xhr')){\r\n\t\txhr._create = function(){\r\n\t\t\treturn new XMLHttpRequest();\r\n\t\t};\r\n\t}else if(has('activex')){\r\n\t\ttry{\r\n\t\t\tnew ActiveXObject('Msxml2.XMLHTTP');\r\n\t\t\txhr._create = function(){\r\n\t\t\t\treturn new ActiveXObject('Msxml2.XMLHTTP');\r\n\t\t\t};\r\n\t\t}catch(e){\r\n\t\t\ttry{\r\n\t\t\t\tnew ActiveXObject('Microsoft.XMLHTTP');\r\n\t\t\t\txhr._create = function(){\r\n\t\t\t\t\treturn new ActiveXObject('Microsoft.XMLHTTP');\r\n\t\t\t\t};\r\n\t\t\t}catch(e){}\r\n\t\t}\r\n\t}\r\n\r\n\tutil.addCommonMethods(xhr);\r\n\r\n\treturn xhr;\r\n});\r\n\ndefine('dojo/_base/xhr',[\r\n\t\"./kernel\",\r\n\t\"./sniff\",\r\n\t\"require\",\r\n\t\"../io-query\",\r\n\t/*===== \"./declare\", =====*/\r\n\t\"../dom\",\r\n\t\"../dom-form\",\r\n\t\"./Deferred\",\r\n\t\"./config\",\r\n\t\"./json\",\r\n\t\"./lang\",\r\n\t\"./array\",\r\n\t\"../on\",\r\n\t\"../aspect\",\r\n\t\"../request/watch\",\r\n\t\"../request/xhr\",\r\n\t\"../request/util\"\r\n], function(dojo, has, require, ioq, /*===== declare, =====*/ dom, domForm, Deferred, config, json, lang, array, on, aspect, watch, _xhr, util){\r\n\t// module:\r\n\t//\t\tdojo/_base/xhr\r\n\r\n\t/*=====\r\n\tdojo._xhrObj = function(){\r\n\t\t// summary:\r\n\t\t//\t\tdoes the work of portably generating a new XMLHTTPRequest object.\r\n\t};\r\n\t=====*/\r\n\tdojo._xhrObj = _xhr._create;\r\n\r\n\tvar cfg = dojo.config;\r\n\r\n\t// mix in io-query and dom-form\r\n\tdojo.objectToQuery = ioq.objectToQuery;\r\n\tdojo.queryToObject = ioq.queryToObject;\r\n\tdojo.fieldToObject = domForm.fieldToObject;\r\n\tdojo.formToObject = domForm.toObject;\r\n\tdojo.formToQuery = domForm.toQuery;\r\n\tdojo.formToJson = domForm.toJson;\r\n\r\n\t// need to block async callbacks from snatching this thread as the result\r\n\t// of an async callback might call another sync XHR, this hangs khtml forever\r\n\t// must checked by watchInFlight()\r\n\r\n\tdojo._blockAsync = false;\r\n\r\n\t// MOW: remove dojo._contentHandlers alias in 2.0\r\n\tvar handlers = dojo._contentHandlers = dojo.contentHandlers = {\r\n\t\t// summary:\r\n\t\t//\t\tA map of available XHR transport handle types. Name matches the\r\n\t\t//\t\t`handleAs` attribute passed to XHR calls.\r\n\t\t// description:\r\n\t\t//\t\tA map of available XHR transport handle types. Name matches the\r\n\t\t//\t\t`handleAs` attribute passed to XHR calls. Each contentHandler is\r\n\t\t//\t\tcalled, passing the xhr object for manipulation. The return value\r\n\t\t//\t\tfrom the contentHandler will be passed to the `load` or `handle`\r\n\t\t//\t\tfunctions defined in the original xhr call.\r\n\t\t// example:\r\n\t\t//\t\tCreating a custom content-handler:\r\n\t\t//\t|\txhr.contentHandlers.makeCaps = function(xhr){\r\n\t\t//\t|\t\treturn xhr.responseText.toUpperCase();\r\n\t\t//\t|\t}\r\n\t\t//\t|\t// and later:\r\n\t\t//\t|\tdojo.xhrGet({\r\n\t\t//\t|\t\turl:\"foo.txt\",\r\n\t\t//\t|\t\thandleAs:\"makeCaps\",\r\n\t\t//\t|\t\tload: function(data){ /* data is a toUpper version of foo.txt */ }\r\n\t\t//\t|\t});\r\n\r\n\t\t\"text\": function(xhr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA contentHandler which simply returns the plaintext response data\r\n\t\t\treturn xhr.responseText;\r\n\t\t},\r\n\t\t\"json\": function(xhr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA contentHandler which returns a JavaScript object created from the response data\r\n\t\t\treturn json.fromJson(xhr.responseText || null);\r\n\t\t},\r\n\t\t\"json-comment-filtered\": function(xhr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA contentHandler which expects comment-filtered JSON.\r\n\t\t\t// description:\r\n\t\t\t//\t\tA contentHandler which expects comment-filtered JSON.\r\n\t\t\t//\t\tthe json-comment-filtered option was implemented to prevent\r\n\t\t\t//\t\t\"JavaScript Hijacking\", but it is less secure than standard JSON. Use\r\n\t\t\t//\t\tstandard JSON instead. JSON prefixing can be used to subvert hijacking.\r\n\t\t\t//\r\n\t\t\t//\t\tWill throw a notice suggesting to use application/json mimetype, as\r\n\t\t\t//\t\tjson-commenting can introduce security issues. To decrease the chances of hijacking,\r\n\t\t\t//\t\tuse the standard `json` contentHandler, and prefix your \"JSON\" with: {}&&\r\n\t\t\t//\r\n\t\t\t//\t\tuse djConfig.useCommentedJson = true to turn off the notice\r\n\t\t\tif(!config.useCommentedJson){\r\n\t\t\t\tconsole.warn(\"Consider using the standard mimetype:application/json.\"\r\n\t\t\t\t\t+ \" json-commenting can introduce security issues. To\"\r\n\t\t\t\t\t+ \" decrease the chances of hijacking, use the standard the 'json' handler and\"\r\n\t\t\t\t\t+ \" prefix your json with: {}&&\\n\"\r\n\t\t\t\t\t+ \"Use djConfig.useCommentedJson=true to turn off this message.\");\r\n\t\t\t}\r\n\r\n\t\t\tvar value = xhr.responseText;\r\n\t\t\tvar cStartIdx = value.indexOf(\"\\/*\");\r\n\t\t\tvar cEndIdx = value.lastIndexOf(\"*\\/\");\r\n\t\t\tif(cStartIdx == -1 || cEndIdx == -1){\r\n\t\t\t\tthrow new Error(\"JSON was not comment filtered\");\r\n\t\t\t}\r\n\t\t\treturn json.fromJson(value.substring(cStartIdx+2, cEndIdx));\r\n\t\t},\r\n\t\t\"javascript\": function(xhr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA contentHandler which evaluates the response data, expecting it to be valid JavaScript\r\n\r\n\t\t\t// FIXME: try Moz and IE specific eval variants?\r\n\t\t\treturn dojo.eval(xhr.responseText);\r\n\t\t},\r\n\t\t\"xml\": function(xhr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA contentHandler returning an XML Document parsed from the response data\r\n\t\t\tvar result = xhr.responseXML;\r\n\r\n\t\t\tif(result && has(\"dom-qsa2.1\") && !result.querySelectorAll && has(\"dom-parser\")){\r\n\t\t\t\t// http://bugs.dojotoolkit.org/ticket/15631\r\n\t\t\t\t// IE9 supports a CSS3 querySelectorAll implementation, but the DOM implementation \r\n\t\t\t\t// returned by IE9 xhr.responseXML does not. Manually create the XML DOM to gain \r\n\t\t\t\t// the fuller-featured implementation and avoid bugs caused by the inconsistency\r\n\t\t\t\tresult = new DOMParser().parseFromString(xhr.responseText, \"application/xml\");\r\n\t\t\t}\r\n\r\n\t\t\tif(has(\"ie\")){\r\n\t\t\t\tif((!result || !result.documentElement)){\r\n\t\t\t\t\t//WARNING: this branch used by the xml handling in dojo.io.iframe,\r\n\t\t\t\t\t//so be sure to test dojo.io.iframe if making changes below.\r\n\t\t\t\t\tvar ms = function(n){ return \"MSXML\" + n + \".DOMDocument\"; };\r\n\t\t\t\t\tvar dp = [\"Microsoft.XMLDOM\", ms(6), ms(4), ms(3), ms(2)];\r\n\t\t\t\t\tarray.some(dp, function(p){\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tvar dom = new ActiveXObject(p);\r\n\t\t\t\t\t\t\tdom.async = false;\r\n\t\t\t\t\t\t\tdom.loadXML(xhr.responseText);\r\n\t\t\t\t\t\t\tresult = dom;\r\n\t\t\t\t\t\t}catch(e){ return false; }\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result; // DOMDocument\r\n\t\t},\r\n\t\t\"json-comment-optional\": function(xhr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tA contentHandler which checks the presence of comment-filtered JSON and\r\n\t\t\t//\t\talternates between the `json` and `json-comment-filtered` contentHandlers.\r\n\t\t\tif(xhr.responseText && /^[^{\\[]*\\/\\*/.test(xhr.responseText)){\r\n\t\t\t\treturn handlers[\"json-comment-filtered\"](xhr);\r\n\t\t\t}else{\r\n\t\t\t\treturn handlers[\"json\"](xhr);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/*=====\r\n\r\n\t// kwargs function parameter definitions.   Assigning to dojo namespace rather than making them local variables\r\n\t// because they are used by dojo/io modules too\r\n\r\n\tdojo.__IoArgs = declare(null, {\r\n\t\t// url: String\r\n\t\t//\t\tURL to server endpoint.\r\n\t\t// content: Object?\r\n\t\t//\t\tContains properties with string values. These\r\n\t\t//\t\tproperties will be serialized as name1=value2 and\r\n\t\t//\t\tpassed in the request.\r\n\t\t// timeout: Integer?\r\n\t\t//\t\tMilliseconds to wait for the response. If this time\r\n\t\t//\t\tpasses, the then error callbacks are called.\r\n\t\t// form: DOMNode?\r\n\t\t//\t\tDOM node for a form. Used to extract the form values\r\n\t\t//\t\tand send to the server.\r\n\t\t// preventCache: Boolean?\r\n\t\t//\t\tDefault is false. If true, then a\r\n\t\t//\t\t\"dojo.preventCache\" parameter is sent in the request\r\n\t\t//\t\twith a value that changes with each request\r\n\t\t//\t\t(timestamp). Useful only with GET-type requests.\r\n\t\t// handleAs: String?\r\n\t\t//\t\tAcceptable values depend on the type of IO\r\n\t\t//\t\ttransport (see specific IO calls for more information).\r\n\t\t// rawBody: String?\r\n\t\t//\t\tSets the raw body for an HTTP request. If this is used, then the content\r\n\t\t//\t\tproperty is ignored. This is mostly useful for HTTP methods that have\r\n\t\t//\t\ta body to their requests, like PUT or POST. This property can be used instead\r\n\t\t//\t\tof postData and putData for dojo/_base/xhr.rawXhrPost and dojo/_base/xhr.rawXhrPut respectively.\r\n\t\t// ioPublish: Boolean?\r\n\t\t//\t\tSet this explicitly to false to prevent publishing of topics related to\r\n\t\t//\t\tIO operations. Otherwise, if djConfig.ioPublish is set to true, topics\r\n\t\t//\t\twill be published via dojo/topic.publish() for different phases of an IO operation.\r\n\t\t//\t\tSee dojo/main.__IoPublish for a list of topics that are published.\r\n\r\n\t\tload: function(response, ioArgs){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tThis function will be\r\n\t\t\t//\t\tcalled on a successful HTTP response code.\r\n\t \t\t// ioArgs: dojo/main.__IoCallbackArgs\r\n\t\t\t//\t\tProvides additional information about the request.\r\n\t\t\t// response: Object\r\n\t\t\t//\t\tThe response in the format as defined with handleAs.\r\n\t\t},\r\n\r\n\t\terror: function(response, ioArgs){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tThis function will\r\n\t\t\t//\t\tbe called when the request fails due to a network or server error, the url\r\n\t\t\t//\t\tis invalid, etc. It will also be called if the load or handle callback throws an\r\n\t\t\t//\t\texception, unless djConfig.debugAtAllCosts is true.\t This allows deployed applications\r\n\t\t\t//\t\tto continue to run even when a logic error happens in the callback, while making\r\n\t\t\t//\t\tit easier to troubleshoot while in debug mode.\r\n\t\t\t// ioArgs: dojo/main.__IoCallbackArgs\r\n\t\t\t//\t\tProvides additional information about the request.\r\n\t\t\t// response: Object\r\n\t\t\t//\t\tThe response in the format as defined with handleAs.\r\n\t\t},\r\n\r\n\t\thandle: function(loadOrError, response, ioArgs){\r\n\t\t\t// summary:\r\n\t \t\t//\t\tThis function will\r\n\t \t\t//\t\tbe called at the end of every request, whether or not an error occurs.\r\n\t\t\t// loadOrError: String\r\n\t\t\t//\t\tProvides a string that tells you whether this function\r\n\t\t\t//\t\twas called because of success (load) or failure (error).\r\n\t\t\t// response: Object\r\n\t\t\t//\t\tThe response in the format as defined with handleAs.\r\n\t\t\t// ioArgs: dojo/main.__IoCallbackArgs\r\n\t\t\t//\t\tProvides additional information about the request.\r\n\t\t}\r\n\t});\r\n\r\n\tdojo.__IoCallbackArgs = declare(null, {\r\n\t\t// args: Object\r\n\t\t//\t\tthe original object argument to the IO call.\r\n\t\t// xhr: XMLHttpRequest\r\n\t\t//\t\tFor XMLHttpRequest calls only, the\r\n\t\t//\t\tXMLHttpRequest object that was used for the\r\n\t\t//\t\trequest.\r\n\t\t// url: String\r\n\t\t//\t\tThe final URL used for the call. Many times it\r\n\t\t//\t\twill be different than the original args.url\r\n\t\t//\t\tvalue.\r\n\t\t// query: String\r\n\t\t//\t\tFor non-GET requests, the\r\n\t\t//\t\tname1=value1&name2=value2 parameters sent up in\r\n\t\t//\t\tthe request.\r\n\t\t// handleAs: String\r\n\t\t//\t\tThe final indicator on how the response will be\r\n\t\t//\t\thandled.\r\n\t\t// id: String\r\n\t\t//\t\tFor dojo/io/script calls only, the internal\r\n\t\t//\t\tscript ID used for the request.\r\n\t\t// canDelete: Boolean\r\n\t\t//\t\tFor dojo/io/script calls only, indicates\r\n\t\t//\t\twhether the script tag that represents the\r\n\t\t//\t\trequest can be deleted after callbacks have\r\n\t\t//\t\tbeen called. Used internally to know when\r\n\t\t//\t\tcleanup can happen on JSONP-type requests.\r\n\t\t// json: Object\r\n\t\t//\t\tFor dojo/io/script calls only: holds the JSON\r\n\t\t//\t\tresponse for JSONP-type requests. Used\r\n\t\t//\t\tinternally to hold on to the JSON responses.\r\n\t\t//\t\tYou should not need to access it directly --\r\n\t\t//\t\tthe same object should be passed to the success\r\n\t\t//\t\tcallbacks directly.\r\n\t});\r\n\r\n\tdojo.__IoPublish = declare(null, {\r\n\t\t// summary:\r\n\t\t//\t\tThis is a list of IO topics that can be published\r\n\t\t//\t\tif djConfig.ioPublish is set to true. IO topics can be\r\n\t\t//\t\tpublished for any Input/Output, network operation. So,\r\n\t\t//\t\tdojo.xhr, dojo.io.script and dojo.io.iframe can all\r\n\t\t//\t\ttrigger these topics to be published.\r\n\t\t// start: String\r\n\t\t//\t\t\"/dojo/io/start\" is sent when there are no outstanding IO\r\n\t\t//\t\trequests, and a new IO request is started. No arguments\r\n\t\t//\t\tare passed with this topic.\r\n\t\t// send: String\r\n\t\t//\t\t\"/dojo/io/send\" is sent whenever a new IO request is started.\r\n\t\t//\t\tIt passes the dojo.Deferred for the request with the topic.\r\n\t\t// load: String\r\n\t\t//\t\t\"/dojo/io/load\" is sent whenever an IO request has loaded\r\n\t\t//\t\tsuccessfully. It passes the response and the dojo.Deferred\r\n\t\t//\t\tfor the request with the topic.\r\n\t\t// error: String\r\n\t\t//\t\t\"/dojo/io/error\" is sent whenever an IO request has errored.\r\n\t\t//\t\tIt passes the error and the dojo.Deferred\r\n\t\t//\t\tfor the request with the topic.\r\n\t\t// done: String\r\n\t\t//\t\t\"/dojo/io/done\" is sent whenever an IO request has completed,\r\n\t\t//\t\teither by loading or by erroring. It passes the error and\r\n\t\t//\t\tthe dojo.Deferred for the request with the topic.\r\n\t\t// stop: String\r\n\t\t//\t\t\"/dojo/io/stop\" is sent when all outstanding IO requests have\r\n\t\t//\t\tfinished. No arguments are passed with this topic.\r\n\t});\r\n\t=====*/\r\n\r\n\r\n\tdojo._ioSetArgs = function(/*dojo/main.__IoArgs*/args,\r\n\t\t\t/*Function*/canceller,\r\n\t\t\t/*Function*/okHandler,\r\n\t\t\t/*Function*/errHandler){\r\n\t\t// summary:\r\n\t\t//\t\tsets up the Deferred and ioArgs property on the Deferred so it\r\n\t\t//\t\tcan be used in an io call.\r\n\t\t// args:\r\n\t\t//\t\tThe args object passed into the public io call. Recognized properties on\r\n\t\t//\t\tthe args object are:\r\n\t\t// canceller:\r\n\t\t//\t\tThe canceller function used for the Deferred object. The function\r\n\t\t//\t\twill receive one argument, the Deferred object that is related to the\r\n\t\t//\t\tcanceller.\r\n\t\t// okHandler:\r\n\t\t//\t\tThe first OK callback to be registered with Deferred. It has the opportunity\r\n\t\t//\t\tto transform the OK response. It will receive one argument -- the Deferred\r\n\t\t//\t\tobject returned from this function.\r\n\t\t// errHandler:\r\n\t\t//\t\tThe first error callback to be registered with Deferred. It has the opportunity\r\n\t\t//\t\tto do cleanup on an error. It will receive two arguments: error (the\r\n\t\t//\t\tError object) and dfd, the Deferred object returned from this function.\r\n\r\n\t\tvar ioArgs = {args: args, url: args.url};\r\n\r\n\t\t//Get values from form if requested.\r\n\t\tvar formObject = null;\r\n\t\tif(args.form){\r\n\t\t\tvar form = dom.byId(args.form);\r\n\t\t\t//IE requires going through getAttributeNode instead of just getAttribute in some form cases,\r\n\t\t\t//so use it for all. See #2844\r\n\t\t\tvar actnNode = form.getAttributeNode(\"action\");\r\n\t\t\tioArgs.url = ioArgs.url || (actnNode ? actnNode.value : null);\r\n\t\t\tformObject = domForm.toObject(form);\r\n\t\t}\r\n\r\n\t\t// set up the query params\r\n\t\tvar miArgs = [{}];\r\n\r\n\t\tif(formObject){\r\n\t\t\t// potentially over-ride url-provided params w/ form values\r\n\t\t\tmiArgs.push(formObject);\r\n\t\t}\r\n\t\tif(args.content){\r\n\t\t\t// stuff in content over-rides what's set by form\r\n\t\t\tmiArgs.push(args.content);\r\n\t\t}\r\n\t\tif(args.preventCache){\r\n\t\t\tmiArgs.push({\"dojo.preventCache\": new Date().valueOf()});\r\n\t\t}\r\n\t\tioArgs.query = ioq.objectToQuery(lang.mixin.apply(null, miArgs));\r\n\r\n\t\t// .. and the real work of getting the deferred in order, etc.\r\n\t\tioArgs.handleAs = args.handleAs || \"text\";\r\n\t\tvar d = new Deferred(function(dfd){\r\n\t\t\tdfd.canceled = true;\r\n\t\t\tcanceller && canceller(dfd);\r\n\r\n\t\t\tvar err = dfd.ioArgs.error;\r\n\t\t\tif(!err){\r\n\t\t\t\terr = new Error(\"request cancelled\");\r\n\t\t\t\terr.dojoType=\"cancel\";\r\n\t\t\t\tdfd.ioArgs.error = err;\r\n\t\t\t}\r\n\t\t\treturn err;\r\n\t\t});\r\n\t\td.addCallback(okHandler);\r\n\r\n\t\t//Support specifying load, error and handle callback functions from the args.\r\n\t\t//For those callbacks, the \"this\" object will be the args object.\r\n\t\t//The callbacks will get the deferred result value as the\r\n\t\t//first argument and the ioArgs object as the second argument.\r\n\t\tvar ld = args.load;\r\n\t\tif(ld && lang.isFunction(ld)){\r\n\t\t\td.addCallback(function(value){\r\n\t\t\t\treturn ld.call(args, value, ioArgs);\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar err = args.error;\r\n\t\tif(err && lang.isFunction(err)){\r\n\t\t\td.addErrback(function(value){\r\n\t\t\t\treturn err.call(args, value, ioArgs);\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar handle = args.handle;\r\n\t\tif(handle && lang.isFunction(handle)){\r\n\t\t\td.addBoth(function(value){\r\n\t\t\t\treturn handle.call(args, value, ioArgs);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Attach error handler last (not including topic publishing)\r\n\t\t// to catch any errors that may have been generated from load\r\n\t\t// or handle functions.\r\n\t\td.addErrback(function(error){\r\n\t\t\treturn errHandler(error, d);\r\n\t\t});\r\n\r\n\t\t//Plug in topic publishing, if dojo.publish is loaded.\r\n\t\tif(cfg.ioPublish && dojo.publish && ioArgs.args.ioPublish !== false){\r\n\t\t\td.addCallbacks(\r\n\t\t\t\tfunction(res){\r\n\t\t\t\t\tdojo.publish(\"/dojo/io/load\", [d, res]);\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(res){\r\n\t\t\t\t\tdojo.publish(\"/dojo/io/error\", [d, res]);\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\td.addBoth(function(res){\r\n\t\t\t\tdojo.publish(\"/dojo/io/done\", [d, res]);\r\n\t\t\t\treturn res;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\td.ioArgs = ioArgs;\r\n\r\n\t\t// FIXME: need to wire up the xhr object's abort method to something\r\n\t\t// analogous in the Deferred\r\n\t\treturn d;\r\n\t};\r\n\r\n\tvar _deferredOk = function(/*Deferred*/dfd){\r\n\t\t// summary:\r\n\t\t//\t\tokHandler function for dojo._ioSetArgs call.\r\n\r\n\t\tvar ret = handlers[dfd.ioArgs.handleAs](dfd.ioArgs.xhr);\r\n\t\treturn ret === undefined ? null : ret;\r\n\t};\r\n\tvar _deferError = function(/*Error*/error, /*Deferred*/dfd){\r\n\t\t// summary:\r\n\t\t//\t\terrHandler function for dojo._ioSetArgs call.\r\n\r\n\t\tif(!dfd.ioArgs.args.failOk){\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\t\treturn error;\r\n\t};\r\n\r\n\t//Use a separate count for knowing if we are starting/stopping io calls.\r\n\tvar _checkPubCount = function(dfd){\r\n\t\tif(_pubCount <= 0){\r\n\t\t\t_pubCount = 0;\r\n\t\t\tif(cfg.ioPublish && dojo.publish && (!dfd || dfd && dfd.ioArgs.args.ioPublish !== false)){\r\n\t\t\t\tdojo.publish(\"/dojo/io/stop\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar _pubCount = 0;\r\n\taspect.after(watch, \"_onAction\", function(){\r\n\t\t_pubCount -= 1;\r\n\t});\r\n\taspect.after(watch, \"_onInFlight\", _checkPubCount);\r\n\r\n\tdojo._ioCancelAll = watch.cancelAll;\r\n\t/*=====\r\n\tdojo._ioCancelAll = function(){\r\n\t\t// summary:\r\n\t\t//\t\tCancels all pending IO requests, regardless of IO type\r\n\t\t//\t\t(xhr, script, iframe).\r\n\t};\r\n\t=====*/\r\n\r\n\tdojo._ioNotifyStart = function(/*Deferred*/dfd){\r\n\t\t// summary:\r\n\t\t//\t\tIf dojo.publish is available, publish topics\r\n\t\t//\t\tabout the start of a request queue and/or the\r\n\t\t//\t\tthe beginning of request.\r\n\t\t//\r\n\t\t//\t\tUsed by IO transports. An IO transport should\r\n\t\t//\t\tcall this method before making the network connection.\r\n\t\tif(cfg.ioPublish && dojo.publish && dfd.ioArgs.args.ioPublish !== false){\r\n\t\t\tif(!_pubCount){\r\n\t\t\t\tdojo.publish(\"/dojo/io/start\");\r\n\t\t\t}\r\n\t\t\t_pubCount += 1;\r\n\t\t\tdojo.publish(\"/dojo/io/send\", [dfd]);\r\n\t\t}\r\n\t};\r\n\r\n\tdojo._ioWatch = function(dfd, validCheck, ioCheck, resHandle){\r\n\t\t// summary:\r\n\t\t//\t\tWatches the io request represented by dfd to see if it completes.\r\n\t\t// dfd: Deferred\r\n\t\t//\t\tThe Deferred object to watch.\r\n\t\t// validCheck: Function\r\n\t\t//\t\tFunction used to check if the IO request is still valid. Gets the dfd\r\n\t\t//\t\tobject as its only argument.\r\n\t\t// ioCheck: Function\r\n\t\t//\t\tFunction used to check if basic IO call worked. Gets the dfd\r\n\t\t//\t\tobject as its only argument.\r\n\t\t// resHandle: Function\r\n\t\t//\t\tFunction used to process response. Gets the dfd\r\n\t\t//\t\tobject as its only argument.\r\n\r\n\t\tvar args = dfd.ioArgs.options = dfd.ioArgs.args;\r\n\t\tlang.mixin(dfd, {\r\n\t\t\tresponse: dfd.ioArgs,\r\n\t\t\tisValid: function(response){\r\n\t\t\t\treturn validCheck(dfd);\r\n\t\t\t},\r\n\t\t\tisReady: function(response){\r\n\t\t\t\treturn ioCheck(dfd);\r\n\t\t\t},\r\n\t\t\thandleResponse: function(response){\r\n\t\t\t\treturn resHandle(dfd);\r\n\t\t\t}\r\n\t\t});\r\n\t\twatch(dfd);\r\n\r\n\t\t_checkPubCount(dfd);\r\n\t};\r\n\r\n\tvar _defaultContentType = \"application/x-www-form-urlencoded\";\r\n\r\n\tdojo._ioAddQueryToUrl = function(/*dojo.__IoCallbackArgs*/ioArgs){\r\n\t\t// summary:\r\n\t\t//\t\tAdds query params discovered by the io deferred construction to the URL.\r\n\t\t//\t\tOnly use this for operations which are fundamentally GET-type operations.\r\n\t\tif(ioArgs.query.length){\r\n\t\t\tioArgs.url += (ioArgs.url.indexOf(\"?\") == -1 ? \"?\" : \"&\") + ioArgs.query;\r\n\t\t\tioArgs.query = null;\r\n\t\t}\r\n\t};\r\n\r\n\t/*=====\r\n\tdojo.__XhrArgs = declare(dojo.__IoArgs, {\r\n\t\t// summary:\r\n\t\t//\t\tIn addition to the properties listed for the dojo._IoArgs type,\r\n\t\t//\t\tthe following properties are allowed for dojo.xhr* methods.\r\n\t\t// handleAs: String?\r\n\t\t//\t\tAcceptable values are: text (default), json, json-comment-optional,\r\n\t\t//\t\tjson-comment-filtered, javascript, xml. See `dojo/_base/xhr.contentHandlers`\r\n\t \t// sync: Boolean?\r\n\t\t//\t\tfalse is default. Indicates whether the request should\r\n\t\t//\t\tbe a synchronous (blocking) request.\r\n\t\t// headers: Object?\r\n\t\t//\t\tAdditional HTTP headers to send in the request.\r\n\t\t// failOk: Boolean?\r\n\t\t//\t\tfalse is default. Indicates whether a request should be\r\n\t\t//\t\tallowed to fail (and therefore no console error message in\r\n\t\t//\t\tthe event of a failure)\r\n\t\t// contentType: String|Boolean\r\n\t\t//\t\t\"application/x-www-form-urlencoded\" is default. Set to false to\r\n\t\t//\t\tprevent a Content-Type header from being sent, or to a string\r\n\t\t//\t\tto send a different Content-Type.\r\n\t });\r\n\t=====*/\r\n\r\n\tdojo.xhr = function(/*String*/ method, /*dojo.__XhrArgs*/ args, /*Boolean?*/ hasBody){\r\n\t\t// summary:\r\n\t\t//\t\tDeprecated.   Use dojo/request instead.\r\n\t\t// description:\r\n\t\t//\t\tSends an HTTP request with the given method.\r\n\t\t//\t\tSee also dojo.xhrGet(), xhrPost(), xhrPut() and dojo.xhrDelete() for shortcuts\r\n\t\t//\t\tfor those HTTP methods. There are also methods for \"raw\" PUT and POST methods\r\n\t\t//\t\tvia dojo.rawXhrPut() and dojo.rawXhrPost() respectively.\r\n\t\t// method:\r\n\t\t//\t\tHTTP method to be used, such as GET, POST, PUT, DELETE. Should be uppercase.\r\n\t\t// hasBody:\r\n\t\t//\t\tIf the request has an HTTP body, then pass true for hasBody.\r\n\r\n\t\tvar rDfd;\r\n\t\t//Make the Deferred object for this xhr request.\r\n\t\tvar dfd = dojo._ioSetArgs(args, function(dfd){\r\n\t\t\trDfd && rDfd.cancel();\r\n\t\t}, _deferredOk, _deferError);\r\n\t\tvar ioArgs = dfd.ioArgs;\r\n\r\n\t\t//Allow for specifying the HTTP body completely.\r\n\t\tif(\"postData\" in args){\r\n\t\t\tioArgs.query = args.postData;\r\n\t\t}else if(\"putData\" in args){\r\n\t\t\tioArgs.query = args.putData;\r\n\t\t}else if(\"rawBody\" in args){\r\n\t\t\tioArgs.query = args.rawBody;\r\n\t\t}else if((arguments.length > 2 && !hasBody) || \"POST|PUT\".indexOf(method.toUpperCase()) === -1){\r\n\t\t\t//Check for hasBody being passed. If no hasBody,\r\n\t\t\t//then only append query string if not a POST or PUT request.\r\n\t\t\tdojo._ioAddQueryToUrl(ioArgs);\r\n\t\t}\r\n\r\n\t\tvar options = {\r\n\t\t\tmethod: method,\r\n\t\t\thandleAs: \"text\",\r\n\t\t\ttimeout: args.timeout,\r\n\t\t\twithCredentials: args.withCredentials,\r\n\t\t\tioArgs: ioArgs\r\n\t\t};\r\n\r\n\t\tif(typeof args.headers !== 'undefined'){\r\n\t\t\toptions.headers = args.headers;\r\n\t\t}\r\n\t\tif(typeof args.contentType !== 'undefined'){\r\n\t\t\tif(!options.headers){\r\n\t\t\t\toptions.headers = {};\r\n\t\t\t}\r\n\t\t\toptions.headers['Content-Type'] = args.contentType;\r\n\t\t}\r\n\t\tif(typeof ioArgs.query !== 'undefined'){\r\n\t\t\toptions.data = ioArgs.query;\r\n\t\t}\r\n\t\tif(typeof args.sync !== 'undefined'){\r\n\t\t\toptions.sync = args.sync;\r\n\t\t}\r\n\r\n\t\tdojo._ioNotifyStart(dfd);\r\n\t\ttry{\r\n\t\t\trDfd = _xhr(ioArgs.url, options, true);\r\n\t\t}catch(e){\r\n\t\t\t// If XHR creation fails, dojo/request/xhr throws\r\n\t\t\t// When this happens, cancel the deferred\r\n\t\t\tdfd.cancel();\r\n\t\t\treturn dfd;\r\n\t\t}\r\n\r\n\t\t// sync ioArgs\r\n\t\tdfd.ioArgs.xhr = rDfd.response.xhr;\r\n\r\n\t\trDfd.then(function(){\r\n\t\t\tdfd.resolve(dfd);\r\n\t\t}).otherwise(function(error){\r\n\t\t\tioArgs.error = error;\r\n\t\t\tif(error.response){\r\n\t\t\t\terror.status = error.response.status;\r\n\t\t\t\terror.responseText = error.response.text;\r\n\t\t\t\terror.xhr = error.response.xhr;\r\n\t\t\t}\r\n\t\t\tdfd.reject(error);\r\n\t\t});\r\n\t\treturn dfd; // dojo/_base/Deferred\r\n\t};\r\n\r\n\tdojo.xhrGet = function(/*dojo.__XhrArgs*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tSends an HTTP GET request to the server.\r\n\t\treturn dojo.xhr(\"GET\", args); // dojo/_base/Deferred\r\n\t};\r\n\r\n\tdojo.rawXhrPost = dojo.xhrPost = function(/*dojo.__XhrArgs*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tSends an HTTP POST request to the server. In addition to the properties\r\n\t\t//\t\tlisted for the dojo.__XhrArgs type, the following property is allowed:\r\n\t\t// postData:\r\n\t\t//\t\tString. Send raw data in the body of the POST request.\r\n\t\treturn dojo.xhr(\"POST\", args, true); // dojo/_base/Deferred\r\n\t};\r\n\r\n\tdojo.rawXhrPut = dojo.xhrPut = function(/*dojo.__XhrArgs*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tSends an HTTP PUT request to the server. In addition to the properties\r\n\t\t//\t\tlisted for the dojo.__XhrArgs type, the following property is allowed:\r\n\t\t// putData:\r\n\t\t//\t\tString. Send raw data in the body of the PUT request.\r\n\t\treturn dojo.xhr(\"PUT\", args, true); // dojo/_base/Deferred\r\n\t};\r\n\r\n\tdojo.xhrDelete = function(/*dojo.__XhrArgs*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tSends an HTTP DELETE request to the server.\r\n\t\treturn dojo.xhr(\"DELETE\", args); // dojo/_base/Deferred\r\n\t};\r\n\r\n\t/*\r\n\tdojo.wrapForm = function(formNode){\r\n\t\t// summary:\r\n\t\t//\t\tA replacement for FormBind, but not implemented yet.\r\n\r\n\t\t// FIXME: need to think harder about what extensions to this we might\r\n\t\t// want. What should we allow folks to do w/ this? What events to\r\n\t\t// set/send?\r\n\t\tthrow new Error(\"dojo.wrapForm not yet implemented\");\r\n\t}\r\n\t*/\r\n\r\n\tdojo._isDocumentOk = function(x){\r\n\t\treturn util.checkStatus(x.status);\r\n\t};\r\n\r\n\tdojo._getText = function(url){\r\n\t\tvar result;\r\n\t\tdojo.xhrGet({url:url, sync:true, load:function(text){\r\n\t\t\tresult = text;\r\n\t\t}});\r\n\t\treturn result;\r\n\t};\r\n\r\n\t// Add aliases for static functions to dojo.xhr since dojo.xhr is what's returned from this module\r\n\tlang.mixin(dojo.xhr, {\r\n\t\t_xhrObj: dojo._xhrObj,\r\n\t\tfieldToObject: domForm.fieldToObject,\r\n\t\tformToObject: domForm.toObject,\r\n\t\tobjectToQuery: ioq.objectToQuery,\r\n\t\tformToQuery: domForm.toQuery,\r\n\t\tformToJson: domForm.toJson,\r\n\t\tqueryToObject: ioq.queryToObject,\r\n\t\tcontentHandlers: handlers,\r\n\t\t_ioSetArgs: dojo._ioSetArgs,\r\n\t\t_ioCancelAll: dojo._ioCancelAll,\r\n\t\t_ioNotifyStart: dojo._ioNotifyStart,\r\n\t\t_ioWatch: dojo._ioWatch,\r\n\t\t_ioAddQueryToUrl: dojo._ioAddQueryToUrl,\r\n\t\t_isDocumentOk: dojo._isDocumentOk,\r\n\t\t_getText: dojo._getText,\r\n\t\tget: dojo.xhrGet,\r\n\t\tpost: dojo.xhrPost,\r\n\t\tput: dojo.xhrPut,\r\n\t\tdel: dojo.xhrDelete\t// because \"delete\" is a reserved word\r\n\t});\r\n\r\n\treturn dojo.xhr;\r\n});\r\n\ndefine('dojo/data/util/filter',[\"../../_base/lang\"], function(lang){\r\n\t// module:\r\n\t//\t\tdojo/data/util/filter\r\n\t// summary:\r\n\t//\t\tTODOC\r\n\r\nvar filter = {};\r\nlang.setObject(\"dojo.data.util.filter\", filter);\r\n\r\nfilter.patternToRegExp = function(/*String*/pattern, /*boolean?*/ ignoreCase){\r\n\t// summary:\r\n\t//\t\tHelper function to convert a simple pattern to a regular expression for matching.\r\n\t// description:\r\n\t//\t\tReturns a regular expression object that conforms to the defined conversion rules.\r\n\t//\t\tFor example:\r\n\t//\r\n\t//\t\t- ca*   -> /^ca.*$/\r\n\t//\t\t- *ca*  -> /^.*ca.*$/\r\n\t//\t\t- *c\\*a*  -> /^.*c\\*a.*$/\r\n\t//\t\t- *c\\*a?*  -> /^.*c\\*a..*$/\r\n\t//\r\n\t//\t\tand so on.\r\n\t// pattern: string\r\n\t//\t\tA simple matching pattern to convert that follows basic rules:\r\n\t//\r\n\t//\t\t- * Means match anything, so ca* means match anything starting with ca\r\n\t//\t\t- ? Means match single character.  So, b?b will match to bob and bab, and so on.\r\n\t//\t\t- \\ is an escape character.  So for example, \\* means do not treat * as a match, but literal character *.\r\n\t//\r\n\t//\t\tTo use a \\ as a character in the string, it must be escaped.  So in the pattern it should be\r\n\t//\t\trepresented by \\\\ to be treated as an ordinary \\ character instead of an escape.\r\n\t// ignoreCase:\r\n\t//\t\tAn optional flag to indicate if the pattern matching should be treated as case-sensitive or not when comparing\r\n\t//\t\tBy default, it is assumed case sensitive.\r\n\r\n\tvar rxp = \"^\";\r\n\tvar c = null;\r\n\tfor(var i = 0; i < pattern.length; i++){\r\n\t\tc = pattern.charAt(i);\r\n\t\tswitch(c){\r\n\t\t\tcase '\\\\':\r\n\t\t\t\trxp += c;\r\n\t\t\t\ti++;\r\n\t\t\t\trxp += pattern.charAt(i);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '*':\r\n\t\t\t\trxp += \".*\"; break;\r\n\t\t\tcase '?':\r\n\t\t\t\trxp += \".\"; break;\r\n\t\t\tcase '$':\r\n\t\t\tcase '^':\r\n\t\t\tcase '/':\r\n\t\t\tcase '+':\r\n\t\t\tcase '.':\r\n\t\t\tcase '|':\r\n\t\t\tcase '(':\r\n\t\t\tcase ')':\r\n\t\t\tcase '{':\r\n\t\t\tcase '}':\r\n\t\t\tcase '[':\r\n\t\t\tcase ']':\r\n\t\t\t\trxp += \"\\\\\"; //fallthrough\r\n\t\t\tdefault:\r\n\t\t\t\trxp += c;\r\n\t\t}\r\n\t}\r\n\trxp += \"$\";\r\n\tif(ignoreCase){\r\n\t\treturn new RegExp(rxp,\"mi\"); //RegExp\r\n\t}else{\r\n\t\treturn new RegExp(rxp,\"m\"); //RegExp\r\n\t}\r\n\r\n};\r\n\r\nreturn filter;\r\n});\r\n\ndefine('dojo/data/util/sorter',[\"../../_base/lang\"], function(lang){\r\n\t// module:\r\n\t//\t\tdojo/data/util/sorter\r\n\t// summary:\r\n\t//\t\tTODOC\r\n\r\nvar sorter = {};\r\nlang.setObject(\"dojo.data.util.sorter\", sorter);\r\n\r\nsorter.basicComparator = function(\t/*anything*/ a,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/*anything*/ b){\r\n\t// summary:\r\n\t//\t\tBasic comparison function that compares if an item is greater or less than another item\r\n\t// description:\r\n\t//\t\treturns 1 if a > b, -1 if a < b, 0 if equal.\r\n\t//\t\t'null' values (null, undefined) are treated as larger values so that they're pushed to the end of the list.\r\n\t//\t\tAnd compared to each other, null is equivalent to undefined.\r\n\r\n\t//null is a problematic compare, so if null, we set to undefined.\r\n\t//Makes the check logic simple, compact, and consistent\r\n\t//And (null == undefined) === true, so the check later against null\r\n\t//works for undefined and is less bytes.\r\n\tvar r = -1;\r\n\tif(a === null){\r\n\t\ta = undefined;\r\n\t}\r\n\tif(b === null){\r\n\t\tb = undefined;\r\n\t}\r\n\tif(a == b){\r\n\t\tr = 0;\r\n\t}else if(a > b || a == null){\r\n\t\tr = 1;\r\n\t}\r\n\treturn r; //int {-1,0,1}\r\n};\r\n\r\nsorter.createSortFunction = function(\t/* attributes[] */sortSpec, /*dojo/data/api/Read*/ store){\r\n\t// summary:\r\n\t//\t\tHelper function to generate the sorting function based off the list of sort attributes.\r\n\t// description:\r\n\t//\t\tThe sort function creation will look for a property on the store called 'comparatorMap'.  If it exists\r\n\t//\t\tit will look in the mapping for comparisons function for the attributes.  If one is found, it will\r\n\t//\t\tuse it instead of the basic comparator, which is typically used for strings, ints, booleans, and dates.\r\n\t//\t\tReturns the sorting function for this particular list of attributes and sorting directions.\r\n\t// sortSpec:\r\n\t//\t\tA JS object that array that defines out what attribute names to sort on and whether it should be descenting or asending.\r\n\t//\t\tThe objects should be formatted as follows:\r\n\t// |\t{\r\n\t// |\t\tattribute: \"attributeName-string\" || attribute,\r\n\t// |\t\tdescending: true|false;   // Default is false.\r\n\t// |\t}\r\n\t// store:\r\n\t//\t\tThe datastore object to look up item values from.\r\n\r\n\tvar sortFunctions=[];\r\n\r\n\tfunction createSortFunction(attr, dir, comp, s){\r\n\t\t//Passing in comp and s (comparator and store), makes this\r\n\t\t//function much faster.\r\n\t\treturn function(itemA, itemB){\r\n\t\t\tvar a = s.getValue(itemA, attr);\r\n\t\t\tvar b = s.getValue(itemB, attr);\r\n\t\t\treturn dir * comp(a,b); //int\r\n\t\t};\r\n\t}\r\n\tvar sortAttribute;\r\n\tvar map = store.comparatorMap;\r\n\tvar bc = sorter.basicComparator;\r\n\tfor(var i = 0; i < sortSpec.length; i++){\r\n\t\tsortAttribute = sortSpec[i];\r\n\t\tvar attr = sortAttribute.attribute;\r\n\t\tif(attr){\r\n\t\t\tvar dir = (sortAttribute.descending) ? -1 : 1;\r\n\t\t\tvar comp = bc;\r\n\t\t\tif(map){\r\n\t\t\t\tif(typeof attr !== \"string\" && (\"toString\" in attr)){\r\n\t\t\t\t\t attr = attr.toString();\r\n\t\t\t\t}\r\n\t\t\t\tcomp = map[attr] || bc;\r\n\t\t\t}\r\n\t\t\tsortFunctions.push(createSortFunction(attr,\r\n\t\t\t\tdir, comp, store));\r\n\t\t}\r\n\t}\r\n\treturn function(rowA, rowB){\r\n\t\tvar i=0;\r\n\t\twhile(i < sortFunctions.length){\r\n\t\t\tvar ret = sortFunctions[i++](rowA, rowB);\r\n\t\t\tif(ret !== 0){\r\n\t\t\t\treturn ret;//int\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0; //int\r\n\t}; // Function\r\n};\r\n\r\nreturn sorter;\r\n});\r\n\ndefine('dojo/data/util/simpleFetch',[\"../../_base/lang\", \"../../_base/kernel\", \"./sorter\"],\r\n  function(lang, kernel, sorter){\r\n\t// module:\r\n\t//\t\tdojo/data/util/simpleFetch\r\n\t// summary:\r\n\t//\t\tThe simpleFetch mixin is designed to serve as a set of function(s) that can\r\n\t//\t\tbe mixed into other datastore implementations to accelerate their development.\r\n\r\nvar simpleFetch = {};\r\nlang.setObject(\"dojo.data.util.simpleFetch\", simpleFetch);\r\n\r\nsimpleFetch.errorHandler = function(/*Object*/ errorData, /*Object*/ requestObject){\r\n\t// summary:\r\n\t//\t\tThe error handler when there is an error fetching items.  This function should not be called\r\n\t//\t\tdirectly and is used by simpleFetch.fetch().\r\n\tif(requestObject.onError){\r\n\t\tvar scope = requestObject.scope || kernel.global;\r\n\t\trequestObject.onError.call(scope, errorData, requestObject);\r\n\t}\r\n};\r\n\r\nsimpleFetch.fetchHandler = function(/*Array*/ items, /*Object*/ requestObject){\r\n\t// summary:\r\n\t//\t\tThe handler when items are successfully fetched.  This function should not be called directly\r\n\t//\t\tand is used by simpleFetch.fetch().\r\n\tvar oldAbortFunction = requestObject.abort || null,\r\n\t\taborted = false,\r\n\r\n\t\tstartIndex = requestObject.start?requestObject.start: 0,\r\n\t\tendIndex = (requestObject.count && (requestObject.count !== Infinity))?(startIndex + requestObject.count):items.length;\r\n\r\n\trequestObject.abort = function(){\r\n\t\taborted = true;\r\n\t\tif(oldAbortFunction){\r\n\t\t\toldAbortFunction.call(requestObject);\r\n\t\t}\r\n\t};\r\n\r\n\tvar scope = requestObject.scope || kernel.global;\r\n\tif(!requestObject.store){\r\n\t\trequestObject.store = this;\r\n\t}\r\n\tif(requestObject.onBegin){\r\n\t\trequestObject.onBegin.call(scope, items.length, requestObject);\r\n\t}\r\n\tif(requestObject.sort){\r\n\t\titems.sort(sorter.createSortFunction(requestObject.sort, this));\r\n\t}\r\n\tif(requestObject.onItem){\r\n\t\tfor(var i = startIndex; (i < items.length) && (i < endIndex); ++i){\r\n\t\t\tvar item = items[i];\r\n\t\t\tif(!aborted){\r\n\t\t\t\trequestObject.onItem.call(scope, item, requestObject);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(requestObject.onComplete && !aborted){\r\n\t\tvar subset = null;\r\n\t\tif(!requestObject.onItem){\r\n\t\t\tsubset = items.slice(startIndex, endIndex);\r\n\t\t}\r\n\t\trequestObject.onComplete.call(scope, subset, requestObject);\r\n\t}\r\n};\r\n\r\nsimpleFetch.fetch = function(/* Object? */ request){\r\n\t// summary:\r\n\t//\t\tThe simpleFetch mixin is designed to serve as a set of function(s) that can\r\n\t//\t\tbe mixed into other datastore implementations to accelerate their development.\r\n\t// description:\r\n\t//\t\tThe simpleFetch mixin should work well for any datastore that can respond to a _fetchItems()\r\n\t//\t\tcall by returning an array of all the found items that matched the query.  The simpleFetch mixin\r\n\t//\t\tis not designed to work for datastores that respond to a fetch() call by incrementally\r\n\t//\t\tloading items, or sequentially loading partial batches of the result\r\n\t//\t\tset.  For datastores that mixin simpleFetch, simpleFetch\r\n\t//\t\timplements a fetch method that automatically handles eight of the fetch()\r\n\t//\t\targuments -- onBegin, onItem, onComplete, onError, start, count, sort and scope\r\n\t//\t\tThe class mixing in simpleFetch should not implement fetch(),\r\n\t//\t\tbut should instead implement a _fetchItems() method.  The _fetchItems()\r\n\t//\t\tmethod takes three arguments, the keywordArgs object that was passed\r\n\t//\t\tto fetch(), a callback function to be called when the result array is\r\n\t//\t\tavailable, and an error callback to be called if something goes wrong.\r\n\t//\t\tThe _fetchItems() method should ignore any keywordArgs parameters for\r\n\t//\t\tstart, count, onBegin, onItem, onComplete, onError, sort, and scope.\r\n\t//\t\tThe _fetchItems() method needs to correctly handle any other keywordArgs\r\n\t//\t\tparameters, including the query parameter and any optional parameters\r\n\t//\t\t(such as includeChildren).  The _fetchItems() method should create an array of\r\n\t//\t\tresult items and pass it to the fetchHandler along with the original request object --\r\n\t//\t\tor, the _fetchItems() method may, if it wants to, create an new request object\r\n\t//\t\twith other specifics about the request that are specific to the datastore and pass\r\n\t//\t\tthat as the request object to the handler.\r\n\t//\r\n\t//\t\tFor more information on this specific function, see dojo/data/api/Read.fetch()\r\n\t//\r\n\t// request:\r\n\t//\t\tThe keywordArgs parameter may either be an instance of\r\n\t//\t\tconforming to dojo/data/api/Request or may be a simple anonymous object\r\n\t//\t\tthat may contain any of the following:\r\n\t// |\t{\r\n\t// |\t\tquery: query-object or query-string,\r\n\t// |\t\tqueryOptions: object,\r\n\t// |\t\tonBegin: Function,\r\n\t// |\t\tonItem: Function,\r\n\t// |\t\tonComplete: Function,\r\n\t// |\t\tonError: Function,\r\n\t// |\t\tscope: object,\r\n\t// |\t\tstart: int\r\n\t// |\t\tcount: int\r\n\t// |\t\tsort: array\r\n\t// |\t}\r\n\t//\t\tAll implementations should accept keywordArgs objects with any of\r\n\t//\t\tthe 9 standard properties: query, onBegin, onItem, onComplete, onError\r\n\t//\t\tscope, sort, start, and count.  Some implementations may accept additional\r\n\t//\t\tproperties in the keywordArgs object as valid parameters, such as\r\n\t//\t\t{includeOutliers:true}.\r\n\t//\r\n\t//\t\t####The *query* parameter\r\n\t//\r\n\t//\t\tThe query may be optional in some data store implementations.\r\n\t//\t\tThe dojo/data/api/Read API does not specify the syntax or semantics\r\n\t//\t\tof the query itself -- each different data store implementation\r\n\t//\t\tmay have its own notion of what a query should look like.\r\n\t//\t\tHowever, as of dojo 0.9, 1.0, and 1.1, all the provided datastores in dojo.data\r\n\t//\t\tand dojox.data support an object structure query, where the object is a set of\r\n\t//\t\tname/value parameters such as { attrFoo: valueBar, attrFoo1: valueBar1}.  Most of the\r\n\t//\t\tdijit widgets, such as ComboBox assume this to be the case when working with a datastore\r\n\t//\t\twhen they dynamically update the query.  Therefore, for maximum compatibility with dijit\r\n\t//\t\twidgets the recommended query parameter is a key/value object.  That does not mean that the\r\n\t//\t\tthe datastore may not take alternative query forms, such as a simple string, a Date, a number,\r\n\t//\t\tor a mix of such.  Ultimately, The dojo/data/api/Read API is agnostic about what the query\r\n\t//\t\tformat.\r\n\t//\r\n\t//\t\tFurther note:  In general for query objects that accept strings as attribute\r\n\t//\t\tvalue matches, the store should also support basic filtering capability, such as *\r\n\t//\t\t(match any character) and ? (match single character).  An example query that is a query object\r\n\t//\t\twould be like: { attrFoo: \"value*\"}.  Which generally means match all items where they have\r\n\t//\t\tan attribute named attrFoo, with a value that starts with 'value'.\r\n\t//\r\n\t//\t\t####The *queryOptions* parameter\r\n\t//\r\n\t//\t\tThe queryOptions parameter is an optional parameter used to specify options that may modify\r\n\t//\t\tthe query in some fashion, such as doing a case insensitive search, or doing a deep search\r\n\t//\t\twhere all items in a hierarchical representation of data are scanned instead of just the root\r\n\t//\t\titems.  It currently defines two options that all datastores should attempt to honor if possible:\r\n\t// |\t{\r\n\t// |\t\tignoreCase: boolean, // Whether or not the query should match case sensitively or not.  Default behaviour is false.\r\n\t// |\t\tdeep: boolean\t// Whether or not a fetch should do a deep search of items and all child\r\n\t// |\t\t\t\t\t\t// items instead of just root-level items in a datastore.  Default is false.\r\n\t// |\t}\r\n\t//\r\n\t//\t\t####The *onBegin* parameter.\r\n\t//\r\n\t//\t\tfunction(size, request);\r\n\t//\t\tIf an onBegin callback function is provided, the callback function\r\n\t//\t\twill be called just once, before the first onItem callback is called.\r\n\t//\t\tThe onBegin callback function will be passed two arguments, the\r\n\t//\t\tthe total number of items identified and the Request object.  If the total number is\r\n\t//\t\tunknown, then size will be -1.  Note that size is not necessarily the size of the\r\n\t//\t\tcollection of items returned from the query, as the request may have specified to return only a\r\n\t//\t\tsubset of the total set of items through the use of the start and count parameters.\r\n\t//\r\n\t//\t\t####The *onItem* parameter.\r\n\t//\r\n\t//\t\tfunction(item, request);\r\n\t//\r\n\t//\t\tIf an onItem callback function is provided, the callback function\r\n\t//\t\twill be called as each item in the result is received. The callback\r\n\t//\t\tfunction will be passed two arguments: the item itself, and the\r\n\t//\t\tRequest object.\r\n\t//\r\n\t//\t\t####The *onComplete* parameter.\r\n\t//\r\n\t//\t\tfunction(items, request);\r\n\t//\r\n\t//\t\tIf an onComplete callback function is provided, the callback function\r\n\t//\t\twill be called just once, after the last onItem callback is called.\r\n\t//\t\tNote that if the onItem callback is not present, then onComplete will be passed\r\n\t//\t\tan array containing all items which matched the query and the request object.\r\n\t//\t\tIf the onItem callback is present, then onComplete is called as:\r\n\t//\t\tonComplete(null, request).\r\n\t//\r\n\t//\t\t####The *onError* parameter.\r\n\t//\r\n\t//\t\tfunction(errorData, request);\r\n\t//\r\n\t//\t\tIf an onError callback function is provided, the callback function\r\n\t//\t\twill be called if there is any sort of error while attempting to\r\n\t//\t\texecute the query.\r\n\t//\t\tThe onError callback function will be passed two arguments:\r\n\t//\t\tan Error object and the Request object.\r\n\t//\r\n\t//\t\t####The *scope* parameter.\r\n\t//\r\n\t//\t\tIf a scope object is provided, all of the callback functions (onItem,\r\n\t//\t\tonComplete, onError, etc) will be invoked in the context of the scope\r\n\t//\t\tobject.  In the body of the callback function, the value of the \"this\"\r\n\t//\t\tkeyword will be the scope object.   If no scope object is provided,\r\n\t//\t\tthe callback functions will be called in the context of dojo.global().\r\n\t//\t\tFor example, onItem.call(scope, item, request) vs.\r\n\t//\t\tonItem.call(dojo.global(), item, request)\r\n\t//\r\n\t//\t\t####The *start* parameter.\r\n\t//\r\n\t//\t\tIf a start parameter is specified, this is a indication to the datastore to\r\n\t//\t\tonly start returning items once the start number of items have been located and\r\n\t//\t\tskipped.  When this parameter is paired with 'count', the store should be able\r\n\t//\t\tto page across queries with millions of hits by only returning subsets of the\r\n\t//\t\thits for each query\r\n\t//\r\n\t//\t\t####The *count* parameter.\r\n\t//\r\n\t//\t\tIf a count parameter is specified, this is a indication to the datastore to\r\n\t//\t\tonly return up to that many items.  This allows a fetch call that may have\r\n\t//\t\tmillions of item matches to be paired down to something reasonable.\r\n\t//\r\n\t//\t\t####The *sort* parameter.\r\n\t//\r\n\t//\t\tIf a sort parameter is specified, this is a indication to the datastore to\r\n\t//\t\tsort the items in some manner before returning the items.  The array is an array of\r\n\t//\t\tjavascript objects that must conform to the following format to be applied to the\r\n\t//\t\tfetching of items:\r\n\t// |\t{\r\n\t// |\t\tattribute: attribute || attribute-name-string,\r\n\t// |\t\tdescending: true|false;   // Optional.  Default is false.\r\n\t// |\t}\r\n\t//\t\tNote that when comparing attributes, if an item contains no value for the attribute\r\n\t//\t\t(undefined), then it the default ascending sort logic should push it to the bottom\r\n\t//\t\tof the list.  In the descending order case, it such items should appear at the top of the list.\r\n\r\n\trequest = request || {};\r\n\tif(!request.store){\r\n\t\trequest.store = this;\r\n\t}\r\n\r\n\tthis._fetchItems(request, lang.hitch(this, \"fetchHandler\"), lang.hitch(this, \"errorHandler\"));\r\n\treturn request;\t// Object\r\n};\r\n\r\nreturn simpleFetch;\r\n});\r\n\ndefine('dojo/data/ItemFileReadStore',[\"../_base/kernel\", \"../_base/lang\", \"../_base/declare\", \"../_base/array\", \"../_base/xhr\",\r\n\t\"../Evented\", \"./util/filter\", \"./util/simpleFetch\", \"../date/stamp\"\r\n], function(kernel, lang, declare, array, xhr, Evented, filterUtil, simpleFetch, dateStamp){\r\n\r\n// module:\r\n//\t\tdojo/data/ItemFileReadStore\r\n\r\nvar ItemFileReadStore = declare(\"dojo.data.ItemFileReadStore\", [Evented],{\r\n\t// summary:\r\n\t//\t\tThe ItemFileReadStore implements the dojo/data/api/Read API and reads\r\n\t//\t\tdata from JSON files that have contents in this format --\r\n\t// |\t{ items: [\r\n\t// |\t\t{ name:'Kermit', color:'green', age:12, friends:['Gonzo', {_reference:{name:'Fozzie Bear'}}]},\r\n\t// |\t\t{ name:'Fozzie Bear', wears:['hat', 'tie']},\r\n\t// |\t\t{ name:'Miss Piggy', pets:'Foo-Foo'}\r\n\t// |\t]}\r\n\t//\t\tNote that it can also contain an 'identifier' property that specified which attribute on the items\r\n\t//\t\tin the array of items that acts as the unique identifier for that item.\r\n\r\n\tconstructor: function(/* Object */ keywordParameters){\r\n\t\t// summary:\r\n\t\t//\t\tconstructor\r\n\t\t// keywordParameters:\r\n\t\t//\t\t{url: String} {data: jsonObject} {typeMap: object}\r\n\t\t//\t\tThe structure of the typeMap object is as follows:\r\n\t\t// |\t{\r\n\t\t// |\t\ttype0: function || object,\r\n\t\t// |\t\ttype1: function || object,\r\n\t\t// |\t\t...\r\n\t\t// |\t\ttypeN: function || object\r\n\t\t// |\t}\r\n\t\t//\t\tWhere if it is a function, it is assumed to be an object constructor that takes the\r\n\t\t//\t\tvalue of _value as the initialization parameters.  If it is an object, then it is assumed\r\n\t\t//\t\tto be an object of general form:\r\n\t\t// |\t{\r\n\t\t// |\t\ttype: function, //constructor.\r\n\t\t// |\t\tdeserialize:\tfunction(value) //The function that parses the value and constructs the object defined by type appropriately.\r\n\t\t// |\t}\r\n\r\n\t\tthis._arrayOfAllItems = [];\r\n\t\tthis._arrayOfTopLevelItems = [];\r\n\t\tthis._loadFinished = false;\r\n\t\tthis._jsonFileUrl = keywordParameters.url;\r\n\t\tthis._ccUrl = keywordParameters.url;\r\n\t\tthis.url = keywordParameters.url;\r\n\t\tthis._jsonData = keywordParameters.data;\r\n\t\tthis.data = null;\r\n\t\tthis._datatypeMap = keywordParameters.typeMap || {};\r\n\t\tif(!this._datatypeMap['Date']){\r\n\t\t\t//If no default mapping for dates, then set this as default.\r\n\t\t\t//We use the dojo/date/stamp here because the ISO format is the 'dojo way'\r\n\t\t\t//of generically representing dates.\r\n\t\t\tthis._datatypeMap['Date'] = {\r\n\t\t\t\ttype: Date,\r\n\t\t\t\tdeserialize: function(value){\r\n\t\t\t\t\treturn dateStamp.fromISOString(value);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._features = {'dojo.data.api.Read':true, 'dojo.data.api.Identity':true};\r\n\t\tthis._itemsByIdentity = null;\r\n\t\tthis._storeRefPropName = \"_S\"; // Default name for the store reference to attach to every item.\r\n\t\tthis._itemNumPropName = \"_0\"; // Default Item Id for isItem to attach to every item.\r\n\t\tthis._rootItemPropName = \"_RI\"; // Default Item Id for isItem to attach to every item.\r\n\t\tthis._reverseRefMap = \"_RRM\"; // Default attribute for constructing a reverse reference map for use with reference integrity\r\n\t\tthis._loadInProgress = false; //Got to track the initial load to prevent duelling loads of the dataset.\r\n\t\tthis._queuedFetches = [];\r\n\t\tif(keywordParameters.urlPreventCache !== undefined){\r\n\t\t\tthis.urlPreventCache = keywordParameters.urlPreventCache?true:false;\r\n\t\t}\r\n\t\tif(keywordParameters.hierarchical !== undefined){\r\n\t\t\tthis.hierarchical = keywordParameters.hierarchical?true:false;\r\n\t\t}\r\n\t\tif(keywordParameters.clearOnClose){\r\n\t\t\tthis.clearOnClose = true;\r\n\t\t}\r\n\t\tif(\"failOk\" in keywordParameters){\r\n\t\t\tthis.failOk = keywordParameters.failOk?true:false;\r\n\t\t}\r\n\t},\r\n\r\n\turl: \"\",\t// use \"\" rather than undefined for the benefit of the parser (#3539)\r\n\r\n\t//Internal var, crossCheckUrl.  Used so that setting either url or _jsonFileUrl, can still trigger a reload\r\n\t//when clearOnClose and close is used.\r\n\t_ccUrl: \"\",\r\n\r\n\tdata: null,\t// define this so that the parser can populate it\r\n\r\n\ttypeMap: null, //Define so parser can populate.\r\n\r\n\t// clearOnClose: Boolean\r\n\t//\t\tParameter to allow users to specify if a close call should force a reload or not.\r\n\t//\t\tBy default, it retains the old behavior of not clearing if close is called.  But\r\n\t//\t\tif set true, the store will be reset to default state.  Note that by doing this,\r\n\t//\t\tall item handles will become invalid and a new fetch must be issued.\r\n\tclearOnClose: false,\r\n\r\n\t// urlPreventCache: Boolean\r\n\t//\t\tParameter to allow specifying if preventCache should be passed to the xhrGet call or not when loading data from a url.\r\n\t//\t\tNote this does not mean the store calls the server on each fetch, only that the data load has preventCache set as an option.\r\n\t//\t\tAdded for tracker: #6072\r\n\turlPreventCache: false,\r\n\r\n\t// failOk: Boolean\r\n\t//\t\tParameter for specifying that it is OK for the xhrGet call to fail silently.\r\n\tfailOk: false,\r\n\r\n\t// hierarchical: Boolean\r\n\t//\t\tParameter to indicate to process data from the url as hierarchical\r\n\t//\t\t(data items can contain other data items in js form).  Default is true\r\n\t//\t\tfor backwards compatibility.  False means only root items are processed\r\n\t//\t\tas items, all child objects outside of type-mapped objects and those in\r\n\t//\t\tspecific reference format, are left straight JS data objects.\r\n\thierarchical: true,\r\n\r\n\t_assertIsItem: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tThis function tests whether the item passed in is indeed an item in the store.\r\n\t\t// item:\r\n\t\t//\t\tThe item to test for being contained by the store.\r\n\t\tif(!this.isItem(item)){\r\n\t\t\tthrow new Error(this.declaredClass + \": Invalid item argument.\");\r\n\t\t}\r\n\t},\r\n\r\n\t_assertIsAttribute: function(/* attribute-name-string */ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tThis function tests whether the item passed in is indeed a valid 'attribute' like type for the store.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute to test for being contained by the store.\r\n\t\tif(typeof attribute !== \"string\"){\r\n\t\t\tthrow new Error(this.declaredClass + \": Invalid attribute argument.\");\r\n\t\t}\r\n\t},\r\n\r\n\tgetValue: function(\t/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t   /* attribute-name-string */ attribute,\r\n\t\t\t\t\t\t   /* value? */ defaultValue){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.getValue()\r\n\t\tvar values = this.getValues(item, attribute);\r\n\t\treturn (values.length > 0)?values[0]:defaultValue; // mixed\r\n\t},\r\n\r\n\tgetValues: function(/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t/* attribute-name-string */ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.getValues()\r\n\r\n\t\tthis._assertIsItem(item);\r\n\t\tthis._assertIsAttribute(attribute);\r\n\t\t// Clone it before returning.  refs: #10474\r\n\t\treturn (item[attribute] || []).slice(0); // Array\r\n\t},\r\n\r\n\tgetAttributes: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.getAttributes()\r\n\t\tthis._assertIsItem(item);\r\n\t\tvar attributes = [];\r\n\t\tfor(var key in item){\r\n\t\t\t// Save off only the real item attributes, not the special id marks for O(1) isItem.\r\n\t\t\tif((key !== this._storeRefPropName) && (key !== this._itemNumPropName) && (key !== this._rootItemPropName) && (key !== this._reverseRefMap)){\r\n\t\t\t\tattributes.push(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn attributes; // Array\r\n\t},\r\n\r\n\thasAttribute: function(\t/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t\t   /* attribute-name-string */ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.hasAttribute()\r\n\t\tthis._assertIsItem(item);\r\n\t\tthis._assertIsAttribute(attribute);\r\n\t\treturn (attribute in item);\r\n\t},\r\n\r\n\tcontainsValue: function(/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t\t/* attribute-name-string */ attribute,\r\n\t\t\t\t\t\t\t/* anything */ value){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.containsValue()\r\n\t\tvar regexp = undefined;\r\n\t\tif(typeof value === \"string\"){\r\n\t\t\tregexp = filterUtil.patternToRegExp(value, false);\r\n\t\t}\r\n\t\treturn this._containsValue(item, attribute, value, regexp); //boolean.\r\n\t},\r\n\r\n\t_containsValue: function(\t/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t\t\t\t /* attribute-name-string */ attribute,\r\n\t\t\t\t\t\t\t\t /* anything */ value,\r\n\t\t\t\t\t\t\t\t /* RegExp?*/ regexp){\r\n\t\t// summary:\r\n\t\t//\t\tInternal function for looking at the values contained by the item.\r\n\t\t// description:\r\n\t\t//\t\tInternal function for looking at the values contained by the item.  This\r\n\t\t//\t\tfunction allows for denoting if the comparison should be case sensitive for\r\n\t\t//\t\tstrings or not (for handling filtering cases where string case should not matter)\r\n\t\t// item:\r\n\t\t//\t\tThe data item to examine for attribute values.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute to inspect.\r\n\t\t// value:\r\n\t\t//\t\tThe value to match.\r\n\t\t// regexp:\r\n\t\t//\t\tOptional regular expression generated off value if value was of string type to handle wildcarding.\r\n\t\t//\t\tIf present and attribute values are string, then it can be used for comparison instead of 'value'\r\n\t\treturn array.some(this.getValues(item, attribute), function(possibleValue){\r\n\t\t\tif(possibleValue !== null && !lang.isObject(possibleValue) && regexp){\r\n\t\t\t\tif(possibleValue.toString().match(regexp)){\r\n\t\t\t\t\treturn true; // Boolean\r\n\t\t\t\t}\r\n\t\t\t}else if(value === possibleValue){\r\n\t\t\t\treturn true; // Boolean\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tisItem: function(/* anything */ something){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.isItem()\r\n\t\tif(something && something[this._storeRefPropName] === this){\r\n\t\t\tif(this._arrayOfAllItems[something[this._itemNumPropName]] === something){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false; // Boolean\r\n\t},\r\n\r\n\tisItemLoaded: function(/* anything */ something){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.isItemLoaded()\r\n\t\treturn this.isItem(something); //boolean\r\n\t},\r\n\r\n\tloadItem: function(/* object */ keywordArgs){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.loadItem()\r\n\t\tthis._assertIsItem(keywordArgs.item);\r\n\t},\r\n\r\n\tgetFeatures: function(){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.getFeatures()\r\n\t\treturn this._features; //Object\r\n\t},\r\n\r\n\tgetLabel: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.getLabel()\r\n\t\tif(this._labelAttr && this.isItem(item)){\r\n\t\t\treturn this.getValue(item,this._labelAttr); //String\r\n\t\t}\r\n\t\treturn undefined; //undefined\r\n\t},\r\n\r\n\tgetLabelAttributes: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.getLabelAttributes()\r\n\t\tif(this._labelAttr){\r\n\t\t\treturn [this._labelAttr]; //array\r\n\t\t}\r\n\t\treturn null; //null\r\n\t},\r\n\r\n\tfilter: function(/* Object */ requestArgs, /* item[] */ arrayOfItems, /* Function */ findCallback){\r\n\t\t// summary:\r\n\t\t//\t\tThis method handles the basic filtering needs for ItemFile* based stores.\r\n\t\tvar items = [],\r\n\t\t\ti, key;\r\n\r\n\t\tif(requestArgs.query){\r\n\t\t\tvar value,\r\n\t\t\t\tignoreCase = requestArgs.queryOptions ? requestArgs.queryOptions.ignoreCase : false;\r\n\r\n\t\t\t//See if there are any string values that can be regexp parsed first to avoid multiple regexp gens on the\r\n\t\t\t//same value for each item examined.  Much more efficient.\r\n\t\t\tvar regexpList = {};\r\n\t\t\tfor(key in requestArgs.query){\r\n\t\t\t\tvalue = requestArgs.query[key];\r\n\t\t\t\tif(typeof value === \"string\"){\r\n\t\t\t\t\tregexpList[key] = filterUtil.patternToRegExp(value, ignoreCase);\r\n\t\t\t\t}else if(value instanceof RegExp){\r\n\t\t\t\t\tregexpList[key] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor(i = 0; i < arrayOfItems.length; ++i){\r\n\t\t\t\tvar match = true;\r\n\t\t\t\tvar candidateItem = arrayOfItems[i];\r\n\t\t\t\tif(candidateItem === null){\r\n\t\t\t\t\tmatch = false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(key in requestArgs.query){\r\n\t\t\t\t\t\tvalue = requestArgs.query[key];\r\n\t\t\t\t\t\tif(!this._containsValue(candidateItem, key, value, regexpList[key])){\r\n\t\t\t\t\t\t\tmatch = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(match){\r\n\t\t\t\t\titems.push(candidateItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfindCallback(items, requestArgs);\r\n\t\t}else{\r\n\t\t\t// We want a copy to pass back in case the parent wishes to sort the array.\r\n\t\t\t// We shouldn't allow resort of the internal list, so that multiple callers\r\n\t\t\t// can get lists and sort without affecting each other.  We also need to\r\n\t\t\t// filter out any null values that have been left as a result of deleteItem()\r\n\t\t\t// calls in ItemFileWriteStore.\r\n\t\t\tfor(i = 0; i < arrayOfItems.length; ++i){\r\n\t\t\t\tvar item = arrayOfItems[i];\r\n\t\t\t\tif(item !== null){\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfindCallback(items, requestArgs);\r\n\t\t}\r\n\t},\r\n\r\n\t_fetchItems: function(\t/* Object */ keywordArgs,\r\n\t\t\t\t\t\t\t  /* Function */ findCallback,\r\n\t\t\t\t\t\t\t  /* Function */ errorCallback){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/util.simpleFetch.fetch()\r\n\t\tvar self = this;\r\n\r\n\t\tif(this._loadFinished){\r\n\t\t\tthis.filter(keywordArgs, this._getItemsArray(keywordArgs.queryOptions), findCallback);\r\n\t\t}else{\r\n\t\t\t//Do a check on the JsonFileUrl and crosscheck it.\r\n\t\t\t//If it doesn't match the cross-check, it needs to be updated\r\n\t\t\t//This allows for either url or _jsonFileUrl to he changed to\r\n\t\t\t//reset the store load location.  Done this way for backwards\r\n\t\t\t//compatibility.  People use _jsonFileUrl (even though officially\r\n\t\t\t//private.\r\n\t\t\tif(this._jsonFileUrl !== this._ccUrl){\r\n\t\t\t\tkernel.deprecated(this.declaredClass + \": \",\r\n\t\t\t\t\t\"To change the url, set the url property of the store,\" +\r\n\t\t\t\t\t\t\" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0\");\r\n\t\t\t\tthis._ccUrl = this._jsonFileUrl;\r\n\t\t\t\tthis.url = this._jsonFileUrl;\r\n\t\t\t}else if(this.url !== this._ccUrl){\r\n\t\t\t\tthis._jsonFileUrl = this.url;\r\n\t\t\t\tthis._ccUrl = this.url;\r\n\t\t\t}\r\n\r\n\t\t\t//See if there was any forced reset of data.\r\n\t\t\tif(this.data != null){\r\n\t\t\t\tthis._jsonData = this.data;\r\n\t\t\t\tthis.data = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._jsonFileUrl){\r\n\t\t\t\t//If fetches come in before the loading has finished, but while\r\n\t\t\t\t//a load is in progress, we have to defer the fetching to be\r\n\t\t\t\t//invoked in the callback.\r\n\t\t\t\tif(this._loadInProgress){\r\n\t\t\t\t\tthis._queuedFetches.push({args: keywordArgs, filter: lang.hitch(self, \"filter\"), findCallback: lang.hitch(self, findCallback)});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._loadInProgress = true;\r\n\t\t\t\t\tvar getArgs = {\r\n\t\t\t\t\t\turl: self._jsonFileUrl,\r\n\t\t\t\t\t\thandleAs: \"json-comment-optional\",\r\n\t\t\t\t\t\tpreventCache: this.urlPreventCache,\r\n\t\t\t\t\t\tfailOk: this.failOk\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar getHandler = xhr.get(getArgs);\r\n\t\t\t\t\tgetHandler.addCallback(function(data){\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tself._getItemsFromLoadedData(data);\r\n\t\t\t\t\t\t\tself._loadFinished = true;\r\n\t\t\t\t\t\t\tself._loadInProgress = false;\r\n\r\n\t\t\t\t\t\t\tself.filter(keywordArgs, self._getItemsArray(keywordArgs.queryOptions), findCallback);\r\n\t\t\t\t\t\t\tself._handleQueuedFetches();\r\n\t\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t\tself._loadFinished = true;\r\n\t\t\t\t\t\t\tself._loadInProgress = false;\r\n\t\t\t\t\t\t\terrorCallback(e, keywordArgs);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgetHandler.addErrback(function(error){\r\n\t\t\t\t\t\tself._loadInProgress = false;\r\n\t\t\t\t\t\terrorCallback(error, keywordArgs);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//Wire up the cancel to abort of the request\r\n\t\t\t\t\t//This call cancel on the deferred if it hasn't been called\r\n\t\t\t\t\t//yet and then will chain to the simple abort of the\r\n\t\t\t\t\t//simpleFetch keywordArgs\r\n\t\t\t\t\tvar oldAbort = null;\r\n\t\t\t\t\tif(keywordArgs.abort){\r\n\t\t\t\t\t\toldAbort = keywordArgs.abort;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tkeywordArgs.abort = function(){\r\n\t\t\t\t\t\tvar df = getHandler;\r\n\t\t\t\t\t\tif(df && df.fired === -1){\r\n\t\t\t\t\t\t\tdf.cancel();\r\n\t\t\t\t\t\t\tdf = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(oldAbort){\r\n\t\t\t\t\t\t\toldAbort.call(keywordArgs);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}else if(this._jsonData){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tthis._loadFinished = true;\r\n\t\t\t\t\tthis._getItemsFromLoadedData(this._jsonData);\r\n\t\t\t\t\tthis._jsonData = null;\r\n\t\t\t\t\tself.filter(keywordArgs, this._getItemsArray(keywordArgs.queryOptions), findCallback);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\terrorCallback(e, keywordArgs);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\terrorCallback(new Error(this.declaredClass + \": No JSON source data was provided as either URL or a nested Javascript object.\"), keywordArgs);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_handleQueuedFetches: function(){\r\n\t\t// summary:\r\n\t\t//\t\tInternal function to execute delayed request in the store.\r\n\t\t\r\n\t\t//Execute any deferred fetches now.\r\n\t\tif(this._queuedFetches.length > 0){\r\n\t\t\tfor(var i = 0; i < this._queuedFetches.length; i++){\r\n\t\t\t\tvar fData = this._queuedFetches[i],\r\n\t\t\t\t\tdelayedQuery = fData.args,\r\n\t\t\t\t\tdelayedFilter = fData.filter,\r\n\t\t\t\t\tdelayedFindCallback = fData.findCallback;\r\n\t\t\t\tif(delayedFilter){\r\n\t\t\t\t\tdelayedFilter(delayedQuery, this._getItemsArray(delayedQuery.queryOptions), delayedFindCallback);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.fetchItemByIdentity(delayedQuery);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._queuedFetches = [];\r\n\t\t}\r\n\t},\r\n\r\n\t_getItemsArray: function(/*object?*/queryOptions){\r\n\t\t// summary:\r\n\t\t//\t\tInternal function to determine which list of items to search over.\r\n\t\t// queryOptions: The query options parameter, if any.\r\n\t\tif(queryOptions && queryOptions.deep){\r\n\t\t\treturn this._arrayOfAllItems;\r\n\t\t}\r\n\t\treturn this._arrayOfTopLevelItems;\r\n\t},\r\n\r\n\tclose: function(/*dojo/data/api/Request|Object?*/ request){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Read.close()\r\n\t\tif(this.clearOnClose &&\r\n\t\t\tthis._loadFinished &&\r\n\t\t\t!this._loadInProgress){\r\n\t\t\t//Reset all internalsback to default state.  This will force a reload\r\n\t\t\t//on next fetch.  This also checks that the data or url param was set\r\n\t\t\t//so that the store knows it can get data.  Without one of those being set,\r\n\t\t\t//the next fetch will trigger an error.\r\n\r\n\t\t\tif(((this._jsonFileUrl == \"\" || this._jsonFileUrl == null) &&\r\n\t\t\t\t(this.url == \"\" || this.url == null)\r\n\t\t\t\t) && this.data == null){\r\n\t\t\t\tconsole.debug(this.declaredClass + \": WARNING!  Data reload \" +\r\n\t\t\t\t\t\" information has not been provided.\" +\r\n\t\t\t\t\t\"  Please set 'url' or 'data' to the appropriate value before\" +\r\n\t\t\t\t\t\" the next fetch\");\r\n\t\t\t}\r\n\t\t\tthis._arrayOfAllItems = [];\r\n\t\t\tthis._arrayOfTopLevelItems = [];\r\n\t\t\tthis._loadFinished = false;\r\n\t\t\tthis._itemsByIdentity = null;\r\n\t\t\tthis._loadInProgress = false;\r\n\t\t\tthis._queuedFetches = [];\r\n\t\t}\r\n\t},\r\n\r\n\t_getItemsFromLoadedData: function(/* Object */ dataObject){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to parse the loaded data into item format and build the internal items array.\r\n\t\t// description:\r\n\t\t//\t\tFunction to parse the loaded data into item format and build the internal items array.\r\n\t\t// dataObject:\r\n\t\t//\t\tThe JS data object containing the raw data to convery into item format.\r\n\t\t// returns: Array\r\n\t\t//\t\tArray of items in store item format.\r\n\r\n\t\t// First, we define a couple little utility functions...\r\n\t\tvar addingArrays = false,\r\n\t\t\tself = this;\r\n\r\n\t\tfunction valueIsAnItem(/* anything */ aValue){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGiven any sort of value that could be in the raw json data,\r\n\t\t\t//\t\treturn true if we should interpret the value as being an\r\n\t\t\t//\t\titem itself, rather than a literal value or a reference.\r\n\t\t\t// example:\r\n\t\t\t// \t|\tfalse == valueIsAnItem(\"Kermit\");\r\n\t\t\t// \t|\tfalse == valueIsAnItem(42);\r\n\t\t\t// \t|\tfalse == valueIsAnItem(new Date());\r\n\t\t\t// \t|\tfalse == valueIsAnItem({_type:'Date', _value:'1802-05-14'});\r\n\t\t\t// \t|\tfalse == valueIsAnItem({_reference:'Kermit'});\r\n\t\t\t// \t|\ttrue == valueIsAnItem({name:'Kermit', color:'green'});\r\n\t\t\t// \t|\ttrue == valueIsAnItem({iggy:'pop'});\r\n\t\t\t// \t|\ttrue == valueIsAnItem({foo:42});\r\n\t\t\treturn (aValue !== null) &&\r\n\t\t\t\t(typeof aValue === \"object\") &&\r\n\t\t\t\t(!lang.isArray(aValue) || addingArrays) &&\r\n\t\t\t\t(!lang.isFunction(aValue)) &&\r\n\t\t\t\t(aValue.constructor == Object || lang.isArray(aValue)) &&\r\n\t\t\t\t(typeof aValue._reference === \"undefined\") &&\r\n\t\t\t\t(typeof aValue._type === \"undefined\") &&\r\n\t\t\t\t(typeof aValue._value === \"undefined\") &&\r\n\t\t\t\tself.hierarchical;\r\n\t\t}\r\n\r\n\t\tfunction addItemAndSubItemsToArrayOfAllItems(/* dojo/data/api/Item */ anItem){\r\n\t\t\tself._arrayOfAllItems.push(anItem);\r\n\t\t\tfor(var attribute in anItem){\r\n\t\t\t\tvar valueForAttribute = anItem[attribute];\r\n\t\t\t\tif(valueForAttribute){\r\n\t\t\t\t\tif(lang.isArray(valueForAttribute)){\r\n\t\t\t\t\t\tvar valueArray = valueForAttribute;\r\n\t\t\t\t\t\tfor(var k = 0; k < valueArray.length; ++k){\r\n\t\t\t\t\t\t\tvar singleValue = valueArray[k];\r\n\t\t\t\t\t\t\tif(valueIsAnItem(singleValue)){\r\n\t\t\t\t\t\t\t\taddItemAndSubItemsToArrayOfAllItems(singleValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(valueIsAnItem(valueForAttribute)){\r\n\t\t\t\t\t\t\taddItemAndSubItemsToArrayOfAllItems(valueForAttribute);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._labelAttr = dataObject.label;\r\n\r\n\t\t// We need to do some transformations to convert the data structure\r\n\t\t// that we read from the file into a format that will be convenient\r\n\t\t// to work with in memory.\r\n\r\n\t\t// Step 1: Walk through the object hierarchy and build a list of all items\r\n\t\tvar i,\r\n\t\t\titem;\r\n\t\tthis._arrayOfAllItems = [];\r\n\t\tthis._arrayOfTopLevelItems = dataObject.items;\r\n\r\n\t\tfor(i = 0; i < this._arrayOfTopLevelItems.length; ++i){\r\n\t\t\titem = this._arrayOfTopLevelItems[i];\r\n\t\t\tif(lang.isArray(item)){\r\n\t\t\t\taddingArrays = true;\r\n\t\t\t}\r\n\t\t\taddItemAndSubItemsToArrayOfAllItems(item);\r\n\t\t\titem[this._rootItemPropName]=true;\r\n\t\t}\r\n\r\n\t\t// Step 2: Walk through all the attribute values of all the items,\r\n\t\t// and replace single values with arrays.  For example, we change this:\r\n\t\t//\t\t{ name:'Miss Piggy', pets:'Foo-Foo'}\r\n\t\t// into this:\r\n\t\t//\t\t{ name:['Miss Piggy'], pets:['Foo-Foo']}\r\n\t\t//\r\n\t\t// We also store the attribute names so we can validate our store\r\n\t\t// reference and item id special properties for the O(1) isItem\r\n\t\tvar allAttributeNames = {},\r\n\t\t\tkey;\r\n\r\n\t\tfor(i = 0; i < this._arrayOfAllItems.length; ++i){\r\n\t\t\titem = this._arrayOfAllItems[i];\r\n\t\t\tfor(key in item){\r\n\t\t\t\tif(key !== this._rootItemPropName){\r\n\t\t\t\t\tvar value = item[key];\r\n\t\t\t\t\tif(value !== null){\r\n\t\t\t\t\t\tif(!lang.isArray(value)){\r\n\t\t\t\t\t\t\titem[key] = [value];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\titem[key] = [null];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tallAttributeNames[key]=key;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Step 3: Build unique property names to use for the _storeRefPropName and _itemNumPropName\r\n\t\t// This should go really fast, it will generally never even run the loop.\r\n\t\twhile(allAttributeNames[this._storeRefPropName]){\r\n\t\t\tthis._storeRefPropName += \"_\";\r\n\t\t}\r\n\t\twhile(allAttributeNames[this._itemNumPropName]){\r\n\t\t\tthis._itemNumPropName += \"_\";\r\n\t\t}\r\n\t\twhile(allAttributeNames[this._reverseRefMap]){\r\n\t\t\tthis._reverseRefMap += \"_\";\r\n\t\t}\r\n\r\n\t\t// Step 4: Some data files specify an optional 'identifier', which is\r\n\t\t// the name of an attribute that holds the identity of each item.\r\n\t\t// If this data file specified an identifier attribute, then build a\r\n\t\t// hash table of items keyed by the identity of the items.\r\n\t\tvar arrayOfValues;\r\n\r\n\t\tvar identifier = dataObject.identifier;\r\n\t\tif(identifier){\r\n\t\t\tthis._itemsByIdentity = {};\r\n\t\t\tthis._features['dojo.data.api.Identity'] = identifier;\r\n\t\t\tfor(i = 0; i < this._arrayOfAllItems.length; ++i){\r\n\t\t\t\titem = this._arrayOfAllItems[i];\r\n\t\t\t\tarrayOfValues = item[identifier];\r\n\t\t\t\tvar identity = arrayOfValues[0];\r\n\t\t\t\tif(!Object.hasOwnProperty.call(this._itemsByIdentity, identity)){\r\n\t\t\t\t\tthis._itemsByIdentity[identity] = item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(this._jsonFileUrl){\r\n\t\t\t\t\t\tthrow new Error(this.declaredClass + \":  The json data as specified by: [\" + this._jsonFileUrl + \"] is malformed.  Items within the list have identifier: [\" + identifier + \"].  Value collided: [\" + identity + \"]\");\r\n\t\t\t\t\t}else if(this._jsonData){\r\n\t\t\t\t\t\tthrow new Error(this.declaredClass + \":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: [\" + identifier + \"].  Value collided: [\" + identity + \"]\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis._features['dojo.data.api.Identity'] = Number;\r\n\t\t}\r\n\r\n\t\t// Step 5: Walk through all the items, and set each item's properties\r\n\t\t// for _storeRefPropName and _itemNumPropName, so that store.isItem() will return true.\r\n\t\tfor(i = 0; i < this._arrayOfAllItems.length; ++i){\r\n\t\t\titem = this._arrayOfAllItems[i];\r\n\t\t\titem[this._storeRefPropName] = this;\r\n\t\t\titem[this._itemNumPropName] = i;\r\n\t\t}\r\n\r\n\t\t// Step 6: We walk through all the attribute values of all the items,\r\n\t\t// looking for type/value literals and item-references.\r\n\t\t//\r\n\t\t// We replace item-references with pointers to items.  For example, we change:\r\n\t\t//\t\t{ name:['Kermit'], friends:[{_reference:{name:'Miss Piggy'}}] }\r\n\t\t// into this:\r\n\t\t//\t\t{ name:['Kermit'], friends:[miss_piggy] }\r\n\t\t// (where miss_piggy is the object representing the 'Miss Piggy' item).\r\n\t\t//\r\n\t\t// We replace type/value pairs with typed-literals.  For example, we change:\r\n\t\t//\t\t{ name:['Nelson Mandela'], born:[{_type:'Date', _value:'1918-07-18'}] }\r\n\t\t// into this:\r\n\t\t//\t\t{ name:['Kermit'], born:(new Date(1918, 6, 18)) }\r\n\t\t//\r\n\t\t// We also generate the associate map for all items for the O(1) isItem function.\r\n\t\tfor(i = 0; i < this._arrayOfAllItems.length; ++i){\r\n\t\t\titem = this._arrayOfAllItems[i]; // example: { name:['Kermit'], friends:[{_reference:{name:'Miss Piggy'}}] }\r\n\t\t\tfor(key in item){\r\n\t\t\t\tarrayOfValues = item[key]; // example: [{_reference:{name:'Miss Piggy'}}]\r\n\t\t\t\tfor(var j = 0; j < arrayOfValues.length; ++j){\r\n\t\t\t\t\tvalue = arrayOfValues[j]; // example: {_reference:{name:'Miss Piggy'}}\r\n\t\t\t\t\tif(value !== null && typeof value == \"object\"){\r\n\t\t\t\t\t\tif((\"_type\" in value) && (\"_value\" in value)){\r\n\t\t\t\t\t\t\tvar type = value._type; // examples: 'Date', 'Color', or 'ComplexNumber'\r\n\t\t\t\t\t\t\tvar mappingObj = this._datatypeMap[type]; // examples: Date, dojo.Color, foo.math.ComplexNumber, {type: dojo.Color, deserialize(value){ return new dojo.Color(value)}}\r\n\t\t\t\t\t\t\tif(!mappingObj){\r\n\t\t\t\t\t\t\t\tthrow new Error(\"dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '\" + type + \"'\");\r\n\t\t\t\t\t\t\t}else if(lang.isFunction(mappingObj)){\r\n\t\t\t\t\t\t\t\tarrayOfValues[j] = new mappingObj(value._value);\r\n\t\t\t\t\t\t\t}else if(lang.isFunction(mappingObj.deserialize)){\r\n\t\t\t\t\t\t\t\tarrayOfValues[j] = mappingObj.deserialize(value._value);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthrow new Error(\"dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(value._reference){\r\n\t\t\t\t\t\t\tvar referenceDescription = value._reference; // example: {name:'Miss Piggy'}\r\n\t\t\t\t\t\t\tif(!lang.isObject(referenceDescription)){\r\n\t\t\t\t\t\t\t\t// example: 'Miss Piggy'\r\n\t\t\t\t\t\t\t\t// from an item like: { name:['Kermit'], friends:[{_reference:'Miss Piggy'}]}\r\n\t\t\t\t\t\t\t\tarrayOfValues[j] = this._getItemByIdentity(referenceDescription);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t// example: {name:'Miss Piggy'}\r\n\t\t\t\t\t\t\t\t// from an item like: { name:['Kermit'], friends:[{_reference:{name:'Miss Piggy'}}] }\r\n\t\t\t\t\t\t\t\tfor(var k = 0; k < this._arrayOfAllItems.length; ++k){\r\n\t\t\t\t\t\t\t\t\tvar candidateItem = this._arrayOfAllItems[k],\r\n\t\t\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\t\tfor(var refKey in referenceDescription){\r\n\t\t\t\t\t\t\t\t\t\tif(candidateItem[refKey] != referenceDescription[refKey]){\r\n\t\t\t\t\t\t\t\t\t\t\tfound = false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(found){\r\n\t\t\t\t\t\t\t\t\t\tarrayOfValues[j] = candidateItem;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(this.referenceIntegrity){\r\n\t\t\t\t\t\t\t\tvar refItem = arrayOfValues[j];\r\n\t\t\t\t\t\t\t\tif(this.isItem(refItem)){\r\n\t\t\t\t\t\t\t\t\tthis._addReferenceToMap(refItem, item, key);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else if(this.isItem(value)){\r\n\t\t\t\t\t\t\t//It's a child item (not one referenced through _reference).\r\n\t\t\t\t\t\t\t//We need to treat this as a referenced item, so it can be cleaned up\r\n\t\t\t\t\t\t\t//in a write store easily.\r\n\t\t\t\t\t\t\tif(this.referenceIntegrity){\r\n\t\t\t\t\t\t\t\tthis._addReferenceToMap(value, item, key);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_addReferenceToMap: function(/*item*/ refItem, /*item*/ parentItem, /*string*/ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tMethod to add an reference map entry for an item and attribute.\r\n\t\t// description:\r\n\t\t//\t\tMethod to add an reference map entry for an item and attribute.\r\n\t\t// refItem:\r\n\t\t//\t\tThe item that is referenced.\r\n\t\t// parentItem:\r\n\t\t//\t\tThe item that holds the new reference to refItem.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute on parentItem that contains the new reference.\r\n\r\n\t\t//Stub function, does nothing.  Real processing is in ItemFileWriteStore.\r\n\t},\r\n\r\n\tgetIdentity: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Identity.getIdentity()\r\n\t\tvar identifier = this._features['dojo.data.api.Identity'];\r\n\t\tif(identifier === Number){\r\n\t\t\treturn item[this._itemNumPropName]; // Number\r\n\t\t}else{\r\n\t\t\tvar arrayOfValues = item[identifier];\r\n\t\t\tif(arrayOfValues){\r\n\t\t\t\treturn arrayOfValues[0]; // Object|String\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null; // null\r\n\t},\r\n\r\n\tfetchItemByIdentity: function(/* Object */ keywordArgs){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Identity.fetchItemByIdentity()\r\n\r\n\t\t// Hasn't loaded yet, we have to trigger the load.\r\n\t\tvar item,\r\n\t\t\tscope;\r\n\t\tif(!this._loadFinished){\r\n\t\t\tvar self = this;\r\n\t\t\t//Do a check on the JsonFileUrl and crosscheck it.\r\n\t\t\t//If it doesn't match the cross-check, it needs to be updated\r\n\t\t\t//This allows for either url or _jsonFileUrl to he changed to\r\n\t\t\t//reset the store load location.  Done this way for backwards\r\n\t\t\t//compatibility.  People use _jsonFileUrl (even though officially\r\n\t\t\t//private.\r\n\t\t\tif(this._jsonFileUrl !== this._ccUrl){\r\n\t\t\t\tkernel.deprecated(this.declaredClass + \": \",\r\n\t\t\t\t\t\"To change the url, set the url property of the store,\" +\r\n\t\t\t\t\t\t\" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0\");\r\n\t\t\t\tthis._ccUrl = this._jsonFileUrl;\r\n\t\t\t\tthis.url = this._jsonFileUrl;\r\n\t\t\t}else if(this.url !== this._ccUrl){\r\n\t\t\t\tthis._jsonFileUrl = this.url;\r\n\t\t\t\tthis._ccUrl = this.url;\r\n\t\t\t}\r\n\r\n\t\t\t//See if there was any forced reset of data.\r\n\t\t\tif(this.data != null && this._jsonData == null){\r\n\t\t\t\tthis._jsonData = this.data;\r\n\t\t\t\tthis.data = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._jsonFileUrl){\r\n\r\n\t\t\t\tif(this._loadInProgress){\r\n\t\t\t\t\tthis._queuedFetches.push({args: keywordArgs});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._loadInProgress = true;\r\n\t\t\t\t\tvar getArgs = {\r\n\t\t\t\t\t\turl: self._jsonFileUrl,\r\n\t\t\t\t\t\thandleAs: \"json-comment-optional\",\r\n\t\t\t\t\t\tpreventCache: this.urlPreventCache,\r\n\t\t\t\t\t\tfailOk: this.failOk\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar getHandler = xhr.get(getArgs);\r\n\t\t\t\t\tgetHandler.addCallback(function(data){\r\n\t\t\t\t\t\tvar scope = keywordArgs.scope?keywordArgs.scope:kernel.global;\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tself._getItemsFromLoadedData(data);\r\n\t\t\t\t\t\t\tself._loadFinished = true;\r\n\t\t\t\t\t\t\tself._loadInProgress = false;\r\n\t\t\t\t\t\t\titem = self._getItemByIdentity(keywordArgs.identity);\r\n\t\t\t\t\t\t\tif(keywordArgs.onItem){\r\n\t\t\t\t\t\t\t\tkeywordArgs.onItem.call(scope, item);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself._handleQueuedFetches();\r\n\t\t\t\t\t\t}catch(error){\r\n\t\t\t\t\t\t\tself._loadInProgress = false;\r\n\t\t\t\t\t\t\tif(keywordArgs.onError){\r\n\t\t\t\t\t\t\t\tkeywordArgs.onError.call(scope, error);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgetHandler.addErrback(function(error){\r\n\t\t\t\t\t\tself._loadInProgress = false;\r\n\t\t\t\t\t\tif(keywordArgs.onError){\r\n\t\t\t\t\t\t\tvar scope = keywordArgs.scope?keywordArgs.scope:kernel.global;\r\n\t\t\t\t\t\t\tkeywordArgs.onError.call(scope, error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t}else if(this._jsonData){\r\n\t\t\t\t// Passed in data, no need to xhr.\r\n\t\t\t\tself._getItemsFromLoadedData(self._jsonData);\r\n\t\t\t\tself._jsonData = null;\r\n\t\t\t\tself._loadFinished = true;\r\n\t\t\t\titem = self._getItemByIdentity(keywordArgs.identity);\r\n\t\t\t\tif(keywordArgs.onItem){\r\n\t\t\t\t\tscope = keywordArgs.scope?keywordArgs.scope:kernel.global;\r\n\t\t\t\t\tkeywordArgs.onItem.call(scope, item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// Already loaded.  We can just look it up and call back.\r\n\t\t\titem = this._getItemByIdentity(keywordArgs.identity);\r\n\t\t\tif(keywordArgs.onItem){\r\n\t\t\t\tscope = keywordArgs.scope?keywordArgs.scope:kernel.global;\r\n\t\t\t\tkeywordArgs.onItem.call(scope, item);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_getItemByIdentity: function(/* Object */ identity){\r\n\t\t// summary:\r\n\t\t//\t\tInternal function to look an item up by its identity map.\r\n\t\tvar item = null;\r\n\t\tif(this._itemsByIdentity){\r\n\t\t\t// If this map is defined, we need to just try to get it.  If it fails\r\n\t\t\t// the item does not exist.\r\n\t\t\tif(Object.hasOwnProperty.call(this._itemsByIdentity, identity)){\r\n\t\t\t\titem = this._itemsByIdentity[identity];\r\n\t\t\t}\r\n\t\t}else if (Object.hasOwnProperty.call(this._arrayOfAllItems, identity)){\r\n\t\t\titem = this._arrayOfAllItems[identity];\r\n\t\t}\r\n\t\tif(item === undefined){\r\n\t\t\titem = null;\r\n\t\t}\r\n\t\treturn item; // Object\r\n\t},\r\n\r\n\tgetIdentityAttributes: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Identity.getIdentityAttributes()\r\n\r\n\t\tvar identifier = this._features['dojo.data.api.Identity'];\r\n\t\tif(identifier === Number){\r\n\t\t\t// If (identifier === Number) it means getIdentity() just returns\r\n\t\t\t// an integer item-number for each item.  The dojo/data/api/Identity\r\n\t\t\t// spec says we need to return null if the identity is not composed\r\n\t\t\t// of attributes\r\n\t\t\treturn null; // null\r\n\t\t}else{\r\n\t\t\treturn [identifier]; // Array\r\n\t\t}\r\n\t},\r\n\r\n\t_forceLoad: function(){\r\n\t\t// summary:\r\n\t\t//\t\tInternal function to force a load of the store if it hasn't occurred yet.  This is required\r\n\t\t//\t\tfor specific functions to work properly.\r\n\t\tvar self = this;\r\n\t\t//Do a check on the JsonFileUrl and crosscheck it.\r\n\t\t//If it doesn't match the cross-check, it needs to be updated\r\n\t\t//This allows for either url or _jsonFileUrl to he changed to\r\n\t\t//reset the store load location.  Done this way for backwards\r\n\t\t//compatibility.  People use _jsonFileUrl (even though officially\r\n\t\t//private.\r\n\t\tif(this._jsonFileUrl !== this._ccUrl){\r\n\t\t\tkernel.deprecated(this.declaredClass + \": \",\r\n\t\t\t\t\"To change the url, set the url property of the store,\" +\r\n\t\t\t\t\t\" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0\");\r\n\t\t\tthis._ccUrl = this._jsonFileUrl;\r\n\t\t\tthis.url = this._jsonFileUrl;\r\n\t\t}else if(this.url !== this._ccUrl){\r\n\t\t\tthis._jsonFileUrl = this.url;\r\n\t\t\tthis._ccUrl = this.url;\r\n\t\t}\r\n\r\n\t\t//See if there was any forced reset of data.\r\n\t\tif(this.data != null){\r\n\t\t\tthis._jsonData = this.data;\r\n\t\t\tthis.data = null;\r\n\t\t}\r\n\r\n\t\tif(this._jsonFileUrl){\r\n\t\t\tvar getArgs = {\r\n\t\t\t\turl: this._jsonFileUrl,\r\n\t\t\t\thandleAs: \"json-comment-optional\",\r\n\t\t\t\tpreventCache: this.urlPreventCache,\r\n\t\t\t\tfailOk: this.failOk,\r\n\t\t\t\tsync: true\r\n\t\t\t};\r\n\t\t\tvar getHandler = xhr.get(getArgs);\r\n\t\t\tgetHandler.addCallback(function(data){\r\n\t\t\t\ttry{\r\n\t\t\t\t\t//Check to be sure there wasn't another load going on concurrently\r\n\t\t\t\t\t//So we don't clobber data that comes in on it.  If there is a load going on\r\n\t\t\t\t\t//then do not save this data.  It will potentially clobber current data.\r\n\t\t\t\t\t//We mainly wanted to sync/wait here.\r\n\t\t\t\t\t//TODO:  Revisit the loading scheme of this store to improve multi-initial\r\n\t\t\t\t\t//request handling.\r\n\t\t\t\t\tif(self._loadInProgress !== true && !self._loadFinished){\r\n\t\t\t\t\t\tself._getItemsFromLoadedData(data);\r\n\t\t\t\t\t\tself._loadFinished = true;\r\n\t\t\t\t\t}else if(self._loadInProgress){\r\n\t\t\t\t\t\t//Okay, we hit an error state we can't recover from.  A forced load occurred\r\n\t\t\t\t\t\t//while an async load was occurring.  Since we cannot block at this point, the best\r\n\t\t\t\t\t\t//that can be managed is to throw an error.\r\n\t\t\t\t\t\tthrow new Error(this.declaredClass + \":  Unable to perform a synchronous load, an async load is in progress.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tgetHandler.addErrback(function(error){\r\n\t\t\t\tthrow error;\r\n\t\t\t});\r\n\t\t}else if(this._jsonData){\r\n\t\t\tself._getItemsFromLoadedData(self._jsonData);\r\n\t\t\tself._jsonData = null;\r\n\t\t\tself._loadFinished = true;\r\n\t\t}\r\n\t}\r\n});\r\n//Mix in the simple fetch implementation to this class.\r\nlang.extend(ItemFileReadStore,simpleFetch);\r\n\r\nreturn ItemFileReadStore;\r\n\r\n});\r\n\ndefine('dojo/data/ItemFileWriteStore',[\"../_base/lang\", \"../_base/declare\", \"../_base/array\", \"../_base/json\", \"../_base/kernel\",\r\n\t\"./ItemFileReadStore\", \"../date/stamp\"\r\n], function(lang, declare, arrayUtil, jsonUtil, kernel, ItemFileReadStore, dateStamp){\r\n\r\n// module:\r\n//\t\tdojo/data/ItemFileWriteStore\r\n\r\nreturn declare(\"dojo.data.ItemFileWriteStore\", ItemFileReadStore, {\r\n\t// summary:\r\n\t//\t\tTODOC\r\n\r\n\tconstructor: function(/* object */ keywordParameters){\r\n\t\t// keywordParameters:\r\n\t\t//\t\tThe structure of the typeMap object is as follows:\r\n\t\t// |\t{\r\n\t\t// |\t\ttype0: function || object,\r\n\t\t// |\t\ttype1: function || object,\r\n\t\t// |\t\t...\r\n\t\t// |\t\ttypeN: function || object\r\n\t\t// |\t}\r\n\t\t//\t\tWhere if it is a function, it is assumed to be an object constructor that takes the\r\n\t\t//\t\tvalue of _value as the initialization parameters.  It is serialized assuming object.toString()\r\n\t\t//\t\tserialization.  If it is an object, then it is assumed\r\n\t\t//\t\tto be an object of general form:\r\n\t\t// |\t{\r\n\t\t// |\t\ttype: function, //constructor.\r\n\t\t// |\t\tdeserialize:\tfunction(value) //The function that parses the value and constructs the object defined by type appropriately.\r\n\t\t// |\t\tserialize:\tfunction(object) //The function that converts the object back into the proper file format form.\r\n\t\t// |\t}\r\n\r\n\t\t// ItemFileWriteStore extends ItemFileReadStore to implement these additional dojo.data APIs\r\n\t\tthis._features['dojo.data.api.Write'] = true;\r\n\t\tthis._features['dojo.data.api.Notification'] = true;\r\n\r\n\t\t// For keeping track of changes so that we can implement isDirty and revert\r\n\t\tthis._pending = {\r\n\t\t\t_newItems:{},\r\n\t\t\t_modifiedItems:{},\r\n\t\t\t_deletedItems:{}\r\n\t\t};\r\n\r\n\t\tif(!this._datatypeMap['Date'].serialize){\r\n\t\t\tthis._datatypeMap['Date'].serialize = function(obj){\r\n\t\t\t\treturn dateStamp.toISOString(obj, {zulu:true});\r\n\t\t\t};\r\n\t\t}\r\n\t\t//Disable only if explicitly set to false.\r\n\t\tif(keywordParameters && (keywordParameters.referenceIntegrity === false)){\r\n\t\t\tthis.referenceIntegrity = false;\r\n\t\t}\r\n\r\n\t\t// this._saveInProgress is set to true, briefly, from when save() is first called to when it completes\r\n\t\tthis._saveInProgress = false;\r\n\t},\r\n\r\n\treferenceIntegrity: true, //Flag that defaultly enabled reference integrity tracking.  This way it can also be disabled pogrammatially or declaratively.\r\n\r\n\t_assert: function(/* boolean */ condition){\r\n\t\tif(!condition){\r\n\t\t\tthrow new Error(\"assertion failed in ItemFileWriteStore\");\r\n\t\t}\r\n\t},\r\n\r\n\t_getIdentifierAttribute: function(){\r\n\t\t// this._assert((identifierAttribute === Number) || (dojo.isString(identifierAttribute)));\r\n\t\treturn this.getFeatures()['dojo.data.api.Identity'];\r\n\t},\r\n\r\n\r\n/* dojo/data/api/Write */\r\n\r\n\tnewItem: function(/* Object? */ keywordArgs, /* Object? */ parentInfo){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Write.newItem()\r\n\r\n\t\tthis._assert(!this._saveInProgress);\r\n\r\n\t\tif(!this._loadFinished){\r\n\t\t\t// We need to do this here so that we'll be able to find out what\r\n\t\t\t// identifierAttribute was specified in the data file.\r\n\t\t\tthis._forceLoad();\r\n\t\t}\r\n\r\n\t\tif(typeof keywordArgs != \"object\" && typeof keywordArgs != \"undefined\"){\r\n\t\t\tthrow new Error(\"newItem() was passed something other than an object\");\r\n\t\t}\r\n\t\tvar newIdentity = null;\r\n\t\tvar identifierAttribute = this._getIdentifierAttribute();\r\n\t\tif(identifierAttribute === Number){\r\n\t\t\tnewIdentity = this._arrayOfAllItems.length;\r\n\t\t}else{\r\n\t\t\tnewIdentity = keywordArgs[identifierAttribute];\r\n\t\t\tif(typeof newIdentity === \"undefined\"){\r\n\t\t\t\tthrow new Error(\"newItem() was not passed an identity for the new item\");\r\n\t\t\t}\r\n\t\t\tif(lang.isArray(newIdentity)){\r\n\t\t\t\tthrow new Error(\"newItem() was not passed an single-valued identity\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// make sure this identity is not already in use by another item, if identifiers were\r\n\t\t// defined in the file.  Otherwise it would be the item count,\r\n\t\t// which should always be unique in this case.\r\n\t\tif(this._itemsByIdentity){\r\n\t\t\tthis._assert(typeof this._itemsByIdentity[newIdentity] === \"undefined\");\r\n\t\t}\r\n\t\tthis._assert(typeof this._pending._newItems[newIdentity] === \"undefined\");\r\n\t\tthis._assert(typeof this._pending._deletedItems[newIdentity] === \"undefined\");\r\n\r\n\t\tvar newItem = {};\r\n\t\tnewItem[this._storeRefPropName] = this;\r\n\t\tnewItem[this._itemNumPropName] = this._arrayOfAllItems.length;\r\n\t\tif(this._itemsByIdentity){\r\n\t\t\tthis._itemsByIdentity[newIdentity] = newItem;\r\n\t\t\t//We have to set the identifier now, otherwise we can't look it\r\n\t\t\t//up at calls to setValueorValues in parentInfo handling.\r\n\t\t\tnewItem[identifierAttribute] = [newIdentity];\r\n\t\t}\r\n\t\tthis._arrayOfAllItems.push(newItem);\r\n\r\n\t\t//We need to construct some data for the onNew call too...\r\n\t\tvar pInfo = null;\r\n\r\n\t\t// Now we need to check to see where we want to assign this thingm if any.\r\n\t\tif(parentInfo && parentInfo.parent && parentInfo.attribute){\r\n\t\t\tpInfo = {\r\n\t\t\t\titem: parentInfo.parent,\r\n\t\t\t\tattribute: parentInfo.attribute,\r\n\t\t\t\toldValue: undefined\r\n\t\t\t};\r\n\r\n\t\t\t//See if it is multi-valued or not and handle appropriately\r\n\t\t\t//Generally, all attributes are multi-valued for this store\r\n\t\t\t//So, we only need to append if there are already values present.\r\n\t\t\tvar values = this.getValues(parentInfo.parent, parentInfo.attribute);\r\n\t\t\tif(values && values.length > 0){\r\n\t\t\t\tvar tempValues = values.slice(0, values.length);\r\n\t\t\t\tif(values.length === 1){\r\n\t\t\t\t\tpInfo.oldValue = values[0];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpInfo.oldValue = values.slice(0, values.length);\r\n\t\t\t\t}\r\n\t\t\t\ttempValues.push(newItem);\r\n\t\t\t\tthis._setValueOrValues(parentInfo.parent, parentInfo.attribute, tempValues, false);\r\n\t\t\t\tpInfo.newValue = this.getValues(parentInfo.parent, parentInfo.attribute);\r\n\t\t\t}else{\r\n\t\t\t\tthis._setValueOrValues(parentInfo.parent, parentInfo.attribute, newItem, false);\r\n\t\t\t\tpInfo.newValue = newItem;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t//Toplevel item, add to both top list as well as all list.\r\n\t\t\tnewItem[this._rootItemPropName]=true;\r\n\t\t\tthis._arrayOfTopLevelItems.push(newItem);\r\n\t\t}\r\n\r\n\t\tthis._pending._newItems[newIdentity] = newItem;\r\n\r\n\t\t//Clone over the properties to the new item\r\n\t\tfor(var key in keywordArgs){\r\n\t\t\tif(key === this._storeRefPropName || key === this._itemNumPropName){\r\n\t\t\t\t// Bummer, the user is trying to do something like\r\n\t\t\t\t// newItem({_S:\"foo\"}).  Unfortunately, our superclass,\r\n\t\t\t\t// ItemFileReadStore, is already using _S in each of our items\r\n\t\t\t\t// to hold private info.  To avoid a naming collision, we\r\n\t\t\t\t// need to move all our private info to some other property\r\n\t\t\t\t// of all the items/objects.  So, we need to iterate over all\r\n\t\t\t\t// the items and do something like:\r\n\t\t\t\t//\t  item.__S = item._S;\r\n\t\t\t\t//\t  item._S = undefined;\r\n\t\t\t\t// But first we have to make sure the new \"__S\" variable is\r\n\t\t\t\t// not in use, which means we have to iterate over all the\r\n\t\t\t\t// items checking for that.\r\n\t\t\t\tthrow new Error(\"encountered bug in ItemFileWriteStore.newItem\");\r\n\t\t\t}\r\n\t\t\tvar value = keywordArgs[key];\r\n\t\t\tif(!lang.isArray(value)){\r\n\t\t\t\tvalue = [value];\r\n\t\t\t}\r\n\t\t\tnewItem[key] = value;\r\n\t\t\tif(this.referenceIntegrity){\r\n\t\t\t\tfor(var i = 0; i < value.length; i++){\r\n\t\t\t\t\tvar val = value[i];\r\n\t\t\t\t\tif(this.isItem(val)){\r\n\t\t\t\t\t\tthis._addReferenceToMap(val, newItem, key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.onNew(newItem, pInfo); // dojo/data/api/Notification call\r\n\t\treturn newItem; // item\r\n\t},\r\n\r\n\t_removeArrayElement: function(/* Array */ array, /* anything */ element){\r\n\t\tvar index = arrayUtil.indexOf(array, element);\r\n\t\tif(index != -1){\r\n\t\t\tarray.splice(index, 1);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tdeleteItem: function(/* dojo/data/api/Item */ item){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Write.deleteItem()\r\n\t\tthis._assert(!this._saveInProgress);\r\n\t\tthis._assertIsItem(item);\r\n\r\n\t\t// Remove this item from the _arrayOfAllItems, but leave a null value in place\r\n\t\t// of the item, so as not to change the length of the array, so that in newItem()\r\n\t\t// we can still safely do: newIdentity = this._arrayOfAllItems.length;\r\n\t\tvar indexInArrayOfAllItems = item[this._itemNumPropName];\r\n\t\tvar identity = this.getIdentity(item);\r\n\r\n\t\t//If we have reference integrity on, we need to do reference cleanup for the deleted item\r\n\t\tif(this.referenceIntegrity){\r\n\t\t\t//First scan all the attributes of this items for references and clean them up in the map\r\n\t\t\t//As this item is going away, no need to track its references anymore.\r\n\r\n\t\t\t//Get the attributes list before we generate the backup so it\r\n\t\t\t//doesn't pollute the attributes list.\r\n\t\t\tvar attributes = this.getAttributes(item);\r\n\r\n\t\t\t//Backup the map, we'll have to restore it potentially, in a revert.\r\n\t\t\tif(item[this._reverseRefMap]){\r\n\t\t\t\titem[\"backup_\" + this._reverseRefMap] = lang.clone(item[this._reverseRefMap]);\r\n\t\t\t}\r\n\r\n\t\t\t//TODO:  This causes a reversion problem.  This list won't be restored on revert since it is\r\n\t\t\t//attached to the 'value'. item, not ours.  Need to back tese up somehow too.\r\n\t\t\t//Maybe build a map of the backup of the entries and attach it to the deleted item to be restored\r\n\t\t\t//later.  Or just record them and call _addReferenceToMap on them in revert.\r\n\t\t\tarrayUtil.forEach(attributes, function(attribute){\r\n\t\t\t\tarrayUtil.forEach(this.getValues(item, attribute), function(value){\r\n\t\t\t\t\tif(this.isItem(value)){\r\n\t\t\t\t\t\t//We have to back up all the references we had to others so they can be restored on a revert.\r\n\t\t\t\t\t\tif(!item[\"backupRefs_\" + this._reverseRefMap]){\r\n\t\t\t\t\t\t\titem[\"backupRefs_\" + this._reverseRefMap] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\titem[\"backupRefs_\" + this._reverseRefMap].push({id: this.getIdentity(value), attr: attribute});\r\n\t\t\t\t\t\tthis._removeReferenceFromMap(value, item, attribute);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t}, this);\r\n\r\n\t\t\t//Next, see if we have references to this item, if we do, we have to clean them up too.\r\n\t\t\tvar references = item[this._reverseRefMap];\r\n\t\t\tif(references){\r\n\t\t\t\t//Look through all the items noted as references to clean them up.\r\n\t\t\t\tfor(var itemId in references){\r\n\t\t\t\t\tvar containingItem = null;\r\n\t\t\t\t\tif(this._itemsByIdentity){\r\n\t\t\t\t\t\tcontainingItem = this._itemsByIdentity[itemId];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcontainingItem = this._arrayOfAllItems[itemId];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//We have a reference to a containing item, now we have to process the\r\n\t\t\t\t\t//attributes and clear all references to the item being deleted.\r\n\t\t\t\t\tif(containingItem){\r\n\t\t\t\t\t\tfor(var attribute in references[itemId]){\r\n\t\t\t\t\t\t\tvar oldValues = this.getValues(containingItem, attribute) || [];\r\n\t\t\t\t\t\t\tvar newValues = arrayUtil.filter(oldValues, function(possibleItem){\r\n\t\t\t\t\t\t\t\treturn !(this.isItem(possibleItem) && this.getIdentity(possibleItem) == identity);\r\n\t\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\t\t//Remove the note of the reference to the item and set the values on the modified attribute.\r\n\t\t\t\t\t\t\tthis._removeReferenceFromMap(item, containingItem, attribute);\r\n\t\t\t\t\t\t\tif(newValues.length < oldValues.length){\r\n\t\t\t\t\t\t\t\tthis._setValueOrValues(containingItem, attribute, newValues, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._arrayOfAllItems[indexInArrayOfAllItems] = null;\r\n\r\n\t\titem[this._storeRefPropName] = null;\r\n\t\tif(this._itemsByIdentity){\r\n\t\t\tdelete this._itemsByIdentity[identity];\r\n\t\t}\r\n\t\tthis._pending._deletedItems[identity] = item;\r\n\r\n\t\t//Remove from the toplevel items, if necessary...\r\n\t\tif(item[this._rootItemPropName]){\r\n\t\t\tthis._removeArrayElement(this._arrayOfTopLevelItems, item);\r\n\t\t}\r\n\t\tthis.onDelete(item); // dojo/data/api/Notification call\r\n\t\treturn true;\r\n\t},\r\n\r\n\tsetValue: function(/* dojo/data/api/Item */ item, /* attribute-name-string */ attribute, /* almost anything */ value){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Write.set()\r\n\t\treturn this._setValueOrValues(item, attribute, value, true); // boolean\r\n\t},\r\n\r\n\tsetValues: function(/* dojo/data/api/Item */ item, /* attribute-name-string */ attribute, /* array */ values){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Write.setValues()\r\n\t\treturn this._setValueOrValues(item, attribute, values, true); // boolean\r\n\t},\r\n\r\n\tunsetAttribute: function(/* dojo/data/api/Item */ item, /* attribute-name-string */ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Write.unsetAttribute()\r\n\t\treturn this._setValueOrValues(item, attribute, [], true);\r\n\t},\r\n\r\n\t_setValueOrValues: function(/* dojo/data/api/Item */ item, /* attribute-name-string */ attribute, /* anything */ newValueOrValues, /*boolean?*/ callOnSet){\r\n\t\tthis._assert(!this._saveInProgress);\r\n\r\n\t\t// Check for valid arguments\r\n\t\tthis._assertIsItem(item);\r\n\t\tthis._assert(lang.isString(attribute));\r\n\t\tthis._assert(typeof newValueOrValues !== \"undefined\");\r\n\r\n\t\t// Make sure the user isn't trying to change the item's identity\r\n\t\tvar identifierAttribute = this._getIdentifierAttribute();\r\n\t\tif(attribute == identifierAttribute){\r\n\t\t\tthrow new Error(\"ItemFileWriteStore does not have support for changing the value of an item's identifier.\");\r\n\t\t}\r\n\r\n\t\t// To implement the Notification API, we need to make a note of what\r\n\t\t// the old attribute value was, so that we can pass that info when\r\n\t\t// we call the onSet method.\r\n\t\tvar oldValueOrValues = this._getValueOrValues(item, attribute);\r\n\r\n\t\tvar identity = this.getIdentity(item);\r\n\t\tif(!this._pending._modifiedItems[identity]){\r\n\t\t\t// Before we actually change the item, we make a copy of it to\r\n\t\t\t// record the original state, so that we'll be able to revert if\r\n\t\t\t// the revert method gets called.  If the item has already been\r\n\t\t\t// modified then there's no need to do this now, since we already\r\n\t\t\t// have a record of the original state.\r\n\t\t\tvar copyOfItemState = {};\r\n\t\t\tfor(var key in item){\r\n\t\t\t\tif((key === this._storeRefPropName) || (key === this._itemNumPropName) || (key === this._rootItemPropName)){\r\n\t\t\t\t\tcopyOfItemState[key] = item[key];\r\n\t\t\t\t}else if(key === this._reverseRefMap){\r\n\t\t\t\t\tcopyOfItemState[key] = lang.clone(item[key]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcopyOfItemState[key] = item[key].slice(0, item[key].length);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Now mark the item as dirty, and save the copy of the original state\r\n\t\t\tthis._pending._modifiedItems[identity] = copyOfItemState;\r\n\t\t}\r\n\r\n\t\t// Okay, now we can actually change this attribute on the item\r\n\t\tvar success = false;\r\n\r\n\t\tif(lang.isArray(newValueOrValues) && newValueOrValues.length === 0){\r\n\r\n\t\t\t// If we were passed an empty array as the value, that counts\r\n\t\t\t// as \"unsetting\" the attribute, so we need to remove this\r\n\t\t\t// attribute from the item.\r\n\t\t\tsuccess = delete item[attribute];\r\n\t\t\tnewValueOrValues = undefined; // used in the onSet Notification call below\r\n\r\n\t\t\tif(this.referenceIntegrity && oldValueOrValues){\r\n\t\t\t\tvar oldValues = oldValueOrValues;\r\n\t\t\t\tif(!lang.isArray(oldValues)){\r\n\t\t\t\t\toldValues = [oldValues];\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i = 0; i < oldValues.length; i++){\r\n\t\t\t\t\tvar value = oldValues[i];\r\n\t\t\t\t\tif(this.isItem(value)){\r\n\t\t\t\t\t\tthis._removeReferenceFromMap(value, item, attribute);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tvar newValueArray;\r\n\t\t\tif(lang.isArray(newValueOrValues)){\r\n\t\t\t\t// Unfortunately, it's not safe to just do this:\r\n\t\t\t\t//\t  newValueArray = newValueOrValues;\r\n\t\t\t\t// Instead, we need to copy the array, which slice() does very nicely.\r\n\t\t\t\t// This is so that our internal data structure won't\r\n\t\t\t\t// get corrupted if the user mucks with the values array *after*\r\n\t\t\t\t// calling setValues().\r\n\t\t\t\tnewValueArray = newValueOrValues.slice(0, newValueOrValues.length);\r\n\t\t\t}else{\r\n\t\t\t\tnewValueArray = [newValueOrValues];\r\n\t\t\t}\r\n\r\n\t\t\t//We need to handle reference integrity if this is on.\r\n\t\t\t//In the case of set, we need to see if references were added or removed\r\n\t\t\t//and update the reference tracking map accordingly.\r\n\t\t\tif(this.referenceIntegrity){\r\n\t\t\t\tif(oldValueOrValues){\r\n\t\t\t\t\tvar oldValues = oldValueOrValues;\r\n\t\t\t\t\tif(!lang.isArray(oldValues)){\r\n\t\t\t\t\t\toldValues = [oldValues];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//Use an associative map to determine what was added/removed from the list.\r\n\t\t\t\t\t//Should be O(n) performant.  First look at all the old values and make a list of them\r\n\t\t\t\t\t//Then for any item not in the old list, we add it.  If it was already present, we remove it.\r\n\t\t\t\t\t//Then we pass over the map and any references left it it need to be removed (IE, no match in\r\n\t\t\t\t\t//the new values list).\r\n\t\t\t\t\tvar map = {};\r\n\t\t\t\t\tarrayUtil.forEach(oldValues, function(possibleItem){\r\n\t\t\t\t\t\tif(this.isItem(possibleItem)){\r\n\t\t\t\t\t\t\tvar id = this.getIdentity(possibleItem);\r\n\t\t\t\t\t\t\tmap[id.toString()] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t\tarrayUtil.forEach(newValueArray, function(possibleItem){\r\n\t\t\t\t\t\tif(this.isItem(possibleItem)){\r\n\t\t\t\t\t\t\tvar id = this.getIdentity(possibleItem);\r\n\t\t\t\t\t\t\tif(map[id.toString()]){\r\n\t\t\t\t\t\t\t\tdelete map[id.toString()];\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis._addReferenceToMap(possibleItem, item, attribute);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t\tfor(var rId in map){\r\n\t\t\t\t\t\tvar removedItem;\r\n\t\t\t\t\t\tif(this._itemsByIdentity){\r\n\t\t\t\t\t\t\tremovedItem = this._itemsByIdentity[rId];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tremovedItem = this._arrayOfAllItems[rId];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._removeReferenceFromMap(removedItem, item, attribute);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//Everything is new (no old values) so we have to just\r\n\t\t\t\t\t//insert all the references, if any.\r\n\t\t\t\t\tfor(var i = 0; i < newValueArray.length; i++){\r\n\t\t\t\t\t\tvar value = newValueArray[i];\r\n\t\t\t\t\t\tif(this.isItem(value)){\r\n\t\t\t\t\t\t\tthis._addReferenceToMap(value, item, attribute);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\titem[attribute] = newValueArray;\r\n\t\t\tsuccess = true;\r\n\t\t}\r\n\r\n\t\t// Now we make the dojo/data/api/Notification call\r\n\t\tif(callOnSet){\r\n\t\t\tthis.onSet(item, attribute, oldValueOrValues, newValueOrValues);\r\n\t\t}\r\n\t\treturn success; // boolean\r\n\t},\r\n\r\n\t_addReferenceToMap: function(/* dojo/data/api/Item */ refItem, /* dojo/data/api/Item */ parentItem, /* string */ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tMethod to add an reference map entry for an item and attribute.\r\n\t\t// description:\r\n\t\t//\t\tMethod to add an reference map entry for an item and attribute.\r\n\t\t// refItem:\r\n\t\t//\t\tThe item that is referenced.\r\n\t\t// parentItem:\r\n\t\t//\t\tThe item that holds the new reference to refItem.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute on parentItem that contains the new reference.\r\n\r\n\t\tvar parentId = this.getIdentity(parentItem);\r\n\t\tvar references = refItem[this._reverseRefMap];\r\n\r\n\t\tif(!references){\r\n\t\t\treferences = refItem[this._reverseRefMap] = {};\r\n\t\t}\r\n\t\tvar itemRef = references[parentId];\r\n\t\tif(!itemRef){\r\n\t\t\titemRef = references[parentId] = {};\r\n\t\t}\r\n\t\titemRef[attribute] = true;\r\n\t},\r\n\r\n\t_removeReferenceFromMap: function(/* dojo/data/api/Item */ refItem, /* dojo/data/api/Item */ parentItem, /* string */ attribute){\r\n\t\t// summary:\r\n\t\t//\t\tMethod to remove an reference map entry for an item and attribute.\r\n\t\t// description:\r\n\t\t//\t\tMethod to remove an reference map entry for an item and attribute.  This will\r\n\t\t//\t\talso perform cleanup on the map such that if there are no more references at all to\r\n\t\t//\t\tthe item, its reference object and entry are removed.\r\n\t\t// refItem:\r\n\t\t//\t\tThe item that is referenced.\r\n\t\t// parentItem:\r\n\t\t//\t\tThe item holding a reference to refItem.\r\n\t\t// attribute:\r\n\t\t//\t\tThe attribute on parentItem that contains the reference.\r\n\t\tvar identity = this.getIdentity(parentItem);\r\n\t\tvar references = refItem[this._reverseRefMap];\r\n\t\tvar itemId;\r\n\t\tif(references){\r\n\t\t\tfor(itemId in references){\r\n\t\t\t\tif(itemId == identity){\r\n\t\t\t\t\tdelete references[itemId][attribute];\r\n\t\t\t\t\tif(this._isEmpty(references[itemId])){\r\n\t\t\t\t\t\tdelete references[itemId];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this._isEmpty(references)){\r\n\t\t\t\tdelete refItem[this._reverseRefMap];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_dumpReferenceMap: function(){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to dump the reverse reference map of all items in the store for debug purposes.\r\n\t\t// description:\r\n\t\t//\t\tFunction to dump the reverse reference map of all items in the store for debug purposes.\r\n\t\tvar i;\r\n\t\tfor(i = 0; i < this._arrayOfAllItems.length; i++){\r\n\t\t\tvar item = this._arrayOfAllItems[i];\r\n\t\t\tif(item && item[this._reverseRefMap]){\r\n\t\t\t\tconsole.log(\"Item: [\" + this.getIdentity(item) + \"] is referenced by: \" + jsonUtil.toJson(item[this._reverseRefMap]));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_getValueOrValues: function(/* dojo/data/api/Item */ item, /* attribute-name-string */ attribute){\r\n\t\tvar valueOrValues = undefined;\r\n\t\tif(this.hasAttribute(item, attribute)){\r\n\t\t\tvar valueArray = this.getValues(item, attribute);\r\n\t\t\tif(valueArray.length == 1){\r\n\t\t\t\tvalueOrValues = valueArray[0];\r\n\t\t\t}else{\r\n\t\t\t\tvalueOrValues = valueArray;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn valueOrValues;\r\n\t},\r\n\r\n\t_flatten: function(/* anything */ value){\r\n\t\tif(this.isItem(value)){\r\n\t\t\t// Given an item, return an serializable object that provides a\r\n\t\t\t// reference to the item.\r\n\t\t\t// For example, given kermit:\r\n\t\t\t//\t  var kermit = store.newItem({id:2, name:\"Kermit\"});\r\n\t\t\t// we want to return\r\n\t\t\t//\t  {_reference:2}\r\n\t\t\treturn {_reference: this.getIdentity(value)};\r\n\t\t}else{\r\n\t\t\tif(typeof value === \"object\"){\r\n\t\t\t\tfor(var type in this._datatypeMap){\r\n\t\t\t\t\tvar typeMap = this._datatypeMap[type];\r\n\t\t\t\t\tif(lang.isObject(typeMap) && !lang.isFunction(typeMap)){\r\n\t\t\t\t\t\tif(value instanceof typeMap.type){\r\n\t\t\t\t\t\t\tif(!typeMap.serialize){\r\n\t\t\t\t\t\t\t\tthrow new Error(\"ItemFileWriteStore:  No serializer defined for type mapping: [\" + type + \"]\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn {_type: type, _value: typeMap.serialize(value)};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(value instanceof typeMap){\r\n\t\t\t\t\t\t//SImple mapping, therefore, return as a toString serialization.\r\n\t\t\t\t\t\treturn {_type: type, _value: value.toString()};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\r\n\t_getNewFileContentString: function(){\r\n\t\t// summary:\r\n\t\t//\t\tGenerate a string that can be saved to a file.\r\n\t\t//\t\tThe result should look similar to:\r\n\t\t//\t\thttp://trac.dojotoolkit.org/browser/dojo/trunk/tests/data/countries.json\r\n\t\tvar serializableStructure = {};\r\n\r\n\t\tvar identifierAttribute = this._getIdentifierAttribute();\r\n\t\tif(identifierAttribute !== Number){\r\n\t\t\tserializableStructure.identifier = identifierAttribute;\r\n\t\t}\r\n\t\tif(this._labelAttr){\r\n\t\t\tserializableStructure.label = this._labelAttr;\r\n\t\t}\r\n\t\tserializableStructure.items = [];\r\n\t\tfor(var i = 0; i < this._arrayOfAllItems.length; ++i){\r\n\t\t\tvar item = this._arrayOfAllItems[i];\r\n\t\t\tif(item !== null){\r\n\t\t\t\tvar serializableItem = {};\r\n\t\t\t\tfor(var key in item){\r\n\t\t\t\t\tif(key !== this._storeRefPropName && key !== this._itemNumPropName && key !== this._reverseRefMap && key !== this._rootItemPropName){\r\n\t\t\t\t\t\tvar valueArray = this.getValues(item, key);\r\n\t\t\t\t\t\tif(valueArray.length == 1){\r\n\t\t\t\t\t\t\tserializableItem[key] = this._flatten(valueArray[0]);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar serializableArray = [];\r\n\t\t\t\t\t\t\tfor(var j = 0; j < valueArray.length; ++j){\r\n\t\t\t\t\t\t\t\tserializableArray.push(this._flatten(valueArray[j]));\r\n\t\t\t\t\t\t\t\tserializableItem[key] = serializableArray;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tserializableStructure.items.push(serializableItem);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar prettyPrint = true;\r\n\t\treturn jsonUtil.toJson(serializableStructure, prettyPrint);\r\n\t},\r\n\r\n\t_isEmpty: function(something){\r\n\t\t// summary:\r\n\t\t//\t\tFunction to determine if an array or object has no properties or values.\r\n\t\t// something:\r\n\t\t//\t\tThe array or object to examine.\r\n\t\tvar empty = true;\r\n\t\tif(lang.isObject(something)){\r\n\t\t\tvar i;\r\n\t\t\tfor(i in something){\r\n\t\t\t\tempty = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}else if(lang.isArray(something)){\r\n\t\t\tif(something.length > 0){\r\n\t\t\t\tempty = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn empty; //boolean\r\n\t},\r\n\r\n\tsave: function(/* object */ keywordArgs){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Write.save()\r\n\t\tthis._assert(!this._saveInProgress);\r\n\r\n\t\t// this._saveInProgress is set to true, briefly, from when save is first called to when it completes\r\n\t\tthis._saveInProgress = true;\r\n\r\n\t\tvar self = this;\r\n\t\tvar saveCompleteCallback = function(){\r\n\t\t\tself._pending = {\r\n\t\t\t\t_newItems:{},\r\n\t\t\t\t_modifiedItems:{},\r\n\t\t\t\t_deletedItems:{}\r\n\t\t\t};\r\n\r\n\t\t\tself._saveInProgress = false; // must come after this._pending is cleared, but before any callbacks\r\n\t\t\tif(keywordArgs && keywordArgs.onComplete){\r\n\t\t\t\tvar scope = keywordArgs.scope || kernel.global;\r\n\t\t\t\tkeywordArgs.onComplete.call(scope);\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar saveFailedCallback = function(err){\r\n\t\t\tself._saveInProgress = false;\r\n\t\t\tif(keywordArgs && keywordArgs.onError){\r\n\t\t\t\tvar scope = keywordArgs.scope || kernel.global;\r\n\t\t\t\tkeywordArgs.onError.call(scope, err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif(this._saveEverything){\r\n\t\t\tvar newFileContentString = this._getNewFileContentString();\r\n\t\t\tthis._saveEverything(saveCompleteCallback, saveFailedCallback, newFileContentString);\r\n\t\t}\r\n\t\tif(this._saveCustom){\r\n\t\t\tthis._saveCustom(saveCompleteCallback, saveFailedCallback);\r\n\t\t}\r\n\t\tif(!this._saveEverything && !this._saveCustom){\r\n\t\t\t// Looks like there is no user-defined save-handler function.\r\n\t\t\t// That's fine, it just means the datastore is acting as a \"mock-write\"\r\n\t\t\t// store -- changes get saved in memory but don't get saved to disk.\r\n\t\t\tsaveCompleteCallback();\r\n\t\t}\r\n\t},\r\n\r\n\trevert: function(){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Write.revert()\r\n\t\tthis._assert(!this._saveInProgress);\r\n\r\n\t\tvar identity;\r\n\t\tfor(identity in this._pending._modifiedItems){\r\n\t\t\t// find the original item and the modified item that replaced it\r\n\t\t\tvar copyOfItemState = this._pending._modifiedItems[identity];\r\n\t\t\tvar modifiedItem = null;\r\n\t\t\tif(this._itemsByIdentity){\r\n\t\t\t\tmodifiedItem = this._itemsByIdentity[identity];\r\n\t\t\t}else{\r\n\t\t\t\tmodifiedItem = this._arrayOfAllItems[identity];\r\n\t\t\t}\r\n\r\n\t\t\t// Restore the original item into a full-fledged item again, we want to try to\r\n\t\t\t// keep the same object instance as if we don't it, causes bugs like #9022.\r\n\t\t\tcopyOfItemState[this._storeRefPropName] = this;\r\n\t\t\tfor(var key in modifiedItem){\r\n\t\t\t\tdelete modifiedItem[key];\r\n\t\t\t}\r\n\t\t\tlang.mixin(modifiedItem, copyOfItemState);\r\n\t\t}\r\n\t\tvar deletedItem;\r\n\t\tfor(identity in this._pending._deletedItems){\r\n\t\t\tdeletedItem = this._pending._deletedItems[identity];\r\n\t\t\tdeletedItem[this._storeRefPropName] = this;\r\n\t\t\tvar index = deletedItem[this._itemNumPropName];\r\n\r\n\t\t\t//Restore the reverse refererence map, if any.\r\n\t\t\tif(deletedItem[\"backup_\" + this._reverseRefMap]){\r\n\t\t\t\tdeletedItem[this._reverseRefMap] = deletedItem[\"backup_\" + this._reverseRefMap];\r\n\t\t\t\tdelete deletedItem[\"backup_\" + this._reverseRefMap];\r\n\t\t\t}\r\n\t\t\tthis._arrayOfAllItems[index] = deletedItem;\r\n\t\t\tif(this._itemsByIdentity){\r\n\t\t\t\tthis._itemsByIdentity[identity] = deletedItem;\r\n\t\t\t}\r\n\t\t\tif(deletedItem[this._rootItemPropName]){\r\n\t\t\t\tthis._arrayOfTopLevelItems.push(deletedItem);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//We have to pass through it again and restore the reference maps after all the\r\n\t\t//undeletes have occurred.\r\n\t\tfor(identity in this._pending._deletedItems){\r\n\t\t\tdeletedItem = this._pending._deletedItems[identity];\r\n\t\t\tif(deletedItem[\"backupRefs_\" + this._reverseRefMap]){\r\n\t\t\t\tarrayUtil.forEach(deletedItem[\"backupRefs_\" + this._reverseRefMap], function(reference){\r\n\t\t\t\t\tvar refItem;\r\n\t\t\t\t\tif(this._itemsByIdentity){\r\n\t\t\t\t\t\trefItem = this._itemsByIdentity[reference.id];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trefItem = this._arrayOfAllItems[reference.id];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._addReferenceToMap(refItem, deletedItem, reference.attr);\r\n\t\t\t\t}, this);\r\n\t\t\t\tdelete deletedItem[\"backupRefs_\" + this._reverseRefMap];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(identity in this._pending._newItems){\r\n\t\t\tvar newItem = this._pending._newItems[identity];\r\n\t\t\tnewItem[this._storeRefPropName] = null;\r\n\t\t\t// null out the new item, but don't change the array index so\r\n\t\t\t// so we can keep using _arrayOfAllItems.length.\r\n\t\t\tthis._arrayOfAllItems[newItem[this._itemNumPropName]] = null;\r\n\t\t\tif(newItem[this._rootItemPropName]){\r\n\t\t\t\tthis._removeArrayElement(this._arrayOfTopLevelItems, newItem);\r\n\t\t\t}\r\n\t\t\tif(this._itemsByIdentity){\r\n\t\t\t\tdelete this._itemsByIdentity[identity];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._pending = {\r\n\t\t\t_newItems:{},\r\n\t\t\t_modifiedItems:{},\r\n\t\t\t_deletedItems:{}\r\n\t\t};\r\n\t\treturn true; // boolean\r\n\t},\r\n\r\n\tisDirty: function(/* item? */ item){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Write.isDirty()\r\n\t\tif(item){\r\n\t\t\t// return true if the item is dirty\r\n\t\t\tvar identity = this.getIdentity(item);\r\n\t\t\treturn new Boolean(this._pending._newItems[identity] ||\r\n\t\t\t\tthis._pending._modifiedItems[identity] ||\r\n\t\t\t\tthis._pending._deletedItems[identity]).valueOf(); // boolean\r\n\t\t}else{\r\n\t\t\t// return true if the store is dirty -- which means return true\r\n\t\t\t// if there are any new items, dirty items, or modified items\r\n\t\t\treturn !this._isEmpty(this._pending._newItems) ||\r\n\t\t\t\t!this._isEmpty(this._pending._modifiedItems) ||\r\n\t\t\t\t!this._isEmpty(this._pending._deletedItems); // boolean\r\n\t\t}\r\n\t},\r\n\r\n/* dojo/data/api/Notification */\r\n\r\n\tonSet: function(/* dojo/data/api/Item */ item,\r\n\t\t\t\t\t/*attribute-name-string*/ attribute,\r\n\t\t\t\t\t/*object|array*/ oldValue,\r\n\t\t\t\t\t/*object|array*/ newValue){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Notification.onSet()\r\n\r\n\t\t// No need to do anything. This method is here just so that the\r\n\t\t// client code can connect observers to it.\r\n\t},\r\n\r\n\tonNew: function(/* dojo/data/api/Item */ newItem, /*object?*/ parentInfo){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Notification.onNew()\r\n\r\n\t\t// No need to do anything. This method is here just so that the\r\n\t\t// client code can connect observers to it.\r\n\t},\r\n\r\n\tonDelete: function(/* dojo/data/api/Item */ deletedItem){\r\n\t\t// summary:\r\n\t\t//\t\tSee dojo/data/api/Notification.onDelete()\r\n\r\n\t\t// No need to do anything. This method is here just so that the\r\n\t\t// client code can connect observers to it.\r\n\t},\r\n\r\n\tclose: function(/* object? */ request){\r\n\t\t // summary:\r\n\t\t //\t\tOver-ride of base close function of ItemFileReadStore to add in check for store state.\r\n\t\t // description:\r\n\t\t //\t\tOver-ride of base close function of ItemFileReadStore to add in check for store state.\r\n\t\t //\t\tIf the store is still dirty (unsaved changes), then an error will be thrown instead of\r\n\t\t //\t\tclearing the internal state for reload from the url.\r\n\r\n\t\t //Clear if not dirty ... or throw an error\r\n\t\t if(this.clearOnClose){\r\n\t\t\t if(!this.isDirty()){\r\n\t\t\t\t this.inherited(arguments);\r\n\t\t\t }else{\r\n\t\t\t\t //Only throw an error if the store was dirty and we were loading from a url (cannot reload from url until state is saved).\r\n\t\t\t\t throw new Error(\"dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.\");\r\n\t\t\t }\r\n\t\t }\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/dnd/Avatar',[\r\n\t\"../_base/declare\",\r\n\t\"../_base/window\",\r\n\t\"../dom\",\r\n\t\"../dom-attr\",\r\n\t\"../dom-class\",\r\n\t\"../dom-construct\",\r\n\t\"../hccss\",\r\n\t\"../query\"\r\n], function(declare, win, dom, domAttr, domClass, domConstruct, has, query){\r\n\r\n// module:\r\n//\t\tdojo/dnd/Avatar\r\n\r\nreturn declare(\"dojo.dnd.Avatar\", null, {\r\n\t// summary:\r\n\t//\t\tObject that represents transferred DnD items visually\r\n\t// manager: Object\r\n\t//\t\ta DnD manager object\r\n\r\n\tconstructor: function(manager){\r\n\t\tthis.manager = manager;\r\n\t\tthis.construct();\r\n\t},\r\n\r\n\t// methods\r\n\tconstruct: function(){\r\n\t\t// summary:\r\n\t\t//\t\tconstructor function;\r\n\t\t//\t\tit is separate so it can be (dynamically) overwritten in case of need\r\n\r\n\t\tvar a = domConstruct.create(\"table\", {\r\n\t\t\t\t\"class\": \"dojoDndAvatar\",\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\tzIndex:   \"1999\",\r\n\t\t\t\t\tmargin:   \"0px\"\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tsource = this.manager.source, node,\r\n\t\t\tb = domConstruct.create(\"tbody\", null, a),\r\n\t\t\ttr = domConstruct.create(\"tr\", null, b),\r\n\t\t\ttd = domConstruct.create(\"td\", null, tr),\r\n\t\t\tk = Math.min(5, this.manager.nodes.length), i = 0;\r\n\r\n\t\tif(has(\"highcontrast\")){\r\n\t\t\tdomConstruct.create(\"span\", {\r\n\t\t\t\tid : \"a11yIcon\",\r\n\t\t\t\tinnerHTML : this.manager.copy ? '+' : \"<\"\r\n\t\t\t}, td)\r\n\t\t}\r\n\t\tdomConstruct.create(\"span\", {\r\n\t\t\tinnerHTML: source.generateText ? this._generateText() : \"\"\r\n\t\t}, td);\r\n\r\n\t\t// we have to set the opacity on IE only after the node is live\r\n\t\tdomAttr.set(tr, {\r\n\t\t\t\"class\": \"dojoDndAvatarHeader\",\r\n\t\t\tstyle: {opacity: 0.9}\r\n\t\t});\r\n\t\tfor(; i < k; ++i){\r\n\t\t\tif(source.creator){\r\n\t\t\t\t// create an avatar representation of the node\r\n\t\t\t\tnode = source._normalizedCreator(source.getItem(this.manager.nodes[i].id).data, \"avatar\").node;\r\n\t\t\t}else{\r\n\t\t\t\t// or just clone the node and hope it works\r\n\t\t\t\tnode = this.manager.nodes[i].cloneNode(true);\r\n\t\t\t\tif(node.tagName.toLowerCase() == \"tr\"){\r\n\t\t\t\t\t// insert extra table nodes\r\n\t\t\t\t\tvar table = domConstruct.create(\"table\"),\r\n\t\t\t\t\t\ttbody = domConstruct.create(\"tbody\", null, table);\r\n\t\t\t\t\ttbody.appendChild(node);\r\n\t\t\t\t\tnode = table;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnode.id = \"\";\r\n\t\t\ttr = domConstruct.create(\"tr\", null, b);\r\n\t\t\ttd = domConstruct.create(\"td\", null, tr);\r\n\t\t\ttd.appendChild(node);\r\n\t\t\tdomAttr.set(tr, {\r\n\t\t\t\t\"class\": \"dojoDndAvatarItem\",\r\n\t\t\t\tstyle: {opacity: (9 - i) / 10}\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.node = a;\r\n\t},\r\n\tdestroy: function(){\r\n\t\t// summary:\r\n\t\t//\t\tdestructor for the avatar; called to remove all references so it can be garbage-collected\r\n\t\tdomConstruct.destroy(this.node);\r\n\t\tthis.node = false;\r\n\t},\r\n\tupdate: function(){\r\n\t\t// summary:\r\n\t\t//\t\tupdates the avatar to reflect the current DnD state\r\n\t\tdomClass.toggle(this.node, \"dojoDndAvatarCanDrop\", this.manager.canDropFlag);\r\n\t\tif(has(\"highcontrast\")){\r\n\t\t\tvar icon = dom.byId(\"a11yIcon\");\r\n\t\t\tvar text = '+';   // assume canDrop && copy\r\n\t\t\tif (this.manager.canDropFlag && !this.manager.copy){\r\n\t\t\t\ttext = '< '; // canDrop && move\r\n\t\t\t}else if (!this.manager.canDropFlag && !this.manager.copy){\r\n\t\t\t\ttext = \"o\"; //!canDrop && move\r\n\t\t\t}else if(!this.manager.canDropFlag){\r\n\t\t\t\ttext = 'x';  // !canDrop && copy\r\n\t\t\t}\r\n\t\t\ticon.innerHTML=text;\r\n\t\t}\r\n\t\t// replace text\r\n\t\tquery((\"tr.dojoDndAvatarHeader td span\" +(has(\"highcontrast\") ? \" span\" : \"\")), this.node).forEach(\r\n\t\t\tfunction(node){\r\n\t\t\t\tnode.innerHTML = this.manager.source.generateText ? this._generateText() : \"\";\r\n\t\t\t}, this);\r\n\t},\r\n\t_generateText: function(){\r\n\t\t// summary:\r\n\t\t//\t\tgenerates a proper text to reflect copying or moving of items\r\n\t\treturn this.manager.nodes.length.toString();\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/dnd/common',[\"../sniff\", \"../_base/kernel\", \"../_base/lang\", \"../dom\"],\r\n\tfunction(has, kernel, lang, dom){\r\n\r\n// module:\r\n//\t\tdojo/dnd/common\r\n\r\nvar exports = lang.getObject(\"dojo.dnd\", true);\r\n/*=====\r\n// TODO: for 2.0, replace line above with this code.\r\nvar exports = {\r\n\t// summary:\r\n\t//\t\tTODOC\r\n};\r\n=====*/\r\n\r\nexports.getCopyKeyState = function(evt){\r\n\treturn evt[has(\"mac\") ? \"metaKey\" : \"ctrlKey\"]\r\n};\r\n\r\nexports._uniqueId = 0;\r\nexports.getUniqueId = function(){\r\n\t// summary:\r\n\t//\t\treturns a unique string for use with any DOM element\r\n\tvar id;\r\n\tdo{\r\n\t\tid = kernel._scopeName + \"Unique\" + (++exports._uniqueId);\r\n\t}while(dom.byId(id));\r\n\treturn id;\r\n};\r\n\r\nexports._empty = {};\r\n\r\nexports.isFormElement = function(/*Event*/ e){\r\n\t// summary:\r\n\t//\t\treturns true if user clicked on a form element\r\n\tvar t = e.target;\r\n\tif(t.nodeType == 3 /*TEXT_NODE*/){\r\n\t\tt = t.parentNode;\r\n\t}\r\n\treturn \" a button textarea input select option \".indexOf(\" \" + t.tagName.toLowerCase() + \" \") >= 0;\t// Boolean\r\n};\r\n\r\nreturn exports;\r\n});\r\n\ndefine('dojo/dnd/autoscroll',[\"../_base/lang\", \"../sniff\", \"../_base/window\", \"../dom-geometry\", \"../dom-style\", \"../window\"],\r\n\tfunction(lang, has, win, domGeom, domStyle, winUtils){\r\n\r\n// module:\r\n//\t\tdojo/dnd/autoscroll\r\n\r\nvar exports = {\r\n\t// summary:\r\n\t//\t\tUsed by dojo/dnd/Manager to scroll document or internal node when the user\r\n\t//\t\tdrags near the edge of the viewport or a scrollable node\r\n};\r\nlang.setObject(\"dojo.dnd.autoscroll\", exports);\r\n\r\nexports.getViewport = winUtils.getBox;\r\n\r\nexports.V_TRIGGER_AUTOSCROLL = 32;\r\nexports.H_TRIGGER_AUTOSCROLL = 32;\r\n\r\nexports.V_AUTOSCROLL_VALUE = 16;\r\nexports.H_AUTOSCROLL_VALUE = 16;\r\n\r\n// These are set by autoScrollStart().\r\n// Set to default values in case autoScrollStart() isn't called. (back-compat, remove for 2.0)\r\nvar viewport,\r\n\tdoc = win.doc,\r\n\tmaxScrollTop = Infinity,\r\n\tmaxScrollLeft = Infinity;\r\n\r\nexports.autoScrollStart = function(d){\r\n\t// summary:\r\n\t//\t\tCalled at the start of a drag.\r\n\t// d: Document\r\n\t//\t\tThe document of the node being dragged.\r\n\r\n\tdoc = d;\r\n\tviewport = winUtils.getBox(doc);\r\n\r\n\t// Save height/width of document at start of drag, before it gets distorted by a user dragging an avatar past\r\n\t// the document's edge\r\n\tvar html = win.body(doc).parentNode;\r\n\tmaxScrollTop = Math.max(html.scrollHeight - viewport.h, 0);\r\n\tmaxScrollLeft = Math.max(html.scrollWidth - viewport.w, 0);\t// usually 0\r\n};\r\n\r\nexports.autoScroll = function(e){\r\n\t// summary:\r\n\t//\t\ta handler for mousemove and touchmove events, which scrolls the window, if\r\n\t//\t\tnecessary\r\n\t// e: Event\r\n\t//\t\tmousemove/touchmove event\r\n\r\n\t// FIXME: needs more docs!\r\n\tvar v = viewport || winUtils.getBox(doc), // getBox() call for back-compat, in case autoScrollStart() wasn't called\r\n\t\thtml = win.body(doc).parentNode,\r\n\t\tdx = 0, dy = 0;\r\n\tif(e.clientX < exports.H_TRIGGER_AUTOSCROLL){\r\n\t\tdx = -exports.H_AUTOSCROLL_VALUE;\r\n\t}else if(e.clientX > v.w - exports.H_TRIGGER_AUTOSCROLL){\r\n\t\tdx = Math.min(exports.H_AUTOSCROLL_VALUE, maxScrollLeft - html.scrollLeft);\t// don't scroll past edge of doc\r\n\t}\r\n\tif(e.clientY < exports.V_TRIGGER_AUTOSCROLL){\r\n\t\tdy = -exports.V_AUTOSCROLL_VALUE;\r\n\t}else if(e.clientY > v.h - exports.V_TRIGGER_AUTOSCROLL){\r\n\t\tdy = Math.min(exports.V_AUTOSCROLL_VALUE, maxScrollTop - html.scrollTop);\t// don't scroll past edge of doc\r\n\t}\r\n\twindow.scrollBy(dx, dy);\r\n};\r\n\r\nexports._validNodes = {\"div\": 1, \"p\": 1, \"td\": 1};\r\nexports._validOverflow = {\"auto\": 1, \"scroll\": 1};\r\n\r\nexports.autoScrollNodes = function(e){\r\n\t// summary:\r\n\t//\t\ta handler for mousemove and touchmove events, which scrolls the first available\r\n\t//\t\tDom element, it falls back to exports.autoScroll()\r\n\t// e: Event\r\n\t//\t\tmousemove/touchmove event\r\n\r\n\t// FIXME: needs more docs!\r\n\r\n\tvar b, t, w, h, rx, ry, dx = 0, dy = 0, oldLeft, oldTop;\r\n\r\n\tfor(var n = e.target; n;){\r\n\t\tif(n.nodeType == 1 && (n.tagName.toLowerCase() in exports._validNodes)){\r\n\t\t\tvar s = domStyle.getComputedStyle(n),\r\n\t\t\t\toverflow = (s.overflow.toLowerCase() in exports._validOverflow),\r\n\t\t\t\toverflowX = (s.overflowX.toLowerCase() in exports._validOverflow),\r\n\t\t\t\toverflowY = (s.overflowY.toLowerCase() in exports._validOverflow);\r\n\t\t\tif(overflow || overflowX || overflowY){\r\n\t\t\t\tb = domGeom.getContentBox(n, s);\r\n\t\t\t\tt = domGeom.position(n, true);\r\n\t\t\t}\r\n\t\t\t// overflow-x\r\n\t\t\tif(overflow || overflowX){\r\n\t\t\t\tw = Math.min(exports.H_TRIGGER_AUTOSCROLL, b.w / 2);\r\n\t\t\t\trx = e.pageX - t.x;\r\n\t\t\t\tif(has(\"webkit\") || has(\"opera\")){\r\n\t\t\t\t\t// FIXME: this code should not be here, it should be taken into account\r\n\t\t\t\t\t// either by the event fixing code, or the domGeom.position()\r\n\t\t\t\t\t// FIXME: this code doesn't work on Opera 9.5 Beta\r\n\t\t\t\t\trx += win.body().scrollLeft;\r\n\t\t\t\t}\r\n\t\t\t\tdx = 0;\r\n\t\t\t\tif(rx > 0 && rx < b.w){\r\n\t\t\t\t\tif(rx < w){\r\n\t\t\t\t\t\tdx = -w;\r\n\t\t\t\t\t}else if(rx > b.w - w){\r\n\t\t\t\t\t\tdx = w;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toldLeft = n.scrollLeft;\r\n\t\t\t\t\tn.scrollLeft = n.scrollLeft + dx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// overflow-y\r\n\t\t\tif(overflow || overflowY){\r\n\t\t\t\t//console.log(b.l, b.t, t.x, t.y, n.scrollLeft, n.scrollTop);\r\n\t\t\t\th = Math.min(exports.V_TRIGGER_AUTOSCROLL, b.h / 2);\r\n\t\t\t\try = e.pageY - t.y;\r\n\t\t\t\tif(has(\"webkit\") || has(\"opera\")){\r\n\t\t\t\t\t// FIXME: this code should not be here, it should be taken into account\r\n\t\t\t\t\t// either by the event fixing code, or the domGeom.position()\r\n\t\t\t\t\t// FIXME: this code doesn't work on Opera 9.5 Beta\r\n\t\t\t\t\try += win.body().scrollTop;\r\n\t\t\t\t}\r\n\t\t\t\tdy = 0;\r\n\t\t\t\tif(ry > 0 && ry < b.h){\r\n\t\t\t\t\tif(ry < h){\r\n\t\t\t\t\t\tdy = -h;\r\n\t\t\t\t\t}else if(ry > b.h - h){\r\n\t\t\t\t\t\tdy = h;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toldTop = n.scrollTop;\r\n\t\t\t\t\tn.scrollTop  = n.scrollTop  + dy;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(dx || dy){ return; }\r\n\t\t}\r\n\t\ttry{\r\n\t\t\tn = n.parentNode;\r\n\t\t}catch(x){\r\n\t\t\tn = null;\r\n\t\t}\r\n\t}\r\n\texports.autoScroll(e);\r\n};\r\n\r\nreturn exports;\r\n\r\n});\r\n\ndefine('dojo/dnd/Manager',[\r\n\t\"../_base/array\",  \"../_base/declare\", \"../_base/lang\", \"../_base/window\",\r\n\t\"../dom-class\", \"../Evented\", \"../has\", \"../keys\", \"../on\", \"../topic\", \"../touch\",\r\n\t\"./common\", \"./autoscroll\", \"./Avatar\"\r\n], function(array, declare, lang, win, domClass, Evented, has, keys, on, topic, touch,\r\n\tdnd, autoscroll, Avatar){\r\n\r\n// module:\r\n//\t\tdojo/dnd/Manager\r\n\r\nvar Manager = declare(\"dojo.dnd.Manager\", [Evented], {\r\n\t// summary:\r\n\t//\t\tthe manager of DnD operations (usually a singleton)\r\n\tconstructor: function(){\r\n\t\tthis.avatar  = null;\r\n\t\tthis.source = null;\r\n\t\tthis.nodes = [];\r\n\t\tthis.copy  = true;\r\n\t\tthis.target = null;\r\n\t\tthis.canDropFlag = false;\r\n\t\tthis.events = [];\r\n\t},\r\n\r\n\t// avatar's offset from the mouse\r\n\tOFFSET_X: has(\"touch\") ? 0 : 16,\r\n\tOFFSET_Y: has(\"touch\") ? -64 : 16,\r\n\r\n\t// methods\r\n\toverSource: function(source){\r\n\t\t// summary:\r\n\t\t//\t\tcalled when a source detected a mouse-over condition\r\n\t\t// source: Object\r\n\t\t//\t\tthe reporter\r\n\t\tif(this.avatar){\r\n\t\t\tthis.target = (source && source.targetState != \"Disabled\") ? source : null;\r\n\t\t\tthis.canDropFlag = Boolean(this.target);\r\n\t\t\tthis.avatar.update();\r\n\t\t}\r\n\t\ttopic.publish(\"/dnd/source/over\", source);\r\n\t},\r\n\toutSource: function(source){\r\n\t\t// summary:\r\n\t\t//\t\tcalled when a source detected a mouse-out condition\r\n\t\t// source: Object\r\n\t\t//\t\tthe reporter\r\n\t\tif(this.avatar){\r\n\t\t\tif(this.target == source){\r\n\t\t\t\tthis.target = null;\r\n\t\t\t\tthis.canDropFlag = false;\r\n\t\t\t\tthis.avatar.update();\r\n\t\t\t\ttopic.publish(\"/dnd/source/over\", null);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\ttopic.publish(\"/dnd/source/over\", null);\r\n\t\t}\r\n\t},\r\n\tstartDrag: function(source, nodes, copy){\r\n\t\t// summary:\r\n\t\t//\t\tcalled to initiate the DnD operation\r\n\t\t// source: Object\r\n\t\t//\t\tthe source which provides items\r\n\t\t// nodes: Array\r\n\t\t//\t\tthe list of transferred items\r\n\t\t// copy: Boolean\r\n\t\t//\t\tcopy items, if true, move items otherwise\r\n\r\n\t\t// Tell autoscroll that a drag is starting\r\n\t\tautoscroll.autoScrollStart(win.doc);\r\n\r\n\t\tthis.source = source;\r\n\t\tthis.nodes  = nodes;\r\n\t\tthis.copy   = Boolean(copy); // normalizing to true boolean\r\n\t\tthis.avatar = this.makeAvatar();\r\n\t\twin.body().appendChild(this.avatar.node);\r\n\t\ttopic.publish(\"/dnd/start\", source, nodes, this.copy);\r\n\r\n\t\tfunction stopEvent(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\tthis.events = [\r\n\t\t\ton(win.doc, touch.move, lang.hitch(this, \"onMouseMove\")),\r\n\t\t\ton(win.doc, touch.release,   lang.hitch(this, \"onMouseUp\")),\r\n\t\t\ton(win.doc, \"keydown\",   lang.hitch(this, \"onKeyDown\")),\r\n\t\t\ton(win.doc, \"keyup\",     lang.hitch(this, \"onKeyUp\")),\r\n\r\n\t\t\t// cancel text selection and text dragging\r\n\t\t\ton(win.doc, \"dragstart\",   stopEvent),\r\n\t\t\ton(win.body(), \"selectstart\", stopEvent)\r\n\t\t];\r\n\t\tvar c = \"dojoDnd\" + (copy ? \"Copy\" : \"Move\");\r\n\t\tdomClass.add(win.body(), c);\r\n\t},\r\n\tcanDrop: function(flag){\r\n\t\t// summary:\r\n\t\t//\t\tcalled to notify if the current target can accept items\r\n\t\tvar canDropFlag = Boolean(this.target && flag);\r\n\t\tif(this.canDropFlag != canDropFlag){\r\n\t\t\tthis.canDropFlag = canDropFlag;\r\n\t\t\tthis.avatar.update();\r\n\t\t}\r\n\t},\r\n\tstopDrag: function(){\r\n\t\t// summary:\r\n\t\t//\t\tstop the DnD in progress\r\n\t\tdomClass.remove(win.body(), [\"dojoDndCopy\", \"dojoDndMove\"]);\r\n\t\tarray.forEach(this.events, function(handle){ handle.remove(); });\r\n\t\tthis.events = [];\r\n\t\tthis.avatar.destroy();\r\n\t\tthis.avatar = null;\r\n\t\tthis.source = this.target = null;\r\n\t\tthis.nodes = [];\r\n\t},\r\n\tmakeAvatar: function(){\r\n\t\t// summary:\r\n\t\t//\t\tmakes the avatar; it is separate to be overwritten dynamically, if needed\r\n\t\treturn new Avatar(this);\r\n\t},\r\n\tupdateAvatar: function(){\r\n\t\t// summary:\r\n\t\t//\t\tupdates the avatar; it is separate to be overwritten dynamically, if needed\r\n\t\tthis.avatar.update();\r\n\t},\r\n\r\n\t// mouse event processors\r\n\tonMouseMove: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onmousemove\r\n\t\t// e: Event\r\n\t\t//\t\tmouse event\r\n\t\tvar a = this.avatar;\r\n\t\tif(a){\r\n\t\t\tautoscroll.autoScrollNodes(e);\r\n\t\t\t//autoscroll.autoScroll(e);\r\n\t\t\tvar s = a.node.style;\r\n\t\t\ts.left = (e.pageX + this.OFFSET_X) + \"px\";\r\n\t\t\ts.top  = (e.pageY + this.OFFSET_Y) + \"px\";\r\n\t\t\tvar copy = Boolean(this.source.copyState(dnd.getCopyKeyState(e)));\r\n\t\t\tif(this.copy != copy){\r\n\t\t\t\tthis._setCopyStatus(copy);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(has(\"touch\")){\r\n\t\t\t// Prevent page from scrolling so that user can drag instead.\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t},\r\n\tonMouseUp: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onmouseup\r\n\t\t// e: Event\r\n\t\t//\t\tmouse event\r\n\t\tif(this.avatar){\r\n\t\t\tif(this.target && this.canDropFlag){\r\n\t\t\t\tvar copy = Boolean(this.source.copyState(dnd.getCopyKeyState(e)));\r\n\t\t\t\ttopic.publish(\"/dnd/drop/before\", this.source, this.nodes, copy, this.target, e);\r\n\t\t\t\ttopic.publish(\"/dnd/drop\", this.source, this.nodes, copy, this.target, e);\r\n\t\t\t}else{\r\n\t\t\t\ttopic.publish(\"/dnd/cancel\");\r\n\t\t\t}\r\n\t\t\tthis.stopDrag();\r\n\t\t}\r\n\t},\r\n\r\n\t// keyboard event processors\r\n\tonKeyDown: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onkeydown:\r\n\t\t//\t\twatching for CTRL for copy/move status, watching for ESCAPE to cancel the drag\r\n\t\t// e: Event\r\n\t\t//\t\tkeyboard event\r\n\t\tif(this.avatar){\r\n\t\t\tswitch(e.keyCode){\r\n\t\t\t\tcase keys.CTRL:\r\n\t\t\t\t\tvar copy = Boolean(this.source.copyState(true));\r\n\t\t\t\t\tif(this.copy != copy){\r\n\t\t\t\t\t\tthis._setCopyStatus(copy);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keys.ESCAPE:\r\n\t\t\t\t\ttopic.publish(\"/dnd/cancel\");\r\n\t\t\t\t\tthis.stopDrag();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonKeyUp: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onkeyup, watching for CTRL for copy/move status\r\n\t\t// e: Event\r\n\t\t//\t\tkeyboard event\r\n\t\tif(this.avatar && e.keyCode == keys.CTRL){\r\n\t\t\tvar copy = Boolean(this.source.copyState(false));\r\n\t\t\tif(this.copy != copy){\r\n\t\t\t\tthis._setCopyStatus(copy);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// utilities\r\n\t_setCopyStatus: function(copy){\r\n\t\t// summary:\r\n\t\t//\t\tchanges the copy status\r\n\t\t// copy: Boolean\r\n\t\t//\t\tthe copy status\r\n\t\tthis.copy = copy;\r\n\t\tthis.source._markDndStatus(this.copy);\r\n\t\tthis.updateAvatar();\r\n\t\tdomClass.replace(win.body(),\r\n\t\t\t\"dojoDnd\" + (this.copy ? \"Copy\" : \"Move\"),\r\n\t\t\t\"dojoDnd\" + (this.copy ? \"Move\" : \"Copy\"));\r\n\t}\r\n});\r\n\r\n// dnd._manager:\r\n//\t\tThe manager singleton variable. Can be overwritten if needed.\r\ndnd._manager = null;\r\n\r\nManager.manager = dnd.manager = function(){\r\n\t// summary:\r\n\t//\t\tReturns the current DnD manager.  Creates one if it is not created yet.\r\n\tif(!dnd._manager){\r\n\t\tdnd._manager = new Manager();\r\n\t}\r\n\treturn dnd._manager;\t// Object\r\n};\r\n\r\n// TODO: for 2.0, store _manager and manager in Manager only.   Don't access dnd or dojo.dnd.\r\n\r\nreturn Manager;\r\n});\r\n\ndefine('dojo/dnd/Mover',[\r\n\t\"../_base/array\", \"../_base/declare\", \"../_base/lang\", \"../sniff\", \"../_base/window\",\r\n\t\"../dom\", \"../dom-geometry\", \"../dom-style\", \"../Evented\", \"../on\", \"../touch\", \"./common\", \"./autoscroll\"\r\n], function(array, declare, lang, has, win, dom, domGeom, domStyle, Evented, on, touch, dnd, autoscroll){\r\n\r\n// module:\r\n//\t\tdojo/dnd/Mover\r\n\r\nreturn declare(\"dojo.dnd.Mover\", [Evented], {\r\n\t// summary:\r\n\t//\t\tan object which makes a node follow the mouse, or touch-drag on touch devices.\r\n\t//\t\tUsed as a default mover, and as a base class for custom movers.\r\n\r\n\tconstructor: function(node, e, host){\r\n\t\t// node: Node\r\n\t\t//\t\ta node (or node's id) to be moved\r\n\t\t// e: Event\r\n\t\t//\t\ta mouse event, which started the move;\r\n\t\t//\t\tonly pageX and pageY properties are used\r\n\t\t// host: Object?\r\n\t\t//\t\tobject which implements the functionality of the move,\r\n\t\t//\t \tand defines proper events (onMoveStart and onMoveStop)\r\n\t\tthis.node = dom.byId(node);\r\n\t\tthis.marginBox = {l: e.pageX, t: e.pageY};\r\n\t\tthis.mouseButton = e.button;\r\n\t\tvar h = (this.host = host), d = node.ownerDocument;\r\n\r\n\t\tfunction stopEvent(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\tthis.events = [\r\n\t\t\t// At the start of a drag, onFirstMove is called, and then the following\r\n\t\t\t// listener is disconnected.\r\n\t\t\ton(d, touch.move, lang.hitch(this, \"onFirstMove\")),\r\n\r\n\t\t\t// These are called continually during the drag\r\n\t\t\ton(d, touch.move, lang.hitch(this, \"onMouseMove\")),\r\n\r\n\t\t\t// And these are called at the end of the drag\r\n\t\t\ton(d, touch.release,  lang.hitch(this, \"onMouseUp\")),\r\n\r\n\t\t\t// cancel text selection and text dragging\r\n\t\t\ton(d, \"dragstart\",   stopEvent),\r\n\t\t\ton(d.body, \"selectstart\", stopEvent)\r\n\t\t];\r\n\r\n\t\t// Tell autoscroll that a drag is starting\r\n\t\tautoscroll.autoScrollStart(d);\r\n\r\n\t\t// notify that the move has started\r\n\t\tif(h && h.onMoveStart){\r\n\t\t\th.onMoveStart(this);\r\n\t\t}\r\n\t},\r\n\t// mouse event processors\r\n\tonMouseMove: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onmousemove/ontouchmove\r\n\t\t// e: Event\r\n\t\t//\t\tmouse/touch event\r\n\t\tautoscroll.autoScroll(e);\r\n\t\tvar m = this.marginBox;\r\n\t\tthis.host.onMove(this, {l: m.l + e.pageX, t: m.t + e.pageY}, e);\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t},\r\n\tonMouseUp: function(e){\r\n\t\tif(has(\"webkit\") && has(\"mac\") && this.mouseButton == 2 ?\r\n\t\t\t\te.button == 0 : this.mouseButton == e.button){ // TODO Should condition be met for touch devices, too?\r\n\t\t\tthis.destroy();\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t},\r\n\t// utilities\r\n\tonFirstMove: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tmakes the node absolute; it is meant to be called only once.\r\n\t\t//\t\trelative and absolutely positioned nodes are assumed to use pixel units\r\n\t\tvar s = this.node.style, l, t, h = this.host;\r\n\t\tswitch(s.position){\r\n\t\t\tcase \"relative\":\r\n\t\t\tcase \"absolute\":\r\n\t\t\t\t// assume that left and top values are in pixels already\r\n\t\t\t\tl = Math.round(parseFloat(s.left)) || 0;\r\n\t\t\t\tt = Math.round(parseFloat(s.top)) || 0;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\ts.position = \"absolute\";\t// enforcing the absolute mode\r\n\t\t\t\tvar m = domGeom.getMarginBox(this.node);\r\n\t\t\t\t// event.pageX/pageY (which we used to generate the initial\r\n\t\t\t\t// margin box) includes padding and margin set on the body.\r\n\t\t\t\t// However, setting the node's position to absolute and then\r\n\t\t\t\t// doing domGeom.marginBox on it *doesn't* take that additional\r\n\t\t\t\t// space into account - so we need to subtract the combined\r\n\t\t\t\t// padding and margin.  We use getComputedStyle and\r\n\t\t\t\t// _getMarginBox/_getContentBox to avoid the extra lookup of\r\n\t\t\t\t// the computed style.\r\n\t\t\t\tvar b = win.doc.body;\r\n\t\t\t\tvar bs = domStyle.getComputedStyle(b);\r\n\t\t\t\tvar bm = domGeom.getMarginBox(b, bs);\r\n\t\t\t\tvar bc = domGeom.getContentBox(b, bs);\r\n\t\t\t\tl = m.l - (bc.l - bm.l);\r\n\t\t\t\tt = m.t - (bc.t - bm.t);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.marginBox.l = l - this.marginBox.l;\r\n\t\tthis.marginBox.t = t - this.marginBox.t;\r\n\t\tif(h && h.onFirstMove){\r\n\t\t\th.onFirstMove(this, e);\r\n\t\t}\r\n\r\n\t\t// Disconnect touch.move that call this function\r\n\t\tthis.events.shift().remove();\r\n\t},\r\n\tdestroy: function(){\r\n\t\t// summary:\r\n\t\t//\t\tstops the move, deletes all references, so the object can be garbage-collected\r\n\t\tarray.forEach(this.events, function(handle){ handle.remove(); });\r\n\t\t// undo global settings\r\n\t\tvar h = this.host;\r\n\t\tif(h && h.onMoveStop){\r\n\t\t\th.onMoveStop(this);\r\n\t\t}\r\n\t\t// destroy objects\r\n\t\tthis.events = this.node = this.host = null;\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/dnd/Moveable',[\r\n\t\"../_base/array\", \"../_base/declare\", \"../_base/lang\",\r\n\t\"../dom\", \"../dom-class\", \"../Evented\", \"../on\", \"../topic\", \"../touch\", \"./common\", \"./Mover\", \"../_base/window\"\r\n], function(array, declare, lang, dom, domClass, Evented, on, topic, touch, dnd, Mover, win){\r\n\r\n// module:\r\n//\t\tdojo/dnd/Moveable\r\n\r\n\r\nvar Moveable = declare(\"dojo.dnd.Moveable\", [Evented], {\r\n\t// summary:\r\n\t//\t\tan object, which makes a node movable\r\n\r\n\t// object attributes (for markup)\r\n\thandle: \"\",\r\n\tdelay: 0,\r\n\tskip: false,\r\n\r\n\tconstructor: function(node, params){\r\n\t\t// node: Node\r\n\t\t//\t\ta node (or node's id) to be moved\r\n\t\t// params: Moveable.__MoveableArgs?\r\n\t\t//\t\toptional parameters\r\n\t\tthis.node = dom.byId(node);\r\n\t\tif(!params){ params = {}; }\r\n\t\tthis.handle = params.handle ? dom.byId(params.handle) : null;\r\n\t\tif(!this.handle){ this.handle = this.node; }\r\n\t\tthis.delay = params.delay > 0 ? params.delay : 0;\r\n\t\tthis.skip  = params.skip;\r\n\t\tthis.mover = params.mover ? params.mover : Mover;\r\n\t\tthis.events = [\r\n\t\t\ton(this.handle, touch.press, lang.hitch(this, \"onMouseDown\")),\r\n\t\t\t// cancel text selection and text dragging\r\n\t\t\ton(this.handle, \"dragstart\",   lang.hitch(this, \"onSelectStart\")),\r\n\t\t\ton(this.handle, \"selectstart\",   lang.hitch(this, \"onSelectStart\"))\r\n\t\t];\r\n\t},\r\n\r\n\t// markup methods\r\n\tmarkupFactory: function(params, node, Ctor){\r\n\t\treturn new Ctor(node, params);\r\n\t},\r\n\r\n\t// methods\r\n\tdestroy: function(){\r\n\t\t// summary:\r\n\t\t//\t\tstops watching for possible move, deletes all references, so the object can be garbage-collected\r\n\t\tarray.forEach(this.events, function(handle){ handle.remove(); });\r\n\t\tthis.events = this.node = this.handle = null;\r\n\t},\r\n\r\n\t// mouse event processors\r\n\tonMouseDown: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onmousedown/ontouchstart, creates a Mover for the node\r\n\t\t// e: Event\r\n\t\t//\t\tmouse/touch event\r\n\t\tif(this.skip && dnd.isFormElement(e)){ return; }\r\n\t\tif(this.delay){\r\n\t\t\tthis.events.push(\r\n\t\t\t\ton(this.handle, touch.move, lang.hitch(this, \"onMouseMove\")),\r\n\t\t\t\ton(this.handle, touch.release, lang.hitch(this, \"onMouseUp\"))\r\n\t\t\t);\r\n\t\t\tthis._lastX = e.pageX;\r\n\t\t\tthis._lastY = e.pageY;\r\n\t\t}else{\r\n\t\t\tthis.onDragDetected(e);\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t},\r\n\tonMouseMove: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onmousemove/ontouchmove, used only for delayed drags\r\n\t\t// e: Event\r\n\t\t//\t\tmouse/touch event\r\n\t\tif(Math.abs(e.pageX - this._lastX) > this.delay || Math.abs(e.pageY - this._lastY) > this.delay){\r\n\t\t\tthis.onMouseUp(e);\r\n\t\t\tthis.onDragDetected(e);\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t},\r\n\tonMouseUp: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onmouseup, used only for delayed drags\r\n\t\t// e: Event\r\n\t\t//\t\tmouse event\r\n\t\tfor(var i = 0; i < 2; ++i){\r\n\t\t\tthis.events.pop().remove();\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t},\r\n\tonSelectStart: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onselectevent and ondragevent\r\n\t\t// e: Event\r\n\t\t//\t\tmouse event\r\n\t\tif(!this.skip || !dnd.isFormElement(e)){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t},\r\n\r\n\t// local events\r\n\tonDragDetected: function(/*Event*/ e){\r\n\t\t// summary:\r\n\t\t//\t\tcalled when the drag is detected;\r\n\t\t//\t\tresponsible for creation of the mover\r\n\t\tnew this.mover(this.node, e, this);\r\n\t},\r\n\tonMoveStart: function(/*Mover*/ mover){\r\n\t\t// summary:\r\n\t\t//\t\tcalled before every move operation\r\n\t\ttopic.publish(\"/dnd/move/start\", mover);\r\n\t\tdomClass.add(win.body(), \"dojoMove\");\r\n\t\tdomClass.add(this.node, \"dojoMoveItem\");\r\n\t},\r\n\tonMoveStop: function(/*Mover*/ mover){\r\n\t\t// summary:\r\n\t\t//\t\tcalled after every move operation\r\n\t\ttopic.publish(\"/dnd/move/stop\", mover);\r\n\t\tdomClass.remove(win.body(), \"dojoMove\");\r\n\t\tdomClass.remove(this.node, \"dojoMoveItem\");\r\n\t},\r\n\tonFirstMove: function(/*===== mover, e =====*/){\r\n\t\t// summary:\r\n\t\t//\t\tcalled during the very first move notification;\r\n\t\t//\t\tcan be used to initialize coordinates, can be overwritten.\r\n\t\t// mover: Mover\r\n\t\t// e: Event\r\n\r\n\t\t// default implementation does nothing\r\n\t},\r\n\tonMove: function(mover, leftTop /*=====, e =====*/){\r\n\t\t// summary:\r\n\t\t//\t\tcalled during every move notification;\r\n\t\t//\t\tshould actually move the node; can be overwritten.\r\n\t\t// mover: Mover\r\n\t\t// leftTop: Object\r\n\t\t// e: Event\r\n\t\tthis.onMoving(mover, leftTop);\r\n\t\tvar s = mover.node.style;\r\n\t\ts.left = leftTop.l + \"px\";\r\n\t\ts.top  = leftTop.t + \"px\";\r\n\t\tthis.onMoved(mover, leftTop);\r\n\t},\r\n\tonMoving: function(/*===== mover, leftTop =====*/){\r\n\t\t// summary:\r\n\t\t//\t\tcalled before every incremental move; can be overwritten.\r\n\t\t// mover: Mover\r\n\t\t// leftTop: Object\r\n\r\n\t\t// default implementation does nothing\r\n\t},\r\n\tonMoved: function(/*===== mover, leftTop =====*/){\r\n\t\t// summary:\r\n\t\t//\t\tcalled after every incremental move; can be overwritten.\r\n\t\t// mover: Mover\r\n\t\t// leftTop: Object\r\n\r\n\t\t// default implementation does nothing\r\n\t}\r\n});\r\n\r\n/*=====\r\nMoveable.__MoveableArgs = declare([], {\r\n\t// handle: Node||String\r\n\t//\t\tA node (or node's id), which is used as a mouse handle.\r\n\t//\t\tIf omitted, the node itself is used as a handle.\r\n\thandle: null,\r\n\r\n\t// delay: Number\r\n\t//\t\tdelay move by this number of pixels\r\n\tdelay: 0,\r\n\r\n\t// skip: Boolean\r\n\t//\t\tskip move of form elements\r\n\tskip: false,\r\n\r\n\t// mover: Object\r\n\t//\t\ta constructor of custom Mover\r\n\tmover: dnd.Mover\r\n});\r\n=====*/\r\n\r\nreturn Moveable;\r\n});\r\n\ndefine('dojo/dnd/TimedMoveable',[\"../_base/declare\", \"./Moveable\" /*=====, \"./Mover\" =====*/], function(declare, Moveable /*=====, Mover =====*/){\r\n\t// module:\r\n\t//\t\tdojo/dnd/TimedMoveable\r\n\r\n\t/*=====\r\n\tvar __TimedMoveableArgs = declare([Moveable.__MoveableArgs], {\r\n\t\t// timeout: Number\r\n\t\t//\t\tdelay move by this number of ms,\r\n\t\t//\t\taccumulating position changes during the timeout\r\n\t\ttimeout: 0\r\n\t});\r\n\t=====*/\r\n\r\n\t// precalculate long expressions\r\n\tvar oldOnMove = Moveable.prototype.onMove;\r\n\r\n\treturn declare(\"dojo.dnd.TimedMoveable\", Moveable, {\r\n\t\t// summary:\r\n\t\t//\t\tA specialized version of Moveable to support an FPS throttling.\r\n\t\t//\t\tThis class puts an upper restriction on FPS, which may reduce\r\n\t\t//\t\tthe CPU load. The additional parameter \"timeout\" regulates\r\n\t\t//\t\tthe delay before actually moving the moveable object.\r\n\r\n\t\t// object attributes (for markup)\r\n\t\ttimeout: 40,\t// in ms, 40ms corresponds to 25 fps\r\n\r\n\t\tconstructor: function(node, params){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tan object that makes a node moveable with a timer\r\n\t\t\t// node: Node||String\r\n\t\t\t//\t\ta node (or node's id) to be moved\r\n\t\t\t// params: __TimedMoveableArgs\r\n\t\t\t//\t\tobject with additional parameters.\r\n\r\n\t\t\t// sanitize parameters\r\n\t\t\tif(!params){ params = {}; }\r\n\t\t\tif(params.timeout && typeof params.timeout == \"number\" && params.timeout >= 0){\r\n\t\t\t\tthis.timeout = params.timeout;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonMoveStop: function(/*Mover*/ mover){\r\n\t\t\tif(mover._timer){\r\n\t\t\t\t// stop timer\r\n\t\t\t\tclearTimeout(mover._timer);\r\n\t\t\t\t// reflect the last received position\r\n\t\t\t\toldOnMove.call(this, mover, mover._leftTop);\r\n\t\t\t}\r\n\t\t\tMoveable.prototype.onMoveStop.apply(this, arguments);\r\n\t\t},\r\n\t\tonMove: function(/*Mover*/ mover, /*Object*/ leftTop){\r\n\t\t\tmover._leftTop = leftTop;\r\n\t\t\tif(!mover._timer){\r\n\t\t\t\tvar _t = this;\t// to avoid using dojo.hitch()\r\n\t\t\t\tmover._timer = setTimeout(function(){\r\n\t\t\t\t\t// we don't have any pending requests\r\n\t\t\t\t\tmover._timer = null;\r\n\t\t\t\t\t// reflect the last received position\r\n\t\t\t\t\toldOnMove.call(_t, mover, mover._leftTop);\r\n\t\t\t\t}, this.timeout);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n\ndefine('dojo/dnd/move',[\r\n\t\"../_base/declare\",\r\n\t\"../dom-geometry\", \"../dom-style\",\r\n\t\"./common\", \"./Mover\", \"./Moveable\"\r\n], function(declare, domGeom, domStyle, dnd, Mover, Moveable){\r\n\r\n// module:\r\n//\t\tdojo/dnd/move\r\n\r\n/*=====\r\nvar __constrainedMoveableArgs = declare([Moveable.__MoveableArgs], {\r\n\t// constraints: Function\r\n\t//\t\tCalculates a constraint box.\r\n\t//\t\tIt is called in a context of the moveable object.\r\n\tconstraints: function(){},\r\n\r\n\t// within: Boolean\r\n\t//\t\trestrict move within boundaries.\r\n\twithin: false\r\n});\r\n=====*/\r\n\r\nvar constrainedMoveable = declare(\"dojo.dnd.move.constrainedMoveable\", Moveable, {\r\n\t// object attributes (for markup)\r\n\tconstraints: function(){},\r\n\twithin: false,\r\n\r\n\tconstructor: function(node, params){\r\n\t\t// summary:\r\n\t\t//\t\tan object that makes a node moveable\r\n\t\t// node: Node\r\n\t\t//\t\ta node (or node's id) to be moved\r\n\t\t// params: __constrainedMoveableArgs?\r\n\t\t//\t\tan optional object with additional parameters;\r\n\t\t//\t\tthe rest is passed to the base class\r\n\t\tif(!params){ params = {}; }\r\n\t\tthis.constraints = params.constraints;\r\n\t\tthis.within = params.within;\r\n\t},\r\n\tonFirstMove: function(/*Mover*/ mover){\r\n\t\t// summary:\r\n\t\t//\t\tcalled during the very first move notification;\r\n\t\t//\t\tcan be used to initialize coordinates, can be overwritten.\r\n\t\tvar c = this.constraintBox = this.constraints.call(this, mover);\r\n\t\tc.r = c.l + c.w;\r\n\t\tc.b = c.t + c.h;\r\n\t\tif(this.within){\r\n\t\t\tvar mb = domGeom.getMarginSize(mover.node);\r\n\t\t\tc.r -= mb.w;\r\n\t\t\tc.b -= mb.h;\r\n\t\t}\r\n\t},\r\n\tonMove: function(/*Mover*/ mover, /*Object*/ leftTop){\r\n\t\t// summary:\r\n\t\t//\t\tcalled during every move notification;\r\n\t\t//\t\tshould actually move the node; can be overwritten.\r\n\t\tvar c = this.constraintBox, s = mover.node.style;\r\n\t\tthis.onMoving(mover, leftTop);\r\n\t\tleftTop.l = leftTop.l < c.l ? c.l : c.r < leftTop.l ? c.r : leftTop.l;\r\n\t\tleftTop.t = leftTop.t < c.t ? c.t : c.b < leftTop.t ? c.b : leftTop.t;\r\n\t\ts.left = leftTop.l + \"px\";\r\n\t\ts.top  = leftTop.t + \"px\";\r\n\t\tthis.onMoved(mover, leftTop);\r\n\t}\r\n});\r\n\r\n/*=====\r\nvar __boxConstrainedMoveableArgs = declare([__constrainedMoveableArgs], {\r\n\t// box: Object\r\n\t//\t\ta constraint box\r\n\tbox: {}\r\n});\r\n=====*/\r\n\r\nvar boxConstrainedMoveable = declare(\"dojo.dnd.move.boxConstrainedMoveable\", constrainedMoveable, {\r\n\t// box:\r\n\t//\t\tobject attributes (for markup)\r\n\tbox: {},\r\n\r\n\tconstructor: function(node, params){\r\n\t\t// summary:\r\n\t\t//\t\tan object, which makes a node moveable\r\n\t\t// node: Node\r\n\t\t//\t\ta node (or node's id) to be moved\r\n\t\t// params: __boxConstrainedMoveableArgs?\r\n\t\t//\t\tan optional object with parameters\r\n\t\tvar box = params && params.box;\r\n\t\tthis.constraints = function(){ return box; };\r\n\t}\r\n});\r\n\r\n/*=====\r\nvar __parentConstrainedMoveableArgs = declare( [__constrainedMoveableArgs], {\r\n\t// area: String\r\n\t//\t\tA parent's area to restrict the move.\r\n\t//\t\tCan be \"margin\", \"border\", \"padding\", or \"content\".\r\n\tarea: \"\"\r\n});\r\n=====*/\r\n\r\nvar parentConstrainedMoveable = declare(\"dojo.dnd.move.parentConstrainedMoveable\", constrainedMoveable, {\r\n\t// area:\r\n\t//\t\tobject attributes (for markup)\r\n\tarea: \"content\",\r\n\r\n\tconstructor: function(node, params){\r\n\t\t// summary:\r\n\t\t//\t\tan object, which makes a node moveable\r\n\t\t// node: Node\r\n\t\t//\t\ta node (or node's id) to be moved\r\n\t\t// params: __parentConstrainedMoveableArgs?\r\n\t\t//\t\tan optional object with parameters\r\n\t\tvar area = params && params.area;\r\n\t\tthis.constraints = function(){\r\n\t\t\tvar n = this.node.parentNode,\r\n\t\t\t\ts = domStyle.getComputedStyle(n),\r\n\t\t\t\tmb = domGeom.getMarginBox(n, s);\r\n\t\t\tif(area == \"margin\"){\r\n\t\t\t\treturn mb;\t// Object\r\n\t\t\t}\r\n\t\t\tvar t = domGeom.getMarginExtents(n, s);\r\n\t\t\tmb.l += t.l, mb.t += t.t, mb.w -= t.w, mb.h -= t.h;\r\n\t\t\tif(area == \"border\"){\r\n\t\t\t\treturn mb;\t// Object\r\n\t\t\t}\r\n\t\t\tt = domGeom.getBorderExtents(n, s);\r\n\t\t\tmb.l += t.l, mb.t += t.t, mb.w -= t.w, mb.h -= t.h;\r\n\t\t\tif(area == \"padding\"){\r\n\t\t\t\treturn mb;\t// Object\r\n\t\t\t}\r\n\t\t\tt = domGeom.getPadExtents(n, s);\r\n\t\t\tmb.l += t.l, mb.t += t.t, mb.w -= t.w, mb.h -= t.h;\r\n\t\t\treturn mb;\t// Object\r\n\t\t};\r\n\t}\r\n});\r\n\r\n\r\nreturn {\r\n\t// summary:\r\n\t//\t\tTODOC\r\n\tconstrainedMoveable: constrainedMoveable,\r\n\tboxConstrainedMoveable: boxConstrainedMoveable,\r\n\tparentConstrainedMoveable: parentConstrainedMoveable\r\n};\r\n\r\n});\r\n\ndefine('dojo/fx/Toggler',[\"../_base/lang\",\"../_base/declare\",\"../_base/fx\", \"../aspect\"],\r\n  function(lang, declare, baseFx, aspect){\r\n\t// module:\r\n\t//\t\tdojo/fx/Toggler\r\n\r\nreturn declare(\"dojo.fx.Toggler\", null, {\r\n\t// summary:\r\n\t//\t\tA simple `dojo.Animation` toggler API.\r\n\t// description:\r\n\t//\t\tclass constructor for an animation toggler. It accepts a packed\r\n\t//\t\tset of arguments about what type of animation to use in each\r\n\t//\t\tdirection, duration, etc. All available members are mixed into\r\n\t//\t\tthese animations from the constructor (for example, `node`,\r\n\t//\t\t`showDuration`, `hideDuration`).\r\n\t// example:\r\n\t//\t|\tvar t = new dojo/fx/Toggler({\r\n\t//\t|\t\tnode: \"nodeId\",\r\n\t//\t|\t\tshowDuration: 500,\r\n\t//\t|\t\t// hideDuration will default to \"200\"\r\n\t//\t|\t\tshowFunc: dojo/fx/wipeIn,\r\n\t//\t|\t\t// hideFunc will default to \"fadeOut\"\r\n\t//\t|\t});\r\n\t//\t|\tt.show(100); // delay showing for 100ms\r\n\t//\t|\t// ...time passes...\r\n\t//\t|\tt.hide();\r\n\r\n\t// node: DomNode\r\n\t//\t\tthe node to target for the showing and hiding animations\r\n\tnode: null,\r\n\r\n\t// showFunc: Function\r\n\t//\t\tThe function that returns the `dojo.Animation` to show the node\r\n\tshowFunc: baseFx.fadeIn,\r\n\r\n\t// hideFunc: Function\r\n\t//\t\tThe function that returns the `dojo.Animation` to hide the node\r\n\thideFunc: baseFx.fadeOut,\r\n\r\n\t// showDuration:\r\n\t//\t\tTime in milliseconds to run the show Animation\r\n\tshowDuration: 200,\r\n\r\n\t// hideDuration:\r\n\t//\t\tTime in milliseconds to run the hide Animation\r\n\thideDuration: 200,\r\n\r\n\t// FIXME: need a policy for where the toggler should \"be\" the next\r\n\t// time show/hide are called if we're stopped somewhere in the\r\n\t// middle.\r\n\t// FIXME: also would be nice to specify individual showArgs/hideArgs mixed into\r\n\t// each animation individually.\r\n\t// FIXME: also would be nice to have events from the animations exposed/bridged\r\n\r\n\t/*=====\r\n\t_showArgs: null,\r\n\t_showAnim: null,\r\n\r\n\t_hideArgs: null,\r\n\t_hideAnim: null,\r\n\r\n\t_isShowing: false,\r\n\t_isHiding: false,\r\n\t=====*/\r\n\r\n\tconstructor: function(args){\r\n\t\tvar _t = this;\r\n\r\n\t\tlang.mixin(_t, args);\r\n\t\t_t.node = args.node;\r\n\t\t_t._showArgs = lang.mixin({}, args);\r\n\t\t_t._showArgs.node = _t.node;\r\n\t\t_t._showArgs.duration = _t.showDuration;\r\n\t\t_t.showAnim = _t.showFunc(_t._showArgs);\r\n\r\n\t\t_t._hideArgs = lang.mixin({}, args);\r\n\t\t_t._hideArgs.node = _t.node;\r\n\t\t_t._hideArgs.duration = _t.hideDuration;\r\n\t\t_t.hideAnim = _t.hideFunc(_t._hideArgs);\r\n\r\n\t\taspect.after(_t.showAnim, \"beforeBegin\", lang.hitch(_t.hideAnim, \"stop\", true), true);\r\n\t\taspect.after(_t.hideAnim, \"beforeBegin\", lang.hitch(_t.showAnim, \"stop\", true), true);\r\n\t},\r\n\r\n\tshow: function(delay){\r\n\t\t// summary:\r\n\t\t//\t\tToggle the node to showing\r\n\t\t// delay: Integer?\r\n\t\t//\t\tAmount of time to stall playing the show animation\r\n\t\treturn this.showAnim.play(delay || 0);\r\n\t},\r\n\r\n\thide: function(delay){\r\n\t\t// summary:\r\n\t\t//\t\tToggle the node to hidden\r\n\t\t// delay: Integer?\r\n\t\t//\t\tAmount of time to stall playing the hide animation\r\n\t\treturn this.hideAnim.play(delay || 0);\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/fx/easing',[\"../_base/lang\"], function(lang){\r\n\r\n// module:\r\n//\t\tdojo/fx/easing\r\n\r\nvar easingFuncs = {\r\n\t// summary:\r\n\t//\t\tCollection of easing functions to use beyond the default\r\n\t//\t\t`dojo._defaultEasing` function.\r\n\t// description:\r\n\t//\t\tEasing functions are used to manipulate the iteration through\r\n\t//\t\tan `dojo.Animation`s _Line. _Line being the properties of an Animation,\r\n\t//\t\tand the easing function progresses through that Line determining\r\n\t//\t\thow quickly (or slowly) it should go. Or more accurately: modify\r\n\t//\t\tthe value of the _Line based on the percentage of animation completed.\r\n\t//\r\n\t//\t\tAll functions follow a simple naming convention of \"ease type\" + \"when\".\r\n\t//\t\tIf the name of the function ends in Out, the easing described appears\r\n\t//\t\ttowards the end of the animation. \"In\" means during the beginning,\r\n\t//\t\tand InOut means both ranges of the Animation will applied, both\r\n\t//\t\tbeginning and end.\r\n\t//\r\n\t//\t\tOne does not call the easing function directly, it must be passed to\r\n\t//\t\tthe `easing` property of an animation.\r\n\t// example:\r\n\t//\t|\tdojo.require(\"dojo.fx.easing\");\r\n\t//\t|\tvar anim = dojo.fadeOut({\r\n\t//\t|\t\tnode: 'node',\r\n\t//\t|\t\tduration: 2000,\r\n\t//\t|\t\t//\tnote there is no ()\r\n\t//\t|\t\teasing: dojo.fx.easing.quadIn\r\n\t//\t|\t}).play();\r\n\t//\r\n\r\n\tlinear: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tA linear easing function\r\n\t\treturn n;\r\n\t},\r\n\r\n\tquadIn: function(/* Decimal? */n){\r\n\t\treturn Math.pow(n, 2);\r\n\t},\r\n\r\n\tquadOut: function(/* Decimal? */n){\r\n\t\treturn n * (n - 2) * -1;\r\n\t},\r\n\r\n\tquadInOut: function(/* Decimal? */n){\r\n\t\tn = n * 2;\r\n\t\tif(n < 1){ return Math.pow(n, 2) / 2; }\r\n\t\treturn -1 * ((--n) * (n - 2) - 1) / 2;\r\n\t},\r\n\r\n\tcubicIn: function(/* Decimal? */n){\r\n\t\treturn Math.pow(n, 3);\r\n\t},\r\n\r\n\tcubicOut: function(/* Decimal? */n){\r\n\t\treturn Math.pow(n - 1, 3) + 1;\r\n\t},\r\n\r\n\tcubicInOut: function(/* Decimal? */n){\r\n\t\tn = n * 2;\r\n\t\tif(n < 1){ return Math.pow(n, 3) / 2; }\r\n\t\tn -= 2;\r\n\t\treturn (Math.pow(n, 3) + 2) / 2;\r\n\t},\r\n\r\n\tquartIn: function(/* Decimal? */n){\r\n\t\treturn Math.pow(n, 4);\r\n\t},\r\n\r\n\tquartOut: function(/* Decimal? */n){\r\n\t\treturn -1 * (Math.pow(n - 1, 4) - 1);\r\n\t},\r\n\r\n\tquartInOut: function(/* Decimal? */n){\r\n\t\tn = n * 2;\r\n\t\tif(n < 1){ return Math.pow(n, 4) / 2; }\r\n\t\tn -= 2;\r\n\t\treturn -1 / 2 * (Math.pow(n, 4) - 2);\r\n\t},\r\n\r\n\tquintIn: function(/* Decimal? */n){\r\n\t\treturn Math.pow(n, 5);\r\n\t},\r\n\r\n\tquintOut: function(/* Decimal? */n){\r\n\t\treturn Math.pow(n - 1, 5) + 1;\r\n\t},\r\n\r\n\tquintInOut: function(/* Decimal? */n){\r\n\t\tn = n * 2;\r\n\t\tif(n < 1){ return Math.pow(n, 5) / 2; }\r\n\t\tn -= 2;\r\n\t\treturn (Math.pow(n, 5) + 2) / 2;\r\n\t},\r\n\r\n\tsineIn: function(/* Decimal? */n){\r\n\t\treturn -1 * Math.cos(n * (Math.PI / 2)) + 1;\r\n\t},\r\n\r\n\tsineOut: function(/* Decimal? */n){\r\n\t\treturn Math.sin(n * (Math.PI / 2));\r\n\t},\r\n\r\n\tsineInOut: function(/* Decimal? */n){\r\n\t\treturn -1 * (Math.cos(Math.PI * n) - 1) / 2;\r\n\t},\r\n\r\n\texpoIn: function(/* Decimal? */n){\r\n\t\treturn (n == 0) ? 0 : Math.pow(2, 10 * (n - 1));\r\n\t},\r\n\r\n\texpoOut: function(/* Decimal? */n){\r\n\t\treturn (n == 1) ? 1 : (-1 * Math.pow(2, -10 * n) + 1);\r\n\t},\r\n\r\n\texpoInOut: function(/* Decimal? */n){\r\n\t\tif(n == 0){ return 0; }\r\n\t\tif(n == 1){ return 1; }\r\n\t\tn = n * 2;\r\n\t\tif(n < 1){ return Math.pow(2, 10 * (n - 1)) / 2; }\r\n\t\t--n;\r\n\t\treturn (-1 * Math.pow(2, -10 * n) + 2) / 2;\r\n\t},\r\n\r\n\tcircIn: function(/* Decimal? */n){\r\n\t\treturn -1 * (Math.sqrt(1 - Math.pow(n, 2)) - 1);\r\n\t},\r\n\r\n\tcircOut: function(/* Decimal? */n){\r\n\t\tn = n - 1;\r\n\t\treturn Math.sqrt(1 - Math.pow(n, 2));\r\n\t},\r\n\r\n\tcircInOut: function(/* Decimal? */n){\r\n\t\tn = n * 2;\r\n\t\tif(n < 1){ return -1 / 2 * (Math.sqrt(1 - Math.pow(n, 2)) - 1); }\r\n\t\tn -= 2;\r\n\t\treturn 1 / 2 * (Math.sqrt(1 - Math.pow(n, 2)) + 1);\r\n\t},\r\n\r\n\tbackIn: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tAn easing function that starts away from the target,\r\n\t\t//\t\tand quickly accelerates towards the end value.\r\n\t\t//\r\n\t\t//\t\tUse caution when the easing will cause values to become\r\n\t\t//\t\tnegative as some properties cannot be set to negative values.\r\n\t\tvar s = 1.70158;\r\n\t\treturn Math.pow(n, 2) * ((s + 1) * n - s);\r\n\t},\r\n\r\n\tbackOut: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tAn easing function that pops past the range briefly, and slowly comes back.\r\n\t\t// description:\r\n\t\t//\t\tAn easing function that pops past the range briefly, and slowly comes back.\r\n\t\t//\r\n\t\t//\t\tUse caution when the easing will cause values to become negative as some\r\n\t\t//\t\tproperties cannot be set to negative values.\r\n\r\n\t\tn = n - 1;\r\n\t\tvar s = 1.70158;\r\n\t\treturn Math.pow(n, 2) * ((s + 1) * n + s) + 1;\r\n\t},\r\n\r\n\tbackInOut: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tAn easing function combining the effects of `backIn` and `backOut`\r\n\t\t// description:\r\n\t\t//\t\tAn easing function combining the effects of `backIn` and `backOut`.\r\n\t\t//\t\tUse caution when the easing will cause values to become negative\r\n\t\t//\t\tas some properties cannot be set to negative values.\r\n\t\tvar s = 1.70158 * 1.525;\r\n\t\tn = n * 2;\r\n\t\tif(n < 1){ return (Math.pow(n, 2) * ((s + 1) * n - s)) / 2; }\r\n\t\tn-=2;\r\n\t\treturn (Math.pow(n, 2) * ((s + 1) * n + s) + 2) / 2;\r\n\t},\r\n\r\n\telasticIn: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tAn easing function the elastically snaps from the start value\r\n\t\t// description:\r\n\t\t//\t\tAn easing function the elastically snaps from the start value\r\n\t\t//\r\n\t\t//\t\tUse caution when the elasticity will cause values to become negative\r\n\t\t//\t\tas some properties cannot be set to negative values.\r\n\t\tif(n == 0 || n == 1){ return n; }\r\n\t\tvar p = .3;\r\n\t\tvar s = p / 4;\r\n\t\tn = n - 1;\r\n\t\treturn -1 * Math.pow(2, 10 * n) * Math.sin((n - s) * (2 * Math.PI) / p);\r\n\t},\r\n\r\n\telasticOut: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tAn easing function that elasticly snaps around the target value,\r\n\t\t//\t\tnear the end of the Animation\r\n\t\t// description:\r\n\t\t//\t\tAn easing function that elasticly snaps around the target value,\r\n\t\t//\t\tnear the end of the Animation\r\n\t\t//\r\n\t\t//\t\tUse caution when the elasticity will cause values to become\r\n\t\t//\t\tnegative as some properties cannot be set to negative values.\r\n\t\tif(n==0 || n == 1){ return n; }\r\n\t\tvar p = .3;\r\n\t\tvar s = p / 4;\r\n\t\treturn Math.pow(2, -10 * n) * Math.sin((n - s) * (2 * Math.PI) / p) + 1;\r\n\t},\r\n\r\n\telasticInOut: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tAn easing function that elasticly snaps around the value, near\r\n\t\t//\t\tthe beginning and end of the Animation.\r\n\t\t// description:\r\n\t\t//\t\tAn easing function that elasticly snaps around the value, near\r\n\t\t//\t\tthe beginning and end of the Animation.\r\n\t\t//\r\n\t\t//\t\tUse caution when the elasticity will cause values to become\r\n\t\t//\t\tnegative as some properties cannot be set to negative values.\r\n\t\tif(n == 0) return 0;\r\n\t\tn = n * 2;\r\n\t\tif(n == 2) return 1;\r\n\t\tvar p = .3 * 1.5;\r\n\t\tvar s = p / 4;\r\n\t\tif(n < 1){\r\n\t\t\tn -= 1;\r\n\t\t\treturn -.5 * (Math.pow(2, 10 * n) * Math.sin((n - s) * (2 * Math.PI) / p));\r\n\t\t}\r\n\t\tn -= 1;\r\n\t\treturn .5 * (Math.pow(2, -10 * n) * Math.sin((n - s) * (2 * Math.PI) / p)) + 1;\r\n\t},\r\n\r\n\tbounceIn: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tAn easing function that 'bounces' near the beginning of an Animation\r\n\t\treturn (1 - easingFuncs.bounceOut(1 - n)); // Decimal\r\n\t},\r\n\r\n\tbounceOut: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tAn easing function that 'bounces' near the end of an Animation\r\n\t\tvar s = 7.5625;\r\n\t\tvar p = 2.75;\r\n\t\tvar l;\r\n\t\tif(n < (1 / p)){\r\n\t\t\tl = s * Math.pow(n, 2);\r\n\t\t}else if(n < (2 / p)){\r\n\t\t\tn -= (1.5 / p);\r\n\t\t\tl = s * Math.pow(n, 2) + .75;\r\n\t\t}else if(n < (2.5 / p)){\r\n\t\t\tn -= (2.25 / p);\r\n\t\t\tl = s * Math.pow(n, 2) + .9375;\r\n\t\t}else{\r\n\t\t\tn -= (2.625 / p);\r\n\t\t\tl = s * Math.pow(n, 2) + .984375;\r\n\t\t}\r\n\t\treturn l;\r\n\t},\r\n\r\n\tbounceInOut: function(/* Decimal? */n){\r\n\t\t// summary:\r\n\t\t//\t\tAn easing function that 'bounces' at the beginning and end of the Animation\r\n\t\tif(n < 0.5){ return easingFuncs.bounceIn(n * 2) / 2; }\r\n\t\treturn (easingFuncs.bounceOut(n * 2 - 1) / 2) + 0.5; // Decimal\r\n\t}\r\n};\r\n\r\nlang.setObject(\"dojo.fx.easing\", easingFuncs);\r\n\r\nreturn easingFuncs;\r\n});\r\n\ndefine('dojo/nls/colors',{ root:\r\n//begin v1.x content\r\n({\r\n// local representation of all CSS3 named colors, companion to dojo.colors.  To be used where descriptive information\r\n// is required for each color, such as a palette widget, and not for specifying color programatically.\r\n\r\n//Note: due to the SVG 1.0 spec additions, some of these are alternate spellings for the same color (e.g. gray / grey).\r\n//TODO: should we be using unique rgb values as keys instead and avoid these duplicates, or rely on the caller to do the reverse mapping?\r\naliceblue: \"alice blue\",\r\nantiquewhite: \"antique white\",\r\naqua: \"aqua\",\r\naquamarine: \"aquamarine\",\r\nazure: \"azure\",\r\nbeige: \"beige\",\r\nbisque: \"bisque\",\r\nblack: \"black\",\r\nblanchedalmond: \"blanched almond\",\r\nblue: \"blue\",\r\nblueviolet: \"blue-violet\",\r\nbrown: \"brown\",\r\nburlywood: \"burlywood\",\r\ncadetblue: \"cadet blue\",\r\nchartreuse: \"chartreuse\",\r\nchocolate: \"chocolate\",\r\ncoral: \"coral\",\r\ncornflowerblue: \"cornflower blue\",\r\ncornsilk: \"cornsilk\",\r\ncrimson: \"crimson\",\r\ncyan: \"cyan\",\r\ndarkblue: \"dark blue\",\r\ndarkcyan: \"dark cyan\",\r\ndarkgoldenrod: \"dark goldenrod\",\r\ndarkgray: \"dark gray\",\r\ndarkgreen: \"dark green\",\r\ndarkgrey: \"dark gray\", // same as darkgray\r\ndarkkhaki: \"dark khaki\",\r\ndarkmagenta: \"dark magenta\",\r\ndarkolivegreen: \"dark olive green\",\r\ndarkorange: \"dark orange\",\r\ndarkorchid: \"dark orchid\",\r\ndarkred: \"dark red\",\r\ndarksalmon: \"dark salmon\",\r\ndarkseagreen: \"dark sea green\",\r\ndarkslateblue: \"dark slate blue\",\r\ndarkslategray: \"dark slate gray\",\r\ndarkslategrey: \"dark slate gray\", // same as darkslategray\r\ndarkturquoise: \"dark turquoise\",\r\ndarkviolet: \"dark violet\",\r\ndeeppink: \"deep pink\",\r\ndeepskyblue: \"deep sky blue\",\r\ndimgray: \"dim gray\",\r\ndimgrey: \"dim gray\", // same as dimgray\r\ndodgerblue: \"dodger blue\",\r\nfirebrick: \"fire brick\",\r\nfloralwhite: \"floral white\",\r\nforestgreen: \"forest green\",\r\nfuchsia: \"fuchsia\",\r\ngainsboro: \"gainsboro\",\r\nghostwhite: \"ghost white\",\r\ngold: \"gold\",\r\ngoldenrod: \"goldenrod\",\r\ngray: \"gray\",\r\ngreen: \"green\",\r\ngreenyellow: \"green-yellow\",\r\ngrey: \"gray\", // same as gray\r\nhoneydew: \"honeydew\",\r\nhotpink: \"hot pink\",\r\nindianred: \"indian red\",\r\nindigo: \"indigo\",\r\nivory: \"ivory\",\r\nkhaki: \"khaki\",\r\nlavender: \"lavender\",\r\nlavenderblush: \"lavender blush\",\r\nlawngreen: \"lawn green\",\r\nlemonchiffon: \"lemon chiffon\",\r\nlightblue: \"light blue\",\r\nlightcoral: \"light coral\",\r\nlightcyan: \"light cyan\",\r\nlightgoldenrodyellow: \"light goldenrod yellow\",\r\nlightgray: \"light gray\",\r\nlightgreen: \"light green\",\r\nlightgrey: \"light gray\", // same as lightgray\r\nlightpink: \"light pink\",\r\nlightsalmon: \"light salmon\",\r\nlightseagreen: \"light sea green\",\r\nlightskyblue: \"light sky blue\",\r\nlightslategray: \"light slate gray\",\r\nlightslategrey: \"light slate gray\", // same as lightslategray\r\nlightsteelblue: \"light steel blue\",\r\nlightyellow: \"light yellow\",\r\nlime: \"lime\",\r\nlimegreen: \"lime green\",\r\nlinen: \"linen\",\r\nmagenta: \"magenta\",\r\nmaroon: \"maroon\",\r\nmediumaquamarine: \"medium aquamarine\",\r\nmediumblue: \"medium blue\",\r\nmediumorchid: \"medium orchid\",\r\nmediumpurple: \"medium purple\",\r\nmediumseagreen: \"medium sea green\",\r\nmediumslateblue: \"medium slate blue\",\r\nmediumspringgreen: \"medium spring green\",\r\nmediumturquoise: \"medium turquoise\",\r\nmediumvioletred: \"medium violet-red\",\r\nmidnightblue: \"midnight blue\",\r\nmintcream: \"mint cream\",\r\nmistyrose: \"misty rose\",\r\nmoccasin: \"moccasin\",\r\nnavajowhite: \"navajo white\",\r\nnavy: \"navy\",\r\noldlace: \"old lace\",\r\nolive: \"olive\",\r\nolivedrab: \"olive drab\",\r\norange: \"orange\",\r\norangered: \"orange red\",\r\norchid: \"orchid\",\r\npalegoldenrod: \"pale goldenrod\",\r\npalegreen: \"pale green\",\r\npaleturquoise: \"pale turquoise\",\r\npalevioletred: \"pale violet-red\",\r\npapayawhip: \"papaya whip\",\r\npeachpuff: \"peach puff\",\r\nperu: \"peru\",\r\npink: \"pink\",\r\nplum: \"plum\",\r\npowderblue: \"powder blue\",\r\npurple: \"purple\",\r\nred: \"red\",\r\nrosybrown: \"rosy brown\",\r\nroyalblue: \"royal blue\",\r\nsaddlebrown: \"saddle brown\",\r\nsalmon: \"salmon\",\r\nsandybrown: \"sandy brown\",\r\nseagreen: \"sea green\",\r\nseashell: \"seashell\",\r\nsienna: \"sienna\",\r\nsilver: \"silver\",\r\nskyblue: \"sky blue\",\r\nslateblue: \"slate blue\",\r\nslategray: \"slate gray\",\r\nslategrey: \"slate gray\", // same as slategray\r\nsnow: \"snow\",\r\nspringgreen: \"spring green\",\r\nsteelblue: \"steel blue\",\r\ntan: \"tan\",\r\nteal: \"teal\",\r\nthistle: \"thistle\",\r\ntomato: \"tomato\",\r\ntransparent: \"transparent\",\r\nturquoise: \"turquoise\",\r\nviolet: \"violet\",\r\nwheat: \"wheat\",\r\nwhite: \"white\",\r\nwhitesmoke: \"white smoke\",\r\nyellow: \"yellow\",\r\nyellowgreen: \"yellow green\"\r\n})\r\n//end v1.x content\r\n,\r\n\"zh\": true,\r\n\"zh-tw\": true,\r\n\"uk\": true,\r\n\"tr\": true,\r\n\"th\": true,\r\n\"sv\": true,\r\n\"sl\": true,\r\n\"sk\": true,\r\n\"ru\": true,\r\n\"ro\": true,\r\n\"pt\": true,\r\n\"pt-pt\": true,\r\n\"pl\": true,\r\n\"nl\": true,\r\n\"nb\": true,\r\n\"ko\": true,\r\n\"kk\": true,\r\n\"ja\": true,\r\n\"it\": true,\r\n\"id\": true,\r\n\"hu\": true,\r\n\"hr\": true,\r\n\"he\": true,\r\n\"fr\": true,\r\n\"fi\": true,\r\n\"es\": true,\r\n\"el\": true,\r\n\"de\": true,\r\n\"da\": true,\r\n\"cs\": true,\r\n\"ca\": true,\r\n\"bg\": true,\r\n\"az\": true,\r\n\"ar\": true\r\n});\r\n\ndefine('dojo/promise/first',[\r\n\t\"../_base/array\",\r\n\t\"../Deferred\",\r\n\t\"../when\"\r\n], function(array, Deferred, when){\r\n\t\"use strict\";\r\n\r\n\t// module:\r\n\t//\t\tdojo/promise/first\r\n\r\n\tvar forEach = array.forEach;\r\n\r\n\treturn function first(objectOrArray){\r\n\t\t// summary:\r\n\t\t//\t\tTakes multiple promises and returns a new promise that is fulfilled\r\n\t\t//\t\twhen the first of these promises is fulfilled.\r\n\t\t// description:\r\n\t\t//\t\tTakes multiple promises and returns a new promise that is fulfilled\r\n\t\t//\t\twhen the first of these promises is fulfilled. Canceling the returned\r\n\t\t//\t\tpromise will *not* cancel any passed promises. The promise will be\r\n\t\t//\t\tfulfilled with the value of the first fulfilled promise.\r\n\t\t// objectOrArray: Object|Array?\r\n\t\t//\t\tThe promises are taken from the array or object values. If no value\r\n\t\t//\t\tis passed, the returned promise is resolved with an undefined value.\r\n\t\t// returns: dojo/promise/Promise\r\n\r\n\t\tvar array;\r\n\t\tif(objectOrArray instanceof Array){\r\n\t\t\tarray = objectOrArray;\r\n\t\t}else if(objectOrArray && typeof objectOrArray === \"object\"){\r\n\t\t\tarray = [];\r\n\t\t\tfor(var key in objectOrArray){\r\n\t\t\t\tif(Object.hasOwnProperty.call(objectOrArray, key)){\r\n\t\t\t\t\tarray.push(objectOrArray[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!array || !array.length){\r\n\t\t\treturn new Deferred().resolve();\r\n\t\t}\r\n\r\n\t\tvar deferred = new Deferred();\r\n\t\tforEach(array, function(valueOrPromise){\r\n\t\t\twhen(valueOrPromise, deferred.resolve, deferred.reject);\r\n\t\t});\r\n\t\treturn deferred.promise;\t// dojo/promise/Promise\r\n\t};\r\n});\r\n\ndefine('dojo/NodeList-dom',[\"./_base/kernel\", \"./query\", \"./_base/array\", \"./_base/lang\", \"./dom-class\", \"./dom-construct\", \"./dom-geometry\", \"./dom-attr\", \"./dom-style\"], function(dojo, query, array, lang, domCls, domCtr, domGeom, domAttr, domStyle){\r\n\r\n\t// module:\r\n\t//\t\tdojo/NodeList-dom.js\r\n\r\n\t/*=====\r\n\t return function(){\r\n\t\t // summary:\r\n\t\t //\t\tAdds DOM related methods to NodeList, and returns NodeList constructor.\r\n\t };\r\n\t =====*/\r\n\r\n\tvar magicGuard = function(a){\r\n\t\t// summary:\r\n\t\t//\t\tthe guard function for dojo/dom-attr() and dojo/dom-style()\r\n\t\treturn a.length == 1 && (typeof a[0] == \"string\"); // inline'd type check\r\n\t};\r\n\r\n\tvar orphan = function(node){\r\n\t\t// summary:\r\n\t\t//\t\tfunction to orphan nodes\r\n\t\tvar p = node.parentNode;\r\n\t\tif(p){\r\n\t\t\tp.removeChild(node);\r\n\t\t}\r\n\t};\r\n\t// FIXME: should we move orphan() to dojo/_base/html?\r\n\r\n\tvar NodeList = query.NodeList,\r\n\t\tawc = NodeList._adaptWithCondition,\r\n\t\taafe = NodeList._adaptAsForEach,\r\n\t\taam = NodeList._adaptAsMap;\r\n\r\n\tfunction getSet(module){\r\n\t\treturn function(node, name, value){\r\n\t\t\tif(arguments.length == 2){\r\n\t\t\t\treturn module[typeof name == \"string\" ? \"get\" : \"set\"](node, name);\r\n\t\t\t}\r\n\t\t\t// setter\r\n\t\t\treturn module.set(node, name, value);\r\n\t\t};\r\n\t}\r\n\r\n\tlang.extend(NodeList, {\r\n\t\t_normalize: function(/*String||Element||Object||NodeList*/content, /*DOMNode?*/refNode){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tnormalizes data to an array of items to insert.\r\n\t\t\t// description:\r\n\t\t\t//\t\tIf content is an object, it can have special properties \"template\" and\r\n\t\t\t//\t\t\"parse\". If \"template\" is defined, then the template value is run through\r\n\t\t\t//\t\tdojo/string.substitute (if dojo/string.substitute() has been required elsewhere),\r\n\t\t\t//\t\tor if templateFunc is a function on the content, that function will be used to\r\n\t\t\t//\t\ttransform the template into a final string to be used for for passing to dojo/dom-construct.toDom().\r\n\t\t\t//\t\tIf content.parse is true, then it is remembered for later, for when the content\r\n\t\t\t//\t\tnodes are inserted into the DOM. At that point, the nodes will be parsed for widgets\r\n\t\t\t//\t\t(if dojo/parser has been required elsewhere).\r\n\r\n\t\t\t//Wanted to just use a DocumentFragment, but for the array/NodeList\r\n\t\t\t//case that meant using cloneNode, but we may not want that.\r\n\t\t\t//Cloning should only happen if the node operations span\r\n\t\t\t//multiple refNodes. Also, need a real array, not a NodeList from the\r\n\t\t\t//DOM since the node movements could change those NodeLists.\r\n\r\n\t\t\tvar parse = content.parse === true;\r\n\r\n\t\t\t//Do we have an object that needs to be run through a template?\r\n\t\t\tif(typeof content.template == \"string\"){\r\n\t\t\t\tvar templateFunc = content.templateFunc || (dojo.string && dojo.string.substitute);\r\n\t\t\t\tcontent = templateFunc ? templateFunc(content.template, content) : content;\r\n\t\t\t}\r\n\r\n\t\t\tvar type = (typeof content);\r\n\t\t\tif(type == \"string\" || type == \"number\"){\r\n\t\t\t\tcontent = domCtr.toDom(content, (refNode && refNode.ownerDocument));\r\n\t\t\t\tif(content.nodeType == 11){\r\n\t\t\t\t\t//DocumentFragment. It cannot handle cloneNode calls, so pull out the children.\r\n\t\t\t\t\tcontent = lang._toArray(content.childNodes);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontent = [content];\r\n\t\t\t\t}\r\n\t\t\t}else if(!lang.isArrayLike(content)){\r\n\t\t\t\tcontent = [content];\r\n\t\t\t}else if(!lang.isArray(content)){\r\n\t\t\t\t//To get to this point, content is array-like, but\r\n\t\t\t\t//not an array, which likely means a DOM NodeList. Convert it now.\r\n\t\t\t\tcontent = lang._toArray(content);\r\n\t\t\t}\r\n\r\n\t\t\t//Pass around the parse info\r\n\t\t\tif(parse){\r\n\t\t\t\tcontent._runParse = true;\r\n\t\t\t}\r\n\t\t\treturn content; //Array\r\n\t\t},\r\n\r\n\t\t_cloneNode: function(/*DOMNode*/ node){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tprivate utility to clone a node. Not very interesting in the vanilla\r\n\t\t\t//\t\tdojo/NodeList case, but delegates could do interesting things like\r\n\t\t\t//\t\tclone event handlers if that is derivable from the node.\r\n\t\t\treturn node.cloneNode(true);\r\n\t\t},\r\n\r\n\t\t_place: function(/*Array*/ary, /*DOMNode*/refNode, /*String*/position, /*Boolean*/useClone){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tprivate utility to handle placing an array of nodes relative to another node.\r\n\t\t\t// description:\r\n\t\t\t//\t\tAllows for cloning the nodes in the array, and for\r\n\t\t\t//\t\toptionally parsing widgets, if ary._runParse is true.\r\n\r\n\t\t\t//Avoid a disallowed operation if trying to do an innerHTML on a non-element node.\r\n\t\t\tif(refNode.nodeType != 1 && position == \"only\"){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar rNode = refNode, tempNode;\r\n\r\n\t\t\t//Always cycle backwards in case the array is really a\r\n\t\t\t//DOM NodeList and the DOM operations take it out of the live collection.\r\n\t\t\tvar length = ary.length;\r\n\t\t\tfor(var i = length - 1; i >= 0; i--){\r\n\t\t\t\tvar node = (useClone ? this._cloneNode(ary[i]) : ary[i]);\r\n\r\n\t\t\t\t//If need widget parsing, use a temp node, instead of waiting after inserting into\r\n\t\t\t\t//real DOM because we need to start widget parsing at one node up from current node,\r\n\t\t\t\t//which could cause some already parsed widgets to be parsed again.\r\n\t\t\t\tif(ary._runParse && dojo.parser && dojo.parser.parse){\r\n\t\t\t\t\tif(!tempNode){\r\n\t\t\t\t\t\ttempNode = rNode.ownerDocument.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttempNode.appendChild(node);\r\n\t\t\t\t\tdojo.parser.parse(tempNode);\r\n\t\t\t\t\tnode = tempNode.firstChild;\r\n\t\t\t\t\twhile(tempNode.firstChild){\r\n\t\t\t\t\t\ttempNode.removeChild(tempNode.firstChild);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(i == length - 1){\r\n\t\t\t\t\tdomCtr.place(node, rNode, position);\r\n\t\t\t\t}else{\r\n\t\t\t\t\trNode.parentNode.insertBefore(node, rNode);\r\n\t\t\t\t}\r\n\t\t\t\trNode = node;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tposition: aam(domGeom.position),\r\n\t\t/*=====\r\n\t\tposition: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns border-box objects (x/y/w/h) of all elements in a node list\r\n\t\t\t//\t\tas an Array (*not* a NodeList). Acts like `dojo/dom-geometry-position`, though\r\n\t\t\t//\t\tassumes the node passed is each node in this list.\r\n\r\n\t\t\treturn dojo.map(this, dojo.position); // Array\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tattr: awc(getSet(domAttr), magicGuard),\r\n\t\t/*=====\r\n\t\tattr: function(property, value){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tgets or sets the DOM attribute for every element in the\r\n\t\t\t//\t\tNodeList. See also `dojo/dom-attr`\r\n\t\t\t// property: String\r\n\t\t\t//\t\tthe attribute to get/set\r\n\t\t\t// value: String?\r\n\t\t\t//\t\toptional. The value to set the property to\r\n\t\t\t// returns:\r\n\t\t\t//\t\tif no value is passed, the result is an array of attribute values\r\n\t\t\t//\t\tIf a value is passed, the return is this NodeList\r\n\t\t\t// example:\r\n\t\t\t//\t\tMake all nodes with a particular class focusable:\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"], function(query){\r\n\t\t\t//\t|\t\tquery(\".focusable\").attr(\"tabIndex\", -1);\r\n\t\t\t//\t|\t});\r\n\t\t\t// example:\r\n\t\t\t//\t\tDisable a group of buttons:\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"], function(query){\r\n\t\t\t//\t|\t\tquery(\"button.group\").attr(\"disabled\", true);\r\n\t\t\t//\t|\t});\r\n\t\t\t// example:\r\n\t\t\t//\t\tinnerHTML can be assigned or retrieved as well:\r\n\t\t\t//\t|\t// get the innerHTML (as an array) for each list item\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"], function(query){\r\n\t\t\t//\t|\t\tvar ih = query(\"li.replaceable\").attr(\"innerHTML\");\r\n\t\t\t//\t|\t});\r\n\t\t\treturn; // dojo/NodeList|Array\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tstyle: awc(getSet(domStyle), magicGuard),\r\n\t\t/*=====\r\n\t\tstyle: function(property, value){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tgets or sets the CSS property for every element in the NodeList\r\n\t\t\t// property: String\r\n\t\t\t//\t\tthe CSS property to get/set, in JavaScript notation\r\n\t\t\t//\t\t(\"lineHieght\" instead of \"line-height\")\r\n\t\t\t// value: String?\r\n\t\t\t//\t\toptional. The value to set the property to\r\n\t\t\t// returns:\r\n\t\t\t//\t\tif no value is passed, the result is an array of strings.\r\n\t\t\t//\t\tIf a value is passed, the return is this NodeList\r\n\t\t\treturn; // dojo/NodeList\r\n\t\t\treturn; // Array\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\taddClass: aafe(domCls.add),\r\n\t\t/*=====\r\n\t\taddClass: function(className){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tadds the specified class to every node in the list\r\n\t\t\t// className: String|Array\r\n\t\t\t//\t\tA String class name to add, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\treturn; // dojo/NodeList\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tremoveClass: aafe(domCls.remove),\r\n\t\t/*=====\r\n\t\tremoveClass: function(className){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tremoves the specified class from every node in the list\r\n\t\t\t// className: String|Array?\r\n\t\t\t//\t\tAn optional String class name to remove, or several space-separated\r\n\t\t\t//\t\tclass names, or an array of class names. If omitted, all class names\r\n\t\t\t//\t\twill be deleted.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tthis list\r\n\t\t\treturn; // dojo/NodeList\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\ttoggleClass: aafe(domCls.toggle),\r\n\t\t/*=====\r\n\t\ttoggleClass: function(className, condition){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds a class to node if not present, or removes if present.\r\n\t\t\t//\t\tPass a boolean condition if you want to explicitly add or remove.\r\n\t\t\t// condition: Boolean?\r\n\t\t\t//\t\tIf passed, true means to add the class, false means to remove.\r\n\t\t\t// className: String\r\n\t\t\t//\t\tthe CSS class to add\r\n\t\t\treturn; // dojo/NodeList\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\treplaceClass: aafe(domCls.replace),\r\n\t\t/*=====\r\n\t\treplaceClass: function(addClassStr, removeClassStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReplaces one or more classes on a node if not present.\r\n\t\t\t//\t\tOperates more quickly than calling `removeClass()` and `addClass()`\r\n\t\t\t// addClassStr: String|Array\r\n\t\t\t//\t\tA String class name to add, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\t// removeClassStr: String|Array?\r\n\t\t\t//\t\tA String class name to remove, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\treturn; // dojo/NodeList\r\n\t\t },\r\n\t\t =====*/\r\n\r\n\t\tempty: aafe(domCtr.empty),\r\n\t\t/*=====\r\n\t\tempty: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tclears all content from each node in the list. Effectively\r\n\t\t\t//\t\tequivalent to removing all child nodes from every item in\r\n\t\t\t//\t\tthe list.\r\n\t\t\treturn this.forEach(\"item.innerHTML='';\"); // dojo/NodeList\r\n\t\t\t// FIXME: should we be checking for and/or disposing of widgets below these nodes?\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tremoveAttr: aafe(domAttr.remove),\r\n\t\t/*=====\r\n\t\t removeAttr: function(name){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRemoves an attribute from each node in the list.\r\n\t\t\t// name: String\r\n\t\t\t//\t\tthe name of the attribute to remove\r\n\t\t\treturn;\t\t// dojo/NodeList\r\n\t\t},\r\n\t\t=====*/\r\n\r\n\t\tmarginBox: aam(domGeom.getMarginBox),\r\n\t\t/*=====\r\n\t\tmarginBox: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns margin-box size of nodes\r\n\t\t \treturn; // dojo/NodeList\r\n\t\t },\r\n\t\t =====*/\r\n\r\n\t\t// FIXME: connectPublisher()? connectRunOnce()?\r\n\r\n\t\t/*\r\n\t\tdestroy: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tdestroys every item in the list.\r\n\t\t\tthis.forEach(d.destroy);\r\n\t\t\t// FIXME: should we be checking for and/or disposing of widgets below these nodes?\r\n\t\t},\r\n\t\t*/\r\n\r\n\t\tplace: function(/*String||Node*/ queryOrNode, /*String*/ position){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tplaces elements of this node list relative to the first element matched\r\n\t\t\t//\t\tby queryOrNode. Returns the original NodeList. See: `dojo/dom-construct.place`\r\n\t\t\t// queryOrNode:\r\n\t\t\t//\t\tmay be a string representing any valid CSS3 selector or a DOM node.\r\n\t\t\t//\t\tIn the selector case, only the first matching element will be used\r\n\t\t\t//\t\tfor relative positioning.\r\n\t\t\t// position:\r\n\t\t\t//\t\tcan be one of:\r\n\t\t\t//\r\n\t\t\t//\t\t-\t\"last\" (default)\r\n\t\t\t//\t\t-\t\"first\"\r\n\t\t\t//\t\t-\t\"before\"\r\n\t\t\t//\t\t-\t\"after\"\r\n\t\t\t//\t\t-\t\"only\"\r\n\t\t\t//\t\t-\t\"replace\"\r\n\t\t\t//\r\n\t\t\t//\t\tor an offset in the childNodes property\r\n\t\t\tvar item = query(queryOrNode)[0];\r\n\t\t\treturn this.forEach(function(node){ domCtr.place(node, item, position); }); // dojo/NodeList\r\n\t\t},\r\n\r\n\t\torphan: function(/*String?*/ filter){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tremoves elements in this list that match the filter\r\n\t\t\t//\t\tfrom their parents and returns them as a new NodeList.\r\n\t\t\t// filter:\r\n\t\t\t//\t\tCSS selector like \".foo\" or \"div > span\"\r\n\t\t\t// returns:\r\n\t\t\t//\t\tNodeList containing the orphaned elements\r\n\t\t\treturn (filter ? query._filterResult(this, filter) : this).forEach(orphan); // dojo/NodeList\r\n\t\t},\r\n\r\n\t\tadopt: function(/*String||Array||DomNode*/ queryOrListOrNode, /*String?*/ position){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tplaces any/all elements in queryOrListOrNode at a\r\n\t\t\t//\t\tposition relative to the first element in this list.\r\n\t\t\t//\t\tReturns a dojo/NodeList of the adopted elements.\r\n\t\t\t// queryOrListOrNode:\r\n\t\t\t//\t\ta DOM node or a query string or a query result.\r\n\t\t\t//\t\tRepresents the nodes to be adopted relative to the\r\n\t\t\t//\t\tfirst element of this NodeList.\r\n\t\t\t// position:\r\n\t\t\t//\t\tcan be one of:\r\n\t\t\t//\r\n\t\t\t//\t\t-\t\"last\" (default)\r\n\t\t\t//\t\t-\t\"first\"\r\n\t\t\t//\t\t-\t\"before\"\r\n\t\t\t//\t\t-\t\"after\"\r\n\t\t\t//\t\t-\t\"only\"\r\n\t\t\t//\t\t-\t\"replace\"\r\n\t\t\t//\r\n\t\t\t//\t\tor an offset in the childNodes property\r\n\t\t\treturn query(queryOrListOrNode).place(this[0], position)._stash(this);\t// dojo/NodeList\r\n\t\t},\r\n\r\n\t\t// FIXME: do we need this?\r\n\t\tquery: function(/*String*/ queryStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns a new list whose members match the passed query,\r\n\t\t\t//\t\tassuming elements of the current NodeList as the root for\r\n\t\t\t//\t\teach search.\r\n\t\t\t// example:\r\n\t\t\t//\t\tassume a DOM created by this markup:\r\n\t\t\t//\t|\t<div id=\"foo\">\r\n\t\t\t//\t|\t\t<p>\r\n\t\t\t//\t|\t\t\tbacon is tasty, <span>dontcha think?</span>\r\n\t\t\t//\t|\t\t</p>\r\n\t\t\t//\t|\t</div>\r\n\t\t\t//\t|\t<div id=\"bar\">\r\n\t\t\t//\t|\t\t<p>great comedians may not be funny <span>in person</span></p>\r\n\t\t\t//\t|\t</div>\r\n\t\t\t//\t\tIf we are presented with the following definition for a NodeList:\r\n\t\t\t//\t|\trequire([\"dojo/dom\", \"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(dom, query){\r\n\t\t\t//\t|\t\tvar l = new NodeList(dom.byId(\"foo\"), dom.byId(\"bar\"));\r\n\t\t\t//\t\tit's possible to find all span elements under paragraphs\r\n\t\t\t//\t\tcontained by these elements with this sub-query:\r\n\t\t\t//\t|\t\tvar spans = l.query(\"p span\");\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\t// FIXME: probably slow\r\n\t\t\tif(!queryStr){ return this; }\r\n\t\t\tvar ret = new NodeList;\r\n\t\t\tthis.map(function(node){\r\n\t\t\t\t// FIXME: why would we ever get undefined here?\r\n\t\t\t\tquery(queryStr, node).forEach(function(subNode){\r\n\t\t\t\t\tif(subNode !== undefined){\r\n\t\t\t\t\t\tret.push(subNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn ret._stash(this);\t// dojo/NodeList\r\n\t\t},\r\n\r\n\t\tfilter: function(/*String|Function*/ filter){\r\n\t\t\t// summary:\r\n\t\t\t//\t\t\"masks\" the built-in javascript filter() method (supported\r\n\t\t\t//\t\tin Dojo via `dojo.filter`) to support passing a simple\r\n\t\t\t//\t\tstring filter in addition to supporting filtering function\r\n\t\t\t//\t\tobjects.\r\n\t\t\t// filter:\r\n\t\t\t//\t\tIf a string, a CSS rule like \".thinger\" or \"div > span\".\r\n\t\t\t// example:\r\n\t\t\t//\t\t\"regular\" JS filter syntax as exposed in dojo.filter:\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(query){\r\n\t\t\t//\t|\t\tquery(\"*\").filter(function(item){\r\n\t\t\t//\t|\t\t\t// highlight every paragraph\r\n\t\t\t//\t|\t\t\treturn (item.nodeName == \"p\");\r\n\t\t\t//\t|\t\t}).style(\"backgroundColor\", \"yellow\");\r\n\t\t\t//\t|\t});\r\n\t\t\t// example:\r\n\t\t\t//\tthe same filtering using a CSS selector\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(query){\r\n\t\t\t//\t|\t\tquery(\"*\").filter(\"p\").styles(\"backgroundColor\", \"yellow\");\r\n\t\t\t//\t|\t});\r\n\t\t\tvar a = arguments, items = this, start = 0;\r\n\t\t\tif(typeof filter == \"string\"){ // inline'd type check\r\n\t\t\t\titems = query._filterResult(this, a[0]);\r\n\t\t\t\tif(a.length == 1){\r\n\t\t\t\t\t// if we only got a string query, pass back the filtered results\r\n\t\t\t\t\treturn items._stash(this); // dojo/NodeList\r\n\t\t\t\t}\r\n\t\t\t\t// if we got a callback, run it over the filtered items\r\n\t\t\t\tstart = 1;\r\n\t\t\t}\r\n\t\t\treturn this._wrap(array.filter(items, a[start], a[start + 1]), this);\t// dojo/NodeList\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t// FIXME: should this be \"copyTo\" and include parenting info?\r\n\t\tclone: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tcreates node clones of each element of this list\r\n\t\t\t//\t\tand returns a new list containing the clones\r\n\t\t},\r\n\t\t*/\r\n\r\n\t\taddContent: function(/*String||DomNode||Object||dojo/NodeList*/ content, /*String||Integer?*/ position){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tadd a node, NodeList or some HTML as a string to every item in the\r\n\t\t\t//\t\tlist.  Returns the original list.\r\n\t\t\t// description:\r\n\t\t\t//\t\ta copy of the HTML content is added to each item in the\r\n\t\t\t//\t\tlist, with an optional position argument. If no position\r\n\t\t\t//\t\targument is provided, the content is appended to the end of\r\n\t\t\t//\t\teach item.\r\n\t\t\t// content:\r\n\t\t\t//\t\tDOM node, HTML in string format, a NodeList or an Object. If a DOM node or\r\n\t\t\t//\t\tNodeList, the content will be cloned if the current NodeList has more than one\r\n\t\t\t//\t\telement. Only the DOM nodes are cloned, no event handlers. If it is an Object,\r\n\t\t\t//\t\tit should be an object with at \"template\" String property that has the HTML string\r\n\t\t\t//\t\tto insert. If dojo.string has already been dojo.required, then dojo.string.substitute\r\n\t\t\t//\t\twill be used on the \"template\" to generate the final HTML string. Other allowed\r\n\t\t\t//\t\tproperties on the object are: \"parse\" if the HTML\r\n\t\t\t//\t\tstring should be parsed for widgets (dojo.require(\"dojo.parser\") to get that\r\n\t\t\t//\t\toption to work), and \"templateFunc\" if a template function besides dojo.string.substitute\r\n\t\t\t//\t\tshould be used to transform the \"template\".\r\n\t\t\t// position:\r\n\t\t\t//\t\tcan be one of:\r\n\t\t\t//\r\n\t\t\t//\t\t-\t\"last\"||\"end\" (default)\r\n\t\t\t//\t\t-\t\"first||\"start\"\r\n\t\t\t//\t\t-\t\"before\"\r\n\t\t\t//\t\t-\t\"after\"\r\n\t\t\t//\t\t-\t\"replace\" (replaces nodes in this NodeList with new content)\r\n\t\t\t//\t\t-\t\"only\" (removes other children of the nodes so new content is the only child)\r\n\t\t\t//\r\n\t\t\t//\t\tor an offset in the childNodes property\r\n\t\t\t// example:\r\n\t\t\t//\t\tappends content to the end if the position is omitted\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(query){\r\n\t\t\t//\t|\t\tquery(\"h3 > p\").addContent(\"hey there!\");\r\n\t\t\t//\t|\t});\r\n\t\t\t// example:\r\n\t\t\t//\t\tadd something to the front of each element that has a\r\n\t\t\t//\t\t\"thinger\" property:\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(query){\r\n\t\t\t//\t|\t\tquery(\"[thinger]\").addContent(\"...\", \"first\");\r\n\t\t\t//\t|\t});\r\n\t\t\t// example:\r\n\t\t\t//\t\tadds a header before each element of the list\r\n\t\t\t//\t|\trequire([\"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(query){\r\n\t\t\t//\t|\t\tquery(\".note\").addContent(\"<h4>NOTE:</h4>\", \"before\");\r\n\t\t\t//\t|\t});\r\n\t\t\t// example:\r\n\t\t\t//\t\tadd a clone of a DOM node to the end of every element in\r\n\t\t\t//\t\tthe list, removing it from its existing parent.\r\n\t\t\t//\t|\trequire([\"dojo/dom\", \"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(dom, query){\r\n\t\t\t//\t|\t\tquery(\".note\").addContent(dom.byId(\"foo\"));\r\n\t\t\t//\t|\t});\r\n\t\t\t// example:\r\n\t\t\t//\t\tAppend nodes from a templatized string.\r\n\t\t\t//\t|\trequire([\"dojo/string\", \"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(string, query){\r\n\t\t\t//\t|\t\tquery(\".note\").addContent({\r\n\t\t\t//\t|\t\t\ttemplate: '<b>${id}: </b><span>${name}</span>',\r\n\t\t\t//\t|\t\t\tid: \"user332\",\r\n\t\t\t//\t|\t\t\tname: \"Mr. Anderson\"\r\n\t\t\t//\t|\t\t});\r\n\t\t\t//\t|\t});\r\n\t\t\t// example:\r\n\t\t\t//\t\tAppend nodes from a templatized string that also has widgets parsed.\r\n\t\t\t//\t|\trequire([\"dojo/string\", \"dojo/parser\", \"dojo/query\", \"dojo/NodeList-dom\"\r\n\t\t\t//\t|\t], function(string, parser, query){\r\n\t\t\t//\t|\t\tvar notes = query(\".note\").addContent({\r\n\t\t\t//\t|\t\t\ttemplate: '<button dojoType=\"dijit/form/Button\">${text}</button>',\r\n\t\t\t//\t|\t\t\tparse: true,\r\n\t\t\t//\t|\t\t\ttext: \"Send\"\r\n\t\t\t//\t|\t\t});\r\n\t\t\t//\t|\t});\r\n\t\t\tcontent = this._normalize(content, this[0]);\r\n\t\t\tfor(var i = 0, node; (node = this[i]); i++){\r\n\t\t\t\tif(content.length){\r\n\t\t\t\t\tthis._place(content, node, position, i > 0);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// if it is an empty array, we empty the target node\r\n\t\t\t\t\tdomCtr.empty(node);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this; // dojo/NodeList\r\n\t\t}\r\n\t});\r\n\r\n\treturn NodeList;\r\n});\r\n\ndefine('dojo/request/iframe',[\r\n\t'module',\r\n\t'require',\r\n\t'./watch',\r\n\t'./util',\r\n\t'./handlers',\r\n\t'../_base/lang',\r\n\t'../io-query',\r\n\t'../query',\r\n\t'../has',\r\n\t'../dom',\r\n\t'../dom-construct',\r\n\t'../_base/window',\r\n\t'../NodeList-dom'/*=====,\r\n\t'../request',\r\n\t'../_base/declare' =====*/\r\n], function(module, require, watch, util, handlers, lang, ioQuery, query, has, dom, domConstruct, win/*=====, NodeList, request, declare =====*/){\r\n\tvar mid = module.id.replace(/[\\/\\.\\-]/g, '_'),\r\n\t\tonload = mid + '_onload';\r\n\r\n\tif(!win.global[onload]){\r\n\t\twin.global[onload] = function(){\r\n\t\t\tvar dfd = iframe._currentDfd;\r\n\t\t\tif(!dfd){\r\n\t\t\t\tiframe._fireNextRequest();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar response = dfd.response,\r\n\t\t\t\toptions = response.options,\r\n\t\t\t\tformNode = dom.byId(options.form) || dfd._tmpForm;\r\n\r\n\t\t\tif(formNode){\r\n\t\t\t\t// remove all the hidden content inputs\r\n\t\t\t\tvar toClean = dfd._contentToClean;\r\n\t\t\t\tfor(var i=0; i<toClean.length; i++){\r\n\t\t\t\t\tvar key = toClean[i];\r\n\t\t\t\t\t//Need to cycle over all nodes since we may have added\r\n\t\t\t\t\t//an array value which means that more than one node could\r\n\t\t\t\t\t//have the same .name value.\r\n\t\t\t\t\tfor(var j=0; j<formNode.childNodes.length; j++){\r\n\t\t\t\t\t\tvar childNode = formNode.childNodes[j];\r\n\t\t\t\t\t\tif(childNode.name === key){\r\n\t\t\t\t\t\t\tdomConstruct.destroy(childNode);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// restore original action + target\r\n\t\t\t\tdfd._originalAction && formNode.setAttribute('action', dfd._originalAction);\r\n\t\t\t\tif(dfd._originalMethod){\r\n\t\t\t\t\tformNode.setAttribute('method', dfd._originalMethod);\r\n\t\t\t\t\tformNode.method = dfd._originalMethod;\r\n\t\t\t\t}\r\n\t\t\t\tif(dfd._originalTarget){\r\n\t\t\t\t\tformNode.setAttribute('target', dfd._originalTarget);\r\n\t\t\t\t\tformNode.target = dfd._originalTarget;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(dfd._tmpForm){\r\n\t\t\t\tdomConstruct.destroy(dfd._tmpForm);\r\n\t\t\t\tdelete dfd._tmpForm;\r\n\t\t\t}\r\n\r\n\t\t\tdfd._finished = true;\r\n\t\t};\r\n\t}\r\n\r\n\tfunction create(name, onloadstr, uri){\r\n\t\tif(win.global[name]){\r\n\t\t\treturn win.global[name];\r\n\t\t}\r\n\r\n\t\tif(win.global.frames[name]){\r\n\t\t\treturn win.global.frames[name];\r\n\t\t}\r\n\r\n\t\tif(!uri){\r\n\t\t\tif(has('config-useXDomain') && !has('config-dojoBlankHtmlUrl')){\r\n\t\t\t\tconsole.warn('dojo/request/iframe: When using cross-domain Dojo builds,' +\r\n\t\t\t\t\t' please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl' +\r\n\t\t\t\t\t' to the path on your domain to blank.html');\r\n\t\t\t}\r\n\t\t\turi = (has('config-dojoBlankHtmlUrl')||require.toUrl('dojo/resources/blank.html'));\r\n\t\t}\r\n\r\n\t\tvar frame = domConstruct.place(\r\n\t\t\t'<iframe id=\"'+name+'\" name=\"'+name+'\" src=\"'+uri+'\" onload=\"'+onloadstr+\r\n\t\t\t'\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">',\r\n\t\t\twin.body());\r\n\r\n\t\twin.global[name] = frame;\r\n\r\n\t\treturn frame;\r\n\t}\r\n\r\n\tfunction setSrc(_iframe, src, replace){\r\n\t\tvar frame = win.global.frames[_iframe.name];\r\n\r\n\t\tif(frame.contentWindow){\r\n\t\t\t// We have an iframe node instead of the window\r\n\t\t\tframe = frame.contentWindow;\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tif(!replace){\r\n\t\t\t\tframe.location = src;\r\n\t\t\t}else{\r\n\t\t\t\tframe.location.replace(src);\r\n\t\t\t}\r\n\t\t}catch(e){\r\n\t\t\tconsole.log('dojo/request/iframe.setSrc: ', e);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction doc(iframeNode){\r\n\t\tif(iframeNode.contentDocument){\r\n\t\t\treturn iframeNode.contentDocument;\r\n\t\t}\r\n\t\tvar name = iframeNode.name;\r\n\t\tif(name){\r\n\t\t\tvar iframes = win.doc.getElementsByTagName('iframe');\r\n\t\t\tif(iframeNode.document && iframes[name].contentWindow && iframes[name].contentWindow.document){\r\n\t\t\t\treturn iframes[name].contentWindow.document;\r\n\t\t\t}else if(win.doc.frames[name] && win.doc.frames[name].document){\r\n\t\t\t\treturn win.doc.frames[name].document;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction createForm(){\r\n\t\treturn domConstruct.create('form', {\r\n\t\t\tname: mid + '_form',\r\n\t\t\tstyle: {\r\n\t\t\t\tposition: 'absolute',\r\n\t\t\t\ttop: '-1000px',\r\n\t\t\t\tleft: '-1000px'\r\n\t\t\t}\r\n\t\t}, win.body());\r\n\t}\r\n\r\n\tfunction fireNextRequest(){\r\n\t\t// summary:\r\n\t\t//\t\tInternal method used to fire the next request in the queue.\r\n\t\tvar dfd;\r\n\t\ttry{\r\n\t\t\tif(iframe._currentDfd || !iframe._dfdQueue.length){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdo{\r\n\t\t\t\tdfd = iframe._currentDfd = iframe._dfdQueue.shift();\r\n\t\t\t}while(dfd && (dfd.canceled || (dfd.isCanceled && dfd.isCanceled())) && iframe._dfdQueue.length);\r\n\r\n\t\t\tif(!dfd || dfd.canceled || (dfd.isCanceled && dfd.isCanceled())){\r\n\t\t\t\tiframe._currentDfd = null;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar response = dfd.response,\r\n\t\t\t\toptions = response.options,\r\n\t\t\t\tc2c = dfd._contentToClean = [],\r\n\t\t\t\tformNode = dom.byId(options.form),\r\n\t\t\t\tnotify = util.notify,\r\n\t\t\t\tdata = options.data || null,\r\n\t\t\t\tqueryStr;\r\n\r\n\t\t\tif(!dfd._legacy && options.method === 'POST' && !formNode){\r\n\t\t\t\tformNode = dfd._tmpForm = createForm();\r\n\t\t\t}else if(options.method === 'GET' && formNode && response.url.indexOf('?') > -1){\r\n\t\t\t\tqueryStr = response.url.slice(response.url.indexOf('?') + 1);\r\n\t\t\t\tdata = lang.mixin(ioQuery.queryToObject(queryStr), data);\r\n\t\t\t}\r\n\r\n\t\t\tif(formNode){\r\n\t\t\t\tif(!dfd._legacy){\r\n\t\t\t\t\tvar parentNode = formNode;\r\n\t\t\t\t\tdo{\r\n\t\t\t\t\t\tparentNode = parentNode.parentNode;\r\n\t\t\t\t\t}while(parentNode && parentNode !== win.doc.documentElement);\r\n\r\n\t\t\t\t\t// Append the form node or some browsers won't work\r\n\t\t\t\t\tif(!parentNode){\r\n\t\t\t\t\t\tformNode.style.position = 'absolute';\r\n\t\t\t\t\t\tformNode.style.left = '-1000px';\r\n\t\t\t\t\t\tformNode.style.top = '-1000px';\r\n\t\t\t\t\t\twin.body().appendChild(formNode);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!formNode.name){\r\n\t\t\t\t\t\tformNode.name = mid + '_form';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if we have things in data, we need to add them to the form\r\n\t\t\t\t// before submission\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tvar createInput = function(name, value){\r\n\t\t\t\t\t\tdomConstruct.create('input', {\r\n\t\t\t\t\t\t\ttype: 'hidden',\r\n\t\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\t\tvalue: value\r\n\t\t\t\t\t\t}, formNode);\r\n\t\t\t\t\t\tc2c.push(name);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor(var x in data){\r\n\t\t\t\t\t\tvar val = data[x];\r\n\t\t\t\t\t\tif(lang.isArray(val) && val.length > 1){\r\n\t\t\t\t\t\t\tfor(var i=0; i<val.length; i++){\r\n\t\t\t\t\t\t\t\tcreateInput(x, val[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(!formNode[x]){\r\n\t\t\t\t\t\t\t\tcreateInput(x, val);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tformNode[x].value = val;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//IE requires going through getAttributeNode instead of just getAttribute in some form cases,\r\n\t\t\t\t//so use it for all.  See #2844\r\n\t\t\t\tvar actionNode = formNode.getAttributeNode('action'),\r\n\t\t\t\t\tmethodNode = formNode.getAttributeNode('method'),\r\n\t\t\t\t\ttargetNode = formNode.getAttributeNode('target');\r\n\r\n\t\t\t\tif(response.url){\r\n\t\t\t\t\tdfd._originalAction = actionNode ? actionNode.value : null;\r\n\t\t\t\t\tif(actionNode){\r\n\t\t\t\t\t\tactionNode.value = response.url;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tformNode.setAttribute('action', response.url);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!dfd._legacy){\r\n\t\t\t\t\tdfd._originalMethod = methodNode ? methodNode.value : null;\r\n\t\t\t\t\tif(methodNode){\r\n\t\t\t\t\t\tmethodNode.value = options.method;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tformNode.setAttribute('method', options.method);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!methodNode || !methodNode.value){\r\n\t\t\t\t\t\tif(methodNode){\r\n\t\t\t\t\t\t\tmethodNode.value = options.method;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tformNode.setAttribute('method', options.method);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdfd._originalTarget = targetNode ? targetNode.value : null;\r\n\t\t\t\tif(targetNode){\r\n\t\t\t\t\ttargetNode.value = iframe._iframeName;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tformNode.setAttribute('target', iframe._iframeName);\r\n\t\t\t\t}\r\n\t\t\t\tformNode.target = iframe._iframeName;\r\n\r\n\t\t\t\tnotify && notify.emit('send', response, dfd.promise.cancel);\r\n\t\t\t\tiframe._notifyStart(response);\r\n\t\t\t\tformNode.submit();\r\n\t\t\t}else{\r\n\t\t\t\t// otherwise we post a GET string by changing URL location for the\r\n\t\t\t\t// iframe\r\n\r\n\t\t\t\tvar extra = '';\r\n\t\t\t\tif(response.options.data){\r\n\t\t\t\t\textra = response.options.data;\r\n\t\t\t\t\tif(typeof extra !== 'string'){\r\n\t\t\t\t\t\textra = ioQuery.objectToQuery(extra);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar tmpUrl = response.url + (response.url.indexOf('?') > -1 ? '&' : '?') + extra;\r\n\t\t\t\tnotify && notify.emit('send', response, dfd.promise.cancel);\r\n\t\t\t\tiframe._notifyStart(response);\r\n\t\t\t\tiframe.setSrc(iframe._frame, tmpUrl, true);\r\n\t\t\t}\r\n\t\t}catch(e){\r\n\t\t\tdfd.reject(e);\r\n\t\t}\r\n\t}\r\n\r\n\t// dojo/request/watch handlers\r\n\tfunction isValid(response){\r\n\t\treturn !this.isFulfilled();\r\n\t}\r\n\tfunction isReady(response){\r\n\t\treturn !!this._finished;\r\n\t}\r\n\tfunction handleResponse(response, error){\r\n\t\tif(!error){\r\n\t\t\ttry{\r\n\t\t\t\tvar options = response.options,\r\n\t\t\t\t\tdoc = iframe.doc(iframe._frame),\r\n\t\t\t\t\thandleAs = options.handleAs;\r\n\r\n\t\t\t\tif(handleAs !== 'html'){\r\n\t\t\t\t\tif(handleAs === 'xml'){\r\n\t\t\t\t\t\t// IE6-8 have to parse the XML manually. See http://bugs.dojotoolkit.org/ticket/6334\r\n\t\t\t\t\t\tif(doc.documentElement.tagName.toLowerCase() === 'html'){\r\n\t\t\t\t\t\t\tquery('a', doc.documentElement).orphan();\r\n\t\t\t\t\t\t\tvar xmlText = doc.documentElement.innerText;\r\n\t\t\t\t\t\t\txmlText = xmlText.replace(/>\\s+</g, '><');\r\n\t\t\t\t\t\t\tresponse.text = lang.trim(xmlText);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tresponse.data = doc;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// 'json' and 'javascript' and 'text'\r\n\t\t\t\t\t\tresponse.text = doc.getElementsByTagName('textarea')[0].value; // text\r\n\t\t\t\t\t}\r\n\t\t\t\t\thandlers(response);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresponse.data = doc;\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\terror = e;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(error){\r\n\t\t\tthis.reject(error);\r\n\t\t}else if(this._finished){\r\n\t\t\tthis.resolve(response);\r\n\t\t}else{\r\n\t\t\tthis.reject(new Error('Invalid dojo/request/iframe request state'));\r\n\t\t}\r\n\t}\r\n\tfunction last(response){\r\n\t\tthis._callNext();\r\n\t}\r\n\r\n\tvar defaultOptions = {\r\n\t\tmethod: 'POST'\r\n\t};\r\n\tfunction iframe(url, options, returnDeferred){\r\n\t\tvar response = util.parseArgs(url, util.deepCreate(defaultOptions, options), true);\r\n\t\turl = response.url;\r\n\t\toptions = response.options;\r\n\r\n\t\tif(options.method !== 'GET' && options.method !== 'POST'){\r\n\t\t\tthrow new Error(options.method + ' not supported by dojo/request/iframe');\r\n\t\t}\r\n\r\n\t\tif(!iframe._frame){\r\n\t\t\tiframe._frame = iframe.create(iframe._iframeName, onload + '();');\r\n\t\t}\r\n\r\n\t\tvar dfd = util.deferred(response, null, isValid, isReady, handleResponse, last);\r\n\t\tdfd._callNext = function(){\r\n\t\t\tif(!this._calledNext){\r\n\t\t\t\tthis._calledNext = true;\r\n\t\t\t\tiframe._currentDfd = null;\r\n\t\t\t\tiframe._fireNextRequest();\r\n\t\t\t}\r\n\t\t};\r\n\t\tdfd._legacy = returnDeferred;\r\n\r\n\t\tiframe._dfdQueue.push(dfd);\r\n\t\tiframe._fireNextRequest();\r\n\r\n\t\twatch(dfd);\r\n\r\n\t\treturn returnDeferred ? dfd : dfd.promise;\r\n\t}\r\n\r\n\t/*=====\r\n\tiframe = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSends a request using an iframe element with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/iframe.__Options?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\tiframe.__BaseOptions = declare(request.__BaseOptions, {\r\n\t\t// form: DOMNode?\r\n\t\t//\t\tA form node to use to submit data to the server.\r\n\t\t// data: String|Object?\r\n\t\t//\t\tData to transfer. When making a GET request, this will\r\n\t\t//\t\tbe converted to key=value parameters and appended to the\r\n\t\t//\t\tURL.\r\n\t});\r\n\tiframe.__MethodOptions = declare(null, {\r\n\t\t// method: String?\r\n\t\t//\t\tThe HTTP method to use to make the request. Must be\r\n\t\t//\t\tuppercase. Only `\"GET\"` and `\"POST\"` are accepted.\r\n\t\t//\t\tDefault is `\"POST\"`.\r\n\t});\r\n\tiframe.__Options = declare([iframe.__BaseOptions, iframe.__MethodOptions]);\r\n\r\n\tiframe.get = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP GET request using an iframe element with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/iframe.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\tiframe.post = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP POST request using an iframe element with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/iframe.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\t=====*/\r\n\tiframe.create = create;\r\n\tiframe.doc = doc;\r\n\tiframe.setSrc = setSrc;\r\n\r\n\t// TODO: Make these truly private in 2.0\r\n\tiframe._iframeName = mid + '_IoIframe';\r\n\tiframe._notifyStart = function(){};\r\n\tiframe._dfdQueue = [];\r\n\tiframe._currentDfd = null;\r\n\tiframe._fireNextRequest = fireNextRequest;\r\n\r\n\tutil.addCommonMethods(iframe, ['GET', 'POST']);\r\n\r\n\treturn iframe;\r\n});\r\n\ndefine('dojo/request/script',[\r\n\t'module',\r\n\t'./watch',\r\n\t'./util',\r\n\t'../_base/kernel',\r\n\t'../_base/array',\r\n\t'../_base/lang',\r\n\t'../on',\r\n\t'../dom',\r\n\t'../dom-construct',\r\n\t'../has',\r\n\t'../_base/window'/*=====,\r\n\t'../request',\r\n\t'../_base/declare' =====*/\r\n], function(module, watch, util, kernel, array, lang, on, dom, domConstruct, has, win/*=====, request, declare =====*/){\r\n\thas.add('script-readystatechange', function(global, document){\r\n\t\tvar script = document.createElement('script');\r\n\t\treturn typeof script['onreadystatechange'] !== 'undefined' &&\r\n\t\t\t(typeof global['opera'] === 'undefined' || global['opera'].toString() !== '[object Opera]');\r\n\t});\r\n\r\n\tvar mid = module.id.replace(/[\\/\\.\\-]/g, '_'),\r\n\t\tcounter = 0,\r\n\t\tloadEvent = has('script-readystatechange') ? 'readystatechange' : 'load',\r\n\t\treadyRegExp = /complete|loaded/,\r\n\t\tcallbacks = kernel.global[mid + '_callbacks'] = {},\r\n\t\tdeadScripts = [];\r\n\r\n\tfunction attach(id, url, frameDoc){\r\n\t\tvar doc = (frameDoc || win.doc),\r\n\t\t\telement = doc.createElement('script');\r\n\r\n\t\telement.type = 'text/javascript';\r\n\t\telement.src = url;\r\n\t\telement.id = id;\r\n\t\telement.async = true;\r\n\t\telement.charset = 'utf-8';\r\n\r\n\t\treturn doc.getElementsByTagName('head')[0].appendChild(element);\r\n\t}\r\n\r\n\tfunction remove(id, frameDoc, cleanup){\r\n\t\tdomConstruct.destroy(dom.byId(id, frameDoc));\r\n\r\n\t\tif(callbacks[id]){\r\n\t\t\tif(cleanup){\r\n\t\t\t\t// set callback to a function that deletes itself so requests that\r\n\t\t\t\t// are in-flight don't error out when returning and also\r\n\t\t\t\t// clean up after themselves\r\n\t\t\t\tcallbacks[id] = function(){\r\n\t\t\t\t\tdelete callbacks[id];\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\tdelete callbacks[id];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _addDeadScript(dfd){\r\n\t\t// Be sure to check ioArgs because it can dynamically change in the dojox/io plugins.\r\n\t\t// See http://bugs.dojotoolkit.org/ticket/15890.\r\n\t\tvar options = dfd.response.options,\r\n\t\t\tframeDoc = options.ioArgs ? options.ioArgs.frameDoc : options.frameDoc;\r\n\r\n\t\tdeadScripts.push({ id: dfd.id, frameDoc: frameDoc });\r\n\r\n\t\tif(options.ioArgs){\r\n\t\t\toptions.ioArgs.frameDoc = null;\r\n\t\t}\r\n\t\toptions.frameDoc = null;\r\n\t}\r\n\r\n\tfunction canceler(dfd, response){\r\n\t\tif(dfd.canDelete){\r\n\t\t\t//For timeouts and cancels, remove the script element immediately to\r\n\t\t\t//avoid a response from it coming back later and causing trouble.\r\n\t\t\tscript._remove(dfd.id, response.options.frameDoc, true);\r\n\t\t}\r\n\t}\r\n\tfunction isValid(response){\r\n\t\t//Do script cleanup here. We wait for one inflight pass\r\n\t\t//to make sure we don't get any weird things by trying to remove a script\r\n\t\t//tag that is part of the call chain (IE 6 has been known to\r\n\t\t//crash in that case).\r\n\t\tif(deadScripts && deadScripts.length){\r\n\t\t\tarray.forEach(deadScripts, function(_script){\r\n\t\t\t\tscript._remove(_script.id, _script.frameDoc);\r\n\t\t\t\t_script.frameDoc = null;\r\n\t\t\t});\r\n\t\t\tdeadScripts = [];\r\n\t\t}\r\n\r\n\t\treturn response.options.jsonp ? !response.data : true;\r\n\t}\r\n\tfunction isReadyScript(response){\r\n\t\treturn !!this.scriptLoaded;\r\n\t}\r\n\tfunction isReadyCheckString(response){\r\n\t\tvar checkString = response.options.checkString;\r\n\r\n\t\treturn checkString && eval('typeof(' + checkString + ') !== \"undefined\"');\r\n\t}\r\n\tfunction handleResponse(response, error){\r\n\t\tif(this.canDelete){\r\n\t\t\t_addDeadScript(this);\r\n\t\t}\r\n\t\tif(error){\r\n\t\t\tthis.reject(error);\r\n\t\t}else{\r\n\t\t\tthis.resolve(response);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction script(url, options, returnDeferred){\r\n\t\tvar response = util.parseArgs(url, util.deepCopy({}, options));\r\n\t\turl = response.url;\r\n\t\toptions = response.options;\r\n\r\n\t\tvar dfd = util.deferred(\r\n\t\t\tresponse,\r\n\t\t\tcanceler,\r\n\t\t\tisValid,\r\n\t\t\toptions.jsonp ? null : (options.checkString ? isReadyCheckString : isReadyScript),\r\n\t\t\thandleResponse\r\n\t\t);\r\n\r\n\t\tlang.mixin(dfd, {\r\n\t\t\tid: mid + (counter++),\r\n\t\t\tcanDelete: false\r\n\t\t});\r\n\r\n\t\tif(options.jsonp){\r\n\t\t\tvar queryParameter = new RegExp('[?&]' + options.jsonp + '=');\r\n\t\t\tif(!queryParameter.test(url)){\r\n\t\t\t\turl += (~url.indexOf('?') ? '&' : '?') +\r\n\t\t\t\t\toptions.jsonp + '=' +\r\n\t\t\t\t\t(options.frameDoc ? 'parent.' : '') +\r\n\t\t\t\t\tmid + '_callbacks.' + dfd.id;\r\n\t\t\t}\r\n\r\n\t\t\tdfd.canDelete = true;\r\n\t\t\tcallbacks[dfd.id] = function(json){\r\n\t\t\t\tresponse.data = json;\r\n\t\t\t\tdfd.handleResponse(response);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif(util.notify){\r\n\t\t\tutil.notify.emit('send', response, dfd.promise.cancel);\r\n\t\t}\r\n\r\n\t\tif(!options.canAttach || options.canAttach(dfd)){\r\n\t\t\tvar node = script._attach(dfd.id, url, options.frameDoc);\r\n\r\n\t\t\tif(!options.jsonp && !options.checkString){\r\n\t\t\t\tvar handle = on(node, loadEvent, function(evt){\r\n\t\t\t\t\tif(evt.type === 'load' || readyRegExp.test(node.readyState)){\r\n\t\t\t\t\t\thandle.remove();\r\n\t\t\t\t\t\tdfd.scriptLoaded = evt;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twatch(dfd);\r\n\r\n\t\treturn returnDeferred ? dfd : dfd.promise;\r\n\t}\r\n\tscript.get = script;\r\n\t/*=====\r\n\tscript = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSends a request using a script element with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/script.__Options?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\tscript.__BaseOptions = declare(request.__BaseOptions, {\r\n\t\t// jsonp: String?\r\n\t\t//\t\tThe URL parameter name that indicates the JSONP callback string.\r\n\t\t//\t\tFor instance, when using Yahoo JSONP calls it is normally,\r\n\t\t//\t\tjsonp: \"callback\". For AOL JSONP calls it is normally\r\n\t\t//\t\tjsonp: \"c\".\r\n\t\t// checkString: String?\r\n\t\t//\t\tA string of JavaScript that when evaluated like so:\r\n\t\t//\t\t\"typeof(\" + checkString + \") != 'undefined'\"\r\n\t\t//\t\tbeing true means that the script fetched has been loaded.\r\n\t\t//\t\tDo not use this if doing a JSONP type of call (use `jsonp` instead).\r\n\t\t// frameDoc: Document?\r\n\t\t//\t\tThe Document object of a child iframe. If this is passed in, the script\r\n\t\t//\t\twill be attached to that document. This can be helpful in some comet long-polling\r\n\t\t//\t\tscenarios with Firefox and Opera.\r\n\t});\r\n\tscript.__MethodOptions = declare(null, {\r\n\t\t// method: String?\r\n\t\t//\t\tThis option is ignored. All requests using this transport are\r\n\t\t//\t\tGET requests.\r\n\t});\r\n\tscript.__Options = declare([script.__BaseOptions, script.__MethodOptions]);\r\n\r\n\tscript.get = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP GET request using a script element with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/script.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\t=====*/\r\n\r\n\t// TODO: Remove in 2.0\r\n\tscript._attach = attach;\r\n\tscript._remove = remove;\r\n\tscript._callbacksProperty = mid + '_callbacks';\r\n\r\n\treturn script;\r\n});\r\n\ndefine('dojo/store/util/QueryResults',[\"../../_base/array\", \"../../_base/lang\", \"../../when\"\r\n], function(array, lang, when){\r\n\r\n// module:\r\n//\t\tdojo/store/util/QueryResults\r\n\r\nvar QueryResults = function(results){\r\n\t// summary:\r\n\t//\t\tA function that wraps the results of a store query with additional\r\n\t//\t\tmethods.\r\n\t// description:\r\n\t//\t\tQueryResults is a basic wrapper that allows for array-like iteration\r\n\t//\t\tover any kind of returned data from a query.  While the simplest store\r\n\t//\t\twill return a plain array of data, other stores may return deferreds or\r\n\t//\t\tpromises; this wrapper makes sure that *all* results can be treated\r\n\t//\t\tthe same.\r\n\t//\r\n\t//\t\tAdditional methods include `forEach`, `filter` and `map`.\r\n\t// results: Array|dojo/promise/Promise\r\n\t//\t\tThe result set as an array, or a promise for an array.\r\n\t// returns:\r\n\t//\t\tAn array-like object that can be used for iterating over.\r\n\t// example:\r\n\t//\t\tQuery a store and iterate over the results.\r\n\t//\r\n\t//\t|\tstore.query({ prime: true }).forEach(function(item){\r\n\t//\t|\t\t//\tdo something\r\n\t//\t|\t});\r\n\r\n\tif(!results){\r\n\t\treturn results;\r\n\t}\r\n\r\n\tvar isPromise = !!results.then;\r\n\t// if it is a promise it may be frozen\r\n\tif(isPromise){\r\n\t\tresults = lang.delegate(results);\r\n\t}\r\n\tfunction addIterativeMethod(method){\r\n\t\t// Always add the iterative methods so a QueryResults is\r\n\t\t// returned whether the environment is ES3 or ES5\r\n\t\tresults[method] = function(){\r\n\t\t\tvar args = arguments;\r\n\t\t\tvar result = when(results, function(results){\r\n\t\t\t\tArray.prototype.unshift.call(args, results);\r\n\t\t\t\treturn QueryResults(array[method].apply(array, args));\r\n\t\t\t});\r\n\t\t\t// forEach should only return the result of when()\r\n\t\t\t// when we're wrapping a promise\r\n\t\t\tif(method !== \"forEach\" || isPromise){\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\taddIterativeMethod(\"forEach\");\r\n\taddIterativeMethod(\"filter\");\r\n\taddIterativeMethod(\"map\");\r\n\tif(results.total == null){\r\n\t\tresults.total = when(results, function(results){\r\n\t\t\treturn results.length;\r\n\t\t});\r\n\t}\r\n\treturn results; // Object\r\n};\r\n\r\nlang.setObject(\"dojo.store.util.QueryResults\", QueryResults);\r\n\r\nreturn QueryResults;\r\n\r\n});\r\n\ndefine('dojo/store/util/SimpleQueryEngine',[\"../../_base/array\" /*=====, \"../api/Store\" =====*/], function(arrayUtil /*=====, Store =====*/){\r\n\r\n// module:\r\n//\t\tdojo/store/util/SimpleQueryEngine\r\n\r\nreturn function(query, options){\r\n\t// summary:\r\n\t//\t\tSimple query engine that matches using filter functions, named filter\r\n\t//\t\tfunctions or objects by name-value on a query object hash\r\n\t//\r\n\t// description:\r\n\t//\t\tThe SimpleQueryEngine provides a way of getting a QueryResults through\r\n\t//\t\tthe use of a simple object hash as a filter.  The hash will be used to\r\n\t//\t\tmatch properties on data objects with the corresponding value given. In\r\n\t//\t\tother words, only exact matches will be returned.\r\n\t//\r\n\t//\t\tThis function can be used as a template for more complex query engines;\r\n\t//\t\tfor example, an engine can be created that accepts an object hash that\r\n\t//\t\tcontains filtering functions, or a string that gets evaluated, etc.\r\n\t//\r\n\t//\t\tWhen creating a new dojo.store, simply set the store's queryEngine\r\n\t//\t\tfield as a reference to this function.\r\n\t//\r\n\t// query: Object\r\n\t//\t\tAn object hash with fields that may match fields of items in the store.\r\n\t//\t\tValues in the hash will be compared by normal == operator, but regular expressions\r\n\t//\t\tor any object that provides a test() method are also supported and can be\r\n\t//\t\tused to match strings by more complex expressions\r\n\t//\t\t(and then the regex's or object's test() method will be used to match values).\r\n\t//\r\n\t// options: dojo/store/api/Store.QueryOptions?\r\n\t//\t\tAn object that contains optional information such as sort, start, and count.\r\n\t//\r\n\t// returns: Function\r\n\t//\t\tA function that caches the passed query under the field \"matches\".  See any\r\n\t//\t\tof the \"query\" methods on dojo.stores.\r\n\t//\r\n\t// example:\r\n\t//\t\tDefine a store with a reference to this engine, and set up a query method.\r\n\t//\r\n\t//\t|\tvar myStore = function(options){\r\n\t//\t|\t\t//\t...more properties here\r\n\t//\t|\t\tthis.queryEngine = SimpleQueryEngine;\r\n\t//\t|\t\t//\tdefine our query method\r\n\t//\t|\t\tthis.query = function(query, options){\r\n\t//\t|\t\t\treturn QueryResults(this.queryEngine(query, options)(this.data));\r\n\t//\t|\t\t};\r\n\t//\t|\t};\r\n\r\n\t// create our matching query function\r\n\tswitch(typeof query){\r\n\t\tdefault:\r\n\t\t\tthrow new Error(\"Can not query with a \" + typeof query);\r\n\t\tcase \"object\": case \"undefined\":\r\n\t\t\tvar queryObject = query;\r\n\t\t\tquery = function(object){\r\n\t\t\t\tfor(var key in queryObject){\r\n\t\t\t\t\tvar required = queryObject[key];\r\n\t\t\t\t\tif(required && required.test){\r\n\t\t\t\t\t\t// an object can provide a test method, which makes it work with regex\r\n\t\t\t\t\t\tif(!required.test(object[key], object)){\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(required != object[key]){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\t\t\tbreak;\r\n\t\tcase \"string\":\r\n\t\t\t// named query\r\n\t\t\tif(!this[query]){\r\n\t\t\t\tthrow new Error(\"No filter function \" + query + \" was found in store\");\r\n\t\t\t}\r\n\t\t\tquery = this[query];\r\n\t\t\t// fall through\r\n\t\tcase \"function\":\r\n\t\t\t// fall through\r\n\t}\r\n\tfunction execute(array){\r\n\t\t// execute the whole query, first we filter\r\n\t\tvar results = arrayUtil.filter(array, query);\r\n\t\t// next we sort\r\n\t\tvar sortSet = options && options.sort;\r\n\t\tif(sortSet){\r\n\t\t\tresults.sort(typeof sortSet == \"function\" ? sortSet : function(a, b){\r\n\t\t\t\tfor(var sort, i=0; sort = sortSet[i]; i++){\r\n\t\t\t\t\tvar aValue = a[sort.attribute];\r\n\t\t\t\t\tvar bValue = b[sort.attribute];\r\n\t\t\t\t\t// valueOf enables proper comparison of dates\r\n\t\t\t\t\taValue = aValue != null ? aValue.valueOf() : aValue;\r\n\t\t\t\t\tbValue = bValue != null ? bValue.valueOf() : bValue;\r\n\t\t\t\t\tif (aValue != bValue){\r\n\t\t\t\t\t\treturn !!sort.descending == (aValue == null || aValue > bValue) ? -1 : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\t\t}\r\n\t\t// now we paginate\r\n\t\tif(options && (options.start || options.count)){\r\n\t\t\tvar total = results.length;\r\n\t\t\tresults = results.slice(options.start || 0, (options.start || 0) + (options.count || Infinity));\r\n\t\t\tresults.total = total;\r\n\t\t}\r\n\t\treturn results;\r\n\t}\r\n\texecute.matches = query;\r\n\treturn execute;\r\n};\r\n\r\n});\r\n\ndefine('dojo/store/Memory',[\"../_base/declare\", \"./util/QueryResults\", \"./util/SimpleQueryEngine\" /*=====, \"./api/Store\" =====*/],\r\nfunction(declare, QueryResults, SimpleQueryEngine /*=====, Store =====*/){\r\n\r\n// module:\r\n//\t\tdojo/store/Memory\r\n\r\n// No base class, but for purposes of documentation, the base class is dojo/store/api/Store\r\nvar base = null;\r\n/*===== base = Store; =====*/\r\n\r\nreturn declare(\"dojo.store.Memory\", base, {\r\n\t// summary:\r\n\t//\t\tThis is a basic in-memory object store. It implements dojo/store/api/Store.\r\n\tconstructor: function(options){\r\n\t\t// summary:\r\n\t\t//\t\tCreates a memory object store.\r\n\t\t// options: dojo/store/Memory\r\n\t\t//\t\tThis provides any configuration information that will be mixed into the store.\r\n\t\t//\t\tThis should generally include the data property to provide the starting set of data.\r\n\t\tfor(var i in options){\r\n\t\t\tthis[i] = options[i];\r\n\t\t}\r\n\t\tthis.setData(this.data || []);\r\n\t},\r\n\t// data: Array\r\n\t//\t\tThe array of all the objects in the memory store\r\n\tdata:null,\r\n\r\n\t// idProperty: String\r\n\t//\t\tIndicates the property to use as the identity property. The values of this\r\n\t//\t\tproperty should be unique.\r\n\tidProperty: \"id\",\r\n\r\n\t// index: Object\r\n\t//\t\tAn index of data indices into the data array by id\r\n\tindex:null,\r\n\r\n\t// queryEngine: Function\r\n\t//\t\tDefines the query engine to use for querying the data store\r\n\tqueryEngine: SimpleQueryEngine,\r\n\tget: function(id){\r\n\t\t// summary:\r\n\t\t//\t\tRetrieves an object by its identity\r\n\t\t// id: Number\r\n\t\t//\t\tThe identity to use to lookup the object\r\n\t\t// returns: Object\r\n\t\t//\t\tThe object in the store that matches the given id.\r\n\t\treturn this.data[this.index[id]];\r\n\t},\r\n\tgetIdentity: function(object){\r\n\t\t// summary:\r\n\t\t//\t\tReturns an object's identity\r\n\t\t// object: Object\r\n\t\t//\t\tThe object to get the identity from\r\n\t\t// returns: Number\r\n\t\treturn object[this.idProperty];\r\n\t},\r\n\tput: function(object, options){\r\n\t\t// summary:\r\n\t\t//\t\tStores an object\r\n\t\t// object: Object\r\n\t\t//\t\tThe object to store.\r\n\t\t// options: dojo/store/api/Store.PutDirectives?\r\n\t\t//\t\tAdditional metadata for storing the data.  Includes an \"id\"\r\n\t\t//\t\tproperty if a specific id is to be used.\r\n\t\t// returns: Number\r\n\t\tvar data = this.data,\r\n\t\t\tindex = this.index,\r\n\t\t\tidProperty = this.idProperty;\r\n\t\tvar id = object[idProperty] = (options && \"id\" in options) ? options.id : idProperty in object ? object[idProperty] : Math.random();\r\n\t\tif(id in index){\r\n\t\t\t// object exists\r\n\t\t\tif(options && options.overwrite === false){\r\n\t\t\t\tthrow new Error(\"Object already exists\");\r\n\t\t\t}\r\n\t\t\t// replace the entry in data\r\n\t\t\tdata[index[id]] = object;\r\n\t\t}else{\r\n\t\t\t// add the new object\r\n\t\t\tindex[id] = data.push(object) - 1;\r\n\t\t}\r\n\t\treturn id;\r\n\t},\r\n\tadd: function(object, options){\r\n\t\t// summary:\r\n\t\t//\t\tCreates an object, throws an error if the object already exists\r\n\t\t// object: Object\r\n\t\t//\t\tThe object to store.\r\n\t\t// options: dojo/store/api/Store.PutDirectives?\r\n\t\t//\t\tAdditional metadata for storing the data.  Includes an \"id\"\r\n\t\t//\t\tproperty if a specific id is to be used.\r\n\t\t// returns: Number\r\n\t\t(options = options || {}).overwrite = false;\r\n\t\t// call put with overwrite being false\r\n\t\treturn this.put(object, options);\r\n\t},\r\n\tremove: function(id){\r\n\t\t// summary:\r\n\t\t//\t\tDeletes an object by its identity\r\n\t\t// id: Number\r\n\t\t//\t\tThe identity to use to delete the object\r\n\t\t// returns: Boolean\r\n\t\t//\t\tReturns true if an object was removed, falsy (undefined) if no object matched the id\r\n\t\tvar index = this.index;\r\n\t\tvar data = this.data;\r\n\t\tif(id in index){\r\n\t\t\tdata.splice(index[id], 1);\r\n\t\t\t// now we have to reindex\r\n\t\t\tthis.setData(data);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\tquery: function(query, options){\r\n\t\t// summary:\r\n\t\t//\t\tQueries the store for objects.\r\n\t\t// query: Object\r\n\t\t//\t\tThe query to use for retrieving objects from the store.\r\n\t\t// options: dojo/store/api/Store.QueryOptions?\r\n\t\t//\t\tThe optional arguments to apply to the resultset.\r\n\t\t// returns: dojo/store/api/Store.QueryResults\r\n\t\t//\t\tThe results of the query, extended with iterative methods.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t\tGiven the following store:\r\n\t\t//\r\n\t\t// \t|\tvar store = new Memory({\r\n\t\t// \t|\t\tdata: [\r\n\t\t// \t|\t\t\t{id: 1, name: \"one\", prime: false },\r\n\t\t//\t|\t\t\t{id: 2, name: \"two\", even: true, prime: true},\r\n\t\t//\t|\t\t\t{id: 3, name: \"three\", prime: true},\r\n\t\t//\t|\t\t\t{id: 4, name: \"four\", even: true, prime: false},\r\n\t\t//\t|\t\t\t{id: 5, name: \"five\", prime: true}\r\n\t\t//\t|\t\t]\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t//\t...find all items where \"prime\" is true:\r\n\t\t//\r\n\t\t//\t|\tvar results = store.query({ prime: true });\r\n\t\t//\r\n\t\t//\t...or find all items where \"even\" is true:\r\n\t\t//\r\n\t\t//\t|\tvar results = store.query({ even: true });\r\n\t\treturn QueryResults(this.queryEngine(query, options)(this.data));\r\n\t},\r\n\tsetData: function(data){\r\n\t\t// summary:\r\n\t\t//\t\tSets the given data as the source for this store, and indexes it\r\n\t\t// data: Object[]\r\n\t\t//\t\tAn array of objects to use as the source of data.\r\n\t\tif(data.items){\r\n\t\t\t// just for convenience with the data format IFRS expects\r\n\t\t\tthis.idProperty = data.identifier || this.idProperty;\r\n\t\t\tdata = this.data = data.items;\r\n\t\t}else{\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\t\tthis.index = {};\r\n\t\tfor(var i = 0, l = data.length; i < l; i++){\r\n\t\t\tthis.index[data[i][this.idProperty]] = i;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n});\r\n\ndefine('dojo/store/Observable',[\"../_base/kernel\", \"../_base/lang\", \"../when\", \"../_base/array\" /*=====, \"./api/Store\" =====*/\r\n], function(kernel, lang, when, array /*=====, Store =====*/){\r\n\r\n// module:\r\n//\t\tdojo/store/Observable\r\n\r\nvar Observable = function(/*Store*/ store){\r\n\t// summary:\r\n\t//\t\tThe Observable store wrapper takes a store and sets an observe method on query()\r\n\t//\t\tresults that can be used to monitor results for changes.\r\n\t//\r\n\t// description:\r\n\t//\t\tObservable wraps an existing store so that notifications can be made when a query\r\n\t//\t\tis performed.\r\n\t//\r\n\t// example:\r\n\t//\t\tCreate a Memory store that returns an observable query, and then log some\r\n\t//\t\tinformation about that query.\r\n\t//\r\n\t//\t|\tvar store = Observable(new Memory({\r\n\t//\t|\t\tdata: [\r\n\t//\t|\t\t\t{id: 1, name: \"one\", prime: false},\r\n\t//\t|\t\t\t{id: 2, name: \"two\", even: true, prime: true},\r\n\t//\t|\t\t\t{id: 3, name: \"three\", prime: true},\r\n\t//\t|\t\t\t{id: 4, name: \"four\", even: true, prime: false},\r\n\t//\t|\t\t\t{id: 5, name: \"five\", prime: true}\r\n\t//\t|\t\t]\r\n\t//\t|\t}));\r\n\t//\t|\tvar changes = [], results = store.query({ prime: true });\r\n\t//\t|\tvar observer = results.observe(function(object, previousIndex, newIndex){\r\n\t//\t|\t\tchanges.push({previousIndex:previousIndex, newIndex:newIndex, object:object});\r\n\t//\t|\t});\r\n\t//\r\n\t//\t\tSee the Observable tests for more information.\r\n\r\n\tvar undef, queryUpdaters = [], revision = 0;\r\n\t// a Comet driven store could directly call notify to notify observers when data has\r\n\t// changed on the backend\r\n\t// create a new instance\r\n\tstore = lang.delegate(store);\r\n\t\r\n\tstore.notify = function(object, existingId){\r\n\t\trevision++;\r\n\t\tvar updaters = queryUpdaters.slice();\r\n\t\tfor(var i = 0, l = updaters.length; i < l; i++){\r\n\t\t\tupdaters[i](object, existingId);\r\n\t\t}\r\n\t};\r\n\tvar originalQuery = store.query;\r\n\tstore.query = function(query, options){\r\n\t\toptions = options || {};\r\n\t\tvar results = originalQuery.apply(this, arguments);\r\n\t\tif(results && results.forEach){\r\n\t\t\tvar nonPagedOptions = lang.mixin({}, options);\r\n\t\t\tdelete nonPagedOptions.start;\r\n\t\t\tdelete nonPagedOptions.count;\r\n\r\n\t\t\tvar queryExecutor = store.queryEngine && store.queryEngine(query, nonPagedOptions);\r\n\t\t\tvar queryRevision = revision;\r\n\t\t\tvar listeners = [], queryUpdater;\r\n\t\t\tresults.observe = function(listener, includeObjectUpdates){\r\n\t\t\t\tif(listeners.push(listener) == 1){\r\n\t\t\t\t\t// first listener was added, create the query checker and updater\r\n\t\t\t\t\tqueryUpdaters.push(queryUpdater = function(changed, existingId){\r\n\t\t\t\t\t\twhen(results, function(resultsArray){\r\n\t\t\t\t\t\t\tvar atEnd = resultsArray.length != options.count;\r\n\t\t\t\t\t\t\tvar i, l, listener;\r\n\t\t\t\t\t\t\tif(++queryRevision != revision){\r\n\t\t\t\t\t\t\t\tthrow new Error(\"Query is out of date, you must observe() the query prior to any data modifications\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar removedObject, removedFrom = -1, insertedInto = -1;\r\n\t\t\t\t\t\t\tif(existingId !== undef){\r\n\t\t\t\t\t\t\t\t// remove the old one\r\n\t\t\t\t\t\t\t\tfor(i = 0, l = resultsArray.length; i < l; i++){\r\n\t\t\t\t\t\t\t\t\tvar object = resultsArray[i];\r\n\t\t\t\t\t\t\t\t\tif(store.getIdentity(object) == existingId){\r\n\t\t\t\t\t\t\t\t\t\tremovedObject = object;\r\n\t\t\t\t\t\t\t\t\t\tremovedFrom = i;\r\n\t\t\t\t\t\t\t\t\t\tif(queryExecutor || !changed){// if it was changed and we don't have a queryExecutor, we shouldn't remove it because updated objects would be eliminated\r\n\t\t\t\t\t\t\t\t\t\t\tresultsArray.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(queryExecutor){\r\n\t\t\t\t\t\t\t\t// add the new one\r\n\t\t\t\t\t\t\t\tif(changed &&\r\n\t\t\t\t\t\t\t\t\t\t// if a matches function exists, use that (probably more efficient)\r\n\t\t\t\t\t\t\t\t\t\t(queryExecutor.matches ? queryExecutor.matches(changed) : queryExecutor([changed]).length)){\r\n\r\n\t\t\t\t\t\t\t\t\tvar firstInsertedInto = removedFrom > -1 ? \r\n\t\t\t\t\t\t\t\t\t\tremovedFrom : // put back in the original slot so it doesn't move unless it needs to (relying on a stable sort below)\r\n\t\t\t\t\t\t\t\t\t\tresultsArray.length;\r\n\t\t\t\t\t\t\t\t\tresultsArray.splice(firstInsertedInto, 0, changed); // add the new item\r\n\t\t\t\t\t\t\t\t\tinsertedInto = array.indexOf(queryExecutor(resultsArray), changed); // sort it\r\n\t\t\t\t\t\t\t\t\t// we now need to push the change back into the original results array\r\n\t\t\t\t\t\t\t\t\tresultsArray.splice(firstInsertedInto, 1); // remove the inserted item from the previous index\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif((options.start && insertedInto == 0) ||\r\n\t\t\t\t\t\t\t\t\t\t(!atEnd && insertedInto == resultsArray.length)){\r\n\t\t\t\t\t\t\t\t\t\t// if it is at the end of the page, assume it goes into the prev or next page\r\n\t\t\t\t\t\t\t\t\t\tinsertedInto = -1;\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tresultsArray.splice(insertedInto, 0, changed); // and insert into the results array with the correct index\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else if(changed){\r\n\t\t\t\t\t\t\t\t// we don't have a queryEngine, so we can't provide any information\r\n\t\t\t\t\t\t\t\t// about where it was inserted or moved to. If it is an update, we leave it's position alone, other we at least indicate a new object\r\n\t\t\t\t\t\t\t\tif(existingId !== undef){\r\n\t\t\t\t\t\t\t\t\t// an update, keep the index the same\r\n\t\t\t\t\t\t\t\t\tinsertedInto = removedFrom;\r\n\t\t\t\t\t\t\t\t}else if(!options.start){\r\n\t\t\t\t\t\t\t\t\t// a new object\r\n\t\t\t\t\t\t\t\t\tinsertedInto = store.defaultIndex || 0;\r\n\t\t\t\t\t\t\t\t\tresultsArray.splice(insertedInto, 0, changed);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif((removedFrom > -1 || insertedInto > -1) &&\r\n\t\t\t\t\t\t\t\t\t(includeObjectUpdates || !queryExecutor || (removedFrom != insertedInto))){\r\n\t\t\t\t\t\t\t\tvar copyListeners = listeners.slice();\r\n\t\t\t\t\t\t\t\tfor(i = 0;listener = copyListeners[i]; i++){\r\n\t\t\t\t\t\t\t\t\tlistener(changed || removedObject, removedFrom, insertedInto);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tvar handle = {};\r\n\t\t\t\t// TODO: Remove cancel in 2.0.\r\n\t\t\t\thandle.remove = handle.cancel = function(){\r\n\t\t\t\t\t// remove this listener\r\n\t\t\t\t\tvar index = array.indexOf(listeners, listener);\r\n\t\t\t\t\tif(index > -1){ // check to make sure we haven't already called cancel\r\n\t\t\t\t\t\tlisteners.splice(index, 1);\r\n\t\t\t\t\t\tif(!listeners.length){\r\n\t\t\t\t\t\t\t// no more listeners, remove the query updater too\r\n\t\t\t\t\t\t\tqueryUpdaters.splice(array.indexOf(queryUpdaters, queryUpdater), 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn handle;\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn results;\r\n\t};\r\n\tvar inMethod;\r\n\tfunction whenFinished(method, action){\r\n\t\tvar original = store[method];\r\n\t\tif(original){\r\n\t\t\tstore[method] = function(value){\r\n\t\t\t\tvar originalId;\r\n\t\t\t\tif(method === 'put'){\r\n\t\t\t\t\toriginalId = store.getIdentity(value);\r\n\t\t\t\t}\r\n\t\t\t\tif(inMethod){\r\n\t\t\t\t\t// if one method calls another (like add() calling put()) we don't want two events\r\n\t\t\t\t\treturn original.apply(this, arguments);\r\n\t\t\t\t}\r\n\t\t\t\tinMethod = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar results = original.apply(this, arguments);\r\n\t\t\t\t\twhen(results, function(results){\r\n\t\t\t\t\t\taction((typeof results == \"object\" && results) || value, originalId);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn results;\r\n\t\t\t\t}finally{\r\n\t\t\t\t\tinMethod = false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\t// monitor for updates by listening to these methods\r\n\twhenFinished(\"put\", function(object, originalId){\r\n\t\tstore.notify(object, originalId);\r\n\t});\r\n\twhenFinished(\"add\", function(object){\r\n\t\tstore.notify(object);\r\n\t});\r\n\twhenFinished(\"remove\", function(id){\r\n\t\tstore.notify(undefined, id);\r\n\t});\r\n\r\n\treturn store;\r\n};\r\n\r\nlang.setObject(\"dojo.store.Observable\", Observable);\r\n\r\nreturn Observable;\r\n});\r\n\ndefine('dojo/main',[\r\n\t\"./_base/kernel\",\t// kernel.isAsync\r\n\t\"./has\",\r\n\t\"require\",\r\n\t\"./sniff\",\r\n\t\"./_base/lang\",\r\n\t\"./_base/array\",\r\n\t\"./_base/config\",\r\n\t\"./ready\",\r\n\t\"./_base/declare\",\r\n\t\"./_base/connect\",\r\n\t\"./_base/Deferred\",\r\n\t\"./_base/json\",\r\n\t\"./_base/Color\",\r\n\t\"./has!dojo-firebug?./_firebug/firebug\",\r\n\t\"./has!host-browser?./_base/browser\",\r\n\t\"./has!dojo-sync-loader?./_base/loader\",\r\n\t\"dojo/i18n\",\r\n\t\"dojo/cookie\",\r\n\t\"dojo/date\",\r\n\t\"dojo/cache\",\r\n\t\"dojo/fx\",\r\n\t\"dojo/hccss\",\r\n\t\"dojo/html\",\r\n\t\"dojo/number\",\r\n\t\"dojo/parser\",\r\n\t\"dojo/request\",\r\n\t\"dojo/Stateful\",\r\n\t\"dojo/string\",\r\n\t\"dojo/touch\",\r\n\t\"dojo/uacss\",\r\n\t\"dojo/window\",\r\n\t\"dojo/cldr/nls/currency\",\r\n\t\"dojo/cldr/nls/gregorian\",\r\n\t\"dojo/data/api/Identity\",\r\n\t\"dojo/data/api/Notification\",\r\n\t\"dojo/data/api/Read\",\r\n\t\"dojo/data/api/Request\", \r\n\t\"dojo/data/api/Write\",\r\n\t\"dojo/data/ItemFileReadStore\",\r\n\t\"dojo/data/ItemFileWriteStore\",\r\n\t\"dojo/date/stamp\",\r\n\t\"dojo/dnd/Avatar\",\r\n\t\"dojo/dnd/Manager\",\r\n\t\"dojo/dnd/Moveable\",\r\n\t\"dojo/dnd/Mover\",\r\n\t\"dojo/dnd/TimedMoveable\", \r\n\t\"dojo/dnd/move\",\r\n\t\"dojo/fx/Toggler\",\r\n\t\"dojo/fx/easing\",\r\n\t\"dojo/nls/colors\",\r\n\t\"dojo/promise/all\",\r\n\t\"dojo/promise/first\",\r\n\t\"dojo/request/default\",\r\n\t\"dojo/request/iframe\",\r\n\t\"dojo/request/script\",\r\n\t\"dojo/store/util/QueryResults\",\r\n\t\"dojo/store/util/SimpleQueryEngine\",\r\n\t\"dojo/store/Memory\",\r\n\t\"dojo/store/Observable\"\r\n\r\n], function(kernel, has, require, sniff, lang, array, config, ready){\r\n\t// module:\r\n\t//\t\tdojo/main\r\n\t// summary:\r\n\t//\t\tThis is the package main module for the dojo package; it loads dojo base appropriate for the execution environment.\r\n\r\n\t// the preferred way to load the dojo firebug console is by setting has(\"dojo-firebug\") true in dojoConfig\r\n\t// the isDebug config switch is for backcompat and will work fine in sync loading mode; it works in\r\n\t// async mode too, but there's no guarantee when the module is loaded; therefore, if you need a firebug\r\n\t// console guaranteed at a particular spot in an app, either set config.has[\"dojo-firebug\"] true before\r\n\t// loading dojo.js or explicitly include dojo/_firebug/firebug in a dependency list.\r\n\tif(config.isDebug){\r\n\t\trequire([\"./_firebug/firebug\"]);\r\n\t}\r\n\r\n\t// dojoConfig.require is deprecated; use the loader configuration property deps\r\n\thas.add(\"dojo-config-require\", 1);\r\n\tif(has(\"dojo-config-require\")){\r\n\t\tvar deps= config.require;\r\n\t\tif(deps){\r\n\t\t\t// config.require may be dot notation\r\n\t\t\tdeps= array.map(lang.isArray(deps) ? deps : [deps], function(item){ return item.replace(/\\./g, \"/\"); });\r\n\t\t\tif(kernel.isAsync){\r\n\t\t\t\trequire(deps);\r\n\t\t\t}else{\r\n\t\t\t\t// this is a bit janky; in 1.6- dojo is defined before these requires are applied; but in 1.7+\r\n\t\t\t\t// dojo isn't defined until returning from this module; this is only a problem in sync mode\r\n\t\t\t\t// since we're in sync mode, we know we've got our loader with its priority ready queue\r\n\t\t\t\tready(1, function(){require(deps);});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn kernel;\r\n});\r\n\ndefine('dojo', ['dojo/main'], function (main) { return main; });\n\n"]}