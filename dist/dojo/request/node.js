/**
 * dojo - A version of dojo.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojo/
 * @license MIT
 */
define(["require","./util","./handlers","../errors/RequestTimeoutError","../node!http","../node!https","../node!url","../node!stream"],function(require,e,t,o,s,r,n,a){var i=a.Stream,p={method:"GET",query:null,data:void 0,headers:{}};function c(a,c){var u=e.parseArgs(a,e.deepCreate(p,c),c&&c.data instanceof i);a=u.url,c=u.options;var d=e.deferred(u,function(e,t){t.clientRequest.abort()});a=n.parse(a);var h=u.requestOptions={hostname:a.hostname,port:a.port,socketPath:c.socketPath,method:c.method,headers:c.headers,agent:c.agent,pfx:c.pfx,key:c.key,passphrase:c.passphrase,cert:c.cert,ca:c.ca,ciphers:c.ciphers,rejectUnauthorized:!1!==c.rejectUnauthorized};a.path&&(h.path=a.path),(c.user||c.password)&&(h.auth=(c.user||"")+":"+(c.password||""));var l=u.clientRequest=("https:"===a.protocol?r:s).request(h);if(c.socketOptions&&("timeout"in c.socketOptions&&l.setTimeout(c.socketOptions.timeout),"noDelay"in c.socketOptions&&l.setNoDelay(c.socketOptions.noDelay),"keepAlive"in c.socketOptions)){var m=c.socketOptions.keepAlive;l.setKeepAlive(m>=0,m||0)}if(l.on("socket",function(){u.hasSocket=!0,d.progress(u)}),l.on("response",function(e){u.clientResponse=e,u.status=e.statusCode,u.getHeader=function(t){return e.headers[t.toLowerCase()]||null};var o=[];e.on("data",function(e){o.push(e)}),e.on("end",function(){f&&clearTimeout(f),u.text=o.join("");try{t(u),d.resolve(u)}catch(e){d.reject(e)}})}),l.on("error",d.reject),c.data?"string"==typeof c.data?l.end(c.data):c.data.pipe(l):l.end(),c.timeout)var f=setTimeout(function(){d.cancel(new o(u))},c.timeout);return d.promise}return e.addCommonMethods(c),c});
//# sourceMappingURL=../sourcemaps/request/node.js.map
