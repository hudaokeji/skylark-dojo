/**
 * dojo - A version of dojo.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojo/
 * @license MIT
 */
define(["./_base/kernel","./has","./dom","./on","./_base/array","./_base/lang","./selector/_loader","./selector/_loader!default"],function(t,n,r,e,i,o,u,a){"use strict";n.add("array-extensible",function(){return 1==o.delegate([],{length:1}).length&&!n("bug-for-in-skips-shadowed")});var s=Array.prototype,f=s.slice,c=s.concat,h=i.forEach,l=function(n,r,e){return r=[0].concat(f.call(r,0)),e=e||t.global,function(t){return r[0]=t,n.apply(e,r)}},p=function(t){var r=this instanceof d&&n("array-extensible");"number"==typeof t&&(t=Array(t));var e=t&&"length"in t?t:arguments;if(r||!e.sort){for(var i=r?this:[],u=i.length=e.length,a=0;a<u;a++)i[a]=e[a];if(r)return i;e=i}return o._mixin(e,_),e._NodeListCtor=function(t){return d(t)},e},d=p,_=d.prototype=n("array-extensible")?[]:{};function v(t,n){var e=function(e,i){if("string"==typeof i&&!(i=r.byId(i)))return new n([]);var o="string"==typeof e?t(e,i):e?e.end&&e.on?e:[e]:[];return o.end&&o.on?o:new n(o)};if(e.matches=t.match||function(t,n,r){return e.filter([t],n,r).length>0},e.filter=t.filter||function(t,n,r){return e(n,r).filter(function(n){return i.indexOf(t,n)>-1})},"function"!=typeof t){var o=t.search;t=function(t,n){return o(n||document,t)}}return e}d._wrap=_._wrap=function(t,n,r){var e=new(r||this._NodeListCtor||d)(t);return n?e._stash(n):e},d._adaptAsMap=function(t,n){return function(){return this.map(l(t,arguments,n))}},d._adaptAsForEach=function(t,n){return function(){return this.forEach(l(t,arguments,n)),this}},d._adaptAsFilter=function(t,n){return function(){return this.filter(l(t,arguments,n))}},d._adaptWithCondition=function(n,r,e){return function(){var i=arguments,o=l(n,i,e);return r.call(e||t.global,i)?this.map(o):(this.forEach(o),this)}},h(["slice","splice"],function(t){var n=s[t];_[t]=function(){return this._wrap(n.apply(this,arguments),"slice"==t?this:null)}}),h(["indexOf","lastIndexOf","every","some"],function(n){var r=i[n];_[n]=function(){return r.apply(t,[this].concat(f.call(arguments,0)))}}),o.extend(p,{constructor:d,_NodeListCtor:d,toString:function(){return this.join(",")},_stash:function(t){return this._parent=t,this},on:function(t,n){var r=this.map(function(r){return e(r,t,n)});return r.remove=function(){for(var t=0;t<r.length;t++)r[t].remove()},r},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(t){var n=f.call(this,0),r=i.map(arguments,function(t){return f.call(t,0)});return this._wrap(c.apply(n,r),this)},map:function(t,n){return this._wrap(i.map(this,t,n),this)},forEach:function(t,n){return h(this,t,n),this},filter:function(t){var n=arguments,r=this,e=0;if("string"==typeof t){if(r=y._filterResult(this,n[0]),1==n.length)return r._stash(this);e=1}return this._wrap(i.filter(r,n[e],n[e+1]),this)},instantiate:function(t,n){var r=o.isFunction(t)?t:o.getObject(t);return n=n||{},this.forEach(function(t){new r(n,t)})},at:function(){var t=new this._NodeListCtor(0);return h(arguments,function(n){n<0&&(n=this.length+n),this[n]&&t.push(this[n])},this),t._stash(this)}});var y=v(a,p);return t.query=v(a,function(t){return p(t)}),!1===require.isBrowser?y.load=function(t,n,r,e){r()}:y.load=function(t,n,r){u.load(t,n,function(t){r(v(t,p))})},t._filterQueryResult=y._filterResult=function(t,n,r){return new p(y.filter(t,n,r))},t.NodeList=y.NodeList=p,y});
//# sourceMappingURL=sourcemaps/query.js.map
