/**
 * dojo - A version of dojo.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojo/
 * @license MIT
 */
define(["./kernel","../has","./lang"],function(t,e,n){var r=n.mixin,i=Object.prototype,o=i.toString,a=new Function,s=0,c="constructor";function l(t,e){throw new Error("declare"+(e?" "+e:"")+": "+t)}function p(t,e,n){var r,o,a,s,p,h,u,f,d,y=this._inherited=this._inherited||{};if("string"==typeof t&&(r=t,t=e,e=n),n=0,s=t.callee,(r=r||s.nom)||l("can't deduce a name to call inherited()",this.declaredClass),a=(p=this.constructor._meta).bases,d=y.p,r!=c){if(y.c!==s&&(d=0,(p=(h=a[0])._meta).hidden[r]!==s)){(o=p.chains)&&"string"==typeof o[r]&&l("calling chained method with inherited: "+r,this.declaredClass);do{if(p=h._meta,u=h.prototype,p&&(u[r]===s&&u.hasOwnProperty(r)||p.hidden[r]===s))break}while(h=a[++d]);d=h?d:-1}if(h=a[++d])if(u=h.prototype,h._meta&&u.hasOwnProperty(r))n=u[r];else{f=i[r];do{if((n=(u=h.prototype)[r])&&(h._meta?u.hasOwnProperty(r):n!==f))break}while(h=a[++d])}n=h&&n||i[r]}else{if(y.c!==s&&(d=0,(p=a[0]._meta)&&p.ctor!==s)){for((o=p.chains)&&"manual"===o.constructor||l("calling chained constructor with inherited",this.declaredClass);(h=a[++d])&&(!(p=h._meta)||p.ctor!==s););d=h?d:-1}for(;(h=a[++d])&&!(n=(p=h._meta)?p.ctor:h););n=h&&n}if(y.c=n,y.p=d,n)return!0===e?n:n.apply(this,e||t)}function h(t,e){return"string"==typeof t?this.__inherited(t,e,!0):this.__inherited(t,!0)}var u=t.config.isDebug?function(t,e,n){var r=this.getInherited(t,e);if(r)return r.apply(this,n||e||t)}:p;function f(t){for(var e=this.constructor._meta.bases,n=0,r=e.length;n<r;++n)if(e[n]===t)return!0;return this instanceof t}function d(t,r){for(var i in r)i!=c&&r.hasOwnProperty(i)&&(t[i]=r[i]);if(e("bug-for-in-skips-shadowed"))for(var o=n._extraNames,a=o.length;a;)(i=o[--a])!=c&&r.hasOwnProperty(i)&&(t[i]=r[i])}function y(t){return w.safeMixin(this.prototype,t),this}function m(t,e){return t instanceof Array||"function"==typeof t||(e=t,t=void 0),e=e||{},w([this].concat(t=t||[]),e)}function b(t,e,n){return function(){var r,i,o,a=0,s=1;for(n&&(a=e.length-1,s=-1);r=e[a];a+=s)(o=((i=r._meta)?i.hidden:r.prototype)[t])&&o.apply(this,arguments)}}function _(t){a.prototype=t.prototype;var e=new a;return a.prototype=null,e}function g(t){var e=t.callee,n=_(e);return e.apply(n,t),n}function w(t,e,a){"string"!=typeof t&&(a=e,e=t,t=""),a=a||{};var v,O,x,j,k,P,C,F=1,M=e;if("[object Array]"==o.call(e)?(x=(P=function(t,e){for(var n,r,i,a,c,p,h,u,f=[],d=[{cls:0,refs:[]}],y={},m=1,b=t.length,_=0;_<b;++_){for((i=t[_])?"[object Function]"!=o.call(i)&&l("mixin #"+_+" is not a callable constructor.",e):l("mixin #"+_+" is unknown. Did you use dojo.require to pull it in?",e),a=0,n=(r=i._meta?i._meta.bases:[i]).length-1;n>=0;--n)(c=r[n].prototype).hasOwnProperty("declaredClass")||(c.declaredClass="uniqName_"+s++),h=c.declaredClass,y.hasOwnProperty(h)||(y[h]={count:0,refs:[],cls:r[n]},++m),p=y[h],a&&a!==p&&(p.refs.push(a),++a.count),a=p;++a.count,d[0].refs.push(a)}for(;d.length;){for(a=d.pop(),f.push(a.cls),--m;1==(u=a.refs).length;){if(!(a=u[0])||--a.count){a=0;break}f.push(a.cls),--m}if(a)for(_=0,b=u.length;_<b;++_)--(a=u[_]).count||d.push(a)}return m&&l("can't build consistent linearization",e),i=t[0],f[0]=i?i._meta&&i===f[f.length-i._meta.bases.length]?i._meta.bases.length:1:0,f}(e,t))[0],e=P[F=P.length-x]):(P=[0],e?"[object Function]"==o.call(e)?(x=e._meta,P=P.concat(x?x.bases:e)):l("base class is not a callable constructor.",t):null!==e&&l("unknown base class. Did you use dojo.require to pull it in?",t)),e)for(O=F-1;v=_(e),O;--O)((x=P[O])._meta?d:r)(v,x.prototype),(j=new Function).superclass=e,j.prototype=v,e=v.constructor=j;else v={};for(w.safeMixin(v,a),(x=a.constructor)!==i.constructor&&(x.nom=c,v.constructor=x),O=F-1;O;--O)(x=P[O]._meta)&&x.chains&&(C=r(C||{},x.chains));if(v["-chains-"]&&(C=r(C||{},v["-chains-"])),x=!C||!C.hasOwnProperty(c),P[0]=j=C&&"manual"===C.constructor?function(t){return function(){var e,n,r=arguments,i=0;if(!(this instanceof r.callee))return g(r);for(;e=t[i];++i)if(e=(n=e._meta)?n.ctor:e){e.apply(this,r);break}(e=this.postscript)&&e.apply(this,r)}}(P):1==P.length?function(t,e){return function(){var n,r=arguments,i=r,o=r[0];if(!(this instanceof r.callee))return g(r);e&&(o&&(n=o.preamble)&&(i=n.apply(this,i)||i),(n=this.preamble)&&n.apply(this,i)),t&&t.apply(this,r),(n=this.postscript)&&n.apply(this,r)}}(a.constructor,x):function(t,e){return function(){var n,r,i,o,a=arguments,s=a,c=a[0],l=t.length;if(!(this instanceof a.callee))return g(a);if(e&&(c&&c.preamble||this.preamble))for((o=new Array(t.length))[0]=a,r=0;(c=a[0])&&(n=c.preamble)&&(a=n.apply(this,a)||a),(n=(n=t[r].prototype).hasOwnProperty("preamble")&&n.preamble)&&(a=n.apply(this,a)||a),++r!=l;)o[r]=a;for(r=l-1;r>=0;--r)(n=(i=(n=t[r])._meta)?i.ctor:n)&&n.apply(this,o?o[r]:a);(n=this.postscript)&&n.apply(this,s)}}(P,x),j._meta={bases:P,hidden:a,chains:C,parents:M,ctor:a.constructor},j.superclass=e&&e.prototype,j.extend=y,j.createSubclass=m,j.prototype=v,v.constructor=j,v.getInherited=h,v.isInstanceOf=f,v.inherited=u,v.__inherited=p,t&&(v.declaredClass=t,n.setObject(t,j)),C)for(k in C)v[k]&&"string"==typeof C[k]&&k!=c&&((x=v[k]=b(k,P,"after"===C[k])).nom=k);return j}return t.safeMixin=w.safeMixin=function(t,r){var a,s;for(a in r)(s=r[a])===i[a]&&a in i||a==c||("[object Function]"==o.call(s)&&(s.nom=a),t[a]=s);if(e("bug-for-in-skips-shadowed"))for(var l=n._extraNames,p=l.length;p;)(s=r[a=l[--p]])===i[a]&&a in i||a==c||("[object Function]"==o.call(s)&&(s.nom=a),t[a]=s);return t},t.declare=w,w});
//# sourceMappingURL=../sourcemaps/_base/declare.js.map
