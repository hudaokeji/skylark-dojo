/**
 * dojo - A version of dojo.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojo/
 * @license MIT
 */
define(["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(e,n,r,t,c,o,i,a){i.add("events-keypress-typed",function(){var e={charCode:0};try{((e=document.createEvent("KeyboardEvent")).initKeyboardEvent||e.initKeyEvent).call(e,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(e){}return 0==e.charCode&&!i("opera")});var u,s={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},f=i("mac")?"metaKey":"ctrlKey",y=function(e,n){var r=a.mixin({},e,n);return l(r),r.preventDefault=function(){e.preventDefault()},r.stopPropagation=function(){e.stopPropagation()},r};function l(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode}if(i("events-keypress-typed")){u=function(e,r){var t=n(e,"keydown",function(e){var n=e.keyCode,t=13!=n&&32!=n&&(27!=n||!i("ie"))&&(n<48||n>90)&&(n<96||n>111)&&(n<186||n>192)&&(n<219||n>222)&&229!=n;if(t||e.ctrlKey){var c=t?0:n;if(e.ctrlKey){if(3==n||13==n)return r.call(e.currentTarget,e);c>95&&c<106?c-=48:!e.shiftKey&&c>=65&&c<=90?c+=32:c=s[c]||c}var o=y(e,{type:"keypress",faux:!0,charCode:c});r.call(e.currentTarget,o),i("ie")&&function(e,n){try{e.keyCode=n}catch(e){return 0}}(e,o.keyCode)}}),c=n(e,"keypress",function(e){var n=e.charCode;return e=y(e,{charCode:n=n>=32?n:0,faux:!0}),r.call(this,e)});return{remove:function(){t.remove(),c.remove()}}}}else u=i("opera")?function(e,r){return n(e,"keypress",function(e){var n=e.which;return 3==n&&(n=99),n=n<32&&!e.shiftKey?0:n,e.ctrlKey&&!e.shiftKey&&n>=65&&n<=90&&(n+=32),r.call(this,y(e,{charCode:n}))})}:function(e,r){return n(e,"keypress",function(e){return l(e),r.call(this,e)})};var h={_keypress:u,connect:function(r,c,i,s,f){var y=arguments,l=[],h=0;l.push("string"==typeof y[0]?null:y[h++],y[h++]);var p=y[h+1];l.push("string"==typeof p||"function"==typeof p?y[h++]:null,y[h++]);for(var v=y.length;h<v;h++)l.push(y[h]);return function(r,c,i,s,f){if(s=a.hitch(i,s),!r||!r.addEventListener&&!r.attachEvent)return t.after(r||e.global,c,s,!0);if("string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2)),r||(r=e.global),!f)switch(c){case"keypress":c=u;break;case"mouseenter":c=o.enter;break;case"mouseleave":c=o.leave}return n(r,c,s,f)}.apply(this,l)},disconnect:function(e){e&&e.remove()},subscribe:function(e,n,t){return r.subscribe(e,a.hitch(n,t))},publish:function(e,n){return r.publish.apply(r,[e].concat(n))},connectPublisher:function(e,n,r){var t=function(){h.publish(e,arguments)};return r?h.connect(n,r,t):h.connect(n,t)},isCopyKey:function(e){return e[f]}};return h.unsubscribe=h.disconnect,i("extend-dojo")&&a.mixin(e,h),h});
//# sourceMappingURL=../sourcemaps/_base/connect.js.map
