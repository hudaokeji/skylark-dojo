/**
 * dojo - A version of dojo.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojo/
 * @license MIT
 */
define(["./_base/kernel","require","./_base/config","./aspect","./_base/lang","./topic","./domReady","./sniff"],function(o,t,n,e,i,a,r,s){o.hash=function(o,t){return arguments.length?("#"==o.charAt(0)&&(o=o.substring(1)),t?b(o):location.href="#"+o,o):f()};var h,l,c,u=n.hashPollFrequency||100;function d(o,t){var n=o.indexOf(t);return n>=0?o.substring(n+1):""}function f(){return d(location.href,"#")}function m(){a.publish("/dojo/hashchange",f())}function g(){f()!==h&&(h=f(),m())}function b(o){if(l){if(l.isTransitioning())return void setTimeout(i.hitch(null,b,o),u);var t=l.iframe.location.href,n=t.indexOf("?");l.iframe.location.replace(t.substring(0,n)+"?"+o)}else location.replace("#"+o),!c&&g()}return r(function(){"onhashchange"in o.global&&(!s("ie")||s("ie")>=8&&"BackCompat"!=document.compatMode)?c=e.after(o.global,"onhashchange",m,!0):document.addEventListener?(h=f(),setInterval(g,u)):document.attachEvent&&(l=new function(){var e=document.createElement("iframe"),a=n.dojoBlankHtmlUrl||t.toUrl("./resources/blank.html");n.useXDomain&&!n.dojoBlankHtmlUrl&&console.warn("dojo/hash: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),e.id="dojo-hash-iframe",e.src=a+"?"+f(),e.style.display="none",document.body.appendChild(e),this.iframe=o.global["dojo-hash-iframe"];var r,s,l,c,g,b=this.iframe.location;function p(){h=f(),r=g?h:d(b.href,"?"),s=!1,l=null}this.isTransitioning=function(){return s},this.pollLocation=function(){if(!g)try{var o=d(b.href,"?");document.title!=c&&(c=this.iframe.document.title=document.title)}catch(o){g=!0,console.error("dojo/hash: Error adding history entry. Server unreachable.")}var t=f();if(s&&h===t){if(!g&&o!==l)return void setTimeout(i.hitch(this,this.pollLocation),0);p(),m()}else if(h!==t||!g&&r!==o){if(h!==t)return h=t,s=!0,l=t,e.src=a+"?"+l,g=!1,void setTimeout(i.hitch(this,this.pollLocation),0);g||(location.href="#"+b.search.substring(1),p(),m())}setTimeout(i.hitch(this,this.pollLocation),u)},p(),setTimeout(i.hitch(this,this.pollLocation),u)})}),o.hash});
//# sourceMappingURL=sourcemaps/hash.js.map
