{"version":3,"sources":["dom-class.js"],"names":["define","lang","array","dom","cls","spaces","a1","str2array","s","String","test","a","split","length","shift","pop","filter","x","fakeNode","contains","node","classStr","byId","indexOf","add","oldLen","c","i","len","substr","remove","undefined","replace","trim","addClassStr","removeClassStr","toggle","condition"],"mappings":";;;;;;;AAAAA,QAAQ,eAAgB,gBAAiB,SAAU,SAASC,EAAMC,EAAOC,GAIxE,IAaIC,EACHC,EAAS,MAAOC,GAAM,IAEvB,SAASC,EAAUC,GAClB,GAAe,iBAALA,GAAiBA,aAAaC,OAAO,CAC9C,GAAGD,IAAMH,EAAOK,KAAKF,GAEpB,OADAF,EAAG,GAAKE,EACDF,EAER,IAAIK,EAAIH,EAAEI,MAAMP,GAOhB,OANGM,EAAEE,SAAWF,EAAE,IACjBA,EAAEG,QAEAH,EAAEE,SAAWF,EAAEA,EAAEE,OAAS,IAC5BF,EAAEI,MAEIJ,EAGR,OAAIH,EAGGN,EAAMc,OAAOR,EAAG,SAASS,GAAI,OAAOA,OAiE5C,IAAIC,KA4NJ,OA3NAd,GAICe,SAAU,SAA0CC,EAAiBC,GAYpE,OAAS,IAAMlB,EAAImB,KAAKF,GAAe,UAAI,KAAKG,QAAQ,IAAMF,EAAW,MAAQ,GAGlFG,IAAK,SAAqCJ,EAAuBC,GAoChED,EAAOjB,EAAImB,KAAKF,GAChBC,EAAWd,EAAUc,GACrB,IAA2BI,EAAvBrB,EAAMgB,EAAc,UAExBK,GADArB,EAAMA,EAAM,IAAMA,EAAM,IAAM,KACjBS,OACb,IAAI,IAAkCa,EAA9BC,EAAI,EAAGC,EAAMP,EAASR,OAAWc,EAAIC,IAAOD,GACnDD,EAAIL,EAASM,KACLvB,EAAImB,QAAQ,IAAMG,EAAI,KAAO,IACpCtB,GAAOsB,EAAI,KAGVD,EAASrB,EAAIS,SACfO,EAAc,UAAIhB,EAAIyB,OAAO,EAAGzB,EAAIS,OAAS,KAI/CiB,OAAQ,SAAwCV,EAAwBC,GA4CvE,IAAIjB,EACJ,GAFAgB,EAAOjB,EAAImB,KAAKF,QAEAW,IAAbV,EAAuB,CACzBA,EAAWd,EAAUc,GACrBjB,EAAM,IAAMgB,EAAc,UAAI,IAC9B,IAAI,IAAIO,EAAI,EAAGC,EAAMP,EAASR,OAAQc,EAAIC,IAAOD,EAChDvB,EAAMA,EAAI4B,QAAQ,IAAMX,EAASM,GAAK,IAAK,KAE5CvB,EAAMH,EAAKgC,KAAK7B,QAEhBA,EAAM,GAEJgB,EAAc,WAAKhB,IAAMgB,EAAc,UAAIhB,IAG/C4B,QAAS,SAAyCZ,EAAuBc,EAA+BC,GAiCvGf,EAAOjB,EAAImB,KAAKF,GAChBF,EAAkB,UAAIE,EAAc,UACpChB,EAAI0B,OAAOZ,EAAUiB,GACrB/B,EAAIoB,IAAIN,EAAUgB,GACfd,EAAc,YAAMF,EAAkB,YACxCE,EAAc,UAAIF,EAAkB,YAItCkB,OAAQ,SAAwChB,EAAuBC,EAAuBgB,GAmC7F,GADAjB,EAAOjB,EAAImB,KAAKF,QACCW,IAAdM,EAEF,IAAI,IAAkCX,EAA9BC,EAAI,EAAGC,GADfP,EAAWd,EAAUc,IACSR,OAAWc,EAAIC,IAAOD,EACnDD,EAAIL,EAASM,GACbvB,EAAIA,EAAIe,SAASC,EAAMM,GAAK,SAAW,OAAON,EAAMM,QAGrDtB,EAAIiC,EAAY,MAAQ,UAAUjB,EAAMC,GAEzC,OAAOgB","file":"../dom-class.js","sourcesContent":["define([\"./_base/lang\", \"./_base/array\", \"./dom\"], function(lang, array, dom){\r\n\t// module:\r\n\t//\t\tdojo/dom-class\r\n\r\n\tvar className = \"className\";\r\n\r\n\t/* Part I of classList-based implementation is preserved here for posterity\r\n\tvar classList = \"classList\";\r\n\thas.add(\"dom-classList\", function(){\r\n\t\treturn classList in document.createElement(\"p\");\r\n\t});\r\n\t*/\r\n\r\n\t// =============================\r\n\t// (CSS) Class Functions\r\n\t// =============================\r\n\r\n\tvar cls, // exports object\r\n\t\tspaces = /\\s+/, a1 = [\"\"];\r\n\r\n\tfunction str2array(s){\r\n\t\tif(typeof s == \"string\" || s instanceof String){\r\n\t\t\tif(s && !spaces.test(s)){\r\n\t\t\t\ta1[0] = s;\r\n\t\t\t\treturn a1;\r\n\t\t\t}\r\n\t\t\tvar a = s.split(spaces);\r\n\t\t\tif(a.length && !a[0]){\r\n\t\t\t\ta.shift();\r\n\t\t\t}\r\n\t\t\tif(a.length && !a[a.length - 1]){\r\n\t\t\t\ta.pop();\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t}\r\n\t\t// assumed to be an array\r\n\t\tif(!s){\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\treturn array.filter(s, function(x){ return x; });\r\n\t}\r\n\r\n\t/* Part II of classList-based implementation is preserved here for posterity\r\n\tif(has(\"dom-classList\")){\r\n\t\t// new classList version\r\n\t\tcls = {\r\n\t\t\tcontains: function containsClass(node, classStr){\r\n\t\t\t\tvar clslst = classStr && dom.byId(node)[classList];\r\n\t\t\t\treturn clslst && clslst.contains(classStr); // Boolean\r\n\t\t\t},\r\n\r\n\t\t\tadd: function addClass(node, classStr){\r\n\t\t\t\tnode = dom.byId(node);\r\n\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\tfor(var i = 0, len = classStr.length; i < len; ++i){\r\n\t\t\t\t\tnode[classList].add(classStr[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tremove: function removeClass(node, classStr){\r\n\t\t\t\tnode = dom.byId(node);\r\n\t\t\t\tif(classStr === undefined){\r\n\t\t\t\t\tnode[className] = \"\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\t\tfor(var i = 0, len = classStr.length; i < len; ++i){\r\n\t\t\t\t\t\tnode[classList].remove(classStr[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\treplace: function replaceClass(node, addClassStr, removeClassStr){\r\n\t\t\t\tnode = dom.byId(node);\r\n\t\t\t\tif(removeClassStr === undefined){\r\n\t\t\t\t\tnode[className] = \"\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tremoveClassStr = str2array(removeClassStr);\r\n\t\t\t\t\tfor(var i = 0, len = removeClassStr.length; i < len; ++i){\r\n\t\t\t\t\t\tnode[classList].remove(removeClassStr[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\taddClassStr = str2array(addClassStr);\r\n\t\t\t\tfor(i = 0, len = addClassStr.length; i < len; ++i){\r\n\t\t\t\t\tnode[classList].add(addClassStr[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttoggle: function toggleClass(node, classStr, condition){\r\n\t\t\t\tnode = dom.byId(node);\r\n\t\t\t\tif(condition === undefined){\r\n\t\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\t\tfor(var i = 0, len = classStr.length; i < len; ++i){\r\n\t\t\t\t\t\tnode[classList].toggle(classStr[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcls[condition ? \"add\" : \"remove\"](node, classStr);\r\n\t\t\t\t}\r\n\t\t\t\treturn condition;   // Boolean\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\t// regular DOM version\r\n\tvar fakeNode = {};  // for effective replacement\r\n\tcls = {\r\n\t\t// summary:\r\n\t\t//\t\tThis module defines the core dojo DOM class API.\r\n\r\n\t\tcontains: function containsClass(/*DomNode|String*/ node, /*String*/ classStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns whether or not the specified classes are a portion of the\r\n\t\t\t//\t\tclass list currently applied to the node.\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to check the class for.\r\n\t\t\t// classStr: String\r\n\t\t\t//\t\tA string class name to look for.\r\n\t\t\t// example:\r\n\t\t\t//\t\tDo something if a node with id=\"someNode\" has class=\"aSillyClassName\" present\r\n\t\t\t//\t|\tif(dojo.hasClass(\"someNode\",\"aSillyClassName\")){ ... }\r\n\r\n\t\t\treturn ((\" \" + dom.byId(node)[className] + \" \").indexOf(\" \" + classStr + \" \") >= 0); // Boolean\r\n\t\t},\r\n\r\n\t\tadd: function addClass(/*DomNode|String*/ node, /*String|Array*/ classStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds the specified classes to the end of the class list on the\r\n\t\t\t//\t\tpassed node. Will not re-apply duplicate classes.\r\n\t\t\t//\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to add a class string too\r\n\t\t\t//\r\n\t\t\t// classStr: String|Array\r\n\t\t\t//\t\tA String class name to add, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAdd a class to some node:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.add(\"someNode\", \"anewClass\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAdd two classes at once:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.add(\"someNode\", \"firstClass secondClass\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAdd two classes at once (using array):\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.add(\"someNode\", [\"firstClass\", \"secondClass\"]);\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAvailable in `dojo/NodeList` for multiple additions\r\n\t\t\t//\t|\trequire([\"dojo/query\"], function(query){\r\n\t\t\t//\t|\t\tquery(\"ul > li\").addClass(\"firstLevel\");\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\tnode = dom.byId(node);\r\n\t\t\tclassStr = str2array(classStr);\r\n\t\t\tvar cls = node[className], oldLen;\r\n\t\t\tcls = cls ? \" \" + cls + \" \" : \" \";\r\n\t\t\toldLen = cls.length;\r\n\t\t\tfor(var i = 0, len = classStr.length, c; i < len; ++i){\r\n\t\t\t\tc = classStr[i];\r\n\t\t\t\tif(c && cls.indexOf(\" \" + c + \" \") < 0){\r\n\t\t\t\t\tcls += c + \" \";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(oldLen < cls.length){\r\n\t\t\t\tnode[className] = cls.substr(1, cls.length - 2);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tremove: function removeClass(/*DomNode|String*/ node, /*String|Array?*/ classStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRemoves the specified classes from node. No `contains()`\r\n\t\t\t//\t\tcheck is required.\r\n\t\t\t//\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to remove the class from.\r\n\t\t\t//\r\n\t\t\t// classStr: String|Array\r\n\t\t\t//\t\tAn optional String class name to remove, or several space-separated\r\n\t\t\t//\t\tclass names, or an array of class names. If omitted, all class names\r\n\t\t\t//\t\twill be deleted.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tRemove a class from some node:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.remove(\"someNode\", \"firstClass\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tRemove two classes from some node:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.remove(\"someNode\", \"firstClass secondClass\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tRemove two classes from some node (using array):\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.remove(\"someNode\", [\"firstClass\", \"secondClass\"]);\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tRemove all classes from some node:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.remove(\"someNode\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAvailable in `dojo/NodeList` for multiple removal\r\n\t\t\t//\t|\trequire([\"dojo/query\"], function(query){\r\n\t\t\t//\t|\t\tquery(\"ul > li\").removeClass(\"foo\");\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\tnode = dom.byId(node);\r\n\t\t\tvar cls;\r\n\t\t\tif(classStr !== undefined){\r\n\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\tcls = \" \" + node[className] + \" \";\r\n\t\t\t\tfor(var i = 0, len = classStr.length; i < len; ++i){\r\n\t\t\t\t\tcls = cls.replace(\" \" + classStr[i] + \" \", \" \");\r\n\t\t\t\t}\r\n\t\t\t\tcls = lang.trim(cls);\r\n\t\t\t}else{\r\n\t\t\t\tcls = \"\";\r\n\t\t\t}\r\n\t\t\tif(node[className] != cls){ node[className] = cls; }\r\n\t\t},\r\n\r\n\t\treplace: function replaceClass(/*DomNode|String*/ node, /*String|Array*/ addClassStr, /*String|Array?*/ removeClassStr){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReplaces one or more classes on a node if not present.\r\n\t\t\t//\t\tOperates more quickly than calling dojo.removeClass and dojo.addClass\r\n\t\t\t//\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to remove the class from.\r\n\t\t\t//\r\n\t\t\t// addClassStr: String|Array\r\n\t\t\t//\t\tA String class name to add, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\t//\r\n\t\t\t// removeClassStr: String|Array?\r\n\t\t\t//\t\tA String class name to remove, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.replace(\"someNode\", \"add1 add2\", \"remove1 remove2\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\tReplace all classes with addMe\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.replace(\"someNode\", \"addMe\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\tAvailable in `dojo/NodeList` for multiple toggles\r\n\t\t\t//\t|\trequire([\"dojo/query\"], function(query){\r\n\t\t\t//\t|\t\tquery(\".findMe\").replaceClass(\"addMe\", \"removeMe\");\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\tnode = dom.byId(node);\r\n\t\t\tfakeNode[className] = node[className];\r\n\t\t\tcls.remove(fakeNode, removeClassStr);\r\n\t\t\tcls.add(fakeNode, addClassStr);\r\n\t\t\tif(node[className] !== fakeNode[className]){\r\n\t\t\t\tnode[className] = fakeNode[className];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttoggle: function toggleClass(/*DomNode|String*/ node, /*String|Array*/ classStr, /*Boolean?*/ condition){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds a class to node if not present, or removes if present.\r\n\t\t\t//\t\tPass a boolean condition if you want to explicitly add or remove.\r\n\t\t\t//\t\tReturns the condition that was specified directly or indirectly.\r\n\t\t\t//\r\n\t\t\t// node: String|DOMNode\r\n\t\t\t//\t\tString ID or DomNode reference to toggle a class string\r\n\t\t\t//\r\n\t\t\t// classStr: String|Array\r\n\t\t\t//\t\tA String class name to toggle, or several space-separated class names,\r\n\t\t\t//\t\tor an array of class names.\r\n\t\t\t//\r\n\t\t\t// condition:\r\n\t\t\t//\t\tIf passed, true means to add the class, false means to remove.\r\n\t\t\t//\t\tOtherwise dojo.hasClass(node, classStr) is used to detect the class presence.\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.toggle(\"someNode\", \"hovered\");\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tForcefully add a class\r\n\t\t\t//\t|\trequire([\"dojo/dom-class\"], function(domClass){\r\n\t\t\t//\t|\t\tdomClass.toggle(\"someNode\", \"hovered\", true);\r\n\t\t\t//\t|\t});\r\n\t\t\t//\r\n\t\t\t// example:\r\n\t\t\t//\t\tAvailable in `dojo/NodeList` for multiple toggles\r\n\t\t\t//\t|\trequire([\"dojo/query\"], function(query){\r\n\t\t\t//\t|\t\tquery(\".toggleMe\").toggleClass(\"toggleMe\");\r\n\t\t\t//\t|\t});\r\n\r\n\t\t\tnode = dom.byId(node);\r\n\t\t\tif(condition === undefined){\r\n\t\t\t\tclassStr = str2array(classStr);\r\n\t\t\t\tfor(var i = 0, len = classStr.length, c; i < len; ++i){\r\n\t\t\t\t\tc = classStr[i];\r\n\t\t\t\t\tcls[cls.contains(node, c) ? \"remove\" : \"add\"](node, c);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tcls[condition ? \"add\" : \"remove\"](node, classStr);\r\n\t\t\t}\r\n\t\t\treturn condition;   // Boolean\r\n\t\t}\r\n\t};\r\n\r\n\treturn cls;\r\n});\r\n"]}