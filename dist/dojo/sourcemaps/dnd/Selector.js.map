{"version":3,"sources":["dnd/Selector.js"],"names":["define","array","declare","kernel","lang","dom","domConstruct","mouse","NodeList","on","touch","dnd","Container","Selector","constructor","node","params","this","singular","autoSync","selection","anchor","simpleSelection","events","push","press","hitch","release","getSelectedNodes","t","e","_empty","i","byId","selectNone","_removeSelection","_removeAnchor","selectAll","forInItems","data","id","_addItemClass","deleteSelectedNodes","n","delItem","destroy","forInSelectedItems","f","o","global","s","call","getItem","sync","superclass","forEach","insertNodes","addSelected","before","oldCreator","_normalizedCreator","item","hint","_removeItemClass","onMouseDown","current","getCopyKeyState","shiftKey","isLeft","stopPropagation","preventDefault","c","getAllNodes","length","onMouseUp","onMouseMove","onOverEvent","onmousemoveEvent","move","onOutEvent","remove"],"mappings":"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","file":"../../dnd/Selector.js","sourcesContent":["define([\r\n\t\"../_base/array\", \"../_base/declare\", \"../_base/kernel\", \"../_base/lang\",\r\n\t\"../dom\", \"../dom-construct\", \"../mouse\", \"../_base/NodeList\", \"../on\", \"../touch\", \"./common\", \"./Container\"\r\n], function(array, declare, kernel, lang, dom, domConstruct, mouse, NodeList, on, touch, dnd, Container){\r\n\r\n// module:\r\n//\t\tdojo/dnd/Selector\r\n\r\n/*\r\n\tContainer item states:\r\n\t\t\"\"\t\t\t- an item is not selected\r\n\t\t\"Selected\"\t- an item is selected\r\n\t\t\"Anchor\"\t- an item is selected, and is an anchor for a \"shift\" selection\r\n*/\r\n\r\n/*=====\r\nvar __SelectorArgs = declare([Container.__ContainerArgs], {\r\n\t// singular: Boolean\r\n\t//\t\tallows selection of only one element, if true\r\n\tsingular: false,\r\n\r\n\t// autoSync: Boolean\r\n\t//\t\tautosynchronizes the source with its list of DnD nodes,\r\n\tautoSync: false\r\n});\r\n=====*/\r\n\r\nvar Selector = declare(\"dojo.dnd.Selector\", Container, {\r\n\t// summary:\r\n\t//\t\ta Selector object, which knows how to select its children\r\n\r\n\t/*=====\r\n\t// selection: Set<String>\r\n\t//\t\tThe set of id's that are currently selected, such that this.selection[id] == 1\r\n\t//\t\tif the node w/that id is selected.  Can iterate over selected node's id's like:\r\n\t//\t|\t\tfor(var id in this.selection)\r\n\tselection: {},\r\n\t=====*/\r\n\r\n\tconstructor: function(node, params){\r\n\t\t// summary:\r\n\t\t//\t\tconstructor of the Selector\r\n\t\t// node: Node||String\r\n\t\t//\t\tnode or node's id to build the selector on\r\n\t\t// params: __SelectorArgs?\r\n\t\t//\t\ta dictionary of parameters\r\n\t\tif(!params){ params = {}; }\r\n\t\tthis.singular = params.singular;\r\n\t\tthis.autoSync = params.autoSync;\r\n\t\t// class-specific variables\r\n\t\tthis.selection = {};\r\n\t\tthis.anchor = null;\r\n\t\tthis.simpleSelection = false;\r\n\t\t// set up events\r\n\t\tthis.events.push(\r\n\t\t\ton(this.node, touch.press, lang.hitch(this, \"onMouseDown\")),\r\n\t\t\ton(this.node, touch.release, lang.hitch(this, \"onMouseUp\"))\r\n\t\t);\r\n\t},\r\n\r\n\t// object attributes (for markup)\r\n\tsingular: false,\t// is singular property\r\n\r\n\t// methods\r\n\tgetSelectedNodes: function(){\r\n\t\t// summary:\r\n\t\t//\t\treturns a list (an array) of selected nodes\r\n\t\tvar t = new NodeList();\r\n\t\tvar e = dnd._empty;\r\n\t\tfor(var i in this.selection){\r\n\t\t\tif(i in e){ continue; }\r\n\t\t\tt.push(dom.byId(i));\r\n\t\t}\r\n\t\treturn t;\t// NodeList\r\n\t},\r\n\tselectNone: function(){\r\n\t\t// summary:\r\n\t\t//\t\tunselects all items\r\n\t\treturn this._removeSelection()._removeAnchor();\t// self\r\n\t},\r\n\tselectAll: function(){\r\n\t\t// summary:\r\n\t\t//\t\tselects all items\r\n\t\tthis.forInItems(function(data, id){\r\n\t\t\tthis._addItemClass(dom.byId(id), \"Selected\");\r\n\t\t\tthis.selection[id] = 1;\r\n\t\t}, this);\r\n\t\treturn this._removeAnchor();\t// self\r\n\t},\r\n\tdeleteSelectedNodes: function(){\r\n\t\t// summary:\r\n\t\t//\t\tdeletes all selected items\r\n\t\tvar e = dnd._empty;\r\n\t\tfor(var i in this.selection){\r\n\t\t\tif(i in e){ continue; }\r\n\t\t\tvar n = dom.byId(i);\r\n\t\t\tthis.delItem(i);\r\n\t\t\tdomConstruct.destroy(n);\r\n\t\t}\r\n\t\tthis.anchor = null;\r\n\t\tthis.selection = {};\r\n\t\treturn this;\t// self\r\n\t},\r\n\tforInSelectedItems: function(/*Function*/ f, /*Object?*/ o){\r\n\t\t// summary:\r\n\t\t//\t\titerates over selected items;\r\n\t\t//\t\tsee `dojo/dnd/Container.forInItems()` for details\r\n\t\to = o || kernel.global;\r\n\t\tvar s = this.selection, e = dnd._empty;\r\n\t\tfor(var i in s){\r\n\t\t\tif(i in e){ continue; }\r\n\t\t\tf.call(o, this.getItem(i), i, this);\r\n\t\t}\r\n\t},\r\n\tsync: function(){\r\n\t\t// summary:\r\n\t\t//\t\tsync up the node list with the data map\r\n\r\n\t\tSelector.superclass.sync.call(this);\r\n\r\n\t\t// fix the anchor\r\n\t\tif(this.anchor){\r\n\t\t\tif(!this.getItem(this.anchor.id)){\r\n\t\t\t\tthis.anchor = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// fix the selection\r\n\t\tvar t = [], e = dnd._empty;\r\n\t\tfor(var i in this.selection){\r\n\t\t\tif(i in e){ continue; }\r\n\t\t\tif(!this.getItem(i)){\r\n\t\t\t\tt.push(i);\r\n\t\t\t}\r\n\t\t}\r\n\t\tarray.forEach(t, function(i){\r\n\t\t\tdelete this.selection[i];\r\n\t\t}, this);\r\n\r\n\t\treturn this;\t// self\r\n\t},\r\n\tinsertNodes: function(addSelected, data, before, anchor){\r\n\t\t// summary:\r\n\t\t//\t\tinserts new data items (see `dojo/dnd/Container.insertNodes()` method for details)\r\n\t\t// addSelected: Boolean\r\n\t\t//\t\tall new nodes will be added to selected items, if true, no selection change otherwise\r\n\t\t// data: Array\r\n\t\t//\t\ta list of data items, which should be processed by the creator function\r\n\t\t// before: Boolean\r\n\t\t//\t\tinsert before the anchor, if true, and after the anchor otherwise\r\n\t\t// anchor: Node\r\n\t\t//\t\tthe anchor node to be used as a point of insertion\r\n\t\tvar oldCreator = this._normalizedCreator;\r\n\t\tthis._normalizedCreator = function(item, hint){\r\n\t\t\tvar t = oldCreator.call(this, item, hint);\r\n\t\t\tif(addSelected){\r\n\t\t\t\tif(!this.anchor){\r\n\t\t\t\t\tthis.anchor = t.node;\r\n\t\t\t\t\tthis._removeItemClass(t.node, \"Selected\");\r\n\t\t\t\t\tthis._addItemClass(this.anchor, \"Anchor\");\r\n\t\t\t\t}else if(this.anchor != t.node){\r\n\t\t\t\t\tthis._removeItemClass(t.node, \"Anchor\");\r\n\t\t\t\t\tthis._addItemClass(t.node, \"Selected\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.selection[t.node.id] = 1;\r\n\t\t\t}else{\r\n\t\t\t\tthis._removeItemClass(t.node, \"Selected\");\r\n\t\t\t\tthis._removeItemClass(t.node, \"Anchor\");\r\n\t\t\t}\r\n\t\t\treturn t;\r\n\t\t};\r\n\t\tSelector.superclass.insertNodes.call(this, data, before, anchor);\r\n\t\tthis._normalizedCreator = oldCreator;\r\n\t\treturn this;\t// self\r\n\t},\r\n\tdestroy: function(){\r\n\t\t// summary:\r\n\t\t//\t\tprepares the object to be garbage-collected\r\n\t\tSelector.superclass.destroy.call(this);\r\n\t\tthis.selection = this.anchor = null;\r\n\t},\r\n\r\n\t// mouse events\r\n\tonMouseDown: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onmousedown\r\n\t\t// e: Event\r\n\t\t//\t\tmouse event\r\n\t\tif(this.autoSync){ this.sync(); }\r\n\t\tif(!this.current){ return; }\r\n\t\tif(!this.singular && !dnd.getCopyKeyState(e) && !e.shiftKey && (this.current.id in this.selection)){\r\n\t\t\tthis.simpleSelection = true;\r\n\t\t\tif(mouse.isLeft(e)){\r\n\t\t\t\t// Accept the left button and stop the event.   Stopping the event prevents text selection while\r\n\t\t\t\t// dragging.   However, don't stop the event on mobile because that prevents a click event,\r\n\t\t\t\t// and also prevents scroll (see #15838).\r\n\t\t\t\t// For IE we don't stop event when multiple buttons are pressed.\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!this.singular && e.shiftKey){\r\n\t\t\tif(!dnd.getCopyKeyState(e)){\r\n\t\t\t\tthis._removeSelection();\r\n\t\t\t}\r\n\t\t\tvar c = this.getAllNodes();\r\n\t\t\tif(c.length){\r\n\t\t\t\tif(!this.anchor){\r\n\t\t\t\t\tthis.anchor = c[0];\r\n\t\t\t\t\tthis._addItemClass(this.anchor, \"Anchor\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.selection[this.anchor.id] = 1;\r\n\t\t\t\tif(this.anchor != this.current){\r\n\t\t\t\t\tvar i = 0, node;\r\n\t\t\t\t\tfor(; i < c.length; ++i){\r\n\t\t\t\t\t\tnode = c[i];\r\n\t\t\t\t\t\tif(node == this.anchor || node == this.current){ break; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(++i; i < c.length; ++i){\r\n\t\t\t\t\t\tnode = c[i];\r\n\t\t\t\t\t\tif(node == this.anchor || node == this.current){ break; }\r\n\t\t\t\t\t\tthis._addItemClass(node, \"Selected\");\r\n\t\t\t\t\t\tthis.selection[node.id] = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._addItemClass(this.current, \"Selected\");\r\n\t\t\t\t\tthis.selection[this.current.id] = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.singular){\r\n\t\t\t\tif(this.anchor == this.current){\r\n\t\t\t\t\tif(dnd.getCopyKeyState(e)){\r\n\t\t\t\t\t\tthis.selectNone();\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.selectNone();\r\n\t\t\t\t\tthis.anchor = this.current;\r\n\t\t\t\t\tthis._addItemClass(this.anchor, \"Anchor\");\r\n\t\t\t\t\tthis.selection[this.current.id] = 1;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(dnd.getCopyKeyState(e)){\r\n\t\t\t\t\tif(this.anchor == this.current){\r\n\t\t\t\t\t\tdelete this.selection[this.anchor.id];\r\n\t\t\t\t\t\tthis._removeAnchor();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(this.current.id in this.selection){\r\n\t\t\t\t\t\t\tthis._removeItemClass(this.current, \"Selected\");\r\n\t\t\t\t\t\t\tdelete this.selection[this.current.id];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(this.anchor){\r\n\t\t\t\t\t\t\t\tthis._removeItemClass(this.anchor, \"Anchor\");\r\n\t\t\t\t\t\t\t\tthis._addItemClass(this.anchor, \"Selected\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.anchor = this.current;\r\n\t\t\t\t\t\t\tthis._addItemClass(this.current, \"Anchor\");\r\n\t\t\t\t\t\t\tthis.selection[this.current.id] = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!(this.current.id in this.selection)){\r\n\t\t\t\t\t\tthis.selectNone();\r\n\t\t\t\t\t\tthis.anchor = this.current;\r\n\t\t\t\t\t\tthis._addItemClass(this.current, \"Anchor\");\r\n\t\t\t\t\t\tthis.selection[this.current.id] = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t},\r\n\tonMouseUp: function(/*===== e =====*/){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onmouseup\r\n\t\t// e: Event\r\n\t\t//\t\tmouse event\r\n\t\tif(!this.simpleSelection){ return; }\r\n\t\tthis.simpleSelection = false;\r\n\t\tthis.selectNone();\r\n\t\tif(this.current){\r\n\t\t\tthis.anchor = this.current;\r\n\t\t\tthis._addItemClass(this.anchor, \"Anchor\");\r\n\t\t\tthis.selection[this.current.id] = 1;\r\n\t\t}\r\n\t},\r\n\tonMouseMove: function(/*===== e =====*/){\r\n\t\t// summary:\r\n\t\t//\t\tevent processor for onmousemove\r\n\t\t// e: Event\r\n\t\t//\t\tmouse event\r\n\t\tthis.simpleSelection = false;\r\n\t},\r\n\r\n\t// utilities\r\n\tonOverEvent: function(){\r\n\t\t// summary:\r\n\t\t//\t\tthis function is called once, when mouse is over our container\r\n\t\tthis.onmousemoveEvent = on(this.node, touch.move, lang.hitch(this, \"onMouseMove\"));\r\n\t},\r\n\tonOutEvent: function(){\r\n\t\t// summary:\r\n\t\t//\t\tthis function is called once, when mouse is out of our container\r\n\t\tif(this.onmousemoveEvent){\r\n\t\t\tthis.onmousemoveEvent.remove();\r\n\t\t\tdelete this.onmousemoveEvent;\r\n\t\t}\r\n\t},\r\n\t_removeSelection: function(){\r\n\t\t// summary:\r\n\t\t//\t\tunselects all items\r\n\t\tvar e = dnd._empty;\r\n\t\tfor(var i in this.selection){\r\n\t\t\tif(i in e){ continue; }\r\n\t\t\tvar node = dom.byId(i);\r\n\t\t\tif(node){ this._removeItemClass(node, \"Selected\"); }\r\n\t\t}\r\n\t\tthis.selection = {};\r\n\t\treturn this;\t// self\r\n\t},\r\n\t_removeAnchor: function(){\r\n\t\tif(this.anchor){\r\n\t\t\tthis._removeItemClass(this.anchor, \"Anchor\");\r\n\t\t\tthis.anchor = null;\r\n\t\t}\r\n\t\treturn this;\t// self\r\n\t}\r\n});\r\n\r\nreturn Selector;\r\n\r\n});\r\n"]}