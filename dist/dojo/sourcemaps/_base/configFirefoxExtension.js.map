{"version":3,"sources":["_base/configFirefoxExtension.js"],"names":["window","dojo","isBrowser","_name","baseUrl","config","n","navigator","dua","userAgent","dav","appVersion","tv","parseFloat","isMozilla","isMoz","isFF","split","undefined","isQuirks","document","compatMode","locale","language","toLowerCase","_xhrObj","XMLHttpRequest","oldLoadUri","_loadUri","uri","cb","some","prefix","String","indexOf","value","Components","classes","getService","interfaces","mozIJSSubScriptLoader","loadSubScript","global","apply","arguments","_isDocumentOk","http","stat","status","location","protocol","_getText","fail_ok","_Url","toString","cacheBust","replace","ioService","nsIIOService","scriptableStream","nsIScriptableInputStream","input","newChannel","open","init","str","read","available","close","send","err","Error","responseText","e","_windowUnloaders","windowUnloaded","mll","length","pop","addOnWindowUnload","obj","functionName","_onto","contexts","current","_defaultContext","pushContext","g","d","old","doc","push","isString","t","getElementById","contentDocument","contentWindow","setContext","popContext","oc","_inContext","f","a","_toArray","r","_initFired","_loadInit","type","callee","initialized","_inFlightCount","_modulesLoaded","afterOnLoad","addEventListener","mp","param","registerModulePath","isDebug","console","log","m","nsIConsoleService","logStringMessage","debug","join"],"mappings":"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","file":"../../_base/configFirefoxExtension.js","sourcesContent":["// TODO: this file needs to be converted to the v1.7 loader\r\n\r\n// a host environment specifically built for Mozilla extensions, but derived\r\n// from the browser host environment\r\nif(typeof window != 'undefined'){\r\n\tdojo.isBrowser = true;\r\n\tdojo._name = \"browser\";\r\n\r\n\r\n\t// FIXME: PORTME\r\n\t//\thttp://developer.mozilla.org/en/mozIJSSubScriptLoader\r\n\r\n\r\n\t// attempt to figure out the path to dojo if it isn't set in the config\r\n\t(function(){\r\n\t\t// this is a scope protection closure. We set browser versions and grab\r\n\t\t// the URL we were loaded from here.\r\n\r\n\t\t// FIXME: need to probably use a different reference to \"document\" to get the hosting XUL environment\r\n\r\n\t\tdojo.baseUrl = dojo.config.baseUrl;\r\n\r\n\t\t// fill in the rendering support information in dojo.render.*\r\n\t\tvar n = navigator;\r\n\t\tvar dua = n.userAgent;\r\n\t\tvar dav = n.appVersion;\r\n\t\tvar tv = parseFloat(dav);\r\n\r\n\t\tdojo.isMozilla = dojo.isMoz = tv;\r\n\t\tif(dojo.isMoz){\r\n\t\t\tdojo.isFF = parseFloat(dua.split(\"Firefox/\")[1]) || undefined;\r\n\t\t}\r\n\r\n\t\t// FIXME\r\n\t\tdojo.isQuirks = document.compatMode == \"BackCompat\";\r\n\r\n\t\t// FIXME\r\n\t\t// TODO: is the HTML LANG attribute relevant?\r\n\t\tdojo.locale = dojo.config.locale || n.language.toLowerCase();\r\n\r\n\t\tdojo._xhrObj = function(){\r\n\t\t\treturn new XMLHttpRequest();\r\n\t\t};\r\n\r\n\t\t// monkey-patch _loadUri to handle file://, chrome://, and resource:// url's\r\n\t\tvar oldLoadUri = dojo._loadUri;\r\n\t\tdojo._loadUri = function(uri, cb){\r\n\t\t\tvar handleLocal = [\"file:\", \"chrome:\", \"resource:\"].some(function(prefix){\r\n\t\t\t\treturn String(uri).indexOf(prefix) == 0;\r\n\t\t\t});\r\n\t\t\tif(handleLocal){\r\n\t\t\t\t// see:\r\n\t\t\t\t//\t\thttp://developer.mozilla.org/en/mozIJSSubScriptLoader\r\n\t\t\t\tvar l = Components.classes[\"@mozilla.org/moz/jssubscript-loader;1\"]\r\n\t\t\t\t\t.getService(Components.interfaces.mozIJSSubScriptLoader);\r\n\t\t\t\tvar value = l.loadSubScript(uri, dojo.global);\r\n\t\t\t\tif(cb){ cb(value); }\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\t// otherwise, call the pre-existing version\r\n\t\t\t\treturn oldLoadUri.apply(dojo, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// FIXME: PORTME\r\n\t\tdojo._isDocumentOk = function(http){\r\n\t\t\tvar stat = http.status || 0;\r\n\t\t\treturn (stat >= 200 && stat < 300) || \t// Boolean\r\n\t\t\t\tstat == 304 || \t\t\t\t\t\t// allow any 2XX response code\r\n\t\t\t\tstat == 1223 || \t\t\t\t\t\t// get it out of the cache\r\n\t\t\t\t(!stat && (location.protocol == \"file:\" || location.protocol == \"chrome:\") );\r\n\t\t};\r\n\r\n\t\t// FIXME: PORTME\r\n\t\t// var owloc = window.location+\"\";\r\n\t\t// var base = document.getElementsByTagName(\"base\");\r\n\t\t// var hasBase = (base && base.length > 0);\r\n\t\tvar hasBase = false;\r\n\r\n\t\tdojo._getText = function(/*URI*/ uri, /*Boolean*/ fail_ok){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRead the contents of the specified uri and return those contents.\r\n\t\t\t// uri:\r\n\t\t\t//\t\tA relative or absolute uri. If absolute, it still must be in\r\n\t\t\t//\t\tthe same \"domain\" as we are.\r\n\t\t\t// fail_ok:\r\n\t\t\t//\t\tDefault false. If fail_ok and loading fails, return null\r\n\t\t\t//\t\tinstead of throwing.\r\n\t\t\t// returns:\r\n\t\t\t//\t\tThe response text. null is returned when there is a\r\n\t\t\t//\t\tfailure and failure is okay (an exception otherwise)\r\n\r\n\t\t\t// alert(\"_getText: \" + uri);\r\n\r\n\t\t\t// NOTE: must be declared before scope switches ie. this._xhrObj()\r\n\t\t\tvar http = dojo._xhrObj();\r\n\r\n\t\t\tif(!hasBase && dojo._Url){\r\n\t\t\t\turi = (new dojo._Url(uri)).toString();\r\n\t\t\t}\r\n\t\t\tif(dojo.config.cacheBust){\r\n\t\t\t\t//Make sure we have a string before string methods are used on uri\r\n\t\t\t\turi += \"\";\r\n\t\t\t\turi += (uri.indexOf(\"?\") == -1 ? \"?\" : \"&\") + String(dojo.config.cacheBust).replace(/\\W+/g, \"\");\r\n\t\t\t}\r\n\t\t\tvar handleLocal = [\"file:\", \"chrome:\", \"resource:\"].some(function(prefix){\r\n\t\t\t\treturn String(uri).indexOf(prefix) == 0;\r\n\t\t\t});\r\n\t\t\tif(handleLocal){\r\n\t\t\t\t// see:\r\n\t\t\t\t//\t\thttp://forums.mozillazine.org/viewtopic.php?p=921150#921150\r\n\t\t\t\tvar ioService = Components.classes[\"@mozilla.org/network/io-service;1\"]\r\n\t\t\t\t\t.getService(Components.interfaces.nsIIOService);\r\n\t\t\t\tvar scriptableStream = Components\r\n\t\t\t\t\t.classes[\"@mozilla.org/scriptableinputstream;1\"]\r\n\t\t\t\t\t.getService(Components.interfaces.nsIScriptableInputStream);\r\n\r\n\t\t\t\tvar channel = ioService.newChannel(uri, null, null);\r\n\t\t\t\tvar input = channel.open();\r\n\t\t\t\tscriptableStream.init(input);\r\n\t\t\t\tvar str = scriptableStream.read(input.available());\r\n\t\t\t\tscriptableStream.close();\r\n\t\t\t\tinput.close();\r\n\t\t\t\treturn str;\r\n\t\t\t}else{\r\n\t\t\t\thttp.open('GET', uri, false);\r\n\t\t\t\ttry{\r\n\t\t\t\t\thttp.send(null);\r\n\t\t\t\t\t// alert(http);\r\n\t\t\t\t\tif(!dojo._isDocumentOk(http)){\r\n\t\t\t\t\t\tvar err = Error(\"Unable to load \" + uri + \" status:\" + http.status);\r\n\t\t\t\t\t\terr.status = http.status;\r\n\t\t\t\t\t\terr.responseText = http.responseText;\r\n\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tif(fail_ok){\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t} // null\r\n\t\t\t\t\t// rethrow the exception\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t\treturn http.responseText; // String\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdojo._windowUnloaders = [];\r\n\r\n\t\t// FIXME: PORTME\r\n\t\tdojo.windowUnloaded = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tsignal fired by impending window destruction. You may use\r\n\t\t\t//\t\tdojo.addOnWIndowUnload() or dojo.connect() to this method to perform\r\n\t\t\t//\t\tpage/application cleanup methods. See dojo.addOnWindowUnload for more info.\r\n\t\t\tvar mll = dojo._windowUnloaders;\r\n\t\t\twhile(mll.length){\r\n\t\t\t\t(mll.pop())();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// FIXME: PORTME\r\n\t\tdojo.addOnWindowUnload = function(/*Object?*/obj, /*String|Function?*/functionName){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tregisters a function to be triggered when window.onunload fires.\r\n\t\t\t//\t\tBe careful trying to modify the DOM or access JavaScript properties\r\n\t\t\t//\t\tduring this phase of page unloading: they may not always be available.\r\n\t\t\t//\t\tConsider dojo.addOnUnload() if you need to modify the DOM or do heavy\r\n\t\t\t//\t\tJavaScript work.\r\n\t\t\t// example:\r\n\t\t\t//\t|\tdojo.addOnWindowUnload(functionPointer)\r\n\t\t\t//\t|\tdojo.addOnWindowUnload(object, \"functionName\")\r\n\t\t\t//\t|\tdojo.addOnWindowUnload(object, function(){ /* ... */});\r\n\r\n\t\t\tdojo._onto(dojo._windowUnloaders, obj, functionName);\r\n\t\t};\r\n\r\n\t\t// XUL specific APIs\r\n\t\tvar contexts = [];\r\n\t\tvar current = null;\r\n\t\tdojo._defaultContext = [ window, document ];\r\n\r\n\t\tdojo.pushContext = function(/*Object|String?*/g, /*MDocumentElement?*/d){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tcauses subsequent calls to Dojo methods to assume the\r\n\t\t\t//\t\tpassed object and, optionally, document as the default\r\n\t\t\t//\t\tscopes to use. A 2-element array of the previous global and\r\n\t\t\t//\t\tdocument are returned.\r\n\t\t\t// description:\r\n\t\t\t//\t\tdojo.pushContext treats contexts as a stack. The\r\n\t\t\t//\t\tauto-detected contexts which are initially provided using\r\n\t\t\t//\t\tdojo.setContext() require authors to keep state in order to\r\n\t\t\t//\t\t\"return\" to a previous context, whereas the\r\n\t\t\t//\t\tdojo.pushContext and dojo.popContext methods provide a more\r\n\t\t\t//\t\tnatural way to augment blocks of code to ensure that they\r\n\t\t\t//\t\texecute in a different window or frame without issue. If\r\n\t\t\t//\t\tcalled without any arguments, the default context (the\r\n\t\t\t//\t\tcontext when Dojo is first loaded) is instead pushed into\r\n\t\t\t//\t\tthe stack. If only a single string is passed, a node in the\r\n\t\t\t//\t\tintitial context's document is looked up and its\r\n\t\t\t//\t\tcontextWindow and contextDocument properties are used as\r\n\t\t\t//\t\tthe context to push. This means that iframes can be given\r\n\t\t\t//\t\tan ID and code can be executed in the scope of the iframe's\r\n\t\t\t//\t\tdocument in subsequent calls easily.\r\n\t\t\t// g:\r\n\t\t\t//\t\tThe global context. If a string, the id of the frame to\r\n\t\t\t//\t\tsearch for a context and document.\r\n\t\t\t// d:\r\n\t\t\t//\t\tThe document element to execute subsequent code with.\r\n\t\t\tvar old = [dojo.global, dojo.doc];\r\n\t\t\tcontexts.push(old);\r\n\t\t\tvar n;\r\n\t\t\tif(!g && !d){\r\n\t\t\t\tn = dojo._defaultContext;\r\n\t\t\t}else{\r\n\t\t\t\tn = [ g, d ];\r\n\t\t\t\tif(!d && dojo.isString(g)){\r\n\t\t\t\t\tvar t = document.getElementById(g);\r\n\t\t\t\t\tif(t.contentDocument){\r\n\t\t\t\t\t\tn = [t.contentWindow, t.contentDocument];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcurrent = n;\r\n\t\t\tdojo.setContext.apply(dojo, n);\r\n\t\t\treturn old; // Array\r\n\t\t};\r\n\r\n\t\tdojo.popContext = function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tIf the context stack contains elements, ensure that\r\n\t\t\t//\t\tsubsequent code executes in the *previous* context to the\r\n\t\t\t//\t\tcurrent context. The current context set ([global,\r\n\t\t\t//\t\tdocument]) is returned.\r\n\t\t\tvar oc = current;\r\n\t\t\tif(!contexts.length){\r\n\t\t\t\treturn oc;\r\n\t\t\t}\r\n\t\t\tdojo.setContext.apply(dojo, contexts.pop());\r\n\t\t\treturn oc;\r\n\t\t};\r\n\r\n\t\t// FIXME:\r\n\t\t//\t\tdon't really like the current arguments and order to\r\n\t\t//\t\t_inContext, so don't make it public until it's right!\r\n\t\tdojo._inContext = function(g, d, f){\r\n\t\t\tvar a = dojo._toArray(arguments);\r\n\t\t\tf = a.pop();\r\n\t\t\tif(a.length == 1){\r\n\t\t\t\td = null;\r\n\t\t\t}\r\n\t\t\tdojo.pushContext(g, d);\r\n\t\t\tvar r = f();\r\n\t\t\tdojo.popContext();\r\n\t\t\treturn r;\r\n\t\t};\r\n\r\n\t})();\r\n\r\n\tdojo._initFired = false;\r\n\t//\tBEGIN DOMContentLoaded, from Dean Edwards (http://dean.edwards.name/weblog/2006/06/again/)\r\n\tdojo._loadInit = function(e){\r\n\t\tdojo._initFired = true;\r\n\t\t// allow multiple calls, only first one will take effect\r\n\t\t// A bug in khtml calls events callbacks for document for event which isnt supported\r\n\t\t// for example a created contextmenu event calls DOMContentLoaded, workaround\r\n\t\tvar type = (e && e.type) ? e.type.toLowerCase() : \"load\";\r\n\t\tif(arguments.callee.initialized || (type != \"domcontentloaded\" && type != \"load\")){ return; }\r\n\t\targuments.callee.initialized = true;\r\n\t\tif(dojo._inFlightCount == 0){\r\n\t\t\tdojo._modulesLoaded();\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t(function(){\r\n\t\tvar _w = window;\r\n\t\tvar _handleNodeEvent = function(evtName, fp){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tnon-destructively adds the specified function to the node's\r\n\t\t\t//\t\tevtName handler.\r\n\t\t\t// evtName: should be in the form \"onclick\" for \"onclick\" handlers.\r\n\t\t\t// Make sure you pass in the \"on\" part.\r\n\t\t\tvar oldHandler = _w[evtName] || function(){};\r\n\t\t\t_w[evtName] = function(){\r\n\t\t\t\tfp.apply(_w, arguments);\r\n\t\t\t\toldHandler.apply(_w, arguments);\r\n\t\t\t};\r\n\t\t};\r\n\t\t// FIXME: PORT\r\n\t\t// FIXME: dojo.unloaded requires dojo scope, so using anon function wrapper.\r\n\t\t_handleNodeEvent(\"onbeforeunload\", function(){ dojo.unloaded(); });\r\n\t\t_handleNodeEvent(\"onunload\", function(){ dojo.windowUnloaded(); });\r\n\t})();\r\n\t*/\r\n\r\n\r\n\t//\tFIXME: PORTME\r\n\t//\t\tthis event fires a lot, namely for all plugin XUL overlays and for\r\n\t//\t\tall iframes (in addition to window navigations). We only want\r\n\t//\t\tDojo's to fire once..but we might care if pages navigate. We'll\r\n\t//\t\tprobably need an extension-specific API\r\n\tif(!dojo.config.afterOnLoad){\r\n\t\twindow.addEventListener(\"DOMContentLoaded\", function(e){\r\n\t\t\tdojo._loadInit(e);\r\n\t\t\t// console.log(\"DOM content loaded\", e);\r\n\t\t}, false);\r\n\t}\r\n\r\n} //if (typeof window != 'undefined')\r\n\r\n//Register any module paths set up in djConfig. Need to do this\r\n//in the hostenvs since hostenv_browser can read djConfig from a\r\n//script tag's attribute.\r\n(function(){\r\n\tvar mp = dojo.config[\"modulePaths\"];\r\n\tif(mp){\r\n\t\tfor(var param in mp){\r\n\t\t\tdojo.registerModulePath(param, mp[param]);\r\n\t\t}\r\n\t}\r\n})();\r\n\r\n//Load debug code if necessary.\r\nif(dojo.config.isDebug){\r\n\t// logging stub for extension logging\r\n\tconsole.log = function(m){\r\n\t\tvar s = Components.classes[\"@mozilla.org/consoleservice;1\"].getService(\r\n\t\t\tComponents.interfaces.nsIConsoleService\r\n\t\t\t);\r\n\t\ts.logStringMessage(m);\r\n\t};\r\n\tconsole.debug = function(){\r\n\t\tconsole.log(dojo._toArray(arguments).join(\" \"));\r\n\t};\r\n\t// FIXME: what about the rest of the console.* methods? And is there any way to reach into firebug and log into it directly?\r\n}\r\n"]}