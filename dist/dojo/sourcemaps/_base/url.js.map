{"version":3,"sources":["_base/url.js"],"names":["define","dojo","ore","RegExp","ire","_Url","n","_a","arguments","uri","i","length","relobj","uriobj","path","scheme","authority","query","charAt","segs","substring","lastIndexOf","split","j","splice","join","fragment","push","this","r","match","user","password","host","port","prototype","toString"],"mappings":";;;;;;;AAAAA,QAAQ,YAAa,SAASC,GAI7B,IACCC,EAAM,IAAIC,OAAO,+DACjBC,EAAM,IAAID,OAAO,uEACjBE,EAAO,WAKN,IAJA,IAAIC,EAAI,KACPC,EAAKC,UACLC,GAAOF,EAAG,IAEHG,EAAI,EAAGA,EAAEH,EAAGI,OAAQD,IAC3B,GAAIH,EAAGG,GAAP,CAKA,IAAIE,EAAS,IAAIP,EAAKE,EAAGG,GAAG,IAC3BG,EAAS,IAAIR,EAAKI,EAAI,GAAG,IAE1B,GACgB,IAAfG,EAAOE,MACNF,EAAOG,QACPH,EAAOI,WACPJ,EAAOK,OAMH,IAAIL,EAAOG,SAChBH,EAAOG,OAASF,EAAOE,QAEnBH,EAAOI,YACVJ,EAAOI,UAAYH,EAAOG,UAEE,KAAzBJ,EAAOE,KAAKI,OAAO,KAAU,CAK/B,IAJA,IAGIC,GAHON,EAAOC,KAAKM,UAAU,EAChCP,EAAOC,KAAKO,YAAY,KAAO,GAAKT,EAAOE,MAE5BQ,MAAM,KACdC,EAAI,EAAGA,EAAIJ,EAAKR,OAAQY,IACjB,KAAXJ,EAAKI,GAEJA,GAAKJ,EAAKR,OAAS,EACrBQ,EAAKI,GAAK,IAEVJ,EAAKK,OAAOD,EAAG,GACfA,KAEOA,EAAI,IAAY,GAALA,GAAqB,IAAXJ,EAAK,KACvB,MAAXA,EAAKI,IAA2B,MAAbJ,EAAKI,EAAE,KAEvBA,GAAMJ,EAAKR,OAAS,GACtBQ,EAAKK,OAAOD,EAAG,GACfJ,EAAKI,EAAI,GAAK,KAEdJ,EAAKK,OAAOD,EAAI,EAAG,GACnBA,GAAK,IAIRX,EAAOE,KAAOK,EAAKM,KAAK,WApCvBb,EAAOc,UAAYpB,IACrBO,EAAOa,SAAWd,EAAOc,UAE1Bd,EAASC,EAsCVJ,KACGG,EAAOG,QACTN,EAAIkB,KAAKf,EAAOG,OAAQ,KAEtBH,EAAOI,WACTP,EAAIkB,KAAK,KAAMf,EAAOI,WAEvBP,EAAIkB,KAAKf,EAAOE,MACbF,EAAOK,OACTR,EAAIkB,KAAK,IAAKf,EAAOK,OAEnBL,EAAOc,UACTjB,EAAIkB,KAAK,IAAKf,EAAOc,UAIvBE,KAAKnB,IAAMA,EAAIgB,KAAK,IAGpB,IAAII,EAAID,KAAKnB,IAAIqB,MAAM5B,GAEvB0B,KAAKb,OAASc,EAAE,KAAOA,EAAE,GAAK,GAAKvB,GACnCsB,KAAKZ,UAAYa,EAAE,KAAOA,EAAE,GAAK,GAAKvB,GACtCsB,KAAKd,KAAOe,EAAE,GACdD,KAAKX,MAAQY,EAAE,KAAOA,EAAE,GAAK,GAAKvB,GAClCsB,KAAKF,SAAYG,EAAE,KAAOA,EAAE,GAAK,GAAKvB,GAEnCsB,KAAKZ,WAAaV,IAEpBuB,EAAID,KAAKZ,UAAUc,MAAM1B,GAEzBwB,KAAKG,KAAOF,EAAE,IAAMvB,EACpBsB,KAAKI,SAAWH,EAAE,IAAMvB,EACxBsB,KAAKK,KAAOJ,EAAE,IAAMA,EAAE,GACtBD,KAAKM,KAAOL,EAAE,IAAMvB,IAKvB,OAFAD,EAAK8B,UAAUC,SAAW,WAAY,OAAOR,KAAKnB,KAE3CR,EAAKI,KAAOA","file":"../../_base/url.js","sourcesContent":["define([\"./kernel\"], function(dojo){\r\n\t// module:\r\n\t//\t\tdojo/url\r\n\r\n\tvar\r\n\t\tore = new RegExp(\"^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\\\?([^#]*))?(#(.*))?$\"),\r\n\t\tire = new RegExp(\"^((([^\\\\[:]+):)?([^@]+)@)?(\\\\[([^\\\\]]+)\\\\]|([^\\\\[:]*))(:([0-9]+))?$\"),\r\n\t\t_Url = function(){\r\n\t\t\tvar n = null,\r\n\t\t\t\t_a = arguments,\r\n\t\t\t\turi = [_a[0]];\r\n\t\t\t// resolve uri components relative to each other\r\n\t\t\tfor(var i = 1; i<_a.length; i++){\r\n\t\t\t\tif(!_a[i]){ continue; }\r\n\r\n\t\t\t\t// Safari doesn't support this.constructor so we have to be explicit\r\n\t\t\t\t// FIXME: Tracked (and fixed) in Webkit bug 3537.\r\n\t\t\t\t//\t\thttp://bugs.webkit.org/show_bug.cgi?id=3537\r\n\t\t\t\tvar relobj = new _Url(_a[i]+\"\"),\r\n\t\t\t\t\turiobj = new _Url(uri[0]+\"\");\r\n\r\n\t\t\t\tif(\r\n\t\t\t\t\trelobj.path == \"\" &&\r\n\t\t\t\t\t!relobj.scheme &&\r\n\t\t\t\t\t!relobj.authority &&\r\n\t\t\t\t\t!relobj.query\r\n\t\t\t\t){\r\n\t\t\t\t\tif(relobj.fragment != n){\r\n\t\t\t\t\t\turiobj.fragment = relobj.fragment;\r\n\t\t\t\t\t}\r\n\t\t\t\t\trelobj = uriobj;\r\n\t\t\t\t}else if(!relobj.scheme){\r\n\t\t\t\t\trelobj.scheme = uriobj.scheme;\r\n\r\n\t\t\t\t\tif(!relobj.authority){\r\n\t\t\t\t\t\trelobj.authority = uriobj.authority;\r\n\r\n\t\t\t\t\t\tif(relobj.path.charAt(0) != \"/\"){\r\n\t\t\t\t\t\t\tvar path = uriobj.path.substring(0,\r\n\t\t\t\t\t\t\t\turiobj.path.lastIndexOf(\"/\") + 1) + relobj.path;\r\n\r\n\t\t\t\t\t\t\tvar segs = path.split(\"/\");\r\n\t\t\t\t\t\t\tfor(var j = 0; j < segs.length; j++){\r\n\t\t\t\t\t\t\t\tif(segs[j] == \".\"){\r\n\t\t\t\t\t\t\t\t\t// flatten \"./\" references\r\n\t\t\t\t\t\t\t\t\tif(j == segs.length - 1){\r\n\t\t\t\t\t\t\t\t\t\tsegs[j] = \"\";\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tsegs.splice(j, 1);\r\n\t\t\t\t\t\t\t\t\t\tj--;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}else if(j > 0 && !(j == 1 && segs[0] == \"\") &&\r\n\t\t\t\t\t\t\t\t\tsegs[j] == \"..\" && segs[j-1] != \"..\"){\r\n\t\t\t\t\t\t\t\t\t// flatten \"../\" references\r\n\t\t\t\t\t\t\t\t\tif(j == (segs.length - 1)){\r\n\t\t\t\t\t\t\t\t\t\tsegs.splice(j, 1);\r\n\t\t\t\t\t\t\t\t\t\tsegs[j - 1] = \"\";\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tsegs.splice(j - 1, 2);\r\n\t\t\t\t\t\t\t\t\t\tj -= 2;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\trelobj.path = segs.join(\"/\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\turi = [];\r\n\t\t\t\tif(relobj.scheme){\r\n\t\t\t\t\turi.push(relobj.scheme, \":\");\r\n\t\t\t\t}\r\n\t\t\t\tif(relobj.authority){\r\n\t\t\t\t\turi.push(\"//\", relobj.authority);\r\n\t\t\t\t}\r\n\t\t\t\turi.push(relobj.path);\r\n\t\t\t\tif(relobj.query){\r\n\t\t\t\t\turi.push(\"?\", relobj.query);\r\n\t\t\t\t}\r\n\t\t\t\tif(relobj.fragment){\r\n\t\t\t\t\turi.push(\"#\", relobj.fragment);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.uri = uri.join(\"\");\r\n\r\n\t\t\t// break the uri into its main components\r\n\t\t\tvar r = this.uri.match(ore);\r\n\r\n\t\t\tthis.scheme = r[2] || (r[1] ? \"\" : n);\r\n\t\t\tthis.authority = r[4] || (r[3] ? \"\" : n);\r\n\t\t\tthis.path = r[5]; // can never be undefined\r\n\t\t\tthis.query = r[7] || (r[6] ? \"\" : n);\r\n\t\t\tthis.fragment\t = r[9] || (r[8] ? \"\" : n);\r\n\r\n\t\t\tif(this.authority != n){\r\n\t\t\t\t// server based naming authority\r\n\t\t\t\tr = this.authority.match(ire);\r\n\r\n\t\t\t\tthis.user = r[3] || n;\r\n\t\t\t\tthis.password = r[4] || n;\r\n\t\t\t\tthis.host = r[6] || r[7]; // ipv6 || ipv4\r\n\t\t\t\tthis.port = r[9] || n;\r\n\t\t\t}\r\n\t\t};\r\n\t_Url.prototype.toString = function(){ return this.uri; };\r\n\r\n\treturn dojo._Url = _Url;\r\n});\r\n"]}