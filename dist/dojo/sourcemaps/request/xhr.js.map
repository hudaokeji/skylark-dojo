{"version":3,"sources":["request/xhr.js"],"names":["define","RequestError","watch","handlers","util","has","add","XMLHttpRequest","document","addEventListener","window","location","protocol","x","opera","FormData","responseType","open","abort","isValid","isReady","addListeners","cancel","nativeResponseTypes","blob","arraybuffer","handleResponse","response","error","_xhr","xhr","status","text","responseText","e","options","handleAs","data","responseXML","this","reject","checkStatus","resolve","url","getHeader","headerName","getResponseHeader","isFulfilled","dfd","onLoad","evt","onError","target","onProgress","lengthComputable","loaded","total","progress","readyState","position","removeEventListener","_at","undefined","defaultOptions","query","sync","method","returnDeferred","isFormData","parseArgs","deepCreate","remover","deferred","_create","promise","async","user","password","withCredentials","headers","contentType","hdr","toLowerCase","setRequestHeader","notify","emit","send","Error","ActiveXObject","addCommonMethods"],"mappings":"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","file":"../../request/xhr.js","sourcesContent":["define([\r\n\t'../errors/RequestError',\r\n\t'./watch',\r\n\t'./handlers',\r\n\t'./util',\r\n\t'../has'/*=====,\r\n\t'../request',\r\n\t'../_base/declare' =====*/\r\n], function(RequestError, watch, handlers, util, has/*=====, request, declare =====*/){\r\n\thas.add('native-xhr', function(){\r\n\t\t// if true, the environment has a native XHR implementation\r\n\t\treturn typeof XMLHttpRequest !== 'undefined';\r\n\t});\r\n\thas.add('dojo-force-activex-xhr', function(){\r\n\t\treturn has('activex') && !document.addEventListener && window.location.protocol === 'file:';\r\n\t});\r\n\r\n\thas.add('native-xhr2', function(){\r\n\t\tif(!has('native-xhr')){ return; }\r\n\t\tvar x = new XMLHttpRequest();\r\n\t\treturn typeof x['addEventListener'] !== 'undefined' &&\r\n\t\t\t(typeof opera === 'undefined' || typeof x['upload'] !== 'undefined');\r\n\t});\r\n\r\n\thas.add('native-formdata', function(){\r\n\t\t// if true, the environment has a native FormData implementation\r\n\t\treturn typeof FormData !== 'undefined';\r\n\t});\r\n\r\n\thas.add('native-response-type', function(){\r\n\t\treturn has('native-xhr') && typeof new XMLHttpRequest().responseType !== 'undefined';\r\n\t});\r\n\r\n\thas.add('native-xhr2-blob', function(){\r\n\t\tif(!has('native-response-type')){ return; }\r\n\t\tvar x = new XMLHttpRequest();\r\n\t\tx.open('GET', '/', true);\r\n\t\tx.responseType = 'blob';\r\n\t\t// will not be set if unsupported\r\n\t\tvar responseType = x.responseType;\r\n\t\tx.abort();\r\n\t\treturn responseType === 'blob';\r\n\t});\r\n\r\n\t// Google Chrome doesn't support \"json\" response type\r\n\t// up to version 30, so it's intentionally not included here\r\n\tvar nativeResponseTypes = {\r\n\t\t'blob': has('native-xhr2-blob') ? 'blob' : 'arraybuffer',\r\n\t\t'document': 'document',\r\n\t\t'arraybuffer': 'arraybuffer'\r\n\t};\r\n\r\n\tfunction handleResponse(response, error){\r\n\t\tvar _xhr = response.xhr;\r\n\t\tresponse.status = response.xhr.status;\r\n\r\n\t\ttry {\r\n\t\t\t// Firefox throws an error when trying to access\r\n\t\t\t// xhr.responseText if response isn't text\r\n\t\t\tresponse.text = _xhr.responseText;\r\n\t\t} catch (e) {}\r\n\r\n\t\tif(response.options.handleAs === 'xml'){\r\n\t\t\tresponse.data = _xhr.responseXML;\r\n\t\t}\r\n\r\n\t\tif(!error){\r\n\t\t\ttry{\r\n\t\t\t\thandlers(response);\r\n\t\t\t}catch(e){\r\n\t\t\t\terror = e;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(error){\r\n\t\t\tthis.reject(error);\r\n\t\t}else if(util.checkStatus(_xhr.status)){\r\n\t\t\tthis.resolve(response);\r\n\t\t}else{\r\n\t\t\terror = new RequestError('Unable to load ' + response.url + ' status: ' + _xhr.status, response);\r\n\r\n\t\t\tthis.reject(error);\r\n\t\t}\r\n\t}\r\n\r\n\tvar isValid, isReady, addListeners, cancel;\r\n\tif(has('native-xhr2')){\r\n\t\t// Any platform with XHR2 will only use the watch mechanism for timeout.\r\n\r\n\t\tisValid = function(response){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCheck to see if the request should be taken out of the watch queue\r\n\t\t\treturn !this.isFulfilled();\r\n\t\t};\r\n\t\tcancel = function(dfd, response){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCanceler for deferred\r\n\t\t\tresponse.xhr.abort();\r\n\t\t};\r\n\t\taddListeners = function(_xhr, dfd, response){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tAdds event listeners to the XMLHttpRequest object\r\n\t\t\tfunction onLoad(evt){\r\n\t\t\t\tdfd.handleResponse(response);\r\n\t\t\t}\r\n\t\t\tfunction onError(evt){\r\n\t\t\t\tvar _xhr = evt.target;\r\n\t\t\t\tvar error = new RequestError('Unable to load ' + response.url + ' status: ' + _xhr.status, response);\r\n\t\t\t\tdfd.handleResponse(response, error);\r\n\t\t\t}\r\n\r\n\t\t\tfunction onProgress(evt){\r\n\t\t\t\tif(evt.lengthComputable){\r\n\t\t\t\t\tresponse.loaded = evt.loaded;\r\n\t\t\t\t\tresponse.total = evt.total;\r\n\t\t\t\t\tdfd.progress(response);\r\n\t\t\t\t} else if(response.xhr.readyState === 3){\r\n\t\t\t\t\tresponse.loaded = evt.position;\r\n\t\t\t\t\tdfd.progress(response);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_xhr.addEventListener('load', onLoad, false);\r\n\t\t\t_xhr.addEventListener('error', onError, false);\r\n\t\t\t_xhr.addEventListener('progress', onProgress, false);\r\n\r\n\t\t\treturn function(){\r\n\t\t\t\t_xhr.removeEventListener('load', onLoad, false);\r\n\t\t\t\t_xhr.removeEventListener('error', onError, false);\r\n\t\t\t\t_xhr.removeEventListener('progress', onProgress, false);\r\n\t\t\t\t_xhr = null;\r\n\t\t\t};\r\n\t\t};\r\n\t}else{\r\n\t\tisValid = function(response){\r\n\t\t\treturn response.xhr.readyState; //boolean\r\n\t\t};\r\n\t\tisReady = function(response){\r\n\t\t\treturn 4 === response.xhr.readyState; //boolean\r\n\t\t};\r\n\t\tcancel = function(dfd, response){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tcanceller function for util.deferred call.\r\n\t\t\tvar xhr = response.xhr;\r\n\t\t\tvar _at = typeof xhr.abort;\r\n\t\t\tif(_at === 'function' || _at === 'object' || _at === 'unknown'){\r\n\t\t\t\txhr.abort();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getHeader(headerName){\r\n\t\treturn this.xhr.getResponseHeader(headerName);\r\n\t}\r\n\r\n\tvar undefined,\r\n\t\tdefaultOptions = {\r\n\t\t\tdata: null,\r\n\t\t\tquery: null,\r\n\t\t\tsync: false,\r\n\t\t\tmethod: 'GET'\r\n\t\t};\r\n\tfunction xhr(url, options, returnDeferred){\r\n\t\tvar isFormData = has('native-formdata') && options && options.data && options.data instanceof FormData;\r\n\t\tvar response = util.parseArgs(\r\n\t\t\turl,\r\n\t\t\tutil.deepCreate(defaultOptions, options),\r\n\t\t\tisFormData\r\n\t\t);\r\n\t\turl = response.url;\r\n\t\toptions = response.options;\r\n\r\n\t\tvar remover,\r\n\t\t\tlast = function(){\r\n\t\t\t\tremover && remover();\r\n\t\t\t};\r\n\r\n\t\t//Make the Deferred object for this xhr request.\r\n\t\tvar dfd = util.deferred(\r\n\t\t\tresponse,\r\n\t\t\tcancel,\r\n\t\t\tisValid,\r\n\t\t\tisReady,\r\n\t\t\thandleResponse,\r\n\t\t\tlast\r\n\t\t);\r\n\t\tvar _xhr = response.xhr = xhr._create();\r\n\r\n\t\tif(!_xhr){\r\n\t\t\t// If XHR factory somehow returns nothings,\r\n\t\t\t// cancel the deferred.\r\n\t\t\tdfd.cancel(new RequestError('XHR was not created'));\r\n\t\t\treturn returnDeferred ? dfd : dfd.promise;\r\n\t\t}\r\n\r\n\t\tresponse.getHeader = getHeader;\r\n\r\n\t\tif(addListeners){\r\n\t\t\tremover = addListeners(_xhr, dfd, response);\r\n\t\t}\r\n\r\n\t\tvar data = options.data,\r\n\t\t\tasync = !options.sync,\r\n\t\t\tmethod = options.method;\r\n\r\n\t\ttry{\r\n\t\t\t// IE6 won't let you call apply() on the native function.\r\n\t\t\t_xhr.open(method, url, async, options.user || undefined, options.password || undefined);\r\n\r\n\t\t\tif(options.withCredentials){\r\n\t\t\t\t_xhr.withCredentials = options.withCredentials;\r\n\t\t\t}\r\n\r\n\t\t\tif(has('native-response-type') && options.handleAs in nativeResponseTypes) {\r\n\t\t\t\t_xhr.responseType = nativeResponseTypes[options.handleAs];\r\n\t\t\t}\r\n\r\n\t\t\tvar headers = options.headers,\r\n\t\t\t\tcontentType = isFormData ? false : 'application/x-www-form-urlencoded';\r\n\t\t\tif(headers){\r\n\t\t\t\tfor(var hdr in headers){\r\n\t\t\t\t\tif(hdr.toLowerCase() === 'content-type'){\r\n\t\t\t\t\t\tcontentType = headers[hdr];\r\n\t\t\t\t\t}else if(headers[hdr]){\r\n\t\t\t\t\t\t//Only add header if it has a value. This allows for instance, skipping\r\n\t\t\t\t\t\t//insertion of X-Requested-With by specifying empty value.\r\n\t\t\t\t\t\t_xhr.setRequestHeader(hdr, headers[hdr]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(contentType && contentType !== false){\r\n\t\t\t\t_xhr.setRequestHeader('Content-Type', contentType);\r\n\t\t\t}\r\n\t\t\tif(!headers || !('X-Requested-With' in headers)){\r\n\t\t\t\t_xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n\t\t\t}\r\n\r\n\t\t\tif(util.notify){\r\n\t\t\t\tutil.notify.emit('send', response, dfd.promise.cancel);\r\n\t\t\t}\r\n\t\t\t_xhr.send(data);\r\n\t\t}catch(e){\r\n\t\t\tdfd.reject(e);\r\n\t\t}\r\n\r\n\t\twatch(dfd);\r\n\t\t_xhr = null;\r\n\r\n\t\treturn returnDeferred ? dfd : dfd.promise;\r\n\t}\r\n\r\n\t/*=====\r\n\txhr = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSends a request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__Options?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\txhr.__BaseOptions = declare(request.__BaseOptions, {\r\n\t\t// sync: Boolean?\r\n\t\t//\t\tWhether to make a synchronous request or not. Default\r\n\t\t//\t\tis `false` (asynchronous).\r\n\t\t// data: String|Object|FormData?\r\n\t\t//\t\tData to transfer. This is ignored for GET and DELETE\r\n\t\t//\t\trequests.\r\n\t\t// headers: Object?\r\n\t\t//\t\tHeaders to use for the request.\r\n\t\t// user: String?\r\n\t\t//\t\tUsername to use during the request.\r\n\t\t// password: String?\r\n\t\t//\t\tPassword to use during the request.\r\n\t\t// withCredentials: Boolean?\r\n\t\t//\t\tFor cross-site requests, whether to send credentials\r\n\t\t//\t\tor not.\r\n\t});\r\n\txhr.__MethodOptions = declare(null, {\r\n\t\t// method: String?\r\n\t\t//\t\tThe HTTP method to use to make the request. Must be\r\n\t\t//\t\tuppercase. Default is `\"GET\"`.\r\n\t});\r\n\txhr.__Options = declare([xhr.__BaseOptions, xhr.__MethodOptions]);\r\n\r\n\txhr.get = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP GET request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\txhr.post = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP POST request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\txhr.put = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP PUT request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\txhr.del = function(url, options){\r\n\t\t// summary:\r\n\t\t//\t\tSend an HTTP DELETE request using XMLHttpRequest with the given URL and options.\r\n\t\t// url: String\r\n\t\t//\t\tURL to request\r\n\t\t// options: dojo/request/xhr.__BaseOptions?\r\n\t\t//\t\tOptions for the request.\r\n\t\t// returns: dojo/request.__Promise\r\n\t};\r\n\t=====*/\r\n\txhr._create = function(){\r\n\t\t// summary:\r\n\t\t//\t\tdoes the work of portably generating a new XMLHTTPRequest object.\r\n\t\tthrow new Error('XMLHTTP not available');\r\n\t};\r\n\tif(has('native-xhr') && !has('dojo-force-activex-xhr')){\r\n\t\txhr._create = function(){\r\n\t\t\treturn new XMLHttpRequest();\r\n\t\t};\r\n\t}else if(has('activex')){\r\n\t\ttry{\r\n\t\t\tnew ActiveXObject('Msxml2.XMLHTTP');\r\n\t\t\txhr._create = function(){\r\n\t\t\t\treturn new ActiveXObject('Msxml2.XMLHTTP');\r\n\t\t\t};\r\n\t\t}catch(e){\r\n\t\t\ttry{\r\n\t\t\t\tnew ActiveXObject('Microsoft.XMLHTTP');\r\n\t\t\t\txhr._create = function(){\r\n\t\t\t\t\treturn new ActiveXObject('Microsoft.XMLHTTP');\r\n\t\t\t\t};\r\n\t\t\t}catch(e){}\r\n\t\t}\r\n\t}\r\n\r\n\tutil.addCommonMethods(xhr);\r\n\r\n\treturn xhr;\r\n});\r\n"]}