{"version":3,"sources":["fx.js"],"names":["define","lang","Evented","dojo","arrayUtil","aspect","baseFx","dom","domStyle","geom","ready","require","isAsync","coreFx","fx","_baseObj","_fire","evt","args","this","apply","_chain","animations","_index","_animations","_current","_onAnimateCtx","_onEndCtx","duration","forEach","a","delay","prototype","extend","_onAnimate","arguments","_onEnd","remove","length","after","hitch","play","gotoStart","status","beforeBegin","onBegin","arg","onPlay","pause","e","gotoPercent","percent","andPlay","offset","some","index","stop","gotoEnd","destroy","chain","_combine","_connects","_finished","push","_pseudoAnimation","Animation","curve","self","_doAction","action","_call","t","ms","handle","combine","wipeIn","o","node","byId","s","style","anim","animateProperty","mixin","properties","height","start","overflow","visibility","display","get","Math","max","end","scrollHeight","fini","wipeOut","slideTo","n","top","left","init","cs","getComputedStyle","pos","position","offsetTop","parseInt","offsetLeft","ret","y","x"],"mappings":";;;;;;;AAAAA,QACC,eACA,YACA,iBACA,gBACA,WACA,aACA,QACA,cACA,iBACA,UACA,WACE,SAASC,EAAMC,EAASC,EAAMC,EAAWC,EAAQC,EAAQC,EAAKC,EAAUC,EAAMC,EAAOC,SAMnFR,EAAKS,SACRF,EAAM,EAAG,WAERC,SADgB,mBAKlB,IAAIE,EAASV,EAAKW,MAKdC,GACFC,MAAO,SAASC,EAAKC,GAIpB,OAHGC,KAAKF,IACPE,KAAKF,GAAKG,MAAMD,KAAMD,OAEhBC,OAINE,EAAS,SAASC,GACrBH,KAAKI,QAAU,EACfJ,KAAKK,YAAcF,MACnBH,KAAKM,SAAWN,KAAKO,cAAgBP,KAAKQ,UAAY,KAEtDR,KAAKS,SAAW,EAChBxB,EAAUyB,QAAQV,KAAKK,YAAa,SAASM,GAC5CX,KAAKS,UAAYE,EAAEF,SAChBE,EAAEC,QAAQZ,KAAKS,UAAYE,EAAEC,QAC9BZ,OAEJE,EAAOW,UAAY,IAAI9B,EACvBD,EAAKgC,OAAOZ,GACXa,WAAY,WACXf,KAAKH,MAAM,YAAamB,YAEzBC,OAAQ,WACPjB,KAAKO,cAAcW,SACnBlB,KAAKQ,UAAUU,SACflB,KAAKO,cAAgBP,KAAKQ,UAAY,KACnCR,KAAKI,OAAS,GAAKJ,KAAKK,YAAYc,OACtCnB,KAAKH,MAAM,UAGXG,KAAKM,SAAWN,KAAKK,cAAcL,KAAKI,QACxCJ,KAAKO,cAAgBrB,EAAOkC,MAAMpB,KAAKM,SAAU,YAAaxB,EAAKuC,MAAMrB,KAAM,eAAe,GAC9FA,KAAKQ,UAAYtB,EAAOkC,MAAMpB,KAAKM,SAAU,QAASxB,EAAKuC,MAAMrB,KAAM,WAAW,GAClFA,KAAKM,SAASgB,KAAK,GAAG,KAGxBA,KAAM,SAAkBV,EAAoBW,GAE3C,GADIvB,KAAKM,WAAWN,KAAKM,SAAWN,KAAKK,YAAYL,KAAKI,OAAS,KAC/DmB,GAAuC,WAA1BvB,KAAKM,SAASkB,SAAwB,OAAOxB,KAC9D,IAAIyB,EAAcvC,EAAOkC,MAAMpB,KAAKM,SAAU,cAAexB,EAAKuC,MAAMrB,KAAM,WAC5EA,KAAKH,MAAM,kBACR,GACJ6B,EAAUxC,EAAOkC,MAAMpB,KAAKM,SAAU,UAAWxB,EAAKuC,MAAMrB,KAAM,SAAS2B,GAC1E3B,KAAKH,MAAM,UAAWmB,cACnB,GACJY,EAAS1C,EAAOkC,MAAMpB,KAAKM,SAAU,SAAUxB,EAAKuC,MAAMrB,KAAM,SAAS2B,GACxE3B,KAAKH,MAAM,SAAUmB,WACrBS,EAAYP,SACZQ,EAAQR,SACRU,EAAOV,YAWT,OATGlB,KAAKO,eACPP,KAAKO,cAAcW,SAEpBlB,KAAKO,cAAgBrB,EAAOkC,MAAMpB,KAAKM,SAAU,YAAaxB,EAAKuC,MAAMrB,KAAM,eAAe,GAC3FA,KAAKQ,WACPR,KAAKQ,UAAUU,SAEhBlB,KAAKQ,UAAYtB,EAAOkC,MAAMpB,KAAKM,SAAU,QAASxB,EAAKuC,MAAMrB,KAAM,WAAW,GAClFA,KAAKM,SAASgB,KAAKrB,MAAMD,KAAKM,SAAUU,WACjChB,MAER6B,MAAO,WACN,GAAG7B,KAAKM,SAAS,CAChB,IAAIwB,EAAI5C,EAAOkC,MAAMpB,KAAKM,SAAU,UAAWxB,EAAKuC,MAAMrB,KAAM,SAAS2B,GACvE3B,KAAKH,MAAM,UAAWmB,WACtBc,EAAEZ,YACC,GACLlB,KAAKM,SAASuB,QAEf,OAAO7B,MAER+B,YAAa,SAAoBC,EAAsBC,GACtDjC,KAAK6B,QACL,IAAIK,EAASlC,KAAKS,SAAWuB,EAgB7B,OAfAhC,KAAKM,SAAW,KAEhBrB,EAAUkD,KAAKnC,KAAKK,YAAa,SAASM,EAAGyB,GAC5C,OAAGF,GAAUvB,EAAEF,UACdT,KAAKM,SAAWK,EAChBX,KAAKI,OAASgC,GACP,IAERF,GAAUvB,EAAEF,UACL,IACLT,MACAA,KAAKM,UACPN,KAAKM,SAASyB,YAAYG,EAASlC,KAAKM,SAASG,UAE9CwB,GAAWjC,KAAKsB,OACbtB,MAERqC,KAAM,SAAsBC,GAC3B,GAAGtC,KAAKM,SAAS,CAChB,GAAGgC,EAAQ,CACV,KAAMtC,KAAKI,OAAS,EAAIJ,KAAKK,YAAYc,SAAUnB,KAAKI,OACvDJ,KAAKK,YAAYL,KAAKI,QAAQiC,MAAK,GAEpCrC,KAAKM,SAAWN,KAAKK,YAAYL,KAAKI,QAEvC,IAAI0B,EAAI5C,EAAOkC,MAAMpB,KAAKM,SAAU,SAAUxB,EAAKuC,MAAMrB,KAAM,SAAS2B,GACtE3B,KAAKH,MAAM,SAAUmB,WACrBc,EAAEZ,YACC,GACLlB,KAAKM,SAAS+B,OAEf,OAAOrC,MAERwB,OAAQ,WACP,OAAOxB,KAAKM,SAAWN,KAAKM,SAASkB,SAAW,WAEjDe,QAAS,WACRvC,KAAKqC,OACFrC,KAAKO,eAAgBP,KAAKO,cAAcW,SACxClB,KAAKQ,WAAYR,KAAKQ,UAAUU,YAGrCpC,EAAKgC,OAAOZ,EAAQN,GAEpBF,EAAO8C,MAAQ,SAAuCrC,GAoBrD,OAAO,IAAID,EAAOC,IAGnB,IAAIsC,EAAW,SAAStC,GACvBH,KAAKK,YAAcF,MACnBH,KAAK0C,aACL1C,KAAK2C,UAAY,EAEjB3C,KAAKS,SAAW,EAChBxB,EAAUyB,QAAQP,EAAY,SAASQ,GACtC,IAAIF,EAAWE,EAAEF,SACdE,EAAEC,QAAQH,GAAYE,EAAEC,OACxBZ,KAAKS,SAAWA,IAAWT,KAAKS,SAAWA,GAC9CT,KAAK0C,UAAUE,KAAK1D,EAAOkC,MAAMT,EAAG,QAAS7B,EAAKuC,MAAMrB,KAAM,WAAW,KACvEA,MAEHA,KAAK6C,iBAAmB,IAAI1D,EAAO2D,WAAWC,OAAQ,EAAG,GAAItC,SAAUT,KAAKS,WAC5E,IAAIuC,EAAOhD,KACXf,EAAUyB,SAAS,cAAe,UAAW,SAAU,YAAa,UAAW,SAAU,SACxF,SAASZ,GACRkD,EAAKN,UAAUE,KAAK1D,EAAOkC,MAAM4B,EAAKH,iBAAkB/C,EACvD,WAAYkD,EAAKnD,MAAMC,EAAKkB,aAC7B,OAiPH,OA7OAlC,EAAKgC,OAAO2B,GACXQ,UAAW,SAASC,EAAQnD,GAI3B,OAHAd,EAAUyB,QAAQV,KAAKK,YAAa,SAASM,GAC5CA,EAAEuC,GAAQjD,MAAMU,EAAGZ,KAEbC,MAERiB,OAAQ,aACFjB,KAAK2C,UAAY3C,KAAKK,YAAYc,QACtCnB,KAAKH,MAAM,UAGbsD,MAAO,SAASD,EAAQnD,GACvB,IAAIqD,EAAIpD,KAAK6C,iBACbO,EAAEF,GAAQjD,MAAMmD,EAAGrD,IAEpBuB,KAAM,SAAkBV,EAAoBW,GAI3C,OAHAvB,KAAK2C,UAAY,EACjB3C,KAAKiD,UAAU,OAAQjC,WACvBhB,KAAKmD,MAAM,OAAQnC,WACZhB,MAER6B,MAAO,WAGN,OAFA7B,KAAKiD,UAAU,QAASjC,WACxBhB,KAAKmD,MAAM,QAASnC,WACbhB,MAER+B,YAAa,SAAoBC,EAAsBC,GACtD,IAAIoB,EAAKrD,KAAKS,SAAWuB,EAKzB,OAJA/C,EAAUyB,QAAQV,KAAKK,YAAa,SAASM,GAC5CA,EAAEoB,YAAYpB,EAAEF,SAAW4C,EAAK,EAAKA,EAAK1C,EAAEF,SAAWwB,KAExDjC,KAAKmD,MAAM,cAAenC,WACnBhB,MAERqC,KAAM,SAAsBC,GAG3B,OAFAtC,KAAKiD,UAAU,OAAQjC,WACvBhB,KAAKmD,MAAM,OAAQnC,WACZhB,MAERwB,OAAQ,WACP,OAAOxB,KAAK6C,iBAAiBrB,UAE9Be,QAAS,WACRvC,KAAKqC,OACLpD,EAAUyB,QAAQV,KAAK0C,UAAW,SAASY,GAC1CA,EAAOpC,cAIVpC,EAAKgC,OAAO2B,EAAU7C,GAEtBF,EAAO6D,QAAU,SAAuCpD,GA+BvD,OAAO,IAAIsC,EAAStC,IAGrBT,EAAO8D,OAAS,SAAoBzD,GAqBnC,IAA4D0D,EAAxDC,EAAO3D,EAAK2D,KAAOtE,EAAIuE,KAAK5D,EAAK2D,MAAOE,EAAIF,EAAKG,MAEjDC,EAAO3E,EAAO4E,gBAAgBjF,EAAKkF,OACtCC,YACCC,QAECC,MAAO,WAKN,GAFAV,EAAIG,EAAEQ,SACNR,EAAEQ,SAAW,SACM,UAAhBR,EAAES,YAAuC,QAAbT,EAAEU,QAIhC,OAHAV,EAAEM,OAAS,MACXN,EAAEU,QAAU,GACZV,EAAES,WAAa,GACR,EAEP,IAAIH,EAAS7E,EAASkF,IAAIb,EAAM,UAChC,OAAOc,KAAKC,IAAIP,EAAQ,IAG1BQ,IAAK,WACJ,OAAOhB,EAAKiB,iBAIb5E,IAEC6E,EAAO,WACVhB,EAAEM,OAAS,OACXN,EAAEQ,SAAWX,GAKd,OAHAvE,EAAOkC,MAAM0C,EAAM,SAAUc,GAAM,GACnC1F,EAAOkC,MAAM0C,EAAM,QAASc,GAAM,GAE3Bd,GAGRpE,EAAOmF,QAAU,SAAoB9E,GAiBpC,IAA4D0D,EAAhBG,GAAjC7D,EAAK2D,KAAOtE,EAAIuE,KAAK5D,EAAK2D,OAAgBG,MAEjDC,EAAO3E,EAAO4E,gBAAgBjF,EAAKkF,OACtCC,YACCC,QACCQ,IAAK,KAGL3E,IAEHb,EAAOkC,MAAM0C,EAAM,cAAe,WACjCL,EAAIG,EAAEQ,SACNR,EAAEQ,SAAW,SACbR,EAAEU,QAAU,KACV,GACH,IAAIM,EAAO,WACVhB,EAAEQ,SAAWX,EACbG,EAAEM,OAAS,OACXN,EAAEU,QAAU,QAKb,OAHApF,EAAOkC,MAAM0C,EAAM,SAAUc,GAAM,GACnC1F,EAAOkC,MAAM0C,EAAM,QAASc,GAAM,GAE3Bd,GAGRpE,EAAOoF,QAAU,SAAoB/E,GAiBpC,IAGqBgF,EAHjBrB,EAAO3D,EAAK2D,KAAOtE,EAAIuE,KAAK5D,EAAK2D,MACpCsB,EAAM,KAAMC,EAAO,KAEhBC,GAAiBH,EAelBrB,EAdK,WACN,IAAIyB,EAAK9F,EAAS+F,iBAAiBL,GAC/BM,EAAMF,EAAGG,SAGb,GAFAN,EAAc,YAAPK,EAAoBN,EAAEQ,UAAYC,SAASL,EAAGH,MAAQ,EAC7DC,EAAe,YAAPI,EAAoBN,EAAEU,WAAaD,SAASL,EAAGF,OAAS,EACtD,YAAPI,GAA4B,YAAPA,EAAkB,CACzC,IAAIK,EAAMpG,EAAKgG,SAASP,GAAG,GAC3BC,EAAMU,EAAIC,EACVV,EAAOS,EAAIE,EACXb,EAAElB,MAAMyB,SAAS,WACjBP,EAAElB,MAAMmB,IAAIA,EAAI,KAChBD,EAAElB,MAAMoB,KAAKA,EAAK,QAIrBC,IAEA,IAAIpB,EAAO3E,EAAO4E,gBAAgBjF,EAAKkF,OACtCC,YACCe,IAAKjF,EAAKiF,KAAO,EACjBC,KAAMlF,EAAKkF,MAAQ,IAElBlF,IAGH,OAFAb,EAAOkC,MAAM0C,EAAM,cAAeoB,GAAM,GAEjCpB,GAGDpE","file":"../fx.js","sourcesContent":["define([\r\n\t\"./_base/lang\",\r\n\t\"./Evented\",\r\n\t\"./_base/kernel\",\r\n\t\"./_base/array\",\r\n\t\"./aspect\",\r\n\t\"./_base/fx\",\r\n\t\"./dom\",\r\n\t\"./dom-style\",\r\n\t\"./dom-geometry\",\r\n\t\"./ready\",\r\n\t\"require\" // for context sensitive loading of Toggler\r\n], function(lang, Evented, dojo, arrayUtil, aspect, baseFx, dom, domStyle, geom, ready, require){\r\n\r\n\t// module:\r\n\t//\t\tdojo/fx\r\n\t\r\n\t// For back-compat, remove in 2.0.\r\n\tif(!dojo.isAsync){\r\n\t\tready(0, function(){\r\n\t\t\tvar requires = [\"./fx/Toggler\"];\r\n\t\t\trequire(requires);\t// use indirection so modules not rolled into a build\r\n\t\t});\r\n\t}\r\n\r\n\tvar coreFx = dojo.fx = {\r\n\t\t// summary:\r\n\t\t//\t\tEffects library on top of Base animations\r\n\t};\r\n\r\n\tvar _baseObj = {\r\n\t\t\t_fire: function(evt, args){\r\n\t\t\t\tif(this[evt]){\r\n\t\t\t\t\tthis[evt].apply(this, args||[]);\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\tvar _chain = function(animations){\r\n\t\tthis._index = -1;\r\n\t\tthis._animations = animations||[];\r\n\t\tthis._current = this._onAnimateCtx = this._onEndCtx = null;\r\n\r\n\t\tthis.duration = 0;\r\n\t\tarrayUtil.forEach(this._animations, function(a){\r\n\t\t\tthis.duration += a.duration;\r\n\t\t\tif(a.delay){ this.duration += a.delay; }\r\n\t\t}, this);\r\n\t};\r\n\t_chain.prototype = new Evented();\r\n\tlang.extend(_chain, {\r\n\t\t_onAnimate: function(){\r\n\t\t\tthis._fire(\"onAnimate\", arguments);\r\n\t\t},\r\n\t\t_onEnd: function(){\r\n\t\t\tthis._onAnimateCtx.remove();\r\n\t\t\tthis._onEndCtx.remove();\r\n\t\t\tthis._onAnimateCtx = this._onEndCtx = null;\r\n\t\t\tif(this._index + 1 == this._animations.length){\r\n\t\t\t\tthis._fire(\"onEnd\");\r\n\t\t\t}else{\r\n\t\t\t\t// switch animations\r\n\t\t\t\tthis._current = this._animations[++this._index];\r\n\t\t\t\tthis._onAnimateCtx = aspect.after(this._current, \"onAnimate\", lang.hitch(this, \"_onAnimate\"), true);\r\n\t\t\t\tthis._onEndCtx = aspect.after(this._current, \"onEnd\", lang.hitch(this, \"_onEnd\"), true);\r\n\t\t\t\tthis._current.play(0, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tplay: function(/*int?*/ delay, /*Boolean?*/ gotoStart){\r\n\t\t\tif(!this._current){ this._current = this._animations[this._index = 0]; }\r\n\t\t\tif(!gotoStart && this._current.status() == \"playing\"){ return this; }\r\n\t\t\tvar beforeBegin = aspect.after(this._current, \"beforeBegin\", lang.hitch(this, function(){\r\n\t\t\t\t\tthis._fire(\"beforeBegin\");\r\n\t\t\t\t}), true),\r\n\t\t\t\tonBegin = aspect.after(this._current, \"onBegin\", lang.hitch(this, function(arg){\r\n\t\t\t\t\tthis._fire(\"onBegin\", arguments);\r\n\t\t\t\t}), true),\r\n\t\t\t\tonPlay = aspect.after(this._current, \"onPlay\", lang.hitch(this, function(arg){\r\n\t\t\t\t\tthis._fire(\"onPlay\", arguments);\r\n\t\t\t\t\tbeforeBegin.remove();\r\n\t\t\t\t\tonBegin.remove();\r\n\t\t\t\t\tonPlay.remove();\r\n\t\t\t\t}));\r\n\t\t\tif(this._onAnimateCtx){\r\n\t\t\t\tthis._onAnimateCtx.remove();\r\n\t\t\t}\r\n\t\t\tthis._onAnimateCtx = aspect.after(this._current, \"onAnimate\", lang.hitch(this, \"_onAnimate\"), true);\r\n\t\t\tif(this._onEndCtx){\r\n\t\t\t\tthis._onEndCtx.remove();\r\n\t\t\t}\r\n\t\t\tthis._onEndCtx = aspect.after(this._current, \"onEnd\", lang.hitch(this, \"_onEnd\"), true);\r\n\t\t\tthis._current.play.apply(this._current, arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tpause: function(){\r\n\t\t\tif(this._current){\r\n\t\t\t\tvar e = aspect.after(this._current, \"onPause\", lang.hitch(this, function(arg){\r\n\t\t\t\t\t\tthis._fire(\"onPause\", arguments);\r\n\t\t\t\t\t\te.remove();\r\n\t\t\t\t\t}), true);\r\n\t\t\t\tthis._current.pause();\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tgotoPercent: function(/*Decimal*/percent, /*Boolean?*/ andPlay){\r\n\t\t\tthis.pause();\r\n\t\t\tvar offset = this.duration * percent;\r\n\t\t\tthis._current = null;\r\n\r\n\t\t\tarrayUtil.some(this._animations, function(a, index){\r\n\t\t\t\tif(offset <= a.duration){\r\n\t\t\t\t\tthis._current = a;\r\n\t\t\t\t\tthis._index = index;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\toffset -= a.duration;\r\n\t\t\t\treturn false;\r\n\t\t\t}, this);\r\n\t\t\tif(this._current){\r\n\t\t\t\tthis._current.gotoPercent(offset / this._current.duration);\r\n\t\t\t}\r\n\t\t\tif (andPlay) { this.play(); }\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstop: function(/*boolean?*/ gotoEnd){\r\n\t\t\tif(this._current){\r\n\t\t\t\tif(gotoEnd){\r\n\t\t\t\t\tfor(; this._index + 1 < this._animations.length; ++this._index){\r\n\t\t\t\t\t\tthis._animations[this._index].stop(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._current = this._animations[this._index];\r\n\t\t\t\t}\r\n\t\t\t\tvar e = aspect.after(this._current, \"onStop\", lang.hitch(this, function(arg){\r\n\t\t\t\t\t\tthis._fire(\"onStop\", arguments);\r\n\t\t\t\t\t\te.remove();\r\n\t\t\t\t\t}), true);\r\n\t\t\t\tthis._current.stop();\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstatus: function(){\r\n\t\t\treturn this._current ? this._current.status() : \"stopped\";\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\t\t\tthis.stop();\r\n\t\t\tif(this._onAnimateCtx){ this._onAnimateCtx.remove(); }\r\n\t\t\tif(this._onEndCtx){ this._onEndCtx.remove(); }\r\n\t\t}\r\n\t});\r\n\tlang.extend(_chain, _baseObj);\r\n\r\n\tcoreFx.chain = function(/*dojo/_base/fx.Animation[]*/ animations){\r\n\t\t// summary:\r\n\t\t//\t\tChain a list of `dojo/_base/fx.Animation`s to run in sequence\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tReturn a `dojo/_base/fx.Animation` which will play all passed\r\n\t\t//\t\t`dojo/_base/fx.Animation` instances in sequence, firing its own\r\n\t\t//\t\tsynthesized events simulating a single animation. (eg:\r\n\t\t//\t\tonEnd of this animation means the end of the chain,\r\n\t\t//\t\tnot the individual animations within)\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tOnce `node` is faded out, fade in `otherNode`\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tfx.chain([\r\n\t\t//\t|\t\t\tfx.fadeIn({ node:node }),\r\n\t\t//\t|\t\t\tfx.fadeOut({ node:otherNode })\r\n\t\t//\t|\t\t]).play();\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\treturn new _chain(animations); // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\tvar _combine = function(animations){\r\n\t\tthis._animations = animations||[];\r\n\t\tthis._connects = [];\r\n\t\tthis._finished = 0;\r\n\r\n\t\tthis.duration = 0;\r\n\t\tarrayUtil.forEach(animations, function(a){\r\n\t\t\tvar duration = a.duration;\r\n\t\t\tif(a.delay){ duration += a.delay; }\r\n\t\t\tif(this.duration < duration){ this.duration = duration; }\r\n\t\t\tthis._connects.push(aspect.after(a, \"onEnd\", lang.hitch(this, \"_onEnd\"), true));\r\n\t\t}, this);\r\n\r\n\t\tthis._pseudoAnimation = new baseFx.Animation({curve: [0, 1], duration: this.duration});\r\n\t\tvar self = this;\r\n\t\tarrayUtil.forEach([\"beforeBegin\", \"onBegin\", \"onPlay\", \"onAnimate\", \"onPause\", \"onStop\", \"onEnd\"],\r\n\t\t\tfunction(evt){\r\n\t\t\t\tself._connects.push(aspect.after(self._pseudoAnimation, evt,\r\n\t\t\t\t\tfunction(){ self._fire(evt, arguments); },\r\n\t\t\t\ttrue));\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\tlang.extend(_combine, {\r\n\t\t_doAction: function(action, args){\r\n\t\t\tarrayUtil.forEach(this._animations, function(a){\r\n\t\t\t\ta[action].apply(a, args);\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t_onEnd: function(){\r\n\t\t\tif(++this._finished > this._animations.length){\r\n\t\t\t\tthis._fire(\"onEnd\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t_call: function(action, args){\r\n\t\t\tvar t = this._pseudoAnimation;\r\n\t\t\tt[action].apply(t, args);\r\n\t\t},\r\n\t\tplay: function(/*int?*/ delay, /*Boolean?*/ gotoStart){\r\n\t\t\tthis._finished = 0;\r\n\t\t\tthis._doAction(\"play\", arguments);\r\n\t\t\tthis._call(\"play\", arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tpause: function(){\r\n\t\t\tthis._doAction(\"pause\", arguments);\r\n\t\t\tthis._call(\"pause\", arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tgotoPercent: function(/*Decimal*/percent, /*Boolean?*/ andPlay){\r\n\t\t\tvar ms = this.duration * percent;\r\n\t\t\tarrayUtil.forEach(this._animations, function(a){\r\n\t\t\t\ta.gotoPercent(a.duration < ms ? 1 : (ms / a.duration), andPlay);\r\n\t\t\t});\r\n\t\t\tthis._call(\"gotoPercent\", arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstop: function(/*boolean?*/ gotoEnd){\r\n\t\t\tthis._doAction(\"stop\", arguments);\r\n\t\t\tthis._call(\"stop\", arguments);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstatus: function(){\r\n\t\t\treturn this._pseudoAnimation.status();\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\t\t\tthis.stop();\r\n\t\t\tarrayUtil.forEach(this._connects, function(handle){\r\n\t\t\t\thandle.remove();\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\tlang.extend(_combine, _baseObj);\r\n\r\n\tcoreFx.combine = function(/*dojo/_base/fx.Animation[]*/ animations){\r\n\t\t// summary:\r\n\t\t//\t\tCombine a list of `dojo/_base/fx.Animation`s to run in parallel\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tCombine an array of `dojo/_base/fx.Animation`s to run in parallel,\r\n\t\t//\t\tproviding a new `dojo/_base/fx.Animation` instance encompasing each\r\n\t\t//\t\tanimation, firing standard animation events.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tFade out `node` while fading in `otherNode` simultaneously\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tfx.combine([\r\n\t\t//\t|\t\t\tfx.fadeIn({ node:node }),\r\n\t\t//\t|\t\t\tfx.fadeOut({ node:otherNode })\r\n\t\t//\t|\t\t]).play();\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\tWhen the longest animation ends, execute a function:\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tvar anim = fx.combine([\r\n\t\t//\t|\t\t\tfx.fadeIn({ node: n, duration:700 }),\r\n\t\t//\t|\t\t\tfx.fadeOut({ node: otherNode, duration: 300 })\r\n\t\t//\t|\t\t]);\r\n\t\t//\t|\t\taspect.after(anim, \"onEnd\", function(){\r\n\t\t//\t|\t\t\t// overall animation is done.\r\n\t\t//\t|\t\t}, true);\r\n\t\t//\t|\t\tanim.play(); // play the animation\r\n\t\t//\t|\t});\r\n\t\t//\r\n\t\treturn new _combine(animations); // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\tcoreFx.wipeIn = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tExpand a node to it's natural height.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tReturns an animation that will expand the\r\n\t\t//\t\tnode defined in 'args' object from it's current height to\r\n\t\t//\t\tit's natural height (with no scrollbar).\r\n\t\t//\t\tNode must have no margin/border/padding.\r\n\t\t//\r\n\t\t// args: Object\r\n\t\t//\t\tA hash-map of standard `dojo/_base/fx.Animation` constructor properties\r\n\t\t//\t\t(such as easing: node: duration: and so on)\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tfx.wipeIn({\r\n\t\t//\t|\t\t\tnode:\"someId\"\r\n\t\t//\t|\t\t}).play()\r\n\t\t//\t|\t});\r\n\r\n\t\tvar node = args.node = dom.byId(args.node), s = node.style, o;\r\n\r\n\t\tvar anim = baseFx.animateProperty(lang.mixin({\r\n\t\t\tproperties: {\r\n\t\t\t\theight: {\r\n\t\t\t\t\t// wrapped in functions so we wait till the last second to query (in case value has changed)\r\n\t\t\t\t\tstart: function(){\r\n\t\t\t\t\t\t// start at current [computed] height, but use 1px rather than 0\r\n\t\t\t\t\t\t// because 0 causes IE to display the whole panel\r\n\t\t\t\t\t\to = s.overflow;\r\n\t\t\t\t\t\ts.overflow = \"hidden\";\r\n\t\t\t\t\t\tif(s.visibility == \"hidden\" || s.display == \"none\"){\r\n\t\t\t\t\t\t\ts.height = \"1px\";\r\n\t\t\t\t\t\t\ts.display = \"\";\r\n\t\t\t\t\t\t\ts.visibility = \"\";\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar height = domStyle.get(node, \"height\");\r\n\t\t\t\t\t\t\treturn Math.max(height, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tend: function(){\r\n\t\t\t\t\t\treturn node.scrollHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, args));\r\n\r\n\t\tvar fini = function(){\r\n\t\t\ts.height = \"auto\";\r\n\t\t\ts.overflow = o;\r\n\t\t};\r\n\t\taspect.after(anim, \"onStop\", fini, true);\r\n\t\taspect.after(anim, \"onEnd\", fini, true);\r\n\r\n\t\treturn anim; // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\tcoreFx.wipeOut = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tShrink a node to nothing and hide it.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tReturns an animation that will shrink node defined in \"args\"\r\n\t\t//\t\tfrom it's current height to 1px, and then hide it.\r\n\t\t//\r\n\t\t// args: Object\r\n\t\t//\t\tA hash-map of standard `dojo/_base/fx.Animation` constructor properties\r\n\t\t//\t\t(such as easing: node: duration: and so on)\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\trequire([\"dojo/fx\"], function(fx){\r\n\t\t//\t|\t\tfx.wipeOut({ node:\"someId\" }).play()\r\n\t\t//\t|\t});\r\n\r\n\t\tvar node = args.node = dom.byId(args.node), s = node.style, o;\r\n\r\n\t\tvar anim = baseFx.animateProperty(lang.mixin({\r\n\t\t\tproperties: {\r\n\t\t\t\theight: {\r\n\t\t\t\t\tend: 1 // 0 causes IE to display the whole panel\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, args));\r\n\r\n\t\taspect.after(anim, \"beforeBegin\", function(){\r\n\t\t\to = s.overflow;\r\n\t\t\ts.overflow = \"hidden\";\r\n\t\t\ts.display = \"\";\r\n\t\t}, true);\r\n\t\tvar fini = function(){\r\n\t\t\ts.overflow = o;\r\n\t\t\ts.height = \"auto\";\r\n\t\t\ts.display = \"none\";\r\n\t\t};\r\n\t\taspect.after(anim, \"onStop\", fini, true);\r\n\t\taspect.after(anim, \"onEnd\", fini, true);\r\n\r\n\t\treturn anim; // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\tcoreFx.slideTo = function(/*Object*/ args){\r\n\t\t// summary:\r\n\t\t//\t\tSlide a node to a new top/left position\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tReturns an animation that will slide \"node\"\r\n\t\t//\t\tdefined in args Object from its current position to\r\n\t\t//\t\tthe position defined by (args.left, args.top).\r\n\t\t//\r\n\t\t// args: Object\r\n\t\t//\t\tA hash-map of standard `dojo/_base/fx.Animation` constructor properties\r\n\t\t//\t\t(such as easing: node: duration: and so on). Special args members\r\n\t\t//\t\tare `top` and `left`, which indicate the new position to slide to.\r\n\t\t//\r\n\t\t// example:\r\n\t\t//\t|\t.slideTo({ node: node, left:\"40\", top:\"50\", units:\"px\" }).play()\r\n\r\n\t\tvar node = args.node = dom.byId(args.node),\r\n\t\t\ttop = null, left = null;\r\n\r\n\t\tvar init = (function(n){\r\n\t\t\treturn function(){\r\n\t\t\t\tvar cs = domStyle.getComputedStyle(n);\r\n\t\t\t\tvar pos = cs.position;\r\n\t\t\t\ttop = (pos == 'absolute' ? n.offsetTop : parseInt(cs.top) || 0);\r\n\t\t\t\tleft = (pos == 'absolute' ? n.offsetLeft : parseInt(cs.left) || 0);\r\n\t\t\t\tif(pos != 'absolute' && pos != 'relative'){\r\n\t\t\t\t\tvar ret = geom.position(n, true);\r\n\t\t\t\t\ttop = ret.y;\r\n\t\t\t\t\tleft = ret.x;\r\n\t\t\t\t\tn.style.position=\"absolute\";\r\n\t\t\t\t\tn.style.top=top+\"px\";\r\n\t\t\t\t\tn.style.left=left+\"px\";\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t})(node);\r\n\t\tinit();\r\n\r\n\t\tvar anim = baseFx.animateProperty(lang.mixin({\r\n\t\t\tproperties: {\r\n\t\t\t\ttop: args.top || 0,\r\n\t\t\t\tleft: args.left || 0\r\n\t\t\t}\r\n\t\t}, args));\r\n\t\taspect.after(anim, \"beforeBegin\", init, true);\r\n\r\n\t\treturn anim; // dojo/_base/fx.Animation\r\n\t};\r\n\r\n\treturn coreFx;\r\n});\r\n"]}