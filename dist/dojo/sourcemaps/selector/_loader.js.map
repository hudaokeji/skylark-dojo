{"version":3,"sources":["selector/_loader.js"],"names":["define","has","require","fullEngine","testDiv","document","createElement","add","querySelectorAll","innerHTML","length","e","load","id","parentRequire","loaded","config","req","charAt","substring","optionalLoad","engine"],"mappings":";;;;;;;AAAAA,QAAQ,SAAU,WAChB,SAASC,EAAKC,GAEhB,aACA,IAWIC,EAXAC,EAAUC,SAASC,cAAc,OACrCL,EAAIM,IAAI,eAAgBH,EAAQI,kBAChCP,EAAIM,IAAI,WAAY,WAEjB,IAIC,OAHAH,EAAQK,UAAY,uBAGqC,GAAlDL,EAAQI,iBAAiB,eAAeE,OAC/C,MAAMC,OAIV,OAICC,KAAM,SAASC,EAAIC,EAAeC,EAAQC,GACzC,IAAIC,EAAMf,EAOV,GAA6B,MAJ7BW,EAAW,SADXA,EAAW,WAANA,EAAkBZ,EAAI,0BAA4B,OAASY,IACrC,QAANA,EATK,SAUlB,UAANA,EAAiBZ,EAAI,cAVG,SAAjB,SAWD,QAANY,EAAeZ,EAAI,YAXK,SAAjB,SAYD,QAANY,EAZO,UAYgBI,EAAMH,IAAkBD,GAC3CK,OAAOL,EAAGH,OAAO,GAAU,CAChCG,EAAKA,EAAGM,UAAU,EAAEN,EAAGH,OAAS,GAChC,IAAIU,GAAe,EAGpB,GAAGA,IAAiBnB,EAAI,sBAAwBE,GAC/C,OAAOY,EAAOZ,GAGfc,GAAKJ,GAAK,SAASQ,GACT,UAANR,IACFV,EAAakB,GAEdN,EAAOM","file":"../../selector/_loader.js","sourcesContent":["define([\"../has\", \"require\"],\r\n\t\tfunction(has, require){\r\n\r\n\"use strict\";\r\nvar testDiv = document.createElement(\"div\");\r\nhas.add(\"dom-qsa2.1\", !!testDiv.querySelectorAll);\r\nhas.add(\"dom-qsa3\", function(){\r\n\t\t\t// test to see if we have a reasonable native selector engine available\r\n\t\t\ttry{\r\n\t\t\t\ttestDiv.innerHTML = \"<p class='TEST'></p>\"; // test kind of from sizzle\r\n\t\t\t\t// Safari can't handle uppercase or unicode characters when\r\n\t\t\t\t// in quirks mode, IE8 can't handle pseudos like :empty\r\n\t\t\t\treturn testDiv.querySelectorAll(\".TEST:empty\").length == 1;\r\n\t\t\t}catch(e){}\r\n\t\t});\r\nvar fullEngine;\r\nvar acme = \"./acme\", lite = \"./lite\";\r\nreturn {\r\n\t// summary:\r\n\t//\t\tThis module handles loading the appropriate selector engine for the given browser\r\n\r\n\tload: function(id, parentRequire, loaded, config){\r\n\t\tvar req = require;\r\n\t\t// here we implement the default logic for choosing a selector engine\r\n\t\tid = id == \"default\" ? has(\"config-selectorEngine\") || \"css3\" : id;\r\n\t\tid = id == \"css2\" || id == \"lite\" ? lite :\r\n\t\t\t\tid == \"css2.1\" ? has(\"dom-qsa2.1\") ? lite : acme :\r\n\t\t\t\tid == \"css3\" ? has(\"dom-qsa3\") ? lite : acme :\r\n\t\t\t\tid == \"acme\" ? acme : (req = parentRequire) && id;\r\n\t\tif(id.charAt(id.length-1) == '?'){\r\n\t\t\tid = id.substring(0,id.length - 1);\r\n\t\t\tvar optionalLoad = true;\r\n\t\t}\r\n\t\t// the query engine is optional, only load it if a native one is not available or existing one has not been loaded\r\n\t\tif(optionalLoad && (has(\"dom-compliant-qsa\") || fullEngine)){\r\n\t\t\treturn loaded(fullEngine);\r\n\t\t}\r\n\t\t// load the referenced selector engine\r\n\t\treq([id], function(engine){\r\n\t\t\tif(id != \"./lite\"){\r\n\t\t\t\tfullEngine = engine;\r\n\t\t\t}\r\n\t\t\tloaded(engine);\r\n\t\t});\r\n\t}\r\n};\r\n});\r\n"]}