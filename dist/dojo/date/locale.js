/**
 * dojo - A version of dojo.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojo/
 * @license MIT
 */
define(["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(e,a,r,t,n,s,c,o,i){var l={};function u(e,a,r,n){return n.replace(/([a-z])\1*/gi,function(s){var o,i,u=s.charAt(0),d=s.length,g=["abbr","wide","narrow"];switch(u){case"G":o=a[d<4?"eraAbbr":"eraNames"][e.getFullYear()<0?0:1];break;case"y":switch(o=e.getFullYear(),d){case 1:break;case 2:if(!r.fullYear){o=(o=String(o)).substr(o.length-2);break}default:i=!0}break;case"Q":case"q":o=Math.ceil((e.getMonth()+1)/3),i=!0;break;case"M":case"L":var f=e.getMonth();if(d<3)o=f+1,i=!0;else{var m=["months","L"==u?"standAlone":"format",g[d-3]].join("-");o=a[m][f]}break;case"w":o=l._getWeekOfYear(e,0),i=!0;break;case"d":o=e.getDate(),i=!0;break;case"D":o=l._getDayOfYear(e),i=!0;break;case"e":case"c":var b=e.getDay();if(d<2){o=(b-t.getFirstDayOfWeek(r.locale)+8)%7;break}case"E":if(b=e.getDay(),d<3)o=b+1,i=!0;else{var k=["days","c"==u?"standAlone":"format",g[d-3]].join("-");o=a[k][b]}break;case"a":var h=e.getHours()<12?"am":"pm";o=r[h]||a["dayPeriods-format-wide-"+h];break;case"h":case"H":case"K":case"k":var p=e.getHours();switch(u){case"h":o=p%12||12;break;case"H":o=p;break;case"K":o=p%12;break;case"k":o=p||24}i=!0;break;case"m":o=e.getMinutes(),i=!0;break;case"s":o=e.getSeconds(),i=!0;break;case"S":o=Math.round(e.getMilliseconds()*Math.pow(10,d-3)),i=!0;break;case"v":case"z":if(o=l._getZone(e,!0,r))break;d=4;case"Z":var w=l._getZone(e,!1,r),v=[w<=0?"+":"-",c.pad(Math.floor(Math.abs(w)/60),2),c.pad(Math.abs(w)%60,2)];4==d&&(v.splice(0,0,"GMT"),v.splice(3,0,":")),o=v.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+n)}return i&&(o=c.pad(o,d)),o})}function d(e,r,t,n){var s=function(e){return e};r=r||s,t=t||s,n=n||s;var c=e.match(/(''|[^'])+/g),o="'"==e.charAt(0);return a.forEach(c,function(e,a){e?(c[a]=(o?t:r)(e.replace(/''/g,"'")),o=!o):c[a]=""}),n(c.join(""))}function g(e,a,r,t){return t=s.escapeString(t),r.strict||(t=t.replace(" a"," ?a")),t.replace(/([a-z])\1*/gi,function(t){var n,s=t.charAt(0),c=t.length,o="",i="";switch(r.strict?(c>1&&(o="0{"+(c-1)+"}"),c>2&&(i="0{"+(c-2)+"}")):(o="0?",i="0{0,2}"),s){case"y":n="\\d{2,4}";break;case"M":case"L":n=c>2?"\\S+?":"1[0-2]|"+o+"[1-9]";break;case"D":n="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+o+"[1-9][0-9]|"+i+"[1-9]";break;case"d":n="3[01]|[12]\\d|"+o+"[1-9]";break;case"w":n="[1-4][0-9]|5[0-3]|"+o+"[1-9]";break;case"E":case"e":case"c":n=".+?";break;case"h":n="1[0-2]|"+o+"[1-9]";break;case"k":n="1[01]|"+o+"\\d";break;case"H":n="1\\d|2[0-3]|"+o+"\\d";break;case"K":n="1\\d|2[0-4]|"+o+"[1-9]";break;case"m":case"s":n="[0-5]\\d";break;case"S":n="\\d{"+c+"}";break;case"a":var l=r.am||a["dayPeriods-format-wide-am"],u=r.pm||a["dayPeriods-format-wide-pm"];n=l+"|"+u,r.strict||(l!=l.toLowerCase()&&(n+="|"+l.toLowerCase()),u!=u.toLowerCase()&&(n+="|"+u.toLowerCase()),-1!=n.indexOf(".")&&(n+="|"+n.replace(/\./g,""))),n=n.replace(/\./g,"\\.");break;default:n=".*"}return e&&e.push(t),"("+n+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}e.setObject(i.id.replace(/\//g,"."),l),l._getZone=function(e,a,t){return a?r.getTimezoneName(e):e.getTimezoneOffset()},l.format=function(a,r){r=r||{};var t,s=n.normalizeLocale(r.locale),c=r.formatLength||"short",o=l._getGregorianBundle(s),i=[],g=e.hitch(this,u,a,o,r);return"year"==r.selector?d(o["dateFormatItem-yyyy"]||"yyyy",g):("date"!=r.selector&&(t=r.timePattern||o["timeFormat-"+c])&&i.push(d(t,g)),"time"!=r.selector&&(t=r.datePattern||o["dateFormat-"+c])&&i.push(d(t,g)),1==i.length?i[0]:o["dateTimeFormat-"+c].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(e,a){return i[a]}))},l.regexp=function(e){return l._parseInfo(e).regexp},l._parseInfo=function(a){a=a||{};var r=n.normalizeLocale(a.locale),t=l._getGregorianBundle(r),s=a.formatLength||"short",c=a.datePattern||t["dateFormat-"+s],o=a.timePattern||t["timeFormat-"+s],i=[];return{regexp:d("date"==a.selector?c:"time"==a.selector?o:t["dateTimeFormat-"+s].replace(/\{(\d+)\}/g,function(e,a){return[o,c][a]}),e.hitch(this,g,i,t,a)),tokens:i,bundle:t}},l.parse=function(e,t){var n=/[\u200E\u200F\u202A\u202E]/g,s=l._parseInfo(t),c=s.tokens,o=s.bundle,i=new RegExp("^"+s.regexp.replace(n,"")+"$",s.strict?"":"i").exec(e&&e.replace(n,""));if(!i)return null;var u=["abbr","wide","narrow"],d=[1970,0,1,0,0,0,0],g="",f=a.every(i,function(e,r){if(!r)return!0;var n=c[r-1],s=n.length,i=n.charAt(0);switch(i){case"y":if(2!=s&&t.strict)d[0]=e;else if(e<100){e=Number(e);var l=""+(new Date).getFullYear(),f=100*l.substring(0,2),m=Math.min(Number(l.substring(2,4))+20,99);d[0]=e<m?f+e:f-100+e}else{if(t.strict)return!1;d[0]=e}break;case"M":case"L":if(s>2){var b=o["months-"+("L"==i?"standAlone":"format")+"-"+u[s-3]].concat();if(t.strict||(e=e.replace(".","").toLowerCase(),b=a.map(b,function(e){return e.replace(".","").toLowerCase()})),-1==(e=a.indexOf(b,e)))return!1}else e--;d[1]=e;break;case"E":case"e":case"c":var k=o["days-"+("c"==i?"standAlone":"format")+"-"+u[s-3]].concat();if(t.strict||(e=e.toLowerCase(),k=a.map(k,function(e){return e.toLowerCase()})),-1==(e=a.indexOf(k,e)))return!1;break;case"D":d[1]=0;case"d":d[2]=e;break;case"a":var h=t.am||o["dayPeriods-format-wide-am"],p=t.pm||o["dayPeriods-format-wide-pm"];if(!t.strict){var w=/\./g;e=e.replace(w,"").toLowerCase(),h=h.replace(w,"").toLowerCase(),p=p.replace(w,"").toLowerCase()}if(t.strict&&e!=h&&e!=p)return!1;g=e==p?"p":e==h?"a":"";break;case"K":24==e&&(e=0);case"h":case"H":case"k":if(e>23)return!1;d[3]=e;break;case"m":d[4]=e;break;case"s":d[5]=e;break;case"S":d[6]=e}return!0}),m=+d[3];"p"===g&&m<12?d[3]=m+12:"a"===g&&12==m&&(d[3]=0);var b=new Date(d[0],d[1],d[2],d[3],d[4],d[5],d[6]);t.strict&&b.setFullYear(d[0]);var k=c.join(""),h=-1!=k.indexOf("d"),p=-1!=k.indexOf("M");return!f||p&&b.getMonth()>d[1]||h&&b.getDate()>d[2]?null:((p&&b.getMonth()<d[1]||h&&b.getDate()<d[2])&&(b=r.add(b,"hour",1)),b)};var f=[];return l.addCustomFormats=function(e,a){f.push({pkg:e,name:a})},l._getGregorianBundle=function(r){var t={};return a.forEach(f,function(a){var s=n.getLocalization(a.pkg,a.name,r);t=e.mixin(t,s)},this),t},l.addCustomFormats(i.id.replace(/\/date\/locale$/,".cldr"),"gregorian"),l.getNames=function(e,a,r,t){var n,s=l._getGregorianBundle(t),c=[e,r,a];"standAlone"==r&&(1==(n=s[c.join("-")])[0]&&(n=void 0));return c[1]="format",(n||s[c.join("-")]).concat()},l.isWeekend=function(e,a){var r=t.getWeekend(a),n=(e||new Date).getDay();return r.end<r.start&&(r.end+=7,n<r.start&&(n+=7)),n>=r.start&&n<=r.end},l._getDayOfYear=function(e){return r.difference(new Date(e.getFullYear(),0,1,e.getHours()),e)+1},l._getWeekOfYear=function(e,a){1==arguments.length&&(a=0);var r=new Date(e.getFullYear(),0,1).getDay(),t=(r-a+7)%7,n=Math.floor((l._getDayOfYear(e)+t-1)/7);return r==a&&n++,n},l});
//# sourceMappingURL=../sourcemaps/date/locale.js.map
