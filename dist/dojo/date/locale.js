/**
 * dojo - A version of dojo.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojo/
 * @license MIT
 */
define(["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(e,a,r,t,n,s,c,o,module){var exports={};function i(e,a,r,n){return n.replace(/([a-z])\1*/gi,function(s){var o,i,l=s.charAt(0),u=s.length,d=["abbr","wide","narrow"];switch(l){case"G":o=a[u<4?"eraAbbr":"eraNames"][e.getFullYear()<0?0:1];break;case"y":switch(o=e.getFullYear(),u){case 1:break;case 2:if(!r.fullYear){o=(o=String(o)).substr(o.length-2);break}default:i=!0}break;case"Q":case"q":o=Math.ceil((e.getMonth()+1)/3),i=!0;break;case"M":case"L":var g=e.getMonth();if(u<3)o=g+1,i=!0;else{var f=["months","L"==l?"standAlone":"format",d[u-3]].join("-");o=a[f][g]}break;case"w":o=exports._getWeekOfYear(e,0),i=!0;break;case"d":o=e.getDate(),i=!0;break;case"D":o=exports._getDayOfYear(e),i=!0;break;case"e":case"c":var m=e.getDay();if(u<2){o=(m-t.getFirstDayOfWeek(r.locale)+8)%7;break}case"E":if(m=e.getDay(),u<3)o=m+1,i=!0;else{var b=["days","c"==l?"standAlone":"format",d[u-3]].join("-");o=a[b][m]}break;case"a":var k=e.getHours()<12?"am":"pm";o=r[k]||a["dayPeriods-format-wide-"+k];break;case"h":case"H":case"K":case"k":var h=e.getHours();switch(l){case"h":o=h%12||12;break;case"H":o=h;break;case"K":o=h%12;break;case"k":o=h||24}i=!0;break;case"m":o=e.getMinutes(),i=!0;break;case"s":o=e.getSeconds(),i=!0;break;case"S":o=Math.round(e.getMilliseconds()*Math.pow(10,u-3)),i=!0;break;case"v":case"z":if(o=exports._getZone(e,!0,r))break;u=4;case"Z":var p=exports._getZone(e,!1,r),w=[p<=0?"+":"-",c.pad(Math.floor(Math.abs(p)/60),2),c.pad(Math.abs(p)%60,2)];4==u&&(w.splice(0,0,"GMT"),w.splice(3,0,":")),o=w.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+n)}return i&&(o=c.pad(o,u)),o})}function l(e,r,t,n){var s=function(e){return e};r=r||s,t=t||s,n=n||s;var c=e.match(/(''|[^'])+/g),o="'"==e.charAt(0);return a.forEach(c,function(e,a){e?(c[a]=(o?t:r)(e.replace(/''/g,"'")),o=!o):c[a]=""}),n(c.join(""))}function u(e,a,r,t){return t=s.escapeString(t),r.strict||(t=t.replace(" a"," ?a")),t.replace(/([a-z])\1*/gi,function(t){var n,s=t.charAt(0),c=t.length,o="",i="";switch(r.strict?(c>1&&(o="0{"+(c-1)+"}"),c>2&&(i="0{"+(c-2)+"}")):(o="0?",i="0{0,2}"),s){case"y":n="\\d{2,4}";break;case"M":case"L":n=c>2?"\\S+?":"1[0-2]|"+o+"[1-9]";break;case"D":n="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+o+"[1-9][0-9]|"+i+"[1-9]";break;case"d":n="3[01]|[12]\\d|"+o+"[1-9]";break;case"w":n="[1-4][0-9]|5[0-3]|"+o+"[1-9]";break;case"E":case"e":case"c":n=".+?";break;case"h":n="1[0-2]|"+o+"[1-9]";break;case"k":n="1[01]|"+o+"\\d";break;case"H":n="1\\d|2[0-3]|"+o+"\\d";break;case"K":n="1\\d|2[0-4]|"+o+"[1-9]";break;case"m":case"s":n="[0-5]\\d";break;case"S":n="\\d{"+c+"}";break;case"a":var l=r.am||a["dayPeriods-format-wide-am"],u=r.pm||a["dayPeriods-format-wide-pm"];n=l+"|"+u,r.strict||(l!=l.toLowerCase()&&(n+="|"+l.toLowerCase()),u!=u.toLowerCase()&&(n+="|"+u.toLowerCase()),-1!=n.indexOf(".")&&(n+="|"+n.replace(/\./g,""))),n=n.replace(/\./g,"\\.");break;default:n=".*"}return e&&e.push(t),"("+n+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}e.setObject(module.id.replace(/\//g,"."),exports),exports._getZone=function(e,a,t){return a?r.getTimezoneName(e):e.getTimezoneOffset()},exports.format=function(a,r){r=r||{};var t,s=n.normalizeLocale(r.locale),c=r.formatLength||"short",o=exports._getGregorianBundle(s),u=[],d=e.hitch(this,i,a,o,r);return"year"==r.selector?l(o["dateFormatItem-yyyy"]||"yyyy",d):("date"!=r.selector&&(t=r.timePattern||o["timeFormat-"+c])&&u.push(l(t,d)),"time"!=r.selector&&(t=r.datePattern||o["dateFormat-"+c])&&u.push(l(t,d)),1==u.length?u[0]:o["dateTimeFormat-"+c].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(e,a){return u[a]}))},exports.regexp=function(e){return exports._parseInfo(e).regexp},exports._parseInfo=function(a){a=a||{};var r=n.normalizeLocale(a.locale),t=exports._getGregorianBundle(r),s=a.formatLength||"short",c=a.datePattern||t["dateFormat-"+s],o=a.timePattern||t["timeFormat-"+s],i=[];return{regexp:l("date"==a.selector?c:"time"==a.selector?o:t["dateTimeFormat-"+s].replace(/\{(\d+)\}/g,function(e,a){return[o,c][a]}),e.hitch(this,u,i,t,a)),tokens:i,bundle:t}},exports.parse=function(e,t){var n=/[\u200E\u200F\u202A\u202E]/g,s=exports._parseInfo(t),c=s.tokens,o=s.bundle,i=new RegExp("^"+s.regexp.replace(n,"")+"$",s.strict?"":"i").exec(e&&e.replace(n,""));if(!i)return null;var l=["abbr","wide","narrow"],u=[1970,0,1,0,0,0,0],d="",g=a.every(i,function(e,r){if(!r)return!0;var n=c[r-1],s=n.length,i=n.charAt(0);switch(i){case"y":if(2!=s&&t.strict)u[0]=e;else if(e<100){e=Number(e);var g=""+(new Date).getFullYear(),f=100*g.substring(0,2),m=Math.min(Number(g.substring(2,4))+20,99);u[0]=e<m?f+e:f-100+e}else{if(t.strict)return!1;u[0]=e}break;case"M":case"L":if(s>2){var b=o["months-"+("L"==i?"standAlone":"format")+"-"+l[s-3]].concat();if(t.strict||(e=e.replace(".","").toLowerCase(),b=a.map(b,function(e){return e.replace(".","").toLowerCase()})),-1==(e=a.indexOf(b,e)))return!1}else e--;u[1]=e;break;case"E":case"e":case"c":var k=o["days-"+("c"==i?"standAlone":"format")+"-"+l[s-3]].concat();if(t.strict||(e=e.toLowerCase(),k=a.map(k,function(e){return e.toLowerCase()})),-1==(e=a.indexOf(k,e)))return!1;break;case"D":u[1]=0;case"d":u[2]=e;break;case"a":var h=t.am||o["dayPeriods-format-wide-am"],p=t.pm||o["dayPeriods-format-wide-pm"];if(!t.strict){var w=/\./g;e=e.replace(w,"").toLowerCase(),h=h.replace(w,"").toLowerCase(),p=p.replace(w,"").toLowerCase()}if(t.strict&&e!=h&&e!=p)return!1;d=e==p?"p":e==h?"a":"";break;case"K":24==e&&(e=0);case"h":case"H":case"k":if(e>23)return!1;u[3]=e;break;case"m":u[4]=e;break;case"s":u[5]=e;break;case"S":u[6]=e}return!0}),f=+u[3];"p"===d&&f<12?u[3]=f+12:"a"===d&&12==f&&(u[3]=0);var m=new Date(u[0],u[1],u[2],u[3],u[4],u[5],u[6]);t.strict&&m.setFullYear(u[0]);var b=c.join(""),k=-1!=b.indexOf("d"),h=-1!=b.indexOf("M");return!g||h&&m.getMonth()>u[1]||k&&m.getDate()>u[2]?null:((h&&m.getMonth()<u[1]||k&&m.getDate()<u[2])&&(m=r.add(m,"hour",1)),m)};var d=[];return exports.addCustomFormats=function(e,a){d.push({pkg:e,name:a})},exports._getGregorianBundle=function(r){var t={};return a.forEach(d,function(a){var s=n.getLocalization(a.pkg,a.name,r);t=e.mixin(t,s)},this),t},exports.addCustomFormats(module.id.replace(/\/date\/locale$/,".cldr"),"gregorian"),exports.getNames=function(e,a,r,t){var n,s=exports._getGregorianBundle(t),c=[e,r,a];"standAlone"==r&&(1==(n=s[c.join("-")])[0]&&(n=void 0));return c[1]="format",(n||s[c.join("-")]).concat()},exports.isWeekend=function(e,a){var r=t.getWeekend(a),n=(e||new Date).getDay();return r.end<r.start&&(r.end+=7,n<r.start&&(n+=7)),n>=r.start&&n<=r.end},exports._getDayOfYear=function(e){return r.difference(new Date(e.getFullYear(),0,1,e.getHours()),e)+1},exports._getWeekOfYear=function(e,a){1==arguments.length&&(a=0);var r=new Date(e.getFullYear(),0,1).getDay(),t=(r-a+7)%7,n=Math.floor((exports._getDayOfYear(e)+t-1)/7);return r==a&&n++,n},exports});
//# sourceMappingURL=../sourcemaps/date/locale.js.map
