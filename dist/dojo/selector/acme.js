/**
 * dojo - A version of dojo.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojo/
 * @license MIT
 */
define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(n,t,e,r,i){var u=r.trim,o=e.forEach,a=function(){return i.doc},f="BackCompat"==a().compatMode,c=!1,l=function(){return!0},s=function(n){">~+".indexOf(n.slice(-1))>=0?n+=" * ":n+=" ";for(var t,e,r=function(t,e){return u(n.slice(t,e))},i=[],o=-1,a=-1,f=-1,l=-1,s=-1,d=-1,g=-1,h="",p="",v=0,m=n.length,b=null,x=null,y=function(){d>=0&&(b.id=r(d,v).replace(/\\/g,""),d=-1),function(){if(g>=0){var n=g==v?null:r(g,v);b[">~+".indexOf(n)<0?"tag":"oper"]=n,g=-1}}(),s>=0&&(b.classes.push(r(s+1,v).replace(/\\/g,"")),s=-1)};h=p,p=n.charAt(v),v<m;v++)if("\\"!=h)if(b||(e=v,b={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return c?this.otag:this.tag}},g=v),t)p==t&&(t=null);else if("'"!=p&&'"'!=p)if(o>=0){if("]"==p){x.attr?x.matchFor=r(f||o+1,v):x.attr=r(o+1,v);var O=x.matchFor;O&&('"'!=O.charAt(0)&&"'"!=O.charAt(0)||(x.matchFor=O.slice(1,-1))),x.matchFor&&(x.matchFor=x.matchFor.replace(/\\/g,"")),b.attrs.push(x),x=null,o=f=-1}else if("="==p){var A="|~^$*".indexOf(h)>=0?h:"";x.type=A+p,x.attr=r(o+1,v-A.length),f=v+1}}else a>=0?")"==p&&(l>=0&&(x.value=r(a+1,v)),l=a=-1):"#"==p?(y(),d=v+1):"."==p?(y(),s=v):":"==p?(y(),l=v):"["==p?(y(),o=v,x={}):"("==p?(l>=0&&(x={name:r(l+1,v),value:null},b.pseudos.push(x)),a=v):" "==p&&h!=p&&(y(),l>=0&&b.pseudos.push({name:r(l+1,v)}),b.loops=b.pseudos.length||b.attrs.length||b.classes.length,b.oquery=b.query=r(e,v),b.otag=b.tag=b.oper?null:b.tag||"*",b.tag&&(b.tag=b.tag.toUpperCase()),i.length&&i[i.length-1].oper&&(b.infixOper=i.pop(),b.query=b.infixOper.query+" "+b.query),i.push(b),b=null);else t=p;return i},d=function(n,t){return n?t?function(){return n.apply(window,arguments)&&t.apply(window,arguments)}:n:t},g=function(n,t){var e=t||[];return n&&e.push(n),e},h=function(n){return 1==n.nodeType},p=function(n,t){return n?"class"==t?n.className||"":"for"==t?n.htmlFor||"":"style"==t?n.style.cssText||"":(c?n.getAttribute(t):n.getAttribute(t,2))||"":""},v={"*=":function(n,t){return function(e){return p(e,n).indexOf(t)>=0}},"^=":function(n,t){return function(e){return 0==p(e,n).indexOf(t)}},"$=":function(n,t){return function(e){var r=" "+p(e,n),i=r.lastIndexOf(t);return i>-1&&i==r.length-t.length}},"~=":function(n,t){var e=" "+t+" ";return function(t){return(" "+p(t,n)+" ").indexOf(e)>=0}},"|=":function(n,t){var e=t+"-";return function(r){var i=p(r,n);return i==t||0==i.indexOf(e)}},"=":function(n,t){return function(e){return p(e,n)==t}}},m=void 0===a().firstChild.nextElementSibling,b=m?"nextSibling":"nextElementSibling",x=m?"previousSibling":"previousElementSibling",y=m?h:l,O=function(n){for(;n=n[x];)if(y(n))return!1;return!0},A=function(n){for(;n=n[b];)if(y(n))return!1;return!0},_=function(n){var e=n.parentNode,r=0,i=(e=7!=e.nodeType?e:e.nextSibling).children||e.childNodes,u=n._i||n.getAttribute("_i")||-1,o=e._l||(void 0!==e.getAttribute?e.getAttribute("_l"):-1);if(!i)return-1;var a=i.length;if(o==a&&u>=0&&o>=0)return u;t("ie")&&void 0!==e.setAttribute?e.setAttribute("_l",a):e._l=a,u=-1;for(var f=e.firstElementChild||e.firstChild;f;f=f[b])y(f)&&(t("ie")?f.setAttribute("_i",++r):f._i=++r,n===f&&(u=r));return u},N=function(n){return!(_(n)%2)},T=function(n){return _(n)%2},w={checked:function(n,t){return function(n){return!!("checked"in n?n.checked:n.selected)}},disabled:function(n,t){return function(n){return n.disabled}},enabled:function(n,t){return function(n){return!n.disabled}},"first-child":function(){return O},"last-child":function(){return A},"only-child":function(n,t){return function(n){return O(n)&&A(n)}},empty:function(n,t){return function(n){for(var t=n.childNodes,e=n.childNodes.length-1;e>=0;e--){var r=t[e].nodeType;if(1===r||3==r)return!1}return!0}},contains:function(n,t){var e=t.charAt(0);return'"'!=e&&"'"!=e||(t=t.slice(1,-1)),function(n){return n.innerHTML.indexOf(t)>=0}},not:function(n,t){var e=s(t)[0],r={el:1};"*"!=e.tag&&(r.tag=1),e.classes.length||(r.classes=1);var i=E(e,r);return function(n){return!i(n)}},"nth-child":function(n,t){var e=parseInt;if("odd"==t)return T;if("even"==t)return N;if(-1!=t.indexOf("n")){var r=t.split("n",2),i=r[0]?"-"==r[0]?-1:e(r[0]):1,u=r[1]?e(r[1]):0,o=0,a=-1;if(i>0?u<0?u=u%i&&i+u%i:u>0&&(u>=i&&(o=u-u%i),u%=i):i<0&&(i*=-1,u>0&&(a=u,u%=i)),i>0)return function(n){var t=_(n);return t>=o&&(a<0||t<=a)&&t%i==u};t=u}var f=e(t);return function(n){return _(n)==f}}},q=t("ie")<9||9==t("ie")&&t("quirks")?function(n){var t=n.toLowerCase();return"class"==t&&(n="className"),function(e){return c?e.getAttribute(n):e[n]||e[t]}}:function(n){return function(t){return t&&t.getAttribute&&t.hasAttribute(n)}},E=function(n,t){if(!n)return l;var e=null;return"el"in(t=t||{})||(e=d(e,h)),"tag"in t||"*"!=n.tag&&(e=d(e,function(t){return t&&(c?t.tagName:t.tagName.toUpperCase())==n.getTag()})),"classes"in t||o(n.classes,function(n,t,r){var i=new RegExp("(?:^|\\s)"+n+"(?:\\s|$)");(e=d(e,function(n){return i.test(n.className)})).count=t}),"pseudos"in t||o(n.pseudos,function(n){var t=n.name;w[t]&&(e=d(e,w[t](t,n.value)))}),"attrs"in t||o(n.attrs,function(n){var t,r=n.attr;n.type&&v[n.type]?t=v[n.type](r,n.matchFor):r.length&&(t=q(r)),t&&(e=d(e,t))}),"id"in t||n.id&&(e=d(e,function(t){return!!t&&t.id==n.id})),e||"default"in t||(e=l),e},S={},k=function(t){var e=S[t.query];if(e)return e;var r=t.infixOper,i=r?r.oper:"",u=E(t,{el:1}),o="*"==t.tag,c=a().getElementsByClassName;if(i){var s={el:1};o&&(s.tag=1),u=E(t,s),"+"==i?e=function(n){return function(t,e,r){for(;t=t[b];)if(!m||h(t)){r&&!G(t,r)||!n(t)||e.push(t);break}return e}}(u):"~"==i?e=function(n){return function(t,e,r){for(var i=t[b];i;){if(y(i)){if(r&&!G(i,r))break;n(i)&&e.push(i)}i=i[b]}return e}}(u):">"==i&&(e=function(n){return n=n||l,function(t,e,r){for(var i,u=0,o=t.children||t.childNodes;i=o[u++];)y(i)&&(!r||G(i,r))&&n(i,u)&&e.push(i);return e}}(u))}else if(t.id)u=!t.loops&&o?l:E(t,{el:1,id:1}),e=function(e,r){var i=n.byId(t.id,e.ownerDocument||e);if(i&&u(i))return 9==e.nodeType?g(i,r):function(n,t){for(var e=n.parentNode;e&&e!=t;)e=e.parentNode;return!!e}(i,e)?g(i,r):void 0};else if(c&&/\{\s*\[native code\]\s*\}/.test(String(c))&&t.classes.length&&!f){u=E(t,{el:1,classes:1,id:1});var d=t.classes.join(" ");e=function(n,t,e){for(var r,i=g(0,t),o=0,a=n.getElementsByClassName(d);r=a[o++];)u(r,n)&&G(r,e)&&i.push(r);return i}}else o||t.loops?(u=E(t,{el:1,tag:1,id:1}),e=function(n,e,r){for(var i,o=g(0,e),a=0,f=t.getTag(),c=f?n.getElementsByTagName(f):[];i=c[a++];)u(i,n)&&G(i,r)&&o.push(i);return o}):e=function(n,e,r){for(var i,u=g(0,e),o=0,a=t.getTag(),f=a?n.getElementsByTagName(a):[];i=f[o++];)G(i,r)&&u.push(i);return u};return S[t.query]=e},z={},C={},I=function(n){var t=s(u(n));if(1==t.length){var e=k(t[0]);return function(n){var t=e(n,[]);return t&&(t.nozip=!0),t}}return function(n){return function(n,t){for(var e,r,i,u,o=g(n),a=t.length,f=0;f<a;f++){u=[],e=t[f],o.length-1>0&&(i={},u.nozip=!0);for(var c=k(e),l=0;r=o[l];l++)c(r,u,i);if(!u.length)break;o=u}return u}(n,t)}},F=t("ie")?"commentStrip":"nozip",B="querySelectorAll",D=!!a()[B],$=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,L=function(n,t,e,r){return e?(t?t+" ":"")+e+(r?" "+r:""):n},M=/([^[]*)([^\]]*])?/g,U=function(n,t,e){return t.replace($,L)+(e||"")},j=function(n,e){if(n=n.replace(M,U),D){var r=C[n];if(r&&!e)return r}var i=z[n];if(i)return i;var u=n.charAt(0),o=-1==n.indexOf(" ");if(n.indexOf("#")>=0&&o&&(e=!0),D&&!e&&-1==">~+".indexOf(u)&&(!t("ie")||-1==n.indexOf(":"))&&!(f&&n.indexOf(".")>=0)&&-1==n.indexOf(":contains")&&-1==n.indexOf(":checked")&&-1==n.indexOf("|=")){var a=">~+".indexOf(n.charAt(n.length-1))>=0?n+" *":n;return C[n]=function(t){try{if(9!=t.nodeType&&!o)throw"";var e=t[B](a);return e[F]=!0,e}catch(e){return j(n,!0)(t)}}}var c=n.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return z[n]=c.length<2?I(n):function(n){for(var t,e=0,r=[];t=c[e++];)r=r.concat(I(t)(n));return r}},H=0,R=t("ie")?function(n){return c?n.getAttribute("_uid")||n.setAttribute("_uid",++H)||H:n.uniqueID}:function(n){return n._uid||(n._uid=++H)},G=function(n,t){if(!t)return 1;var e=R(n);return t[e]?0:t[e]=1},J=function(n,e){var r=(e=e||a()).ownerDocument||e;c="div"===r.createElement("div").tagName;var i=j(n)(e);return i&&i.nozip?i:function(n){if(n&&n.nozip)return n;if(!n||!n.length)return[];if(n.length<2)return[n[0]];var e,r,i=[];if(H++,t("ie")&&c){var u=H+"";for(e=0;e<n.length;e++)(r=n[e])&&r.getAttribute("_zipIdx")!=u&&(i.push(r),r.setAttribute("_zipIdx",u))}else if(t("ie")&&n.commentStrip)try{for(e=0;e<n.length;e++)(r=n[e])&&h(r)&&i.push(r)}catch(n){}else for(e=0;e<n.length;e++)(r=n[e])&&r._zipIdx!=H&&(i.push(r),r._zipIdx=H);return i}(i)};return J.filter=function(t,r,i){for(var u,o=[],a=s(r),f=1!=a.length||/[^\w#\.]/.test(r)?function(t){return-1!=e.indexOf(J(r,n.byId(i)),t)}:E(a[0]),c=0;u=t[c];c++)f(u)&&o.push(u);return o},J});
//# sourceMappingURL=../sourcemaps/selector/acme.js.map
