/**
 * dojo - A version of dojo.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dojo/
 * @license MIT
 */
define(["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./has!host-browser?./_base/xhr","./json","module"],function(n,require,e,o,r,i,t,a,module){if(!1===require.isBrowser)return{load:function(n,e,o,r){o()}};e.add("dojo-preload-i18n-Api",1),e.add("dojo-v1x-i18n-Api",1);var l=n.i18n={},s=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,c={},u=function(e,o,r){return r=r?r.toLowerCase():n.locale,e=e.replace(/\./g,"/"),o=o.replace(/\./g,"/"),/root/i.test(r)?e+"/nls/"+o:e+"/nls/"+r+"/"+o},f=n.getL10nName=function(n,e,o){return module.id+"!"+u(n,e,o)},d=function(t,require,l){if(e("dojo-preload-i18n-Api")){var u=t.split("*"),f="preload"==u[1];if(f&&(c[t]||(c[t]=1,x(u[2],a.parse(u[3]),1,require)),l(1)),f||m(t,require,l))return}var d=s.exec(t),p=d[1]+"/",v=d[5]||d[4],h=p+v,_=d[5]&&d[4],g=_||n.locale||"",j=h+"/"+g,b=_?[g]:function(n){var e=r.extraLocale||[];return(e=i.isArray(e)?e:[e]).push(n),e}(g),L=b.length,A=function(){--L||l(i.delegate(c[j]))};o.forEach(b,function(n){var o=h+"/"+n;e("dojo-preload-i18n-Api")&&y(o),c[o]?A():function(require,n,e,o,r,t){require([n],function(a){var l=i.clone(a.root||a.ROOT),s=function(n,e,o,r){for(var i=[o+r],t=e.split("-"),a="",l=0;l<t.length;l++)a+=(a?"-":"")+t[l],n&&!n[a]||(i.push(o+a+"/"+r),i.specificity=a);return i}(!a._v1x&&a,r,e,o);require(s,function(){for(var e=1;e<s.length;e++)l=i.mixin(i.clone(l),arguments[e]);c[n+"/"+r]=l,l.$locale=s.specificity,t()})})}(require,h,p,v,n,A)})};if(e("dojo-unit-tests"))var p=l.unitTests=[];if(e("dojo-preload-i18n-Api")||e("dojo-v1x-i18n-Api"))var v=l.normalizeLocale=function(e){var o=e?e.toLowerCase():n.locale;return"root"==o?"ROOT":o},h=function(n,o){return!e("dojo-sync-loader")||!e("dojo-v1x-i18n-Api")||o.isXdUrl(require.toUrl(n+".js"))},_=0,g=[],x=l._preloadLocalizations=function(e,r,t,a){function l(n,e){for(var o=n.split("-");o.length;){if(e(o.join("-")))return;o.pop()}e("ROOT")}function s(){_++}function u(){for(--_;!_&&g.length;)d.apply(null,g.shift())}function f(n,e,o,require){return require.toAbsMid(n+e+"/"+o)}function p(n){l(n=v(n),function(d){if(o.indexOf(r,d)>=0){var p=e.replace(/\./g,"/")+"_"+d;return s(),function(n,e){h(n,a)||t?a([n],e):L([n],e,a)}(p,function(e){for(var o in e){var r,t,p=e[o],v=o.match(/(.+)\/([^\/]+)$/);if(v){var h;if(r=v[2],t=v[1]+"/",p._localized=p._localized||{},"ROOT"===d){var _=h=p._localized;delete p._localized,_.root=p,c[require.toAbsMid(o)]=_}else h=p._localized,c[f(t,r,d,require)]=p;if(d!==n){function g(e,o,r,t){var d=[],p=[];l(n,function(n){t[n]&&(d.push(require.toAbsMid(e+n+"/"+o)),p.push(f(e,o,n,require)))}),d.length?(s(),a(d,function(){for(var t=0;t<d.length;t++)r=i.mixin(i.clone(r),arguments[t]),c[p[t]]=r;c[f(e,o,n,require)]=i.clone(r),u()})):c[f(e,o,n,require)]=r}g(t,r,p,h)}}}u()}),!0}return!1})}a=a||require,p(),o.forEach(n.config.extraLocale,p)},m=function(n,require,e){return _&&g.push([n,require,e]),_},y=function(){};if(e("dojo-v1x-i18n-Api")){var j={},b=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),L=function(n,e,require){var r=[];o.forEach(n,function(n){var e=require.toUrl(n+".js");function o(o){var i=b(o,y,n,j);i===j?r.push(c[e]=j.result):(i instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+e,i),i={}),r.push(c[e]=/nls\/[^\/]+\/[^\/]+$/.test(e)?i:{root:i,_v1x:1}))}if(c[e])r.push(c[e]);else{var i=require.syncLoadNls(n);if(i)r.push(i);else if(t)t.get({url:e,sync:!0,load:o,error:function(){r.push(c[e]={})}});else try{require.getText(e,!0,o)}catch(n){r.push(c[e]={})}}}),e&&e.apply(null,r)};y=function(e){for(var o,r=e.split("/"),i=n.global[r[0]],t=1;i&&t<r.length-1;i=i[r[t++]]);return i&&((o=i[r[t]])||(o=i[r[t].replace(/-/g,"_")]),o&&(c[e]=o)),o},l.getLocalization=function(n,e,o){var r,i=u(n,e,o);return d(i,h(i,require)?require:function(n,e){L(n,e,require)},function(n){r=n}),r},e("dojo-unit-tests")&&p.push(function(n){n.register("tests.i18n.unit",function(n){var e;e=b("{prop:1}",y,"nonsense",j),n.is({prop:1},e),n.is(void 0,e[1]),e=b("({prop:1})",y,"nonsense",j),n.is({prop:1},e),n.is(void 0,e[1]),e=b("{'prop-x':1}",y,"nonsense",j),n.is({"prop-x":1},e),n.is(void 0,e[1]),e=b("({'prop-x':1})",y,"nonsense",j),n.is({"prop-x":1},e),n.is(void 0,e[1]),e=b("define({'prop-x':1})",y,"nonsense",j),n.is(j,e),n.is({"prop-x":1},j.result),e=b("define('some/module', {'prop-x':1})",y,"nonsense",j),n.is(j,e),n.is({"prop-x":1},j.result),e=b("this is total nonsense and should throw an error",y,"nonsense",j),n.is(e instanceof Error,!0)})})}return i.mixin(l,{dynamic:!0,normalize:function(n,e){return/^\./.test(n)?e(n):n},load:d,cache:c,getL10nName:f})});
//# sourceMappingURL=sourcemaps/i18n.js.map
